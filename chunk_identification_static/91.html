<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>91</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    91
                    <a href="90.html">prev</a>
                    <a href="92.html">next</a>
                    <a href="91_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_1e298f34be2f44e37efc3458b5e8cb06acf71f47_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;1e298f34be2f44e37efc3458b5e8cb06acf71f47:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;1e298f34be2f44e37efc3458b5e8cb06acf71f47^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;1e298f34be2f44e37efc3458b5e8cb06acf71f47^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;448d5ef9a9f59dc7a0a62a85a925a02a93d3bf44:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  32 import android.webkit.WebView;                                                                           </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  33 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  34 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  35 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  36 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  37 import android.widget.Toast;                                                                             </span>
<span  style="">  38                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  39 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  40 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  41 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  42 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  43 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  44 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  45 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  46 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  47 import androidx.preference.PreferenceManager;                                                            </span>
<span  style="">  48                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  49 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  50 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  51 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  52 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  53 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  54 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  55 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  56 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  57 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  58 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  59 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  60 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  61 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  62 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  63 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  64 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  65 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  66 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  67 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  68 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  69 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  70 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  71 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  72 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  73 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  74 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  75 import com.simperium.client.Query;                                                                       </span>
<span  style="">  76                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  77 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  78 import java.util.Calendar;                                                                               </span>
<span  style="">  79                                                                                                          </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  80 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  81 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  82 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  83 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  84 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  85 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  88 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span  style="">  89                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  90 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  91         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  92         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  93         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  94         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  95         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style="">  96                                                                                                          </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style="">  97     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  98     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  99     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 100     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 101     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 102     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 103     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 104     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 105     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 106     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 107     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 108     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 109     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 110         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 111         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 112             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 114     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 115     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 116     private View mRootView;                                                                              </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 117     private View mTagPadding;                                                                            </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 118     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 119     private ChipGroup mTagChips;                                                                         </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 120     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 121     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 122     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 123     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 124     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 125     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 126     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 127     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 128     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 129     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 130     private ActionMode mActionMode;                                                                      </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 131     private MenuItem mChecklistMenuItem;                                                                 </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 132     private MenuItem mCopyMenuItem;                                                                      </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 133     private MenuItem mInformationMenuItem;                                                               </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 134     private MenuItem mShareMenuItem;                                                                     </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 135     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 136     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 137     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 138     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 139     private Drawable mCallIcon;                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 140     private Drawable mCopyIcon;                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 141     private Drawable mEmailIcon;                                                                         </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 142     private Drawable mMapIcon;                                                                           </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 143     private Drawable mShareIcon;                                                                         </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 144     private Drawable mBrowserIcon;                                                                       </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 145     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 146     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 147     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 148     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 149     private boolean mIsPaused;                                                                           </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 150     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 151                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 152     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 153     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 155         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 156             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 157                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158             }                                                                                            </span>
<span  style=""> 159                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 160             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 161                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 162                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 163                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 163                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 164                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 165                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 168             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 170     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 171     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 172     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 173     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 174     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 175         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 177         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 178             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 179             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 181             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 182                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 183                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 184                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 185                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 186                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 187                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 188                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 189                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span  style=""> 191                                                                                                          </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 192             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 192             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.colðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 193             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 193             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireAcðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 194             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 197         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 198         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 199         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 200         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 201             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202         }                                                                                                </span>
<span  style=""> 203                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 204         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 206         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 207             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 208                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 209                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 210                         try {                                                                            </span>
<span class="-2933476939259365458" onmouseenter="enter('-2933476939259365458');" onmouseout="out('-2933476939259365458');" style=""> 211                             BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkUrl);           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 212                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 213                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                         }                                                                                </span>
<span  style=""> 215                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 216                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 218                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 219                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 220                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3960281181316470383" onmouseenter="enter('-3960281181316470383');" onmouseout="out('-3960281181316470383');" style=""> 221                         BrowserUtils.copyToClipboard(requireContext(), mLinkText);                       </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 222                         Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 223                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 225                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 226                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 227                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 228                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 229                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 231                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 232                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 233                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span  style=""> 236                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 237         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 238         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 239         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 240             mActionMode = null;                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 241             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 242                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 243                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 244                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 245                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 245                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 247                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 248                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 249             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 251     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 252     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 253     private boolean mHideActionOnSuccess;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 254     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 255     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 257         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 258             if (!isAdded()) return;                                                                      </span>
<span  style=""> 259                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 260             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 261                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 262                 public void run() {                                                                      </span>
<span  style=""> 263                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 264                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 265                     mNote.save();                                                                        </span>
<span  style=""> 266                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 267                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 269             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 271     };                                                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 272     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 273     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 274     private WebView mMarkdown;                                                                           </span>
<span  style=""> 275                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 276     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 277      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 278      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 279      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 280     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281     }                                                                                                    </span>
<span  style=""> 282                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 283     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 284     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 285         super.onCreate(savedInstanceState);                                                              </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 286         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 287         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 288         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 289                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 290         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 291         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 292                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 293         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 293         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 294         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 294         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.aðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 295         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 295         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.ðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 296         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 296         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,ðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 297         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 297         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 298         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 298         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.aðŸ”µ</abbr></span>
<span  style=""> 299                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 300         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 301         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 302         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 303                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 304         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 305                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 305                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 306         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 307             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 308             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 309                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 310                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 311                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312             }                                                                                            </span>
<span  style=""> 313                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 314             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 315             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 316                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 317                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318             }                                                                                            </span>
<span  style=""> 319                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 320             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 321             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 322                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323             }                                                                                            </span>
<span  style=""> 324                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 325             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 326             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 327                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 328                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 329                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 330                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 331                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 332                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 333                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 334                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 335                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 336                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 337                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 337                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 338                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 340         };                                                                                               </span>
<span  style=""> 341                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 342         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343     }                                                                                                    </span>
<span  style=""> 344                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 345     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 346     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 346     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 347         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 348         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 349         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 350         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 351         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 352         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 353         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 354         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 355         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 356         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 357         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 358         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 359         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 360         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 361                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 362         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 363             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 364             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 365             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 366             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 367                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 368                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369         }                                                                                                </span>
<span  style=""> 370                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 371         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 372         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 373                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 374         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 375             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 376             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 377                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 378             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 379                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380             }                                                                                            </span>
<span  style=""> 381                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 382             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 383             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 384         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 385             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 386             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 387                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 388             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 389                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391         }                                                                                                </span>
<span  style=""> 392                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 393         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 394         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 396             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 397                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 398                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 399                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 400                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                     }                                                                                    </span>
<span  style=""> 402                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 403                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 404                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 405                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 406                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 407                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 408                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 409                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                     }                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 412                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 413                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 414                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 415                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 416                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 419         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 420         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 421         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422     }                                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 424     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 425         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 426             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 427             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 428             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 429             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 434     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 435         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 436         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 437         mNotesBucket.addListener(this);                                                                  </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 438         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 439                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 440         if (mContentEditText != null) {                                                                  </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""><abbr title=" 441             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));"> 441             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity())ðŸ”µ</abbr></span>
<span  style=""> 442                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 443             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 444                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447     }                                                                                                    </span>
<span  style=""> 448                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 449     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 450         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 452             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 453                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 454                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                 }                                                                                        </span>
<span  style=""> 456                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 457                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 457                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 458                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 459                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 462         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 466     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 467         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 468         mIsPaused = true;                                                                                </span>
<span  style=""> 469                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 470         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 471         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 472                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 473         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 474                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 475         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 476             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 479         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 480             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481         }                                                                                                </span>
<span  style=""> 482                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 483         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 484             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485         }                                                                                                </span>
<span  style=""> 486                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 487         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 488         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 492     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 493         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 494         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 495         mNotesBucket.stop();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496     }                                                                                                    </span>
<span  style=""> 497                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 498     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 499     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 500         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 501                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 502         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 503             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505     }                                                                                                    </span>
<span  style=""> 506                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 507     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 508     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 509         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 510                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 511         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 511         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 512             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513         }                                                                                                </span>
<span  style=""> 514                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 515         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 516         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517     }                                                                                                    </span>
<span  style=""> 518                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 519     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 520     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 521         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 522             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 523                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 524                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 525             case R.id.menu_copy:                                                                         </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style=""> 526                 BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 527                 Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 528                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 529             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 530                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 531                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 532             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 533                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 534                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 535             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 536                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 537                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 538             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 539                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 540                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 541                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 542             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 543                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 544                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 545                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 546                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547                 }                                                                                        </span>
<span  style=""> 548                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 549                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 550             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 551                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 552                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 553             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 554                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 555                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                 }                                                                                        </span>
<span  style=""> 557                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 558                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 559                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 560             case android.R.id.home:                                                                      </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 561                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 562                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563                 }                                                                                        </span>
<span  style=""> 564                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 565                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 566                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 567             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 568                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570     }                                                                                                    </span>
<span  style=""> 571                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 572     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 573     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 574         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 575             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 576             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 577             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 578             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 579             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 580             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 581             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 582             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 583             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 584                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 585             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 586             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 587             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 588                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 589             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 590             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 591                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 592                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 593                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 594                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 595                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 596                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 597                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 598                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 599             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 600                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 601                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 602                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 603                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 604                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 605                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 606                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 607                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608             }                                                                                            </span>
<span  style=""> 609                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 610             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 611                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 612             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 613                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615         }                                                                                                </span>
<span  style=""> 616                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 617         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 618         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619     }                                                                                                    </span>
<span  style=""> 620                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 621     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 622         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 623                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 624         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 625             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 626         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 627             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 628             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629         }                                                                                                </span>
<span  style=""> 630                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 631         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 632             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 633             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 634             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 635         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636     }                                                                                                    </span>
<span  style=""> 637                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 638     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 639     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 640         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 641         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 642             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 643             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645     }                                                                                                    </span>
<span  style=""> 646                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 647     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 648         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 649         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 652     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 653         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654     }                                                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 656     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 657         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658     }                                                                                                    </span>
<span  style=""> 659                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 660     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 661         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 662         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span  style=""> 663                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 664         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 665             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 666                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 667                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 668                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 670             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 671             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 672         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673     }                                                                                                    </span>
<span  style=""> 674                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 675     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 676         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 677             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 678             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 679             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 680                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 681                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 682                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 683             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685     }                                                                                                    </span>
<span  style=""> 686                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 687     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 688         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 689             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 690             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 691             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 692         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 693             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695     }                                                                                                    </span>
<span  style=""> 696                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 697     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 698         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 699                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 700         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 701             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 702             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 703             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 707     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 708         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 709         Activity activity = getActivity();                                                               </span>
<span  style=""> 710                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 711         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 712             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 713                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 714             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 715                 editorActivity.showTabs();                                                               </span>
<span  style=""> 716                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 717                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 718                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 719                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 720                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 723                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 725         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 726             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 727             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728         }                                                                                                </span>
<span  style=""> 729                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 730         saveNote();                                                                                      </span>
<span  style=""> 731                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 732         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 733         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 734         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 735         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 736         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737     }                                                                                                    </span>
<span  style=""> 738                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 739     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 740         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 742         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 743             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745     }                                                                                                    </span>
<span  style=""> 746                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 747     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 748         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 749                 mCss,                                                                                    </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 750                 mContentEditText.getPlainTextContent()                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 751         );                                                                                               </span>
<span  style=""> 752                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 753         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754     }                                                                                                    </span>
<span  style=""> 755                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 756     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 757         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 758             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 759                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 760         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 761                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 762         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 763             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 764         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 765             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766         }                                                                                                </span>
<span  style=""> 767                                                                                                          </span>
<span  style=""> 768                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 769         saveNote();                                                                                      </span>
<span  style=""> 770                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 771         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772     }                                                                                                    </span>
<span  style=""> 773                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 774     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 775         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 776         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 777         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 780     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 781         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 782             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 783             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 783             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 784             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 785                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 786             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 787                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 788                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 789                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 790                                                                                                          </span>
<span class="4759499849938166400" onmouseenter="enter('4759499849938166400');" onmouseout="out('4759499849938166400');" style=""> 791                 // Show/Hide tabs based on markdown flag.                                                </span>
<span class="-8298439963273968846" onmouseenter="enter('-8298439963273968846');" onmouseout="out('-8298439963273968846');" style=""> 792                 setMarkdown(mIsMarkdownEnabled);                                                         </span>
<span  style=""> 793                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 794                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 795                 mNote.save();                                                                            </span>
<span  style=""> 796                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 797                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 798                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 799                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800                 }                                                                                        </span>
<span  style=""> 801                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 802                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 803                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 804                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 805                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 806                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 807                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 808                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810             }                                                                                            </span>
<span  style=""> 811                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 812             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 813             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 814             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816     }                                                                                                    </span>
<span  style=""> 817                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 818     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 819         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 820         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821     }                                                                                                    </span>
<span  style=""> 822                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 823     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 824         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 825         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 826         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 827         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 828         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 829         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 830         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 831         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 832                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 833         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 834                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 835         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 836                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 837         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 838                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 839         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 840         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 841             return newText.length();                                                                     </span>
<span  style=""> 842                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 843         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 844         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 845                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 846         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 847             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 847             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 848             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 848             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 849         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 850             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851         }                                                                                                </span>
<span  style=""> 852                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 853         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 854         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 855             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 856                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 857         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 858         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859     }                                                                                                    </span>
<span  style=""> 860                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 861     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 862     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 863         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 864             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865         }                                                                                                </span>
<span  style=""> 866                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 867         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 868             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 869                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 870                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 871                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 872             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873         }                                                                                                </span>
<span  style=""> 874                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 875         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 876         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 877         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 878         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879     }                                                                                                    </span>
<span  style=""> 880                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 881     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 882     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 883         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884     }                                                                                                    </span>
<span  style=""> 885                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 887     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 888         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 889         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 890         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891     }                                                                                                    </span>
<span  style=""> 892                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 893     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 894     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 895         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 896         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 897             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 898             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899         }                                                                                                </span>
<span  style=""> 900                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 901         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 902         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 903             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 904             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905         }                                                                                                </span>
<span  style=""> 906                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 907         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 908             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909         }                                                                                                </span>
<span  style=""> 910                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 911         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 912         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 913         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 914         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915     }                                                                                                    </span>
<span  style=""> 916                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 917     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 918      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 919      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style=""> 920      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style=""> 921      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style=""> 922      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 923      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 924     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title=" 925         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {"> 925         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.classðŸ”µ</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style=""> 926             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 927                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929         }                                                                                                </span>
<span  style=""> 930                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 931         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style=""> 932                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style=""> 933         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 934             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935         }                                                                                                </span>
<span  style=""> 936                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style=""> 937         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title=" 938         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);"> 938         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVðŸ”µ</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title=" 939         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);"> 939         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940     }                                                                                                    </span>
<span  style=""> 941                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 942     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 943         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 944         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 945         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 946         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947     }                                                                                                    </span>
<span  style=""> 948                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 949     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 950         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 951             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952         }                                                                                                </span>
<span  style=""> 953                                                                                                          </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 954         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955     }                                                                                                    </span>
<span  style=""> 956                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style=""> 957     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 958         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style=""> 959             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 960         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 961             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963     }                                                                                                    </span>
<span  style=""> 964                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 965     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 966         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 967             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 968             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969         }                                                                                                </span>
<span  style=""> 970                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 971         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style=""> 972             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974     }                                                                                                    </span>
<span  style=""> 975                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 976     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 977     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 978         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style=""> 979             String tags = getNoteTagsString().trim();                                                    </span>
<span  style=""> 980                                                                                                          </span>
<span class="402754191134572822" onmouseenter="enter('402754191134572822');" onmouseout="out('402754191134572822');" style=""> 981             if (mTagInput.getText().toString().trim().length() &gt; 0) {                                    </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style=""> 982                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style=""> 983             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style=""> 984                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987     }                                                                                                    </span>
<span  style=""> 988                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 989     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 990         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991     }                                                                                                    </span>
<span  style=""> 992                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 993     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 994         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995     }                                                                                                    </span>
<span  style=""> 996                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 997     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 998         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 999             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1000         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1001             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003     }                                                                                                    </span>
<span  style="">1004                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1005     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1006         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1007                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1008         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1009             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010         }                                                                                                </span>
<span  style="">1011                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1012         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013     }                                                                                                    </span>
<span  style="">1014                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1015     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1016      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1017      */                                                                                                  </span>
<span  style="">1018                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1019     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1020     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1021         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1022         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1023             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1025     }                                                                                                    </span>
<span  style="">1026                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1027     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1028     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1029         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1030         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1031             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1033     }                                                                                                    </span>
<span  style="">1034                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1035     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1036     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1037         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1038             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039         }                                                                                                </span>
<span  style="">1040                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1041         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1042             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043         }                                                                                                </span>
<span  style="">1044                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1045         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1046         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1047         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1048             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1050         ft.addToBackStack(null);                                                                         </span>
<span  style="">1051                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1052         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1053         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1054         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1055         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056     }                                                                                                    </span>
<span  style="">1057                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1058     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1059     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1060         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061     }                                                                                                    </span>
<span  style="">1062                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1064     public void onShareDismissed() {                                                                     </span>
<span  style="">1065                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066     }                                                                                                    </span>
<span  style="">1067                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1068     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1069      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1070      */                                                                                                  </span>
<span  style="">1071                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1072     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1073     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1074         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1075         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1076             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078     }                                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1080     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1081     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1082         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1083             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1085         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086     }                                                                                                    </span>
<span  style="">1087                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1088     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1089     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1090         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1091             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092         }                                                                                                </span>
<span  style="">1093                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1094         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1095             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097     }                                                                                                    </span>
<span  style="">1098                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1099     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1100     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1101         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102     }                                                                                                    </span>
<span  style="">1103                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="">1104     protected void saveNote() {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1105         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1106             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1107                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1107                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1108                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1109             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1110                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1111                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112             }                                                                                            </span>
<span  style="">1113                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1114             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1115             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1116                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1117             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1117             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1118                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1119                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1120                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1121                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1122                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1123                 mNote.save();                                                                            </span>
<span  style="">1124                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1125                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1126                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1127                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1128                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1129                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1131         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1132             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134     }                                                                                                    </span>
<span  style="">1135                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1136     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1137     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1138     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1139     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1140         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1141         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1142             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1143             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1144                 return;                                                                                  </span>
<span  style="">1145                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1146             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1147             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1148                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1149                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1150                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1150                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1151                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1152                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1153                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1154                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155                 }                                                                                        </span>
<span  style="">1156                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1157                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1158                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1159                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1159                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1160                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1161                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162                     }                                                                                    </span>
<span  style="">1163                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1164                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1166             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1167                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1168                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1170         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1171             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1172             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174     }                                                                                                    </span>
<span  style="">1175                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1176     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1177         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1178         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1179                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1180         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1181             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1182                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1183                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1184             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1185                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1186                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1187             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1188                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1189                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1190             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1191                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1192                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1197     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1198         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1199             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1200             mNote.save();                                                                                </span>
<span  style="">1201                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1202             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1203             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1204                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1205             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1206                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1207                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1208                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1209             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1213     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1214         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1215             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216         }                                                                                                </span>
<span  style="">1217                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1218         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1219         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1220                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1221         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1222             if (mNote.isPublished()) {                                                                   </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1223                 if (mHideActionOnSuccess) {                                                              </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1224                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)          </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1225                             .show();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1226                 } else {                                                                                 </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1227                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1228                             .setAction(                                                                  </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1229                                 R.string.undo,                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1230                                 new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231                                     @Override                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1232                                     public void onClick(View v) {                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1233                                         mHideActionOnSuccess = true;                                     </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1234                                         unpublishNote();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236                                 }                                                                        </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1237                             )                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1238                             .show();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239                 }                                                                                        </span>
<span  style="">1240                                                                                                          </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style="">1241                 BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1242             } else {                                                                                     </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1243                 if (mHideActionOnSuccess) {                                                              </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1244                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1245                             .show();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1246                 } else {                                                                                 </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1247                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1248                             .setAction(                                                                  </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1249                                 R.string.undo,                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1250                                 new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1251                                     @Override                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1252                                     public void onClick(View v) {                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1253                                         mHideActionOnSuccess = true;                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1254                                         publishNote();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                                 }                                                                        </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1257                             )                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1258                             .show();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1261         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1262             if (mNote.isPublished()) {                                                                   </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1263                 Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1264                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1265                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1266                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1267                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1268                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1269                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1270                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1273                         ).show();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1274             } else {                                                                                     </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1275                 Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1276                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1277                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1278                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1279                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1280                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1281                                     mHideActionOnSuccess = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1282                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1285                         ).show();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287         }                                                                                                </span>
<span  style="">1288                                                                                                          </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1289         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1290         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291     }                                                                                                    </span>
<span  style="">1292                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1293     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1294         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1295             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1296             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297         }                                                                                                </span>
<span  style="">1298                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1299         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1300             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1300             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1301             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302         }                                                                                                </span>
<span  style="">1303                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1304         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305     }                                                                                                    </span>
<span  style="">1306                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1307     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1308         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1309             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1310             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311         }                                                                                                </span>
<span  style="">1312                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1313         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1314             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1314             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1315             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316         }                                                                                                </span>
<span  style="">1317                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1318         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319     }                                                                                                    </span>
<span  style="">1320                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1321 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1322 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1323         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1324                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1325         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1326     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1327                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1328     private void copyToClipboard(String text) {                                                          </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1329         ClipboardManager clipboard = (ClipboardManager) requireActivity()                                </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1330                 .getSystemService(Context.CLIPBOARD_SERVICE);                                            </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1331         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1332         if (clipboard != null) {                                                                         </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1333             clipboard.setPrimaryClip(clip);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1334         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1335     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1336                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1337     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1338         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1339             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1340         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1341     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1342                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1343     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1344         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1345             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1346         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1347     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1348                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1349     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1350         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1351             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1352             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1352             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1353             saveNote();                                                                                  </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1354                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1355             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1356         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1357     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1358                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1359 =======                                                                                                  </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1360     private void copyToClipboard(String text) {                                                          </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1361         ClipboardManager clipboard = (ClipboardManager) requireActivity()                                </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1362                 .getSystemService(Context.CLIPBOARD_SERVICE);                                            </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1363         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1364         if (clipboard != null) {                                                                         </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1365             clipboard.setPrimaryClip(clip);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1366         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1367     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1368                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1369     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1370         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1371             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1372                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1373                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1374                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1375         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1376     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1377                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1378 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1379     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1380         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1381             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383     }                                                                                                    </span>
<span  style="">1384                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1385     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1386         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1387             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389     }                                                                                                    </span>
<span  style="">1390                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1391     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1392         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1393             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1394             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1394             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1395             saveNote();                                                                                  </span>
<span  style="">1396                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1397             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1399     }                                                                                                    </span>
<span  style="">1400                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1401     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1402      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1403      */                                                                                                  </span>
<span  style="">1404                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1405     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1406     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1407                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408     }                                                                                                    </span>
<span  style="">1409                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1410     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1411     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1411     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1412         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1413             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1414                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1415                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1416                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1417                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1418                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1419                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1420                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1421                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422                                 }                                                                        </span>
<span  style="">1423                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1424                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1425                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1427                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1429                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1430                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434     }                                                                                                    </span>
<span  style="">1435                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1436     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1437     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1438         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1439             mNotesBucket.removeListener(this);                                                           </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1440             mNotesBucket.stop();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442     }                                                                                                    </span>
<span  style="">1443                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1444     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1445     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1446         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1447         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1448             return;                                                                                      </span>
<span  style="">1449                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1450         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1451         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1452             return;                                                                                      </span>
<span  style="">1453                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1454         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455     }                                                                                                    </span>
<span  style="">1456                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1457     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1458         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1459                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1460         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1461             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462         }                                                                                                </span>
<span  style="">1463                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1464         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1465         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1466             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1467                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1468             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1469                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1470                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472         }                                                                                                </span>
<span  style="">1473                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1474         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1475         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1476             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1477                                                                                                          </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1478             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1479                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480             }                                                                                            </span>
<span  style="">1481                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1482             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1483             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1484             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1485                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1486             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1487                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span  style="">1488                                                                                                          </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1489                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1490                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1491                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492                 }                                                                                        </span>
<span  style="">1493                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1494                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1495                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1496                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1497                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1499             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1500                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1501                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span  style="">1502                                                                                                          </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1503                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1504                     Note currentNote = notesCursor.getObject();                                          </span>
<span  style="">1505                                                                                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1506                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1507                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1508                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511             }                                                                                            </span>
<span  style="">1512                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1513             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514         }                                                                                                </span>
<span  style="">1515                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1516         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1517         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1518             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style=""><abbr title="1519             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {">1519             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing(ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1520                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521             }                                                                                            </span>
<span  style="">1522                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1523             fragment.refreshContent(false);                                                              </span>
<span  style="">1524                                                                                                          </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1525             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1526                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1526                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1527                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1528                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1529             }                                                                                            </span>
<span  style="">1530                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1531             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1532                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1533             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1534                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1535                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1536                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1537                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1538                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1539                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1540                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1541                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542                         }                                                                                </span>
<span  style="">1543                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1544                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1544                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivityðŸ”µ</abbr></span>
<span  style="">1545                                                                                                          </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1546                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1547                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1550                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1551             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1552                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1553                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554             }                                                                                            </span>
<span  style="">1555                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1556             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1557             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1558             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1559             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1561     }                                                                                                    </span>
<span  style="">1562                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1563     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1564         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1565                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1566         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1567             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568         }                                                                                                </span>
<span  style="">1569                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1570         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1571         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1572             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1573                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1574             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1575                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576             }                                                                                            </span>
<span  style="">1577                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1578             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579         }                                                                                                </span>
<span  style="">1580                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1581         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1582         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1583             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1584                                                                                                          </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1585             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1585             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishingðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1586                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1587                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1588                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1591     }                                                                                                    </span>
<span  style="">1592                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1593     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1594         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1595             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596         }                                                                                                </span>
<span  style="">1597                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1598         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1599             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601     }                                                                                                    </span>
<span  style="">1602                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1603     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1604     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1605         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1606             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607         }                                                                                                </span>
<span  style="">1608                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1609         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1610         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1611             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1612             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1613         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1614             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1615             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1616                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1617                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1618                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1620             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1621             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1622         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623     }                                                                                                    </span>
<span  style="">1624                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1625     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1626         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1627             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1628             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1629         };                                                                                               </span>
<span  style="">1630                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1631         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1632             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1633             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1634         };                                                                                               </span>
<span  style="">1635                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1636         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637     }                                                                                                    </span>
<span  style="">1638                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1639     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1640         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1641         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1642         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1643         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1644         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1645         tags.setString(text.toString());                                                                 </span>
<span  style="">1646                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1647         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1648             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1649             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1650             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1651             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1652             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1653             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1654             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1655             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1656                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1657                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1658                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1660             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1661             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1662                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1663                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1664                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1665                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1666                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1667                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1668                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1669                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1670                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1672             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1673             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1674         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675     }                                                                                                    </span>
<span  style="">1676                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1677     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1678         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1679             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1680         }                                                                                                </span>
<span  style="">1681                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1682         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1683         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1684         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1685         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  32 import android.webkit.WebView;                                                                           </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  33 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  34 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  35 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  36 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  37 import android.widget.Toast;                                                                             </span>
<span  style="">  38                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  39 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  40 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  41 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  42 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  43 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  44 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  45 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  46 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  47 import androidx.preference.PreferenceManager;                                                            </span>
<span  style="">  48                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  49 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  50 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  51 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  52 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  53 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  54 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  55 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  56 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  57 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  58 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  59 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  60 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  61 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  62 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  63 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  64 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  65 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  66 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  67 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  68 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  69 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  70 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  71 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  72 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  73 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  74 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  75 import com.simperium.client.Query;                                                                       </span>
<span  style="">  76                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  77 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  78 import java.util.Calendar;                                                                               </span>
<span  style="">  79                                                                                                          </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  80 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  81 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  82 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  83 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  84 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  85 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  88 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span  style="">  89                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  90 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  91         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  92         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  93         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  94         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  95         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style="">  96                                                                                                          </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style="">  97     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  98     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  99     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 100     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 101     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 102     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 103     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 104     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 105     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 106     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 107     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 108     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 109     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 110         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 111         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 112             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 114     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 115     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 116     private View mRootView;                                                                              </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 117     private View mTagPadding;                                                                            </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 118     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 119     private ChipGroup mTagChips;                                                                         </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 120     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 121     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 122     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 123     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 124     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 125     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 126     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 127     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 128     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 129     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 130     private ActionMode mActionMode;                                                                      </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 131     private MenuItem mChecklistMenuItem;                                                                 </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 132     private MenuItem mCopyMenuItem;                                                                      </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 133     private MenuItem mInformationMenuItem;                                                               </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 134     private MenuItem mShareMenuItem;                                                                     </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 135     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 136     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 137     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 138     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 139     private Drawable mCallIcon;                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 140     private Drawable mCopyIcon;                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 141     private Drawable mEmailIcon;                                                                         </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 142     private Drawable mMapIcon;                                                                           </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 143     private Drawable mShareIcon;                                                                         </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 144     private Drawable mBrowserIcon;                                                                       </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 145     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 146     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 147     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 148     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 149     private boolean mIsPaused;                                                                           </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 150     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 151                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 152     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 153     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 155         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 156             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 157                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158             }                                                                                            </span>
<span  style=""> 159                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 160             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 161                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 162                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 163                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 163                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 164                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 165                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 168             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 170     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 171     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 172     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 173     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 174     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 175         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 177         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 178             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 179             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 180                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 181             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 182                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 183                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 184                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 185                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 186                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 187                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 188                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 189                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190             }                                                                                            </span>
<span  style=""> 191                                                                                                          </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 192             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 192             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.colðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 193             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 193             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireAcðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 194             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 197         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 198         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 199         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 200         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 201             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202         }                                                                                                </span>
<span  style=""> 203                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 204         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 205         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 206         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 207             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 208                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 209                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 210                         try {                                                                            </span>
<span class="-2933476939259365458" onmouseenter="enter('-2933476939259365458');" onmouseout="out('-2933476939259365458');" style=""> 211                             BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkUrl);           </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 212                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 213                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                         }                                                                                </span>
<span  style=""> 215                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 216                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 218                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 219                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 220                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3960281181316470383" onmouseenter="enter('-3960281181316470383');" onmouseout="out('-3960281181316470383');" style=""> 221                         BrowserUtils.copyToClipboard(requireContext(), mLinkText);                       </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 222                         Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 223                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 225                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 226                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 227                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 228                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 229                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 231                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 232                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 233                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235         }                                                                                                </span>
<span  style=""> 236                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 237         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 238         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 239         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 240             mActionMode = null;                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 241             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 242                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 243                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 244                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 245                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 245                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 247                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 248                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 249             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 251     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 252     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 253     private boolean mHideActionOnSuccess;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 254     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 255     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 257         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 258             if (!isAdded()) return;                                                                      </span>
<span  style=""> 259                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 260             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 261                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 262                 public void run() {                                                                      </span>
<span  style=""> 263                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 264                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 265                     mNote.save();                                                                        </span>
<span  style=""> 266                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 267                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 269             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 271     };                                                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 272     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 273     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 274     private WebView mMarkdown;                                                                           </span>
<span  style=""> 275                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 276     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 277      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 278      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 279      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 280     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281     }                                                                                                    </span>
<span  style=""> 282                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 283     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 284     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 285         super.onCreate(savedInstanceState);                                                              </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 286         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 287         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 288         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 289                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 290         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 291         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 292                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 293         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 293         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 294         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 294         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.aðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 295         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 295         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.ðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 296         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 296         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,ðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 297         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 297         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 298         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 298         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.aðŸ”µ</abbr></span>
<span  style=""> 299                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 300         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 301         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 302         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 303                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 304         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 305                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 305                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 306         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 307             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 308             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 309                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 310                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 311                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312             }                                                                                            </span>
<span  style=""> 313                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 314             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 315             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 316                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 317                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318             }                                                                                            </span>
<span  style=""> 319                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 320             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 321             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 322                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323             }                                                                                            </span>
<span  style=""> 324                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 325             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 326             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 327                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 328                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 329                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 330                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 331                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 332                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 333                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 334                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 335                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 336                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 337                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 337                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 338                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 340         };                                                                                               </span>
<span  style=""> 341                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 342         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343     }                                                                                                    </span>
<span  style=""> 344                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 345     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 346     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 346     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 347         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 348         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 349         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 350         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 351         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 352         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 353         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 354         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 355         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 356         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 357         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 358         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 359         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 360         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 361                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 362         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 363             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 364             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 365             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 366             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 367                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 368                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369         }                                                                                                </span>
<span  style=""> 370                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 371         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 372         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 373                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 374         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 375             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 376             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 377                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 378             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 379                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380             }                                                                                            </span>
<span  style=""> 381                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 382             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 383             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 384         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 385             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 386             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 387                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 388             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 389                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391         }                                                                                                </span>
<span  style=""> 392                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 393         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 394         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 396             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 397                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 398                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 399                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 400                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                     }                                                                                    </span>
<span  style=""> 402                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 403                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 404                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 405                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 406                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 407                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 408                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 409                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                     }                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 412                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 413                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 414                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 415                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 416                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 419         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 420         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 421         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422     }                                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 424     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 425         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 426             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 427             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 428             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 429             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 434     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 435         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 436         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 437         mNotesBucket.addListener(this);                                                                  </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 438         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 439                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 440         if (mContentEditText != null) {                                                                  </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""><abbr title=" 441             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));"> 441             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity())ðŸ”µ</abbr></span>
<span  style=""> 442                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 443             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 444                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447     }                                                                                                    </span>
<span  style=""> 448                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 449     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 450         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 452             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 453                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 454                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                 }                                                                                        </span>
<span  style=""> 456                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 457                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 457                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 458                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 459                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 462         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 466     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 467         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 468         mIsPaused = true;                                                                                </span>
<span  style=""> 469                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 470         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 471         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 472                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 473         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 474                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 475         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 476             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 479         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 480             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481         }                                                                                                </span>
<span  style=""> 482                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 483         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 484             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485         }                                                                                                </span>
<span  style=""> 486                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 487         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 488         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 492     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 493         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 494         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 495         mNotesBucket.stop();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496     }                                                                                                    </span>
<span  style=""> 497                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 498     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 499     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 500         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 501                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 502         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 503             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505     }                                                                                                    </span>
<span  style=""> 506                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 507     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 508     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 509         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 510                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 511         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 511         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 512             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513         }                                                                                                </span>
<span  style=""> 514                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 515         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 516         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517     }                                                                                                    </span>
<span  style=""> 518                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 519     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 520     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 521         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 522             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 523                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 524                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 525             case R.id.menu_copy:                                                                         </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style=""> 526                 BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 527                 Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 528                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 529             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 530                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 531                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 532             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 533                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 534                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 535             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 536                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 537                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 538             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 539                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 540                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 541                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 542             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 543                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 544                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 545                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 546                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547                 }                                                                                        </span>
<span  style=""> 548                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 549                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 550             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 551                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 552                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 553             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 554                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 555                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                 }                                                                                        </span>
<span  style=""> 557                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 558                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 559                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 560             case android.R.id.home:                                                                      </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 561                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 562                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563                 }                                                                                        </span>
<span  style=""> 564                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 565                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 566                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 567             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 568                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570     }                                                                                                    </span>
<span  style=""> 571                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 572     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 573     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 574         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 575             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 576             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 577             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 578             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 579             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 580             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 581             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 582             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 583             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 584                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 585             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 586             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 587             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 588                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 589             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 590             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 591                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 592                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 593                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 594                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 595                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 596                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 597                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 598                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 599             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 600                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 601                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 602                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 603                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 604                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 605                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 606                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 607                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608             }                                                                                            </span>
<span  style=""> 609                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 610             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 611                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 612             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 613                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615         }                                                                                                </span>
<span  style=""> 616                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 617         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 618         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619     }                                                                                                    </span>
<span  style=""> 620                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 621     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 622         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 623                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 624         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 625             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 626         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 627             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 628             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629         }                                                                                                </span>
<span  style=""> 630                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 631         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 632             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 633             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 634             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 635         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636     }                                                                                                    </span>
<span  style=""> 637                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 638     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 639     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 640         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 641         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 642             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 643             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645     }                                                                                                    </span>
<span  style=""> 646                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 647     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 648         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 649         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 652     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 653         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654     }                                                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 656     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 657         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658     }                                                                                                    </span>
<span  style=""> 659                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 660     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 661         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 662         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span  style=""> 663                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 664         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 665             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 666                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 667                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 668                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 670             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 671             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 672         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673     }                                                                                                    </span>
<span  style=""> 674                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 675     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 676         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 677             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 678             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 679             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 680                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 681                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 682                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 683             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685     }                                                                                                    </span>
<span  style=""> 686                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 687     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 688         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 689             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 690             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 691             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 692         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 693             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695     }                                                                                                    </span>
<span  style=""> 696                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 697     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 698         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 699                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 700         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 701             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 702             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 703             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 704         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705     }                                                                                                    </span>
<span  style=""> 706                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 707     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 708         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 709         Activity activity = getActivity();                                                               </span>
<span  style=""> 710                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 711         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 712             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 713                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 714             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 715                 editorActivity.showTabs();                                                               </span>
<span  style=""> 716                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 717                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 718                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 719                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 720                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 723                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 725         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 726             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 727             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 728         }                                                                                                </span>
<span  style=""> 729                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 730         saveNote();                                                                                      </span>
<span  style=""> 731                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 732         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 733         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 734         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 735         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 736         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737     }                                                                                                    </span>
<span  style=""> 738                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 739     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 740         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 742         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 743             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745     }                                                                                                    </span>
<span  style=""> 746                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 747     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 748         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 749                 mCss,                                                                                    </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 750                 mContentEditText.getPlainTextContent()                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 751         );                                                                                               </span>
<span  style=""> 752                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 753         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754     }                                                                                                    </span>
<span  style=""> 755                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 756     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 757         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 758             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 759                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 760         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 761                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 762         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 763             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 764         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 765             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766         }                                                                                                </span>
<span  style=""> 767                                                                                                          </span>
<span  style=""> 768                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 769         saveNote();                                                                                      </span>
<span  style=""> 770                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 771         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772     }                                                                                                    </span>
<span  style=""> 773                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 774     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 775         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 776         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 777         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778     }                                                                                                    </span>
<span  style=""> 779                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 780     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 781         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 782             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 783             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 783             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 784             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 785                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 786             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 787                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 788                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 789                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 790                                                                                                          </span>
<span class="4759499849938166400" onmouseenter="enter('4759499849938166400');" onmouseout="out('4759499849938166400');" style=""> 791                 // Show/Hide tabs based on markdown flag.                                                </span>
<span class="-8298439963273968846" onmouseenter="enter('-8298439963273968846');" onmouseout="out('-8298439963273968846');" style=""> 792                 setMarkdown(mIsMarkdownEnabled);                                                         </span>
<span  style=""> 793                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 794                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 795                 mNote.save();                                                                            </span>
<span  style=""> 796                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 797                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 798                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 799                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800                 }                                                                                        </span>
<span  style=""> 801                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 802                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 803                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 804                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 805                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 806                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 807                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 808                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 809                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810             }                                                                                            </span>
<span  style=""> 811                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 812             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 813             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 814             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816     }                                                                                                    </span>
<span  style=""> 817                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 818     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 819         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 820         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821     }                                                                                                    </span>
<span  style=""> 822                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 823     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 824         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 825         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 826         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 827         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 828         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 829         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 830         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 831         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 832                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 833         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 834                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 835         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 836                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 837         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 838                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 839         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 840         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 841             return newText.length();                                                                     </span>
<span  style=""> 842                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 843         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 844         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 845                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 846         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 847             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 847             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 848             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 848             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 849         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 850             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851         }                                                                                                </span>
<span  style=""> 852                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 853         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 854         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 855             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 856                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 857         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 858         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859     }                                                                                                    </span>
<span  style=""> 860                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 861     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 862     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 863         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 864             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865         }                                                                                                </span>
<span  style=""> 866                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 867         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 868             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 869                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 870                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 871                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 872             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873         }                                                                                                </span>
<span  style=""> 874                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 875         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 876         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 877         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 878         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879     }                                                                                                    </span>
<span  style=""> 880                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 881     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 882     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 883         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884     }                                                                                                    </span>
<span  style=""> 885                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 887     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 888         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 889         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 890         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891     }                                                                                                    </span>
<span  style=""> 892                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 893     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 894     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 895         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 896         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 897             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 898             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899         }                                                                                                </span>
<span  style=""> 900                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 901         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 902         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 903             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 904             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905         }                                                                                                </span>
<span  style=""> 906                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 907         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 908             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909         }                                                                                                </span>
<span  style=""> 910                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 911         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 912         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 913         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 914         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915     }                                                                                                    </span>
<span  style=""> 916                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 917     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 918      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 919      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style=""> 920      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style=""> 921      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style=""> 922      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 923      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 924     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title=" 925         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {"> 925         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.classðŸ”µ</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style=""> 926             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 927                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929         }                                                                                                </span>
<span  style=""> 930                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 931         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style=""> 932                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style=""> 933         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 934             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935         }                                                                                                </span>
<span  style=""> 936                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style=""> 937         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title=" 938         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);"> 938         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVðŸ”µ</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title=" 939         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);"> 939         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940     }                                                                                                    </span>
<span  style=""> 941                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 942     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 943         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 944         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 945         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 946         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947     }                                                                                                    </span>
<span  style=""> 948                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 949     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 950         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 951             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952         }                                                                                                </span>
<span  style=""> 953                                                                                                          </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 954         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955     }                                                                                                    </span>
<span  style=""> 956                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style=""> 957     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 958         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style=""> 959             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 960         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 961             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963     }                                                                                                    </span>
<span  style=""> 964                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 965     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 966         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 967             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 968             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969         }                                                                                                </span>
<span  style=""> 970                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 971         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style=""> 972             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974     }                                                                                                    </span>
<span  style=""> 975                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 976     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 977     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 978         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style=""> 979             String tags = getNoteTagsString().trim();                                                    </span>
<span  style=""> 980                                                                                                          </span>
<span class="402754191134572822" onmouseenter="enter('402754191134572822');" onmouseout="out('402754191134572822');" style=""> 981             if (mTagInput.getText().toString().trim().length() &gt; 0) {                                    </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style=""> 982                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style=""> 983             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style=""> 984                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987     }                                                                                                    </span>
<span  style=""> 988                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 989     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 990         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991     }                                                                                                    </span>
<span  style=""> 992                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 993     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 994         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995     }                                                                                                    </span>
<span  style=""> 996                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 997     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 998         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 999             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1000         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1001             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003     }                                                                                                    </span>
<span  style="">1004                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1005     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1006         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1007                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1008         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1009             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010         }                                                                                                </span>
<span  style="">1011                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1012         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013     }                                                                                                    </span>
<span  style="">1014                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1015     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1016      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1017      */                                                                                                  </span>
<span  style="">1018                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1019     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1020     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1021         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1022         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1023             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1025     }                                                                                                    </span>
<span  style="">1026                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1027     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1028     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1029         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1030         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1031             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1032         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1033     }                                                                                                    </span>
<span  style="">1034                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1035     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1036     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1037         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1038             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039         }                                                                                                </span>
<span  style="">1040                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1041         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1042             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043         }                                                                                                </span>
<span  style="">1044                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1045         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1046         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1047         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1048             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1050         ft.addToBackStack(null);                                                                         </span>
<span  style="">1051                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1052         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1053         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1054         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1055         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056     }                                                                                                    </span>
<span  style="">1057                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1058     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1059     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1060         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061     }                                                                                                    </span>
<span  style="">1062                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1064     public void onShareDismissed() {                                                                     </span>
<span  style="">1065                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066     }                                                                                                    </span>
<span  style="">1067                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1068     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1069      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1070      */                                                                                                  </span>
<span  style="">1071                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1072     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1073     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1074         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1075         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1076             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078     }                                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1080     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1081     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1082         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1083             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1085         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086     }                                                                                                    </span>
<span  style="">1087                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1088     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1089     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1090         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1091             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092         }                                                                                                </span>
<span  style="">1093                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1094         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1095             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097     }                                                                                                    </span>
<span  style="">1098                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1099     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1100     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1101         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102     }                                                                                                    </span>
<span  style="">1103                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="">1104     protected void saveNote() {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1105         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1106             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1107                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1107                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1108                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1109             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1110                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1111                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112             }                                                                                            </span>
<span  style="">1113                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1114             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1115             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1116                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1117             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1117             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1118                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1119                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1120                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1121                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1122                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1123                 mNote.save();                                                                            </span>
<span  style="">1124                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1125                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1126                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1127                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1128                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1129                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1131         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1132             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134     }                                                                                                    </span>
<span  style="">1135                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1136     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1137     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1138     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1139     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1140         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1141         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1142             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1143             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1144                 return;                                                                                  </span>
<span  style="">1145                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1146             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1147             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1148                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1149                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1150                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1150                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1151                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1152                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1153                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1154                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155                 }                                                                                        </span>
<span  style="">1156                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1157                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1158                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1159                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1159                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1160                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1161                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162                     }                                                                                    </span>
<span  style="">1163                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1164                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1166             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1167                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1168                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1170         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1171             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1172             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174     }                                                                                                    </span>
<span  style="">1175                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1176     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1177         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1178         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1179                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1180         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1181             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1182                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1183                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1184             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1185                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1186                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1187             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1188                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1189                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1190             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1191                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1192                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1197     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1198         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1199             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1200             mNote.save();                                                                                </span>
<span  style="">1201                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1202             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1203             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1204                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1205             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1206                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1207                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1208                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1209             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1213     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1214         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1215             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216         }                                                                                                </span>
<span  style="">1217                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1218         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1219         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1220                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1221         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1222             if (mNote.isPublished()) {                                                                   </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1223                 if (mHideActionOnSuccess) {                                                              </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1224                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)          </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1225                             .show();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1226                 } else {                                                                                 </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1227                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1228                             .setAction(                                                                  </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1229                                 R.string.undo,                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1230                                 new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231                                     @Override                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1232                                     public void onClick(View v) {                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1233                                         mHideActionOnSuccess = true;                                     </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1234                                         unpublishNote();                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236                                 }                                                                        </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1237                             )                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1238                             .show();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239                 }                                                                                        </span>
<span  style="">1240                                                                                                          </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style="">1241                 BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1242             } else {                                                                                     </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1243                 if (mHideActionOnSuccess) {                                                              </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1244                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1245                             .show();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1246                 } else {                                                                                 </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1247                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1248                             .setAction(                                                                  </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1249                                 R.string.undo,                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1250                                 new View.OnClickListener() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1251                                     @Override                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1252                                     public void onClick(View v) {                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1253                                         mHideActionOnSuccess = true;                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1254                                         publishNote();                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255                                     }                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256                                 }                                                                        </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1257                             )                                                                            </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1258                             .show();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1261         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1262             if (mNote.isPublished()) {                                                                   </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1263                 Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1264                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1265                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1266                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1267                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1268                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1269                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1270                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1273                         ).show();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1274             } else {                                                                                     </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1275                 Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1276                         .setAction(                                                                      </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1277                             R.string.retry,                                                              </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1278                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1279                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1280                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1281                                     mHideActionOnSuccess = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1282                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284                             }                                                                            </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1285                         ).show();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287         }                                                                                                </span>
<span  style="">1288                                                                                                          </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1289         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1290         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291     }                                                                                                    </span>
<span  style="">1292                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1293     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1294         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1295             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1296             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297         }                                                                                                </span>
<span  style="">1298                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1299         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1300             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1300             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1301             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302         }                                                                                                </span>
<span  style="">1303                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1304         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305     }                                                                                                    </span>
<span  style="">1306                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1307     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1308         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1309             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1310             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1311         }                                                                                                </span>
<span  style="">1312                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1313         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1314             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1314             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1315             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316         }                                                                                                </span>
<span  style="">1317                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1318         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319     }                                                                                                    </span>
<span  style="">1320                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1321     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1322         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1323             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1324                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1325                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1326                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1327         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328     }                                                                                                    </span>
<span  style="">1329                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1330     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1331         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1332             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334     }                                                                                                    </span>
<span  style="">1335                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1336     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1337         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1338             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340     }                                                                                                    </span>
<span  style="">1341                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1342     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1343         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1344             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1345             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1345             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1346             saveNote();                                                                                  </span>
<span  style="">1347                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1348             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1350     }                                                                                                    </span>
<span  style="">1351                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1352     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1353      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1354      */                                                                                                  </span>
<span  style="">1355                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1356     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1357     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1358                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359     }                                                                                                    </span>
<span  style="">1360                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1361     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1362     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1362     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1363         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1364             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1365                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1366                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1367                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1368                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1369                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1370                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1371                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1372                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373                                 }                                                                        </span>
<span  style="">1374                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1375                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1376                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1378                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1380                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1381                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385     }                                                                                                    </span>
<span  style="">1386                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1387     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1388     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1389         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1390             mNotesBucket.removeListener(this);                                                           </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1391             mNotesBucket.stop();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1393     }                                                                                                    </span>
<span  style="">1394                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1395     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1396     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1397         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1398         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1399             return;                                                                                      </span>
<span  style="">1400                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1401         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1402         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1403             return;                                                                                      </span>
<span  style="">1404                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1405         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406     }                                                                                                    </span>
<span  style="">1407                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1408     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1409         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1410                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1411         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1412             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413         }                                                                                                </span>
<span  style="">1414                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1415         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1416         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1417             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1418                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1419             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1420                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1421                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423         }                                                                                                </span>
<span  style="">1424                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1425         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1426         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1427             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1428                                                                                                          </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1429             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1430                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431             }                                                                                            </span>
<span  style="">1432                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1433             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1434             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1435             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1436                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1437             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1438                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span  style="">1439                                                                                                          </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1440                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1441                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1442                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443                 }                                                                                        </span>
<span  style="">1444                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1445                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1446                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1447                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1448                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1450             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1451                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1452                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span  style="">1453                                                                                                          </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1454                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1455                     Note currentNote = notesCursor.getObject();                                          </span>
<span  style="">1456                                                                                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1457                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1458                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1459                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462             }                                                                                            </span>
<span  style="">1463                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1464             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465         }                                                                                                </span>
<span  style="">1466                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1467         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1468         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1469             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style=""><abbr title="1470             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {">1470             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing(ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1471                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472             }                                                                                            </span>
<span  style="">1473                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1474             fragment.refreshContent(false);                                                              </span>
<span  style="">1475                                                                                                          </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1476             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1477                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1477                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1478                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1479                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480             }                                                                                            </span>
<span  style="">1481                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1482             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1483                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1484             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1485                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1486                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1487                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1488                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1489                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1490                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1491                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1492                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493                         }                                                                                </span>
<span  style="">1494                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1495                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1495                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivityðŸ”µ</abbr></span>
<span  style="">1496                                                                                                          </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1497                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1498                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1500                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1501                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1502             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1503                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1504                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505             }                                                                                            </span>
<span  style="">1506                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1507             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1508             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1509             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1510             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512     }                                                                                                    </span>
<span  style="">1513                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1514     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1515         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1516                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1517         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1518             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519         }                                                                                                </span>
<span  style="">1520                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1521         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1522         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1523             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1524                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1525             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1526                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527             }                                                                                            </span>
<span  style="">1528                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1529             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530         }                                                                                                </span>
<span  style="">1531                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1532         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1533         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1534             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1535                                                                                                          </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1536             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1536             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishingðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1537                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1538                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1539                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542     }                                                                                                    </span>
<span  style="">1543                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1544     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1545         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1546             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547         }                                                                                                </span>
<span  style="">1548                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1549         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1550             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552     }                                                                                                    </span>
<span  style="">1553                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1554     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1555     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1556         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1557             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558         }                                                                                                </span>
<span  style="">1559                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1560         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1561         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1562             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1563             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1564         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1565             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1566             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1567                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1568                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1569                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1570             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1571             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1572             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574     }                                                                                                    </span>
<span  style="">1575                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1576     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1577         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1578             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1579             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1580         };                                                                                               </span>
<span  style="">1581                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1582         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1583             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1584             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1585         };                                                                                               </span>
<span  style="">1586                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1587         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588     }                                                                                                    </span>
<span  style="">1589                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1590     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1591         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1592         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1593         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1594         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1595         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1596         tags.setString(text.toString());                                                                 </span>
<span  style="">1597                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1598         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1599             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1600             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1601             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1602             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1603             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1604             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1605             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1606             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1607                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1608                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1609                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1610                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1611             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1612             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1613                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1614                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1615                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1616                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1617                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1618                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1619                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1620                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1621                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1622                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1623             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1624             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1625         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1626     }                                                                                                    </span>
<span  style="">1627                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1628     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1629         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1630             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631         }                                                                                                </span>
<span  style="">1632                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1633         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1634         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1635         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1636         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1638 }                                                                                                        </span>















































</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  32 import android.webkit.WebView;                                                                           </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  33 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  34 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  35 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  36 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  37 import android.widget.Toast;                                                                             </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  38 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  39 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  40 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  41 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  42 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  43 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  44 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  45 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  46 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  47 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  48 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  49 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  50 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  51 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  52 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  53 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  54 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  55 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  56 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  57 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  58 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  59 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  60 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  61 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  62 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  63 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  64 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  65 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  66 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  67 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  68 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  69 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  70 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  71 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  72 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  73 import com.simperium.client.Query;                                                                       </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  74 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  75 import java.util.Calendar;                                                                               </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  76 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  77 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  78 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  79 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  80 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  81 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  82 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  83 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  84 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span  style="">  85                                                                                                          </span>
<span  style="">  86                                                                                                          </span>
<span class="-7776761414948279806" onmouseenter="enter('-7776761414948279806');" onmouseout="out('-7776761414948279806');" style=""><abbr title="  87 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAddedListener , View.OnFocusChangeListener , SimplenoteEditText.OnSelectionChangedListener , ShareBottomSheetDialog.ShareSheetListener , HistoryBottomSheetDialog.HistorySheetListener , SimplenoteEditText.OnCheckboxToggledListener {">  87 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAdðŸ”µ</abbr></span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style="">  88     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span  style="">  89                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  90     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  91                                                                                                          </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  92     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span  style="">  93                                                                                                          </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style="">  94     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span  style="">  95                                                                                                          </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style="">  96     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span  style="">  97                                                                                                          </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style="">  98     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span  style="">  99                                                                                                          </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 100     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span  style=""> 101                                                                                                          </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 102     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style=""> 103                                                                                                          </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 104     private static final int MAX_REVISIONS = 30;                                                         </span>
<span  style=""> 105                                                                                                          </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 106     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span  style=""> 107                                                                                                          </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 108     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span  style=""> 109                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 110     private Note mNote;                                                                                  </span>
<span  style=""> 111                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 112     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 114         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 115             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 117     };                                                                                                   </span>
<span  style=""> 118                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 119     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style=""> 120                                                                                                          </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 121     private View mRootView;                                                                              </span>
<span  style=""> 122                                                                                                          </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 123     private View mTagPadding;                                                                            </span>
<span  style=""> 124                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 125     private SimplenoteEditText mContentEditText;                                                         </span>
<span  style=""> 126                                                                                                          </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 127     private ChipGroup mTagChips;                                                                         </span>
<span  style=""> 128                                                                                                          </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 129     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span  style=""> 130                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 131     private Handler mAutoSaveHandler;                                                                    </span>
<span  style=""> 132                                                                                                          </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 133     private Handler mPublishTimeoutHandler;                                                              </span>
<span  style=""> 134                                                                                                          </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 135     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style=""> 136                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 137     private LinearLayout mPlaceholderView;                                                               </span>
<span  style=""> 138                                                                                                          </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 139     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span  style=""> 140                                                                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 141     private boolean mIsLoadingNote;                                                                      </span>
<span  style=""> 142                                                                                                          </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 143     private boolean mIsMarkdownEnabled;                                                                  </span>
<span  style=""> 144                                                                                                          </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 145     private boolean mIsPreviewEnabled;                                                                   </span>
<span  style=""> 146                                                                                                          </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 147     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span  style=""> 148                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 149     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 150                                                                                                          </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 151     private MenuItem mChecklistMenuItem;                                                                 </span>
<span  style=""> 152                                                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 153     private MenuItem mCopyMenuItem;                                                                      </span>
<span  style=""> 154                                                                                                          </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 155     private MenuItem mInformationMenuItem;                                                               </span>
<span  style=""> 156                                                                                                          </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 157     private MenuItem mShareMenuItem;                                                                     </span>
<span  style=""> 158                                                                                                          </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 159     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span  style=""> 160                                                                                                          </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 161     private String mLinkUrl;                                                                             </span>
<span  style=""> 162                                                                                                          </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 163     private String mLinkText;                                                                            </span>
<span  style=""> 164                                                                                                          </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 165     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span  style=""> 166                                                                                                          </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 167     private Drawable mCallIcon;                                                                          </span>
<span  style=""> 168                                                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 169     private Drawable mCopyIcon;                                                                          </span>
<span  style=""> 170                                                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 171     private Drawable mEmailIcon;                                                                         </span>
<span  style=""> 172                                                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 173     private Drawable mMapIcon;                                                                           </span>
<span  style=""> 174                                                                                                          </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 175     private Drawable mShareIcon;                                                                         </span>
<span  style=""> 176                                                                                                          </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 177     private Drawable mBrowserIcon;                                                                       </span>
<span  style=""> 178                                                                                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 179     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span  style=""> 180                                                                                                          </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 181     private String mMatchOffsets;                                                                        </span>
<span  style=""> 182                                                                                                          </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 183     private int mCurrentCursorPosition;                                                                  </span>
<span  style=""> 184                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 185     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span  style=""> 186                                                                                                          </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 187     private boolean mIsPaused;                                                                           </span>
<span  style=""> 188                                                                                                          </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 189     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 190                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 191     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 192     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 193     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 194         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 195         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 196             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 197                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198             }                                                                                            </span>
<span  style=""> 199                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 200             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 201                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 202                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 203                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 203                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 204                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 205                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 208             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 210     };                                                                                                   </span>
<span  style=""> 211                                                                                                          </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 212     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span  style=""> 213                                                                                                          </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 214     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style=""> 215                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 216     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 217     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 218         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 219         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 220         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 221             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 222             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 223                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 224             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 225                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 226                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 227                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 228                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 229                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 230                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 231                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 232                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233             }                                                                                            </span>
<span  style=""> 234                                                                                                          </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 235             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 235             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.colðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 236             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 236             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireAcðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 237             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238         }                                                                                                </span>
<span  style=""> 239                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 240         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 241         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 242         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 243         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 244             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245         }                                                                                                </span>
<span  style=""> 246                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 247         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 248         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 249         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 250             switch (item.getItemId()) {                                                                  </span>
<span class="7972927839947469451" onmouseenter="enter('7972927839947469451');" onmouseout="out('7972927839947469451');" style=""> 251                 case R.id.menu_view_link :                                                               </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 252                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 253                         try {                                                                            </span>
<span class="-2933476939259365458" onmouseenter="enter('-2933476939259365458');" onmouseout="out('-2933476939259365458');" style=""> 254                             BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkUrl);           </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 255                         } catch (java.lang.Exception e) {                                                </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 256                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257                         }                                                                                </span>
<span class="1437018376781324775" onmouseenter="enter('1437018376781324775');" onmouseout="out('1437018376781324775');" style=""> 258                         mode.finish();// Action picked, so close the CAB                                 </span>
<span  style=""> 259                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 261                     return true;                                                                         </span>
<span class="-4634405621556180819" onmouseenter="enter('-4634405621556180819');" onmouseout="out('-4634405621556180819');" style=""> 262                 case R.id.menu_copy :                                                                    </span>
<span class="-1509454475486936846" onmouseenter="enter('-1509454475486936846');" onmouseout="out('-1509454475486936846');" style=""> 263                     if ((mLinkText != null) &amp;&amp; (getActivity() != null)) {                                </span>
<span class="-3960281181316470383" onmouseenter="enter('-3960281181316470383');" onmouseout="out('-3960281181316470383');" style=""> 264                         BrowserUtils.copyToClipboard(requireContext(), mLinkText);                       </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 265                         Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 266                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 268                     return true;                                                                         </span>
<span class="-4929350896823615772" onmouseenter="enter('-4929350896823615772');" onmouseout="out('-4929350896823615772');" style=""> 269                 case R.id.menu_share :                                                                   </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 270                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 271                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 272                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 274                     return true;                                                                         </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 275                 default :                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 276                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278         }                                                                                                </span>
<span  style=""> 279                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 280         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 281         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 282         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 283             mActionMode = null;                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 284             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 285                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 287                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 288                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 288                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 290                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 291                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 292             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 294     };                                                                                                   </span>
<span  style=""> 295                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 296     private Snackbar mPublishingSnackbar;                                                                </span>
<span  style=""> 297                                                                                                          </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 298     private boolean mHideActionOnSuccess;                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 300     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 301     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 302     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 303         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 304         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 305             if (!isAdded()) return;                                                                      </span>
<span  style=""> 306                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 307             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 308                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 309                 public void run() {                                                                      </span>
<span  style=""> 310                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 311                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 312                     mNote.save();                                                                        </span>
<span  style=""> 313                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 314                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 316             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 318     };                                                                                                   </span>
<span  style=""> 319                                                                                                          </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 320     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span  style=""> 321                                                                                                          </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 322     private String mCss;                                                                                 </span>
<span  style=""> 323                                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 324     private WebView mMarkdown;                                                                           </span>
<span  style=""> 325                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 326     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 327      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 328      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 329      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 330     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331     }                                                                                                    </span>
<span  style=""> 332                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 333     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 334     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 335         super.onCreate(savedInstanceState);                                                              </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 336         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 337         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 338         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 339                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 340         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 341         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 342                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 343         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 343         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 344         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 344         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.aðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 345         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 345         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.ðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 346         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 346         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,ðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 347         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 347         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 348         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 348         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.aðŸ”µ</abbr></span>
<span  style=""> 349                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 350         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 351         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 352         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 353                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 354         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 355                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 355                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 356         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 357             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 358             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 359                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 360                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 361                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362             }                                                                                            </span>
<span  style=""> 363                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 364             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 365             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 366                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 367                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368             }                                                                                            </span>
<span  style=""> 369                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 370             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 371             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 372                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373             }                                                                                            </span>
<span  style=""> 374                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 375             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 376             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 377                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 378                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 379                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 380                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 381                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 382                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 383                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 384                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 385                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 386                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 387                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 387                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 388                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 390         };                                                                                               </span>
<span  style=""> 391                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 392         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393     }                                                                                                    </span>
<span  style=""> 394                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 396     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 396     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 397         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 398         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 399         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 400         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 401         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 402         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 403         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 404         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 405         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 406         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 407         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 408         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 409         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 410         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 411                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 412         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 413             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 414             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 415             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 416             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 417                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 418                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419         }                                                                                                </span>
<span  style=""> 420                                                                                                          </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 421         mTagInput.setAdapter(mAutocompleteAdapter);                                                      </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 422         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 423                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 424         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 425             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 426             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 427                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 428             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 429                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430             }                                                                                            </span>
<span  style=""> 431                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 432             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 433             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 434         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 435             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 436             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 437                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 438             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 439                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441         }                                                                                                </span>
<span  style=""> 442                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 443         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 444         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 445             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 446             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 447                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 448                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 449                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 450                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                     }                                                                                    </span>
<span  style=""> 452                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 453                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 454                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 455                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 456                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 457                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 458                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 459                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                     }                                                                                    </span>
<span  style=""> 461                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 462                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 463                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 464                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 465                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 466                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 469         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 470         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 471         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472     }                                                                                                    </span>
<span  style=""> 473                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 474     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 475         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 476             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 477             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 478             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 479             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481     }                                                                                                    </span>
<span  style=""> 482                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 483     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 484     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 485         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 486         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 487         mNotesBucket.addListener(this);                                                                  </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 488         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 489                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 490         if (mContentEditText != null) {                                                                  </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""><abbr title=" 491             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));"> 491             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity())ðŸ”µ</abbr></span>
<span  style=""> 492                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 493             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 494                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497     }                                                                                                    </span>
<span  style=""> 498                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 499     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 500         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 501             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 502             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 503                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 504                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505                 }                                                                                        </span>
<span  style=""> 506                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 507                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 507                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 508                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 509                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 512         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513     }                                                                                                    </span>
<span  style=""> 514                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 515     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 516     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 517         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 518         mIsPaused = true;                                                                                </span>
<span  style=""> 519                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 520         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 521         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 522                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 523         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 524                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 525         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 526             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527         }                                                                                                </span>
<span  style=""> 528                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 529         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 530             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531         }                                                                                                </span>
<span  style=""> 532                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 533         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 534             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535         }                                                                                                </span>
<span  style=""> 536                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 537         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 538         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539     }                                                                                                    </span>
<span  style=""> 540                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 541     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 542     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 543         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 544         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 545         mNotesBucket.stop();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546     }                                                                                                    </span>
<span  style=""> 547                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 548     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 549     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 550         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 551                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 552         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 553             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555     }                                                                                                    </span>
<span  style=""> 556                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 557     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 558     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 559         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 560                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 561         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 561         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 562             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563         }                                                                                                </span>
<span  style=""> 564                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 565         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 566         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567     }                                                                                                    </span>
<span  style=""> 568                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 569     @Override                                                                                            </span>
<span class="-1268726994169507961" onmouseenter="enter('-1268726994169507961');" onmouseout="out('-1268726994169507961');" style=""> 570     public boolean onOptionsItemSelected(@NonNull                                                        </span>
<span class="-8513836018934639037" onmouseenter="enter('-8513836018934639037');" onmouseout="out('-8513836018934639037');" style=""> 571     MenuItem item) {                                                                                     </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 572         switch (item.getItemId()) {                                                                      </span>
<span class="8867537987050623817" onmouseenter="enter('8867537987050623817');" onmouseout="out('8867537987050623817');" style=""> 573             case R.id.menu_checklist :                                                                   </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 574                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 575                 return true;                                                                             </span>
<span class="-4634405621556180819" onmouseenter="enter('-4634405621556180819');" onmouseout="out('-4634405621556180819');" style=""> 576             case R.id.menu_copy :                                                                        </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style=""> 577                 BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 578                 Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 579                 return true;                                                                             </span>
<span class="-4298636595580130452" onmouseenter="enter('-4298636595580130452');" onmouseout="out('-4298636595580130452');" style=""> 580             case R.id.menu_history :                                                                     </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 581                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 582                 return true;                                                                             </span>
<span class="5135492236944900528" onmouseenter="enter('5135492236944900528');" onmouseout="out('5135492236944900528');" style=""> 583             case R.id.menu_info :                                                                        </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 584                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 585                 return true;                                                                             </span>
<span class="1450934417613029198" onmouseenter="enter('1450934417613029198');" onmouseout="out('1450934417613029198');" style=""> 586             case R.id.menu_markdown :                                                                    </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 587                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 588                 return true;                                                                             </span>
<span class="264731523796471094" onmouseenter="enter('264731523796471094');" onmouseout="out('264731523796471094');" style=""> 589             case R.id.menu_pin :                                                                         </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 590                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 591                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 592                 return true;                                                                             </span>
<span class="-1927084815834323870" onmouseenter="enter('-1927084815834323870');" onmouseout="out('-1927084815834323870');" style=""> 593             case R.id.menu_publish :                                                                     </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 594                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 595                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 596                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 597                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598                 }                                                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 599                 return true;                                                                             </span>
<span class="-4929350896823615772" onmouseenter="enter('-4929350896823615772');" onmouseout="out('-4929350896823615772');" style=""> 600             case R.id.menu_share :                                                                       </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 601                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 602                 return true;                                                                             </span>
<span class="7986356063039371943" onmouseenter="enter('7986356063039371943');" onmouseout="out('7986356063039371943');" style=""> 603             case R.id.menu_trash :                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 604                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 605                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606                 }                                                                                        </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 607                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 608                 return true;                                                                             </span>
<span class="-1147335564575759755" onmouseenter="enter('-1147335564575759755');" onmouseout="out('-1147335564575759755');" style=""> 609             case android.R.id.home :                                                                     </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 610                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 611                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612                 }                                                                                        </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 613                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 614                 return true;                                                                             </span>
<span class="3050734735710613783" onmouseenter="enter('3050734735710613783');" onmouseout="out('3050734735710613783');" style=""> 615             default :                                                                                    </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 616                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618     }                                                                                                    </span>
<span  style=""> 619                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 620     @Override                                                                                            </span>
<span class="-2786825431481165783" onmouseenter="enter('-2786825431481165783');" onmouseout="out('-2786825431481165783');" style=""> 621     public void onPrepareOptionsMenu(@NonNull                                                            </span>
<span class="8749414831992096703" onmouseenter="enter('8749414831992096703');" onmouseout="out('8749414831992096703');" style=""> 622     Menu menu) {                                                                                         </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 623         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 624             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 625             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 626             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 627             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 628             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 629             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 630             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 631             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 632             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 633             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 634             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 635             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 636             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="5511605666700643167" onmouseenter="enter('5511605666700643167');" onmouseout="out('5511605666700643167');" style=""><abbr title=" 637             if (mNote.isDeleted() || ((mMarkdown != null) &amp;&amp; (mMarkdown.getVisibility() == View.VISIBLE))) {"> 637             if (mNote.isDeleted() || ((mMarkdown != null) &amp;&amp; (mMarkdown.getVisibility() == View.VISIBLE))ðŸ”µ</abbr></span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 638                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 639                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 640                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 641                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 642                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 643                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 644                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="2837864123738737789" onmouseenter="enter('2837864123738737789');" onmouseout="out('2837864123738737789');" style=""> 645                 // 0.3 is 30% opacity.                                                                   </span>
<span class="6488120555441711385" onmouseenter="enter('6488120555441711385');" onmouseout="out('6488120555441711385');" style=""> 646                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 647             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 648                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 649                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 650                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 651                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 652                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 653                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 654                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="2736385926813445644" onmouseenter="enter('2736385926813445644');" onmouseout="out('2736385926813445644');" style=""> 655                 // 1.0 is 100% opacity.                                                                  </span>
<span class="-6091878621371207134" onmouseenter="enter('-6091878621371207134');" onmouseout="out('-6091878621371207134');" style=""> 656                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657             }                                                                                            </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 658             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 659                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 660             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 661                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663         }                                                                                                </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 664         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 665         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666     }                                                                                                    </span>
<span  style=""> 667                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 668     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 669         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 670         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 671             mContentEditText.insertChecklist();                                                          </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 672         } catch (java.lang.Exception e) {                                                                </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 673             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 674             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675         }                                                                                                </span>
<span class="4587590199922178308" onmouseenter="enter('4587590199922178308');" onmouseout="out('4587590199922178308');" style=""> 676         AnalyticsTracker.track(EDITOR_CHECKLIST_INSERTED, CATEGORY_NOTE, &quot;toolbar_button&quot;);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677     }                                                                                                    </span>
<span  style=""> 678                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 679     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 680     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 681         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 682         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 683             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 684             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686     }                                                                                                    </span>
<span  style=""> 687                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 688     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 689         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 690         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691     }                                                                                                    </span>
<span  style=""> 692                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 693     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 694         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695     }                                                                                                    </span>
<span  style=""> 696                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 697     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 698         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 699     }                                                                                                    </span>
<span  style=""> 700                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 701     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 702         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 703         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span  style=""> 704                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 705         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 706             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 707                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 708                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 709                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 711             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 712             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 713         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span  style=""> 715                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 716     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 717         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 718             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 719             showShareSheet();                                                                            </span>
<span class="-6150945775595833187" onmouseenter="enter('-6150945775595833187');" onmouseout="out('-6150945775595833187');" style=""> 720             AnalyticsTracker.track(EDITOR_NOTE_CONTENT_SHARED, CATEGORY_NOTE, &quot;action_bar_share_button&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722     }                                                                                                    </span>
<span  style=""> 723                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 724     public void showHistory() {                                                                          </span>
<span class="-6009421127171391469" onmouseenter="enter('-6009421127171391469');" onmouseout="out('-6009421127171391469');" style=""> 725         if ((mNote != null) &amp;&amp; (mNote.getVersion() &gt; 1)) {                                               </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 726             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 727             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 728             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 729         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 730             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 734     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 735         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 736         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 737             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 738             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 739             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741     }                                                                                                    </span>
<span  style=""> 742                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 743     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 744         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 745         Activity activity = getActivity();                                                               </span>
<span  style=""> 746                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 747         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 748             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 749                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 750             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 751                 editorActivity.showTabs();                                                               </span>
<span  style=""> 752                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 753                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 754                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 755                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 756                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 758             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 759                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 761         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 762             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 763             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764         }                                                                                                </span>
<span  style=""> 765                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 766         saveNote();                                                                                      </span>
<span  style=""> 767                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 768         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 769         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 770         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 771         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 772         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773     }                                                                                                    </span>
<span  style=""> 774                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 775     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 776         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 777                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 778         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 779             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781     }                                                                                                    </span>
<span  style=""> 782                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 783     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 784         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 785                 mCss,                                                                                    </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 786                 mContentEditText.getPlainTextContent()                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 787         );                                                                                               </span>
<span  style=""> 788                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 789         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790     }                                                                                                    </span>
<span  style=""> 791                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 792     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 793         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 794             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 795                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 796         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 797                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 798         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 799             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 800         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 801             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802         }                                                                                                </span>
<span  style=""> 803                                                                                                          </span>
<span  style=""> 804                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 805         saveNote();                                                                                      </span>
<span  style=""> 806                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 807         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808     }                                                                                                    </span>
<span  style=""> 809                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 810     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 811         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 812         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 813         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814     }                                                                                                    </span>
<span  style=""> 815                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 816     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 817         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 818             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 819             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 819             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 820             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 821                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 822             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 823                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 824                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 825                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 826                                                                                                          </span>
<span class="4759499849938166400" onmouseenter="enter('4759499849938166400');" onmouseout="out('4759499849938166400');" style=""> 827                 // Show/Hide tabs based on markdown flag.                                                </span>
<span class="-8298439963273968846" onmouseenter="enter('-8298439963273968846');" onmouseout="out('-8298439963273968846');" style=""> 828                 setMarkdown(mIsMarkdownEnabled);                                                         </span>
<span  style=""> 829                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 830                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 831                 mNote.save();                                                                            </span>
<span  style=""> 832                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 833                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 834                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 835                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 836                 }                                                                                        </span>
<span  style=""> 837                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 838                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 839                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 840                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 841                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 842                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 843                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 844                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846             }                                                                                            </span>
<span  style=""> 847                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 848             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 849             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 850             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852     }                                                                                                    </span>
<span  style=""> 853                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 854     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 855         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 856         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 859     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 860         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 861         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 862         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 863         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 864         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 865         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 866         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 867         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 868                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 869         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 870                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 871         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 872                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 873         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 874                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 875         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 876         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 877             return newText.length();                                                                     </span>
<span  style=""> 878                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 879         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 880         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 881                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 882         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 883             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 883             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 884             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 884             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 885         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 886             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 887         }                                                                                                </span>
<span  style=""> 888                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 889         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 890         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 891             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 892                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 893         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 894         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895     }                                                                                                    </span>
<span  style=""> 896                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 897     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 898     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 899         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 900             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901         }                                                                                                </span>
<span  style=""> 902                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 903         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 904             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 905                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 906                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 907                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 908             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909         }                                                                                                </span>
<span  style=""> 910                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 911         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 912         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 913         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 914         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915     }                                                                                                    </span>
<span  style=""> 916                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 917     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 918     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 919         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920     }                                                                                                    </span>
<span  style=""> 921                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 922     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 923     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 924         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 925         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 926         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927     }                                                                                                    </span>
<span  style=""> 928                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 929     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 930     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 931         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 932         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 933             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 934             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935         }                                                                                                </span>
<span  style=""> 936                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 937         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 938         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 939             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 940             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941         }                                                                                                </span>
<span  style=""> 942                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 943         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 944             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945         }                                                                                                </span>
<span  style=""> 946                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 947         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 948         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 949         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 950         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951     }                                                                                                    </span>
<span  style=""> 952                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 953     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 954      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 955      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style=""> 956      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style=""> 957      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style=""> 958      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 959      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 960     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title=" 961         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {"> 961         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.classðŸ”µ</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style=""> 962             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 963                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 964             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965         }                                                                                                </span>
<span  style=""> 966                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 967         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style=""> 968                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style=""> 969         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 970             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971         }                                                                                                </span>
<span  style=""> 972                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style=""> 973         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title=" 974         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);"> 974         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVðŸ”µ</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title=" 975         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);"> 975         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976     }                                                                                                    </span>
<span  style=""> 977                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 978     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 979         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 980         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 981         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 982         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983     }                                                                                                    </span>
<span  style=""> 984                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 985     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 986         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 987             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988         }                                                                                                </span>
<span  style=""> 989                                                                                                          </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 990         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991     }                                                                                                    </span>
<span  style=""> 992                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style=""> 993     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 994         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style=""> 995             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 996         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 997             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999     }                                                                                                    </span>
<span  style="">1000                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1001     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1002         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1003             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1004             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005         }                                                                                                </span>
<span  style="">1006                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1007         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1008             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010     }                                                                                                    </span>
<span  style="">1011                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1012     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1013     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1014         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1015             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1016                                                                                                          </span>
<span class="402754191134572822" onmouseenter="enter('402754191134572822');" onmouseout="out('402754191134572822');" style="">1017             if (mTagInput.getText().toString().trim().length() &gt; 0) {                                    </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1018                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1019             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1020                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1021             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1023     }                                                                                                    </span>
<span  style="">1024                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1025     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1026         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1027     }                                                                                                    </span>
<span  style="">1028                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1029     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1030         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1031     }                                                                                                    </span>
<span  style="">1032                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1033     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1034         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1035             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1036         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1037             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039     }                                                                                                    </span>
<span  style="">1040                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1041     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1042         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1043                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1044         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1045             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046         }                                                                                                </span>
<span  style="">1047                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1048         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049     }                                                                                                    </span>
<span  style="">1050                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1051     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1052      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1053      */                                                                                                  </span>
<span  style="">1054                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1055     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1056     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1057         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1058         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1059             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061     }                                                                                                    </span>
<span  style="">1062                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1064     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1065         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1066         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1067             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069     }                                                                                                    </span>
<span  style="">1070                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1071     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1072     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1073         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1074             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075         }                                                                                                </span>
<span  style="">1076                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1077         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1078             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079         }                                                                                                </span>
<span  style="">1080                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1081         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1082         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1083         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1084             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1086         ft.addToBackStack(null);                                                                         </span>
<span  style="">1087                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1088         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1089         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1090         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1091         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092     }                                                                                                    </span>
<span  style="">1093                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1094     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1095     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1096         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097     }                                                                                                    </span>
<span  style="">1098                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1099     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1100     public void onShareDismissed() {                                                                     </span>
<span  style="">1101                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102     }                                                                                                    </span>
<span  style="">1103                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1104     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1105      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1106      */                                                                                                  </span>
<span  style="">1107                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1108     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1109     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1110         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1111         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1112             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114     }                                                                                                    </span>
<span  style="">1115                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1116     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1117     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1118         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1119             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1121         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122     }                                                                                                    </span>
<span  style="">1123                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1124     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1125     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1126         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1127             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128         }                                                                                                </span>
<span  style="">1129                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1130         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1131             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1133     }                                                                                                    </span>
<span  style="">1134                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1135     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1136     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1137         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138     }                                                                                                    </span>
<span  style="">1139                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="">1140     protected void saveNote() {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1141         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1142             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1143                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1143                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1144                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1145             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1146                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1147                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148             }                                                                                            </span>
<span  style="">1149                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1150             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1151             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1152                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1153             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1153             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1154                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1155                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1156                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1157                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1158                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1159                 mNote.save();                                                                            </span>
<span  style="">1160                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1161                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1162                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1163                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1164                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1165                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1167         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1168             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170     }                                                                                                    </span>
<span  style="">1171                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1172     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1173     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1174     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1175     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1176         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1177         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1178             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1179             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1180                 return;                                                                                  </span>
<span  style="">1181                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1182             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1183             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1184                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1185                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1186                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1186                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1187                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1188                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1189                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1190                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191                 }                                                                                        </span>
<span  style="">1192                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1193                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1194                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1195                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1195                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1196                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1197                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1198                     }                                                                                    </span>
<span  style="">1199                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1200                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1202             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1203                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1204                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1206         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1207             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1208             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1212     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1213         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1214         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1215                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1216         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1217             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1218                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1219                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1220             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1221                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1222                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1223             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1224                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1225                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1226             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1227                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1228                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231     }                                                                                                    </span>
<span  style="">1232                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1233     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1234         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1235             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1236             mNote.save();                                                                                </span>
<span  style="">1237                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1238             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1239             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1240                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1241             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1242                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1243                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1244                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1245             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247     }                                                                                                    </span>
<span  style="">1248                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1249     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1250         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1251             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1252         }                                                                                                </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1253         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1254         mPublishingSnackbar = null;                                                                      </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1255         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1256             if (mNote.isPublished()) {                                                                   </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1257                 if (mHideActionOnSuccess) {                                                              </span>
<span class="7497833686297233990" onmouseenter="enter('7497833686297233990');" onmouseout="out('7497833686297233990');" style="">1258                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).show();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1259                 } else {                                                                                 </span>
<span class="-2702020555845865915" onmouseenter="enter('-2702020555845865915');" onmouseout="out('-2702020555845865915');" style=""><abbr title="1260                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).setAction(R.string.undo, new View.OnClickListener() {">1260                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).setActionðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1261                         @Override                                                                        </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1262                         public void onClick(View v) {                                                    </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1263                             mHideActionOnSuccess = true;                                                 </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1264                             unpublishNote();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265                         }                                                                                </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1266                     }).show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267                 }                                                                                        </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style="">1268                 BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                 </span>
<span class="-3790430051689614068" onmouseenter="enter('-3790430051689614068');" onmouseout="out('-3790430051689614068');" style="">1269             } else if (mHideActionOnSuccess) {                                                           </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1270                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1271             } else {                                                                                     </span>
<span class="7601439931758089790" onmouseenter="enter('7601439931758089790');" onmouseout="out('7601439931758089790');" style=""><abbr title="1272                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).setAction(R.string.undo, new View.OnClickListener() {">1272                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).setAction(RðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1273                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1274                     public void onClick(View v) {                                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1275                         mHideActionOnSuccess = true;                                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1276                         publishNote();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277                     }                                                                                    </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1278                 }).show();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279             }                                                                                            </span>
<span class="4765506669760455758" onmouseenter="enter('4765506669760455758');" onmouseout="out('4765506669760455758');" style="">1280         } else if (mNote.isPublished()) {                                                                </span>
<span class="1560587261098083611" onmouseenter="enter('1560587261098083611');" onmouseout="out('1560587261098083611');" style=""><abbr title="1281             Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG).setAction(R.string.retry, new View.OnClickListener() {">1281             Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG).setAction(R.string.rðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1282                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1283                 public void onClick(View v) {                                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1284                     mHideActionOnSuccess = true;                                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1285                     unpublishNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286                 }                                                                                        </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1287             }).show();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1288         } else {                                                                                         </span>
<span class="-3203060346162978224" onmouseenter="enter('-3203060346162978224');" onmouseout="out('-3203060346162978224');" style=""><abbr title="1289             Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG).setAction(R.string.retry, new View.OnClickListener() {">1289             Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG).setAction(R.string.retðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1290                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1291                 public void onClick(View v) {                                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1292                     mHideActionOnSuccess = true;                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1293                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294                 }                                                                                        </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1295             }).show();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296         }                                                                                                </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1297         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1298         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1299     }                                                                                                    </span>
<span  style="">1300                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1301     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1302         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1303             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1304             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305         }                                                                                                </span>
<span  style="">1306                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1307         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1308             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1308             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1309             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1310         }                                                                                                </span>
<span  style="">1311                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1312         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313     }                                                                                                    </span>
<span  style="">1314                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1315     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1316         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1317             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1318             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319         }                                                                                                </span>
<span  style="">1320                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1321         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1322             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1322             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1323             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1324         }                                                                                                </span>
<span  style="">1325                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1326         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327     }                                                                                                    </span>
<span  style="">1328                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1329     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1330         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1331             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333     }                                                                                                    </span>
<span  style="">1334                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1335     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1336         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1337             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339     }                                                                                                    </span>
<span  style="">1340                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1341     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1342         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1343             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1344             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1344             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1345             saveNote();                                                                                  </span>
<span  style="">1346                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1347             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1349     }                                                                                                    </span>
<span  style="">1350                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1351     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1352      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1353      */                                                                                                  </span>
<span  style="">1354                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1355     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1356     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1357                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358     }                                                                                                    </span>
<span  style="">1359                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1360     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1361     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1361     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1362         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1363             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1364                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1365                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1366                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1367                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1368                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1369                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1370                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1371                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372                                 }                                                                        </span>
<span  style="">1373                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1374                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1375                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1377                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1379                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1380                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384     }                                                                                                    </span>
<span  style="">1385                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1386     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1387     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1388         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1389             mNotesBucket.removeListener(this);                                                           </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1390             mNotesBucket.stop();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392     }                                                                                                    </span>
<span  style="">1393                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1394     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1395     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1396         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1397         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1398             return;                                                                                      </span>
<span  style="">1399                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1400         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1401         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1402             return;                                                                                      </span>
<span  style="">1403                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1404         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405     }                                                                                                    </span>
<span  style="">1406                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1407     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1408         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1409                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1410         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1411             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412         }                                                                                                </span>
<span  style="">1413                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1414         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1415         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1416             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1417             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1418                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1419                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421         }                                                                                                </span>
<span  style="">1422                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1423         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1424         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1425             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="4349500834754523537" onmouseenter="enter('4349500834754523537');" onmouseout="out('4349500834754523537');" style="">1426             if ((fragment == null) || (fragment.getActivity() == null)) {                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1427                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1428             }                                                                                            </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1429             String noteID = args[0];                                                                     </span>
<span class="2152357253618292092" onmouseenter="enter('2152357253618292092');" onmouseout="out('2152357253618292092');" style="">1430             Simplenote application = ((Simplenote) (fragment.getActivity().getApplication()));           </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1431             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1432             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1433                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1434                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1435                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="8585053155468161660" onmouseenter="enter('8585053155468161660');" onmouseout="out('8585053155468161660');" style="">1436                     ((NotesActivity) (fragment.getActivity())).setCurrentNote(fragment.mNote);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437                 }                                                                                        </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1438                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1439                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1440                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1441                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1442                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1443             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1444                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1445                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1446                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1447                     Note currentNote = notesCursor.getObject();                                          </span>
<span class="8264360518691996978" onmouseenter="enter('8264360518691996978');" onmouseout="out('8264360518691996978');" style="">1448                     if ((currentNote != null) &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {         </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1449                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1450                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1452                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1454             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455         }                                                                                                </span>
<span  style="">1456                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1457         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1458         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1459             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-9214324735517901283" onmouseenter="enter('-9214324735517901283');" onmouseout="out('-9214324735517901283');" style=""><abbr title="1460             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFinishing()) {">1460             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFiniðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1461                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462             }                                                                                            </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1463             fragment.refreshContent(false);                                                              </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1464             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1465                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1465                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1466                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1467                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1468             }                                                                                            </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1469             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span class="-4686922819076112275" onmouseenter="enter('-4686922819076112275');" onmouseout="out('-4686922819076112275');" style="">1470             if ((fragment.mNote != null) &amp;&amp; fragment.mNote.getContent().isEmpty()) {                     </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1471                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1472                 fragment.mContentEditText.requestFocus();                                                </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1473                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1474                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1475                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1476                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1477                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478                         }                                                                                </span>
<span class="-6396953671275869188" onmouseenter="enter('-6396953671275869188');" onmouseout="out('-6396953671275869188');" style=""><abbr title="1479                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));">1479                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActiviðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1480                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1481                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1482                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1484                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1485             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1486                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1487                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488             }                                                                                            </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1489             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1490             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1491             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1492             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494     }                                                                                                    </span>
<span  style="">1495                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1496     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1497         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1498                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1499         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1500             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501         }                                                                                                </span>
<span  style="">1502                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1503         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1504         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1505             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1506             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1507                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1508             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1509             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510         }                                                                                                </span>
<span  style="">1511                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1512         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1513         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1514             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="4331800031661631828" onmouseenter="enter('4331800031661631828');" onmouseout="out('4331800031661631828');" style=""><abbr title="1515             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFinishing())) {">1515             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFiðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1516                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1517                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1518                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521     }                                                                                                    </span>
<span  style="">1522                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1523     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1524         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1525             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526         }                                                                                                </span>
<span  style="">1527                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1528         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1529             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1531     }                                                                                                    </span>
<span  style="">1532                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1533     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1534     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1535         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1536             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1537         }                                                                                                </span>
<span  style="">1538                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1539         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1540         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1541             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1542             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1543         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1544             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1545             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1546                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1547                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1548                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1550             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1551             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553     }                                                                                                    </span>
<span  style="">1554                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1555     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1556         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1557             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1558             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1559         };                                                                                               </span>
<span  style="">1560                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1561         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1562             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1563             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1564         };                                                                                               </span>
<span  style="">1565                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1566         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567     }                                                                                                    </span>
<span  style="">1568                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1569     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1570         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1571         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1572         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1573         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1574         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1575         tags.setString(text.toString());                                                                 </span>
<span  style="">1576                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1577         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1578             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1579             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1580             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1581             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1582             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1583             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1584             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1585             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1586                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1587                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1588                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1590             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1591             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1592                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1593                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1594                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1595                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1596                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1597                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1598                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1599                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1600                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1602             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1603             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1605     }                                                                                                    </span>
<span  style="">1606                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1607     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1608         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1609             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1610         }                                                                                                </span>
<span  style="">1611                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1612         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1613         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1614         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1615         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617 }                                                                                                        </span>




































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   4 -import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   5 -import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">   7 -import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   8  import android.content.SharedPreferences;                                                                         </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   9  import android.content.res.ColorStateList;                                                                        </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  10  import android.database.Cursor;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">  11  import android.graphics.Typeface;                                                                                 </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  12  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  13 -import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  14  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  17  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  18  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  19  import android.text.Spanned;                                                                                      </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  20  import android.text.TextUtils.SimpleStringSplitter;                                                               </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21  import android.text.TextWatcher;                                                                                  </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  22  import android.text.style.MetricAffectingSpan;                                                                    </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  23  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  24  import android.text.style.StyleSpan;                                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  25  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  26  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  27  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  28  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  29  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  30  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  31  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  32  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  33  import android.view.ViewGroup;                                                                                    </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  34  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  35  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  36  import android.webkit.WebView;                                                                                    </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  37  import android.widget.CompoundButton;                                                                             </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  38  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  39  import android.widget.LinearLayout;                                                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  40  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  41  import android.widget.Toast;                                                                                      </span>
<span  style="">  42                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  43  import androidx.annotation.NonNull;                                                                               </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  44  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  45  import androidx.appcompat.view.ActionMode;                                                                        </span>

<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50  import androidx.preference.PreferenceManager;                                                                     </span>
<span  style="">  51                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  55  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  57  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  58  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  59  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  60  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  61  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  62  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  63  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  64  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  65  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  66  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  67  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  68  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  69  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  70  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  71  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  72  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  73  import com.google.android.material.chip.Chip;                                                                     </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  74  import com.google.android.material.chip.ChipGroup;                                                                </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  75  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  76  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  77  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  78  import com.simperium.client.Query;                                                                                </span>
<span  style="">  79                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  80  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  81  import java.util.Calendar;                                                                                        </span>
<span  style="">  82                                                                                                                    </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  83  import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                                 </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  84  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;                </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  85  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;               </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  86  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;                       </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  87  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;                    </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  88  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;                  </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  89  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                         </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  90  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;                       </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  91  import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                              </span>
<span  style="">  92                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  93  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  94          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  95          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  96          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  97          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  98          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style="">  99                                                                                                                    </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 100      public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 101      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 102      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 103      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 104      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 105      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 106      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 107      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 108      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 109      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 110      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 111      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 112      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 114          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 115              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 117      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 118      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 119      private View mRootView;                                                                                       </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 120      private View mTagPadding;                                                                                     </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 121      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 122      private ChipGroup mTagChips;                                                                                  </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 123      private TagsMultiAutoCompleteTextView mTagInput;                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 124      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 125      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 126      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 127      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 128      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 129      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 130      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 131      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 132      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 133      private ActionMode mActionMode;                                                                               </span>

<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 134      private MenuItem mCopyMenuItem;                                                                               </span>

<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 135      private MenuItem mShareMenuItem;                                                                              </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 136      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 137      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 138      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 139      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 140      private Drawable mCallIcon;                                                                                   </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 141      private Drawable mCopyIcon;                                                                                   </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 142      private Drawable mEmailIcon;                                                                                  </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 143      private Drawable mMapIcon;                                                                                    </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 144      private Drawable mShareIcon;                                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 145      private Drawable mBrowserIcon;                                                                                </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 146      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 147      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 148      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 149      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 150      private boolean mIsPaused;                                                                                    </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 151      private boolean mIsFromWidget;                                                                                </span>
<span  style=""> 152                                                                                                                    </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 153      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 154      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 155          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 156          public void run() {                                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 157              if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 158                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159              }                                                                                                     </span>
<span  style=""> 160                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 161              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 163                  public void run() {                                                                               </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 164                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 164                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; ðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 165                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 166                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 169              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 171      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 172      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 173      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 174      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 175      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 176          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 177          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 178          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 179              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 180              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style=""> 181                                                                                                                    </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 182              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 183                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 184                  mCopyMenuItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 185                  mShareMenuItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 186                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 187                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 188                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 189                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 190                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191              }                                                                                                     </span>
<span  style=""> 192                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 193              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 193              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgrðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 194              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 194              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().ðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 195              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196          }                                                                                                         </span>
<span  style=""> 197                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 198          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 199          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 200          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 201          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 202              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203          }                                                                                                         </span>
<span  style=""> 204                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 205          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 207          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 208              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 209                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 210                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 211                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 212 -                            Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 213 -                            Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 214 -                            i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 215 -                            startActivity(i);                                                                     </span>
<span class="-2933476939259365458" onmouseenter="enter('-2933476939259365458');" onmouseout="out('-2933476939259365458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +                            BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkUrl);                    </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 217                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 218                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219                          }                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 220 +                                                                                                                  </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 221                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 223                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 224                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 225                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 226 -                        copyToClipboard(mLinkText);                                                               </span>
<span class="-3960281181316470383" onmouseenter="enter('-3960281181316470383');" onmouseout="out('-3960281181316470383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +                        BrowserUtils.copyToClipboard(requireContext(), mLinkText);                                </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 228                          Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();             </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 229                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 231                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 232                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 233                      if (mLinkText != null) {                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 234                          showShareSheet();                                                                         </span>

<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 235                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 237                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 238                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 239                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241          }                                                                                                         </span>
<span  style=""> 242                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 243          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 244          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 245          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 246              mActionMode = null;                                                                                   </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 247              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 248                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 249                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 250                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 251                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 251                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.trðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 253                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 254                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 255              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 257      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 258      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 259      private boolean mHideActionOnSuccess;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 260      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 261      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 263          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 264              if (!isAdded()) return;                                                                               </span>
<span  style=""> 265                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 266              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 268                  public void run() {                                                                               </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 270                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 271                      mNote.save();                                                                                 </span>
<span  style=""> 272                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 273                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 275              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 277      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 278      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 279      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 280      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 281                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 282      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 283       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 284       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 285       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 286      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287      }                                                                                                             </span>
<span  style=""> 288                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 290      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 291          super.onCreate(savedInstanceState);                                                                       </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 292          mInfoBottomSheet = new InfoBottomSheetDialog(this);                                                       </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 293          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 294          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 295                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 296          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 297          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 298                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 299          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 299          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 300          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 300          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actioðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 301          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 301          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 302          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 302          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 303          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 303          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionMðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 304          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 304          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actioðŸ”µ</abbr></span>
<span  style=""> 305                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 306          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 307          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 308          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 309                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 310          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 311                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 312          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 313              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 314              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 315                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 316                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 317                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318              }                                                                                                     </span>
<span  style=""> 319                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 320              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 321              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 322                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 323                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324              }                                                                                                     </span>
<span  style=""> 325                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 326              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 327              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 328                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329              }                                                                                                     </span>
<span  style=""> 330                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 331              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 332              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 333                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 334                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 335                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 336                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 337                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 338                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 339                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 340                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 341                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 342                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 343                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 344                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 346          };                                                                                                        </span>
<span  style=""> 347                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 348          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349      }                                                                                                             </span>
<span  style=""> 350                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 351      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 352      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 353          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 354          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 355          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 356          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 357          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 358          mContentEditText.setOnFocusChangeListener(this);                                                          </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 359          mTagInput = mRootView.findViewById(R.id.tag_input);                                                       </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 360          mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                        </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 361          mTagInput.setTokenizer(new SpaceTokenizer());                                                             </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 362          mTagInput.setOnFocusChangeListener(this);                                                                 </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 363          mTagChips = mRootView.findViewById(R.id.tag_chips);                                                       </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 364          mTagPadding = mRootView.findViewById(R.id.tag_padding);                                                   </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 365          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 366          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span  style=""> 367                                                                                                                    </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 368          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 369              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 370              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 371              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 372              mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 373                      ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 374                      : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375          }                                                                                                         </span>
<span  style=""> 376                                                                                                                    </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 377          mTagInput.setAdapter(mAutocompleteAdapter);                                                               </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 378          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 379                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 380          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 381              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 382              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span  style=""> 383                                                                                                                    </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 384              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 385                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386              }                                                                                                     </span>
<span  style=""> 387                                                                                                                    </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 388              mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                             </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 389              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 390          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {            </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 391              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 392              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span  style=""> 393                                                                                                                    </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 394              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 395                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397          }                                                                                                         </span>
<span  style=""> 398                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 399          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 400          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 401              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 402              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 403                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 404                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 405                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 406                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407                      }                                                                                             </span>
<span  style=""> 408                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 409                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 410                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 411                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 412                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 413                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 414                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 415                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416                      }                                                                                             </span>
<span  style=""> 417                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 418                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 419                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 420                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 421                      ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 422                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 425          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 426          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 427          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428      }                                                                                                             </span>
<span  style=""> 429                                                                                                                    </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 430      public void scrollToMatch(int location) {                                                                     </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 431          if (isAdded()) {                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 432              // Calculate how far to scroll to bring the match into view                                           </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 433              Layout layout = mContentEditText.getLayout();                                                         </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 434              int lineTop = layout.getLineTop(layout.getLineForOffset(location));                                   </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 435              ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437      }                                                                                                             </span>
<span  style=""> 438                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 439      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 440      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 441          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 442          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 443          mNotesBucket.addListener(this);                                                                           </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 444          mTagInput.setOnTagAddedListener(this);                                                                    </span>
<span  style=""> 445                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 446          if (mContentEditText != null) {                                                                           </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""> 447              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));       </span>
<span  style=""> 448                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 449              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 450                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453      }                                                                                                             </span>
<span  style=""> 454                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 455      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 456          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 458              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 459                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 460                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                  }                                                                                                 </span>
<span  style=""> 462                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 463                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 463                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(ContexðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 464                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 465                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 468          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469      }                                                                                                             </span>
<span  style=""> 470                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 472      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 473          super.onPause();  // Always call the superclass method first                                              </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 474          mIsPaused = true;                                                                                         </span>
<span  style=""> 475                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 476          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 477          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 478                                                                                                                    </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 479          mTagInput.setOnTagAddedListener(null);                                                                    </span>
<span  style=""> 480                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 481          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 482              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483          }                                                                                                         </span>
<span  style=""> 484                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 485          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 486              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487          }                                                                                                         </span>
<span  style=""> 488                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 489          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 490              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491          }                                                                                                         </span>
<span  style=""> 492                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 493          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 494          saveNote();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495      }                                                                                                             </span>
<span  style=""> 496                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 497      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 498      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 499          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 500          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 501          mNotesBucket.stop();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502      }                                                                                                             </span>
<span  style=""> 503                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 504      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 505      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 506          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 507                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 508          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 509              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511      }                                                                                                             </span>
<span  style=""> 512                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 513      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 514      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 515          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span  style=""> 516                                                                                                                    </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 517          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 517          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFrðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 518              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519          }                                                                                                         </span>
<span  style=""> 520                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 521          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 522          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523      }                                                                                                             </span>
<span  style=""> 524                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 525      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 526      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 527          switch (item.getItemId()) {                                                                               </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 528              case R.id.menu_checklist:                                                                             </span>
<span class="-3999706161588174591" onmouseenter="enter('-3999706161588174591');" onmouseout="out('-3999706161588174591');" style=""> 529                  DrawableUtils.startAnimatedVectorDrawable(item.getIcon());                                        </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 530                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 531                  return true;                                                                                      </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 532              case R.id.menu_copy:                                                                                  </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 533 -                copyToClipboard(mNote.getPublishedUrl());                                                         </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 534 +                BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                          </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 535                  Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 536                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 537              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 538                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 539                  return true;                                                                                      </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 540              case R.id.menu_info:                                                                                  </span>
<span class="-3999706161588174591" onmouseenter="enter('-3999706161588174591');" onmouseout="out('-3999706161588174591');" style=""> 541                  DrawableUtils.startAnimatedVectorDrawable(item.getIcon());                                        </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 542                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 543                  return true;                                                                                      </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 544              case R.id.menu_markdown:                                                                              </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 545                  setMarkdown(!item.isChecked());                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 546                  return true;                                                                                      </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 547              case R.id.menu_pin:                                                                                   </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 548                  NoteUtils.setNotePin(mNote, !item.isChecked());                                                   </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 549                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 550                  return true;                                                                                      </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 551              case R.id.menu_publish:                                                                               </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 552                  if (item.isChecked()) {                                                                           </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 553                      unpublishNote();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 554                  } else {                                                                                          </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 555                      publishNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                  }                                                                                                 </span>
<span  style=""> 557                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 558                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 559              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 560                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 561                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 562              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 563                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 564                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565                  }                                                                                                 </span>
<span  style=""> 566                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 567                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 568                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 569              case android.R.id.home:                                                                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 570                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 571                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572                  }                                                                                                 </span>
<span  style=""> 573                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 574                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 575                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 576              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 577                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 579      }                                                                                                             </span>
<span  style=""> 580                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 581      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 582      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 583          if (mNote != null) {                                                                                      </span>
<span class="-9014548566711549978" onmouseenter="enter('-9014548566711549978');" onmouseout="out('-9014548566711549978');" style=""> 584              menu.findItem(R.id.menu_info).setVisible(true);                                                       </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 585              MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                      </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 586              MenuItem shareItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 587              MenuItem historyItem = menu.findItem(R.id.menu_history);                                              </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 588              MenuItem publishItem = menu.findItem(R.id.menu_publish);                                              </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 589              MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 590              MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                            </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 591              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span class="-2914120973027721079" onmouseenter="enter('-2914120973027721079');" onmouseout="out('-2914120973027721079');" style=""> 592              MenuItem checklistItem = menu.findItem(R.id.menu_checklist);                                          </span>


<span  style=""> 593                                                                                                                    </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 594              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 595              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 596              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span  style=""> 597                                                                                                                    </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 598              // Disable actions when note is in Trash or markdown view is shown on large device.                   </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 599              if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) {          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 600                  pinItem.setEnabled(false);                                                                        </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 601                  shareItem.setEnabled(false);                                                                      </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 602                  historyItem.setEnabled(false);                                                                    </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 603                  publishItem.setEnabled(false);                                                                    </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 604                  copyLinkItem.setEnabled(false);                                                                   </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 605                  markdownItem.setEnabled(false);                                                                   </span>
<span class="-6995247234745329445" onmouseenter="enter('-6995247234745329445');" onmouseout="out('-6995247234745329445');" style=""> 606                  checklistItem.setEnabled(false);                                                                  </span>
<span class="-8886363035987488742" onmouseenter="enter('-8886363035987488742');" onmouseout="out('-8886363035987488742');" style=""> 607                  DrawableUtils.setMenuItemAlpha(checklistItem, 0.3);  // 0.3 is 30% opacity.                       </span>


<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 608              } else {                                                                                              </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 609                  pinItem.setEnabled(true);                                                                         </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 610                  shareItem.setEnabled(true);                                                                       </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 611                  historyItem.setEnabled(true);                                                                     </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 612                  publishItem.setEnabled(true);                                                                     </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 613                  copyLinkItem.setEnabled(mNote.isPublished());                                                     </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 614                  markdownItem.setEnabled(true);                                                                    </span>
<span class="-827625357182469297" onmouseenter="enter('-827625357182469297');" onmouseout="out('-827625357182469297');" style=""> 615                  checklistItem.setEnabled(true);                                                                   </span>
<span class="-1465508522963050190" onmouseenter="enter('-1465508522963050190');" onmouseout="out('-1465508522963050190');" style=""> 616                  DrawableUtils.setMenuItemAlpha(checklistItem, 1.0);  // 1.0 is 100% opacity.                      </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617              }                                                                                                     </span>
<span  style=""> 618                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 619              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 620                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 621              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 622                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624          }                                                                                                         </span>
<span  style=""> 625                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 626          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                        </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 627          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628      }                                                                                                             </span>
<span  style=""> 629                                                                                                                    </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style=""> 630      private void insertChecklist() {                                                                              </span>



<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 631          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 632              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 633          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 634              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 635              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636          }                                                                                                         </span>
<span  style=""> 637                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 638          AnalyticsTracker.track(                                                                                   </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 639              EDITOR_CHECKLIST_INSERTED,                                                                            </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 640              CATEGORY_NOTE,                                                                                        </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 641              &quot;toolbar_button&quot;                                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 642          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643      }                                                                                                             </span>
<span  style=""> 644                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 645      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 646      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 647          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 648          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 649              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 650              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652      }                                                                                                             </span>
<span  style=""> 653                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 654      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 655          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 656          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657      }                                                                                                             </span>
<span  style=""> 658                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 659      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 660          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661      }                                                                                                             </span>
<span  style=""> 662                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 663      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 664          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665      }                                                                                                             </span>
<span  style=""> 666                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 667      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 668          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 669          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span  style=""> 670                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 671          new Handler().postDelayed(                                                                                </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 672              new Runnable() {                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 673                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 674                  public void run() {                                                                               </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 675                      requireActivity().invalidateOptionsMenu();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 676                  }                                                                                                 </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 677              },                                                                                                    </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 678              getResources().getInteger(R.integer.time_animation)                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 679          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680      }                                                                                                             </span>
<span  style=""> 681                                                                                                                    </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 682      private void shareNote() {                                                                                    </span>

<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 683          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 684              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 685              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 686              AnalyticsTracker.track(                                                                               </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 687                  EDITOR_NOTE_CONTENT_SHARED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 688                  CATEGORY_NOTE,                                                                                    </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 689                  &quot;action_bar_share_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 690              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692      }                                                                                                             </span>
<span  style=""> 693                                                                                                                    </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 694      private void showHistory() {                                                                                  </span>

<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 695          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 696              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 697              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 698              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 699          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 700              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702      }                                                                                                             </span>
<span  style=""> 703                                                                                                                    </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 704      private void showInfo() {                                                                                     </span>



<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 705          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 706              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 707              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 708              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 709          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710      }                                                                                                             </span>
<span  style=""> 711                                                                                                                    </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 712      private void setMarkdown(boolean isChecked) {                                                                 </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 713          mIsMarkdownEnabled = isChecked;                                                                           </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 714          Activity activity = getActivity();                                                                        </span>
<span  style=""> 715                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 716          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 717              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span  style=""> 718                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 719              if (mIsMarkdownEnabled) {                                                                             </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 720                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 721                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 722                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 723                      // Get markdown fragment and update content                                                   </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 724                      mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                             </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 725                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 727              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 728                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 729              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 730          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 731              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 732              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733          }                                                                                                         </span>
<span  style=""> 734                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 735          saveNote();                                                                                               </span>
<span  style=""> 736                                                                                                                    </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 737          // Set preference so that next new note will have markdown enabled.                                       </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 738          SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());                </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 739          SharedPreferences.Editor editor = prefs.edit();                                                           </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 740          editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 741          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742      }                                                                                                             </span>
<span  style=""> 743                                                                                                                    </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 744      protected void setMarkdownEnabled(boolean enabled) {                                                          </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 745          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 746                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 747          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 748              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 749          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750      }                                                                                                             </span>
<span  style=""> 751                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 752      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 753          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 754                  mCss,                                                                                             </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 755                  mContentEditText.getPlainTextContent()                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 756          );                                                                                                        </span>
<span  style=""> 757                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 758          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 759      }                                                                                                             </span>
<span  style=""> 760                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 761      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 762          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 763              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 764                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 765          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 766                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 767          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 768              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 769          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 770              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 771          }                                                                                                         </span>
<span  style=""> 772                                                                                                                    </span>
<span  style=""> 773                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 774          saveNote();                                                                                               </span>
<span  style=""> 775                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 776          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777      }                                                                                                             </span>
<span  style=""> 778                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 779      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 780          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 781          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 782          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783      }                                                                                                             </span>
<span  style=""> 784                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 785      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 786          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 787              // Restore the cursor position if possible.                                                           </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 788              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 788              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 789              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 790                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 791              if (isNoteUpdate) {                                                                                   </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 792                  // Update markdown and preview flags from updated note.                                           </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 793                  mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                                   </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 794                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span  style=""> 795                                                                                                                    </span>
<span class="4759499849938166400" onmouseenter="enter('4759499849938166400');" onmouseout="out('4759499849938166400');" style=""> 796                  // Show/Hide tabs based on markdown flag.                                                         </span>
<span class="-8298439963273968846" onmouseenter="enter('-8298439963273968846');" onmouseout="out('-8298439963273968846');" style=""> 797                  setMarkdown(mIsMarkdownEnabled);                                                                  </span>
<span  style=""> 798                                                                                                                    </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 799                  // Save note so any local changes get synced.                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 800                  mNote.save();                                                                                     </span>
<span  style=""> 801                                                                                                                    </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 802                  // Update current note object on large screen devices in landscape orientation.                   </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 803                  if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                                      </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 804                      ((NotesActivity) requireActivity()).setCurrentNote(mNote);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 805                  }                                                                                                 </span>
<span  style=""> 806                                                                                                                    </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 807                  // Update overflow popup menu.                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 808                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span  style=""> 809                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 810                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 811                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 812                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 813                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815              }                                                                                                     </span>
<span  style=""> 816                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 817              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 818              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 819              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821      }                                                                                                             </span>
<span  style=""> 822                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 823      private void updateTagList() {                                                                                </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 824          setChips(mNote.getTagString());                                                                           </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 825          mTagInput.setText(&quot;&quot;);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826      }                                                                                                             </span>
<span  style=""> 827                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 828      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 829          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 830          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 831          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 832          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 833          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 834          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 835          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 836          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 837                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 838          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 839                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 840          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 841                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 842          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 843                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 844          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 845          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 846              return newText.length();                                                                              </span>
<span  style=""> 847                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 848          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 849          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 850                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 851          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 852              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 852              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 853              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 853              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 854          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 855              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 856          }                                                                                                         </span>
<span  style=""> 857                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 858          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 859          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 860              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 861                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 862          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 863          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864      }                                                                                                             </span>
<span  style=""> 865                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 866      @Override                                                                                                     </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 867      public void onTagAdded(String tag) {                                                                          </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 868          if (mNote == null || !isAdded()) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 869              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870          }                                                                                                         </span>
<span  style=""> 871                                                                                                                    </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 872          if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 873              AnalyticsTracker.track(                                                                               </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 874                  EDITOR_TAG_ADDED,                                                                                 </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 875                  CATEGORY_NOTE,                                                                                    </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 876                  &quot;tag_added_to_note&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 877              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878          }                                                                                                         </span>
<span  style=""> 879                                                                                                                    </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 880          mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 881          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 882          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 883          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884      }                                                                                                             </span>
<span  style=""> 885                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 887      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 888          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889      }                                                                                                             </span>
<span  style=""> 890                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 891      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 892      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 893          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 894          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 895          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896      }                                                                                                             </span>
<span  style=""> 897                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 898      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 899      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 900          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 901          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 902              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 903              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904          }                                                                                                         </span>
<span  style=""> 905                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 906          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 907          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 908              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 909              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910          }                                                                                                         </span>
<span  style=""> 911                                                                                                                    </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 912          if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                             </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 913              ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 914          }                                                                                                         </span>
<span  style=""> 915                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 916          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 917          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 918          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 919          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 920      }                                                                                                             </span>
<span  style=""> 921                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 922      /**                                                                                                           </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 923       * Set the note title to be a larger size and bold style.                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 924       *                                                                                                            </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style=""> 925       * Remove all existing spans before applying spans or performance issues will occur.  Since both              </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style=""> 926       * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all               </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style=""> 927       * spans are removed when {@link MetricAffectingSpan} is removed.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 928       */                                                                                                           </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 929      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""> 930          for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {     </span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style=""> 931              if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                                  </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 932                  editable.removeSpan(span);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934          }                                                                                                         </span>
<span  style=""> 935                                                                                                                    </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 936          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span  style=""> 937                                                                                                                    </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style=""> 938          if (newLinePosition == 0) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 939              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940          }                                                                                                         </span>
<span  style=""> 941                                                                                                                    </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style=""> 942          int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();                       </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""> 943          editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);      </span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""> 944          editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945      }                                                                                                             </span>
<span  style=""> 946                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 947      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 948          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 949          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 950          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 951          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952      }                                                                                                             </span>
<span  style=""> 953                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 954      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 955          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 956              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 957          }                                                                                                         </span>
<span  style=""> 958                                                                                                                    </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 959          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>








<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960      }                                                                                                             </span>
<span  style=""> 961                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 962      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 963          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 964              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 965              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966          }                                                                                                         </span>
<span  style=""> 967                                                                                                                    </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 968          if (mPlaceholderView != null) {                                                                           </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style=""> 969              mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 970          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971      }                                                                                                             </span>
<span  style=""> 972                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 973      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 974      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 975          if (!hasFocus) {                                                                                          </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style=""> 976              String tags = getNoteTagsString().trim();                                                             </span>
<span  style=""> 977                                                                                                                    </span>
<span class="402754191134572822" onmouseenter="enter('402754191134572822');" onmouseout="out('402754191134572822');" style=""> 978              if (mTagInput.getText().toString().trim().length() &gt; 0) {                                             </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style=""> 979                  onTagAdded(mTagInput.getText().toString());                                                       </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style=""> 980              } else if (tags.length() &gt; 0) {                                                                       </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style=""> 981                  setChips(tags);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984      }                                                                                                             </span>
<span  style=""> 985                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 986      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 987          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988      }                                                                                                             </span>
<span  style=""> 989                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 990      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 991          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992      }                                                                                                             </span>
<span  style=""> 993                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 994      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 995          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 996              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 997          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 998              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000      }                                                                                                             </span>
<span  style="">1001                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1002      private String getNoteTagsString() {                                                                          </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1003          StringBuilder tags = new StringBuilder();                                                                 </span>
<span  style="">1004                                                                                                                    </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1005          for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                                      </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1006              tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007          }                                                                                                         </span>
<span  style="">1008                                                                                                                    </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1009          return tags.toString();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010      }                                                                                                             </span>
<span  style="">1011                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1012      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1013       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1014       */                                                                                                           </span>
<span  style="">1015                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1016      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1017      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1018          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1019          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1020              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1021          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1022      }                                                                                                             </span>
<span  style="">1023                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1024      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1025      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1026          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1027          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1028              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1029          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030      }                                                                                                             </span>
<span  style="">1031                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1032      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1033      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1034          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1035              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036          }                                                                                                         </span>
<span  style="">1037                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1038          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1039              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040          }                                                                                                         </span>
<span  style="">1041                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1042          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1043          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1044          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1045              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1047          ft.addToBackStack(null);                                                                                  </span>
<span  style="">1048                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1049          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1050          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1051          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1052          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053      }                                                                                                             </span>
<span  style="">1054                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1055      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1056      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1057          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058      }                                                                                                             </span>
<span  style="">1059                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1060      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1061      public void onShareDismissed() {                                                                              </span>
<span  style="">1062                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063      }                                                                                                             </span>
<span  style="">1064                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1065      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1066       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1067       */                                                                                                           </span>
<span  style="">1068                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1069      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1070      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1071          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1072          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1073              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075      }                                                                                                             </span>
<span  style="">1076                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1077      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1078      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1079          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1080              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1082          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083      }                                                                                                             </span>
<span  style="">1084                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1085      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1086      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1087          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1088              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089          }                                                                                                         </span>
<span  style="">1090                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1091          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1092              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094      }                                                                                                             </span>
<span  style="">1095                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1096      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1097      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1098          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099      }                                                                                                             </span>
<span  style="">1100                                                                                                                    </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="">1101      protected void saveNote() {                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1102          try {                                                                                                     </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1103              if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||            </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1104                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1104                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1105                  return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1106              } else {                                                                                              </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1107                  mNote = mNotesBucket.get(mNote.getSimperiumKey());                                                </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1108                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109              }                                                                                                     </span>
<span  style="">1110                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1111              String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1112              String tagString = getNoteTagsString();                                                               </span>
<span  style="">1113                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1114              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1114              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnableðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1115                  mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1116                  mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1117                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1118                  mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1119                  mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1120                  mNote.save();                                                                                     </span>
<span  style="">1121                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1122                  AnalyticsTracker.track(                                                                           </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1123                      EDITOR_NOTE_EDITED,                                                                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1124                      CATEGORY_NOTE,                                                                                </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1125                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1126                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127              }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1128          } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1129              exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131      }                                                                                                             </span>
<span  style="">1132                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1133      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1134      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1135      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1136      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1137          mCurrentCursorPosition = selEnd;                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1138          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1139              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1140              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1141                  return;                                                                                           </span>
<span  style="">1142                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1143              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1144              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1145                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1146                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1147                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1147                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1148                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1149                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1150                      updateMenuItems();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1151                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152                  }                                                                                                 </span>
<span  style="">1153                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1154                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1155                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1156                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1157                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1158                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159                      }                                                                                             </span>
<span  style="">1160                                                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1161                      updateMenuItems();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1163              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1164                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1165                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1167          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1168              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1169              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171      }                                                                                                             </span>
<span  style="">1172                                                                                                                    </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1173      private void updateMenuItems() {                                                                              </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1174          mCopyMenuItem.setIcon(mCopyIcon);                                                                         </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1175          mShareMenuItem.setIcon(mShareIcon);                                                                       </span>
<span  style="">1176                                                                                                                    </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1177          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1178              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1179                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1180                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1181              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1182                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1183                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1184              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1185                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1186                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1187              } else {                                                                                              </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1188                  mViewLinkMenuItem.setIcon(mBrowserIcon);                                                          </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1189                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192      }                                                                                                             </span>
<span  style="">1193                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1194      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1195          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1196              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1197              mNote.save();                                                                                         </span>
<span  style="">1198                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1199              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1200              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1201                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1202              AnalyticsTracker.track(                                                                               </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1203                  isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                                    </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1204                  CATEGORY_NOTE,                                                                                    </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1205                  &quot;publish_note_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1206              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1208      }                                                                                                             </span>
<span  style="">1209                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1210      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1211          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1212              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213          }                                                                                                         </span>
<span  style="">1214                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1215          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1216          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1217                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1218          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1219              if (mNote.isPublished()) {                                                                            </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1220                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1221                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)                   </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1222                              .show();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1223                  } else {                                                                                          </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1224                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1225                              .setAction(                                                                           </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1226                                  R.string.undo,                                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1227                                  new View.OnClickListener() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1228                                      @Override                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1229                                      public void onClick(View v) {                                                 </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1230                                          mHideActionOnSuccess = true;                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1231                                          unpublishNote();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1232                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233                                  }                                                                                 </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1234                              )                                                                                     </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1235                              .show();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236                  }                                                                                                 </span>
<span  style="">1237                                                                                                                    </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1238 -                copyToClipboard(mNote.getPublishedUrl());                                                         </span>
<span class="1413437201716442742" onmouseenter="enter('1413437201716442742');" onmouseout="out('1413437201716442742');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1239 +                BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl());                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1240              } else {                                                                                              </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1241                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1242                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1243                              .show();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1244                  } else {                                                                                          </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1245                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1246                              .setAction(                                                                           </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1247                                  R.string.undo,                                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1248                                  new View.OnClickListener() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1249                                      @Override                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1250                                      public void onClick(View v) {                                                 </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1251                                          mHideActionOnSuccess = true;                                              </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1252                                          publishNote();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254                                  }                                                                                 </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1255                              )                                                                                     </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1256                              .show();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1259          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1260              if (mNote.isPublished()) {                                                                            </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1261                  Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1262                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1263                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1264                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1265                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1266                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1267                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1268                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1269                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1271                          ).show();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1272              } else {                                                                                              </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1273                  Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                            </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1274                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1275                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1276                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1277                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1278                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1279                                      mHideActionOnSuccess = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1280                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1283                          ).show();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1285          }                                                                                                         </span>
<span  style="">1286                                                                                                                    </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1287          mHideActionOnSuccess = false;                                                                             </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1288          requireActivity().invalidateOptionsMenu();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289      }                                                                                                             </span>
<span  style="">1290                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1291      private void publishNote() {                                                                                  </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1292          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1293              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1294              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295          }                                                                                                         </span>
<span  style="">1296                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1297          if (isAdded()) {                                                                                          </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style="">1298              mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);      </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1299              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300          }                                                                                                         </span>
<span  style="">1301                                                                                                                    </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1302          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303      }                                                                                                             </span>
<span  style="">1304                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1305      private void unpublishNote() {                                                                                </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1306          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1307              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1308              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309          }                                                                                                         </span>
<span  style="">1310                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1311          if (isAdded()) {                                                                                          </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style="">1312              mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);    </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1313              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1314          }                                                                                                         </span>
<span  style="">1315                                                                                                                    </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1316          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317      }                                                                                                             </span>
<span  style="">1318                                                                                                                    </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1319 -    private void copyToClipboard(String text) {                                                                   </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1320 -        ClipboardManager clipboard = (ClipboardManager) requireActivity()                                         </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1321 -                .getSystemService(Context.CLIPBOARD_SERVICE);                                                     </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1322 -        ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                                </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1323 -        if (clipboard != null) {                                                                                  </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1324 -            clipboard.setPrimaryClip(clip);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1325 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1326 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1327 -                                                                                                                  </span>









<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1328      private void showShareSheet() {                                                                               </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1329          if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                             </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1330              mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332      }                                                                                                             </span>
<span  style="">1333                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1334      private void showInfoSheet() {                                                                                </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1335          if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                               </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1336              mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338      }                                                                                                             </span>
<span  style="">1339                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1340      private void showHistorySheet() {                                                                             </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1341          if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                         </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1342              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1343              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1344              saveNote();                                                                                           </span>
<span  style="">1345                                                                                                                    </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1346              mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348      }                                                                                                             </span>
<span  style="">1349                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1350      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1351       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1352       */                                                                                                           </span>
<span  style="">1353                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1354      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1355      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1356                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357      }                                                                                                             </span>
<span  style="">1358                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1359      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1360      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1361          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1362              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1363                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1364                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1365                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1366                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1367                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1368                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1369                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1370                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371                                  }                                                                                 </span>
<span  style="">1372                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1373                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1374                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1376                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1378                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1379                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1381              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1382          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383      }                                                                                                             </span>
<span  style="">1384                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1385      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1386      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1387          if (mIsPaused) {                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1388              mNotesBucket.removeListener(this);                                                                    </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1389              mNotesBucket.stop();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391      }                                                                                                             </span>
<span  style="">1392                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1393      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1394      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1395          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1396          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1397              return;                                                                                               </span>
<span  style="">1398                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1399          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1400          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1401              return;                                                                                               </span>
<span  style="">1402                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1403          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404      }                                                                                                             </span>
<span  style="">1405                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1406      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1407          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1408                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1409          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1410              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411          }                                                                                                         </span>
<span  style="">1412                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1413          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1414          protected void onPreExecute() {                                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1415              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1416                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1417              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1418                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1419                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421          }                                                                                                         </span>
<span  style="">1422                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1423          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1424          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1425              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1426                                                                                                                    </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1427              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1428                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1429              }                                                                                                     </span>
<span  style="">1430                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1431              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1432              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1433              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1434                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1435              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1436                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span  style="">1437                                                                                                                    </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1438                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1439                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1440                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1441                  }                                                                                                 </span>
<span  style="">1442                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1443                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1444                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1445                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1446                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1448              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1449                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1450                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span  style="">1451                                                                                                                    </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1452                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1453                      Note currentNote = notesCursor.getObject();                                                   </span>
<span  style="">1454                                                                                                                    </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1455                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1456                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1457                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460              }                                                                                                     </span>
<span  style="">1461                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1462              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1463          }                                                                                                         </span>
<span  style="">1464                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1465          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1466          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1467              final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                               </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style="">1468              if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1469                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470              }                                                                                                     </span>
<span  style="">1471                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1472              fragment.refreshContent(false);                                                                       </span>
<span  style="">1473                                                                                                                    </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1474              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1475                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1475                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1476                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1477                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1478              }                                                                                                     </span>
<span  style="">1479                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1480              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1481                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1482              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1483                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1484                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1485                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1486                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1487                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1488                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1489                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1490                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1491                          }                                                                                         </span>
<span  style="">1492                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1493                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1493                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSysðŸ”µ</abbr></span>
<span  style="">1494                                                                                                                    </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1495                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1496                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1499                  }, 100);                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1500              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1501                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1502                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1503              }                                                                                                     </span>
<span  style="">1504                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1505              fragment.updateMarkdownView();                                                                        </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1506              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1507              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1508              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510      }                                                                                                             </span>
<span  style="">1511                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1512      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1513          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1514                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1515          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1516              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1517          }                                                                                                         </span>
<span  style="">1518                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1519          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1520          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1521              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1522                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1523              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1524                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1525              }                                                                                                     </span>
<span  style="">1526                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1527              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528          }                                                                                                         </span>
<span  style="">1529                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1530          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1531          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1532              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1533                                                                                                                    </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1534              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1535                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1536                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1537                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540      }                                                                                                             </span>
<span  style="">1541                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1542      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1543          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1544              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545          }                                                                                                         </span>
<span  style="">1546                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1547          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1548              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1550      }                                                                                                             </span>
<span  style="">1551                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1552      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1553      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1554          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1555              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556          }                                                                                                         </span>
<span  style="">1557                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1558          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1559          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1560              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1561              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1562          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1563              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1564              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1565                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1566                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1567                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1569              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1570              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1571          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1572      }                                                                                                             </span>
<span  style="">1573                                                                                                                    </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1574      private ColorStateList getChipBackgroundColor() {                                                             </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1575          int[][] states = new int[][] {                                                                            </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1576              new int[] { android.R.attr.state_checked}, // checked                                                 </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1577              new int[] {-android.R.attr.state_checked}  // unchecked                                               </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1578          };                                                                                                        </span>
<span  style="">1579                                                                                                                    </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1580          int[] colors = new int[] {                                                                                </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1581              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),              </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1582              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)              </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1583          };                                                                                                        </span>
<span  style="">1584                                                                                                                    </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1585          return new ColorStateList(states, colors);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586      }                                                                                                             </span>
<span  style="">1587                                                                                                                    </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1588      private void setChips(CharSequence text) {                                                                    </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1589          mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                  </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1590          mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                    </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1591          mTagChips.setSingleSelection(true);                                                                       </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1592          mTagChips.removeAllViews();                                                                               </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1593          SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                              </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1594          tags.setString(text.toString());                                                                          </span>
<span  style="">1595                                                                                                                    </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1596          for (String tag : tags) {                                                                                 </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1597              final Chip chip = new Chip(requireContext());                                                         </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1598              chip.setText(tag);                                                                                    </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1599              chip.setCheckable(true);                                                                              </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1600              chip.setCheckedIcon(null);                                                                            </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1601              chip.setChipBackgroundColor(getChipBackgroundColor());                                                </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1602              chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor));          </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1603              chip.setStateListAnimator(null);                                                                      </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1604              chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1605                  @Override                                                                                         </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1606                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                      </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1607                      chip.setCloseIconVisible(isChecked);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1608                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1609              });                                                                                                   </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1610              chip.setOnCloseIconClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1611                  @Override                                                                                         </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1612                  public void onClick(View view) {                                                                  </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1613                      mTagChips.removeView(view);                                                                   </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1614                      updateTags();                                                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1615                      AnalyticsTracker.track(                                                                       </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1616                          EDITOR_TAG_REMOVED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1617                          CATEGORY_NOTE,                                                                            </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1618                          &quot;tag_removed_from_note&quot;                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1619                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1621              });                                                                                                   </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1622              mTagChips.addView(chip);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624      }                                                                                                             </span>
<span  style="">1625                                                                                                                    </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1626      private void updateTags() {                                                                                   </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1627          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1628              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1629          }                                                                                                         </span>
<span  style="">1630                                                                                                                    </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1631          mNote.setTagString(getNoteTagsString());                                                                  </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1632          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1633          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1634          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1635      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1636  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   8  import android.content.SharedPreferences;                                                                         </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   9  import android.content.res.ColorStateList;                                                                        </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  10  import android.database.Cursor;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">  11  import android.graphics.Typeface;                                                                                 </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  12  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  13  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  14  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  15  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  16  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  17  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  18  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  19  import android.text.Spanned;                                                                                      </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  20  import android.text.TextUtils.SimpleStringSplitter;                                                               </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  21  import android.text.TextWatcher;                                                                                  </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  22  import android.text.style.MetricAffectingSpan;                                                                    </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  23  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  24  import android.text.style.StyleSpan;                                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  25  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  26  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  27  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  28  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  29  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  30  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  31  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  32  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  33  import android.view.ViewGroup;                                                                                    </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  34  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  35  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  36  import android.webkit.WebView;                                                                                    </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  37  import android.widget.CompoundButton;                                                                             </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  38  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  39  import android.widget.LinearLayout;                                                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  40  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  41  import android.widget.Toast;                                                                                      </span>
<span  style="">  42                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  43  import androidx.annotation.NonNull;                                                                               </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  44  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  45  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  46 +import androidx.core.app.ShareCompat;                                                                             </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  47  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  48  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  49  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  50  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  51  import androidx.preference.PreferenceManager;                                                                     </span>
<span  style="">  52                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  53  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  54  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  55  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  56  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>

<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  57  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  58  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  59  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  60  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  61  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  62  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  63  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  64  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  65  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  66  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  67  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  68  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  69  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  70  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  71  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  72  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  73  import com.google.android.material.chip.Chip;                                                                     </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  74  import com.google.android.material.chip.ChipGroup;                                                                </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  75  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  76  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  77  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  78  import com.simperium.client.Query;                                                                                </span>
<span  style="">  79                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  80  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  81  import java.util.Calendar;                                                                                        </span>
<span  style="">  82                                                                                                                    </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  83  import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                                 </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  84  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;                </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  85  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;               </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  86  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;                       </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  87  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;                    </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  88  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;                  </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  89  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                         </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  90  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;                       </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  91  import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                              </span>
<span  style="">  92                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  93  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  94          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  95          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  96          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  97          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  98          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style="">  99                                                                                                                    </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 100      public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 101      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 102      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 103      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 104      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 105      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 106      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 107      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 108      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 109      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 110      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 111      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 112      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 114          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 115              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 117      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 118      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 119      private View mRootView;                                                                                       </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 120      private View mTagPadding;                                                                                     </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 121      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 122      private ChipGroup mTagChips;                                                                                  </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 123      private TagsMultiAutoCompleteTextView mTagInput;                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 124      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 125      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 126      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 127      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 128      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 129      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 130      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 131      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 132      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 133      private ActionMode mActionMode;                                                                               </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +    private MenuItem mChecklistMenuItem;                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 135      private MenuItem mCopyMenuItem;                                                                               </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +    private MenuItem mInformationMenuItem;                                                                        </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 137      private MenuItem mShareMenuItem;                                                                              </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 138      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 139      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 140      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 141      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 142      private Drawable mCallIcon;                                                                                   </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 143      private Drawable mCopyIcon;                                                                                   </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 144      private Drawable mEmailIcon;                                                                                  </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 145      private Drawable mMapIcon;                                                                                    </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 146      private Drawable mShareIcon;                                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 147      private Drawable mBrowserIcon;                                                                                </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 148      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 149      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 150      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 151      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 152      private boolean mIsPaused;                                                                                    </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 153      private boolean mIsFromWidget;                                                                                </span>
<span  style=""> 154                                                                                                                    </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 155      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 156      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 158          public void run() {                                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 159              if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 160                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161              }                                                                                                     </span>
<span  style=""> 162                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 163              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 165                  public void run() {                                                                               </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 166                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 166                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; ðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 167                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 168                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 171              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 173      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 174      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 175      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 176      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 177      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 178          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 179          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 180          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 181              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 182              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style=""> 183                                                                                                                    </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 184              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 185                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 186                  mCopyMenuItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 187                  mShareMenuItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 188                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 189                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 190                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 192                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193              }                                                                                                     </span>
<span  style=""> 194                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 195              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 195              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgrðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 196              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 196              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().ðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 197              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198          }                                                                                                         </span>
<span  style=""> 199                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 200          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 201          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 202          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 203          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 204              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205          }                                                                                                         </span>
<span  style=""> 206                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 207          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 208          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 209          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 210              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 211                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 212                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 213                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 214                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 215                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 216                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 217                              startActivity(i);                                                                     </span>

<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 218                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 219                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220                          }                                                                                         </span>

<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 221                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 223                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 224                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 225                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 226                          copyToClipboard(mLinkText);                                                               </span>

<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 227                          Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();             </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 228                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 230                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 231                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 232                      if (mLinkText != null) {                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 233 -                        showShareSheet();                                                                         </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +                        showShare(mLinkText);                                                                     </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 235                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 237                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 238                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 239                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241          }                                                                                                         </span>
<span  style=""> 242                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 243          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 244          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 245          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 246              mActionMode = null;                                                                                   </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 247              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 248                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 249                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 250                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 251                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 251                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.trðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 253                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 254                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 255              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 257      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 258      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 259      private boolean mHideActionOnSuccess;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 260      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 261      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 263          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 264              if (!isAdded()) return;                                                                               </span>
<span  style=""> 265                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 266              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 268                  public void run() {                                                                               </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 270                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 271                      mNote.save();                                                                                 </span>
<span  style=""> 272                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 273                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 275              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 277      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 278      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 279      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 280      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 281                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 282      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 283       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 284       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 285       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 286      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287      }                                                                                                             </span>
<span  style=""> 288                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 290      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 291          super.onCreate(savedInstanceState);                                                                       </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 292          mInfoBottomSheet = new InfoBottomSheetDialog(this);                                                       </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 293          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 294          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 295                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 296          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 297          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 298                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 299          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 299          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 300          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 300          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actioðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 301          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 301          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 302          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 302          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 303          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 303          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionMðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 304          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 304          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actioðŸ”µ</abbr></span>
<span  style=""> 305                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 306          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 307          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 308          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 309                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 310          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 311                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 312          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 313              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 314              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 315                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 316                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 317                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318              }                                                                                                     </span>
<span  style=""> 319                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 320              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 321              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 322                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 323                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324              }                                                                                                     </span>
<span  style=""> 325                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 326              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 327              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 328                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329              }                                                                                                     </span>
<span  style=""> 330                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 331              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 332              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 333                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 334                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 335                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 336                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 337                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 338                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 339                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 340                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 341                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 342                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 343                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 344                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 346          };                                                                                                        </span>
<span  style=""> 347                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 348          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349      }                                                                                                             </span>
<span  style=""> 350                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 351      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 352      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 353          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 354          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 355          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 356          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 357          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 358          mContentEditText.setOnFocusChangeListener(this);                                                          </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 359          mTagInput = mRootView.findViewById(R.id.tag_input);                                                       </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 360          mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                        </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 361          mTagInput.setTokenizer(new SpaceTokenizer());                                                             </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 362          mTagInput.setOnFocusChangeListener(this);                                                                 </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 363          mTagChips = mRootView.findViewById(R.id.tag_chips);                                                       </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 364          mTagPadding = mRootView.findViewById(R.id.tag_padding);                                                   </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 365          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 366          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span  style=""> 367                                                                                                                    </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 368          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 369              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 370              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 371              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 372              mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 373                      ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 374                      : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375          }                                                                                                         </span>
<span  style=""> 376                                                                                                                    </span>
<span class="3045371367152506055" onmouseenter="enter('3045371367152506055');" onmouseout="out('3045371367152506055');" style=""> 377          mTagInput.setAdapter(mAutocompleteAdapter);                                                               </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 378          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 379                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 380          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 381              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 382              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span  style=""> 383                                                                                                                    </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 384              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 385                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386              }                                                                                                     </span>
<span  style=""> 387                                                                                                                    </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 388              mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                             </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 389              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 390          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {            </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 391              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 392              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span  style=""> 393                                                                                                                    </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 394              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 395                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397          }                                                                                                         </span>
<span  style=""> 398                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 399          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 400          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 401              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 402              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 403                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 404                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 405                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 406                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407                      }                                                                                             </span>
<span  style=""> 408                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 409                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 410                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 411                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 412                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 413                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 414                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 415                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416                      }                                                                                             </span>
<span  style=""> 417                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 418                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 419                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 420                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 421                      ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 422                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 425          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 426          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 427          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428      }                                                                                                             </span>
<span  style=""> 429                                                                                                                    </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 430      public void scrollToMatch(int location) {                                                                     </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 431          if (isAdded()) {                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 432              // Calculate how far to scroll to bring the match into view                                           </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 433              Layout layout = mContentEditText.getLayout();                                                         </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 434              int lineTop = layout.getLineTop(layout.getLineForOffset(location));                                   </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 435              ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437      }                                                                                                             </span>
<span  style=""> 438                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 439      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 440      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 441          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 442          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 443          mNotesBucket.addListener(this);                                                                           </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 444          mTagInput.setOnTagAddedListener(this);                                                                    </span>
<span  style=""> 445                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 446          if (mContentEditText != null) {                                                                           </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""> 447              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));       </span>
<span  style=""> 448                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 449              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 450                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453      }                                                                                                             </span>
<span  style=""> 454                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 455      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 456          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 458              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 459                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 460                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                  }                                                                                                 </span>
<span  style=""> 462                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 463                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 463                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(ContexðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 464                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 465                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 468          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469      }                                                                                                             </span>
<span  style=""> 470                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 472      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 473          super.onPause();  // Always call the superclass method first                                              </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 474          mIsPaused = true;                                                                                         </span>
<span  style=""> 475                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 476          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 477          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 478                                                                                                                    </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 479          mTagInput.setOnTagAddedListener(null);                                                                    </span>
<span  style=""> 480                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 481          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 482              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483          }                                                                                                         </span>
<span  style=""> 484                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 485          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 486              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487          }                                                                                                         </span>
<span  style=""> 488                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 489          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 490              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491          }                                                                                                         </span>
<span  style=""> 492                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 493          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 494          saveNote();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495      }                                                                                                             </span>
<span  style=""> 496                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 497      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 498      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 499          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 500          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 501          mNotesBucket.stop();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502      }                                                                                                             </span>
<span  style=""> 503                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 504      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 505      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 506          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 507                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 508          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 509              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511      }                                                                                                             </span>
<span  style=""> 512                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 513      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 514      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 515          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span  style=""> 516                                                                                                                    </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 517          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 517          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFrðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 518              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519          }                                                                                                         </span>
<span  style=""> 520                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 521          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 522          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523      }                                                                                                             </span>
<span  style=""> 524                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 525      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 526      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 527          switch (item.getItemId()) {                                                                               </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 528              case R.id.menu_checklist:                                                                             </span>
<span class="-3999706161588174591" onmouseenter="enter('-3999706161588174591');" onmouseout="out('-3999706161588174591');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 529 -                DrawableUtils.startAnimatedVectorDrawable(item.getIcon());                                        </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 530                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 531                  return true;                                                                                      </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 532              case R.id.menu_copy:                                                                                  </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 533                  copyToClipboard(mNote.getPublishedUrl());                                                         </span>

<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 534                  Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 535                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 536              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 537                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 538                  return true;                                                                                      </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 539              case R.id.menu_info:                                                                                  </span>
<span class="-3999706161588174591" onmouseenter="enter('-3999706161588174591');" onmouseout="out('-3999706161588174591');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 540 -                DrawableUtils.startAnimatedVectorDrawable(item.getIcon());                                        </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 541                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 542                  return true;                                                                                      </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 543              case R.id.menu_markdown:                                                                              </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 544                  setMarkdown(!item.isChecked());                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 545                  return true;                                                                                      </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 546              case R.id.menu_pin:                                                                                   </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 547                  NoteUtils.setNotePin(mNote, !item.isChecked());                                                   </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 548                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 549                  return true;                                                                                      </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 550              case R.id.menu_publish:                                                                               </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 551                  if (item.isChecked()) {                                                                           </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 552                      unpublishNote();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 553                  } else {                                                                                          </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 554                      publishNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                  }                                                                                                 </span>
<span  style=""> 556                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 557                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 558              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 559                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 560                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 561              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 562                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 563                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564                  }                                                                                                 </span>
<span  style=""> 565                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 566                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 567                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 568              case android.R.id.home:                                                                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 569                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 570                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571                  }                                                                                                 </span>
<span  style=""> 572                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 573                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 574                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 575              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 576                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578      }                                                                                                             </span>
<span  style=""> 579                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 580      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 581      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 582          if (mNote != null) {                                                                                      </span>
<span class="-9014548566711549978" onmouseenter="enter('-9014548566711549978');" onmouseout="out('-9014548566711549978');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 583 -            menu.findItem(R.id.menu_info).setVisible(true);                                                       </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 584              MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                      </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 585              MenuItem shareItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 586              MenuItem historyItem = menu.findItem(R.id.menu_history);                                              </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 587              MenuItem publishItem = menu.findItem(R.id.menu_publish);                                              </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 588              MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 589              MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                            </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 590              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span class="-2914120973027721079" onmouseenter="enter('-2914120973027721079');" onmouseout="out('-2914120973027721079');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 591 -            MenuItem checklistItem = menu.findItem(R.id.menu_checklist);                                          </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 592 +            mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                              </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 593 +            mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                                </span>
<span  style=""> 594                                                                                                                    </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 595              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 596              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 597              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span  style=""> 598                                                                                                                    </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 599              // Disable actions when note is in Trash or markdown view is shown on large device.                   </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 600              if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) {          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 601                  pinItem.setEnabled(false);                                                                        </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 602                  shareItem.setEnabled(false);                                                                      </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 603                  historyItem.setEnabled(false);                                                                    </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 604                  publishItem.setEnabled(false);                                                                    </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 605                  copyLinkItem.setEnabled(false);                                                                   </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 606                  markdownItem.setEnabled(false);                                                                   </span>
<span class="-6995247234745329445" onmouseenter="enter('-6995247234745329445');" onmouseout="out('-6995247234745329445');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 607 -                checklistItem.setEnabled(false);                                                                  </span>
<span class="-8886363035987488742" onmouseenter="enter('-8886363035987488742');" onmouseout="out('-8886363035987488742');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 608 -                DrawableUtils.setMenuItemAlpha(checklistItem, 0.3);  // 0.3 is 30% opacity.                       </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 609 +                mChecklistMenuItem.setEnabled(false);                                                             </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 610 +                DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 611              } else {                                                                                              </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 612                  pinItem.setEnabled(true);                                                                         </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 613                  shareItem.setEnabled(true);                                                                       </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 614                  historyItem.setEnabled(true);                                                                     </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 615                  publishItem.setEnabled(true);                                                                     </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 616                  copyLinkItem.setEnabled(mNote.isPublished());                                                     </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 617                  markdownItem.setEnabled(true);                                                                    </span>
<span class="-827625357182469297" onmouseenter="enter('-827625357182469297');" onmouseout="out('-827625357182469297');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 618 -                checklistItem.setEnabled(true);                                                                   </span>
<span class="-1465508522963050190" onmouseenter="enter('-1465508522963050190');" onmouseout="out('-1465508522963050190');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 619 -                DrawableUtils.setMenuItemAlpha(checklistItem, 1.0);  // 1.0 is 100% opacity.                      </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 620 +                mChecklistMenuItem.setEnabled(true);                                                              </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 621 +                DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622              }                                                                                                     </span>
<span  style=""> 623                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 624              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 625                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 626              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 627                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629          }                                                                                                         </span>
<span  style=""> 630                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 631          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                        </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 632          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633      }                                                                                                             </span>
<span  style=""> 634                                                                                                                    </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 635 -    private void insertChecklist() {                                                                              </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 636 +    public void insertChecklist() {                                                                               </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 637 +        DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 638 +                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 639          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 640              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 641          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 642              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 643              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644          }                                                                                                         </span>
<span  style=""> 645                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 646          AnalyticsTracker.track(                                                                                   </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 647              EDITOR_CHECKLIST_INSERTED,                                                                            </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 648              CATEGORY_NOTE,                                                                                        </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 649              &quot;toolbar_button&quot;                                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 650          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651      }                                                                                                             </span>
<span  style=""> 652                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 653      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 654      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 655          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 656          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 657              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 658              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660      }                                                                                                             </span>
<span  style=""> 661                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 662      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 663          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 664          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665      }                                                                                                             </span>
<span  style=""> 666                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 667      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 668          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669      }                                                                                                             </span>
<span  style=""> 670                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 671      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 672          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 673      }                                                                                                             </span>
<span  style=""> 674                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 675      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 676          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 677          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span  style=""> 678                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 679          new Handler().postDelayed(                                                                                </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 680              new Runnable() {                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 681                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 682                  public void run() {                                                                               </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 683                      requireActivity().invalidateOptionsMenu();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684                  }                                                                                                 </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 685              },                                                                                                    </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 686              getResources().getInteger(R.integer.time_animation)                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 687          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688      }                                                                                                             </span>
<span  style=""> 689                                                                                                                    </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 690 -    private void shareNote() {                                                                                    </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 691 +    public void shareNote() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 692          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 693              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 694              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 695              AnalyticsTracker.track(                                                                               </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 696                  EDITOR_NOTE_CONTENT_SHARED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 697                  CATEGORY_NOTE,                                                                                    </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 698                  &quot;action_bar_share_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 699              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701      }                                                                                                             </span>
<span  style=""> 702                                                                                                                    </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 703 -    private void showHistory() {                                                                                  </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 704 +    public void showHistory() {                                                                                   </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 705          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 706              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 707              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 708              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 709          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 710              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 712      }                                                                                                             </span>
<span  style=""> 713                                                                                                                    </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 714 -    private void showInfo() {                                                                                     </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 715 +    public void showInfo() {                                                                                      </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 716 +        DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                                </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 717 +                                                                                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 718          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 719              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 720              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 721              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723      }                                                                                                             </span>
<span  style=""> 724                                                                                                                    </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 725      private void setMarkdown(boolean isChecked) {                                                                 </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 726          mIsMarkdownEnabled = isChecked;                                                                           </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 727          Activity activity = getActivity();                                                                        </span>
<span  style=""> 728                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 729          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 730              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span  style=""> 731                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 732              if (mIsMarkdownEnabled) {                                                                             </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 733                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 734                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 735                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 736                      // Get markdown fragment and update content                                                   </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 737                      mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                             </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 738                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 740              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 741                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 742              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 743          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 744              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 745              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746          }                                                                                                         </span>
<span  style=""> 747                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 748          saveNote();                                                                                               </span>
<span  style=""> 749                                                                                                                    </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 750          // Set preference so that next new note will have markdown enabled.                                       </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 751          SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());                </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 752          SharedPreferences.Editor editor = prefs.edit();                                                           </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 753          editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 754          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755      }                                                                                                             </span>
<span  style=""> 756                                                                                                                    </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 757      protected void setMarkdownEnabled(boolean enabled) {                                                          </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 758          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 759                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 760          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 761              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763      }                                                                                                             </span>
<span  style=""> 764                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 765      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 766          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 767                  mCss,                                                                                             </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 768                  mContentEditText.getPlainTextContent()                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 769          );                                                                                                        </span>
<span  style=""> 770                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 771          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772      }                                                                                                             </span>
<span  style=""> 773                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 774      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 775          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 776              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 777                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 778          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 779                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 780          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 781              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 782          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 783              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784          }                                                                                                         </span>
<span  style=""> 785                                                                                                                    </span>
<span  style=""> 786                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 787          saveNote();                                                                                               </span>
<span  style=""> 788                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 789          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790      }                                                                                                             </span>
<span  style=""> 791                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 792      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 793          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 794          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 795          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796      }                                                                                                             </span>
<span  style=""> 797                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 798      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 799          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 800              // Restore the cursor position if possible.                                                           </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 801              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 801              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 802              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 803                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 804              if (isNoteUpdate) {                                                                                   </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 805                  // Update markdown and preview flags from updated note.                                           </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 806                  mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                                   </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 807                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span  style=""> 808                                                                                                                    </span>
<span class="4759499849938166400" onmouseenter="enter('4759499849938166400');" onmouseout="out('4759499849938166400');" style=""> 809                  // Show/Hide tabs based on markdown flag.                                                         </span>
<span class="-8298439963273968846" onmouseenter="enter('-8298439963273968846');" onmouseout="out('-8298439963273968846');" style=""> 810                  setMarkdown(mIsMarkdownEnabled);                                                                  </span>
<span  style=""> 811                                                                                                                    </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 812                  // Save note so any local changes get synced.                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 813                  mNote.save();                                                                                     </span>
<span  style=""> 814                                                                                                                    </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 815                  // Update current note object on large screen devices in landscape orientation.                   </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 816                  if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                                      </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 817                      ((NotesActivity) requireActivity()).setCurrentNote(mNote);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818                  }                                                                                                 </span>
<span  style=""> 819                                                                                                                    </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 820                  // Update overflow popup menu.                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 821                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span  style=""> 822                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 823                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 824                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 825                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 826                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828              }                                                                                                     </span>
<span  style=""> 829                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 830              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 831              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 832              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834      }                                                                                                             </span>
<span  style=""> 835                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 836      private void updateTagList() {                                                                                </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 837          setChips(mNote.getTagString());                                                                           </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 838          mTagInput.setText(&quot;&quot;);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839      }                                                                                                             </span>
<span  style=""> 840                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 841      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 842          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 843          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 844          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 845          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 846          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 847          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 848          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 849          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 850                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 851          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 852                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 853          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 854                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 855          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 856                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 857          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 858          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 859              return newText.length();                                                                              </span>
<span  style=""> 860                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 861          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 862          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 863                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 864          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 865              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 865              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 866              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 866              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 867          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 868              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869          }                                                                                                         </span>
<span  style=""> 870                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 871          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 872          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 873              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 874                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 875          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 876          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 877      }                                                                                                             </span>
<span  style=""> 878                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 879      @Override                                                                                                     </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 880      public void onTagAdded(String tag) {                                                                          </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 881          if (mNote == null || !isAdded()) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 882              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883          }                                                                                                         </span>
<span  style=""> 884                                                                                                                    </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 885          if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 886              AnalyticsTracker.track(                                                                               </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 887                  EDITOR_TAG_ADDED,                                                                                 </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 888                  CATEGORY_NOTE,                                                                                    </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 889                  &quot;tag_added_to_note&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 890              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891          }                                                                                                         </span>
<span  style=""> 892                                                                                                                    </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style=""> 893          mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 894          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 895          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 896          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897      }                                                                                                             </span>
<span  style=""> 898                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 899      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 900      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 901          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902      }                                                                                                             </span>
<span  style=""> 903                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 904      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 905      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 906          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 907          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 908          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909      }                                                                                                             </span>
<span  style=""> 910                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 911      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 912      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 913          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 914          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 915              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 916              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917          }                                                                                                         </span>
<span  style=""> 918                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 919          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 920          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 921              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 922              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923          }                                                                                                         </span>
<span  style=""> 924                                                                                                                    </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style=""> 925          if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                             </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style=""> 926              ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927          }                                                                                                         </span>
<span  style=""> 928                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 929          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 930          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 931          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 932          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933      }                                                                                                             </span>
<span  style=""> 934                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 935      /**                                                                                                           </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style=""> 936       * Set the note title to be a larger size and bold style.                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 937       *                                                                                                            </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style=""> 938       * Remove all existing spans before applying spans or performance issues will occur.  Since both              </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style=""> 939       * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all               </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style=""> 940       * spans are removed when {@link MetricAffectingSpan} is removed.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 941       */                                                                                                           </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 942      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""> 943          for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {     </span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style=""> 944              if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                                  </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 945                  editable.removeSpan(span);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947          }                                                                                                         </span>
<span  style=""> 948                                                                                                                    </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 949          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span  style=""> 950                                                                                                                    </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style=""> 951          if (newLinePosition == 0) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 952              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953          }                                                                                                         </span>
<span  style=""> 954                                                                                                                    </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style=""> 955          int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();                       </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""> 956          editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);      </span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""> 957          editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958      }                                                                                                             </span>
<span  style=""> 959                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 960      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 961          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 962          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 963          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 964          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965      }                                                                                                             </span>
<span  style=""> 966                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 967      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 968          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 969              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 970          }                                                                                                         </span>
<span  style=""> 971                                                                                                                    </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 972          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 973 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 974 +                                                                                                                  </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 975 +    public boolean isPlaceholderVisible() {                                                                       </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 976 +        if (mPlaceholderView != null) {                                                                           </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 977 +            return mPlaceholderView.getVisibility() == View.VISIBLE;                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 978 +        } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 979 +            return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 980 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981      }                                                                                                             </span>
<span  style=""> 982                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 983      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 984          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 985              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 986              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987          }                                                                                                         </span>
<span  style=""> 988                                                                                                                    </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style=""> 989          if (mPlaceholderView != null) {                                                                           </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style=""> 990              mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 991          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992      }                                                                                                             </span>
<span  style=""> 993                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 994      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 995      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 996          if (!hasFocus) {                                                                                          </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style=""> 997              String tags = getNoteTagsString().trim();                                                             </span>
<span  style=""> 998                                                                                                                    </span>
<span class="402754191134572822" onmouseenter="enter('402754191134572822');" onmouseout="out('402754191134572822');" style=""> 999              if (mTagInput.getText().toString().trim().length() &gt; 0) {                                             </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1000                  onTagAdded(mTagInput.getText().toString());                                                       </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1001              } else if (tags.length() &gt; 0) {                                                                       </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1002                  setChips(tags);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1003              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005      }                                                                                                             </span>
<span  style="">1006                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1007      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1008          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009      }                                                                                                             </span>
<span  style="">1010                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1011      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1012          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013      }                                                                                                             </span>
<span  style="">1014                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1015      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1016          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1017              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1018          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1019              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1021      }                                                                                                             </span>
<span  style="">1022                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1023      private String getNoteTagsString() {                                                                          </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1024          StringBuilder tags = new StringBuilder();                                                                 </span>
<span  style="">1025                                                                                                                    </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1026          for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                                      </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1027              tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028          }                                                                                                         </span>
<span  style="">1029                                                                                                                    </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1030          return tags.toString();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1031      }                                                                                                             </span>
<span  style="">1032                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1033      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1034       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1035       */                                                                                                           </span>
<span  style="">1036                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1037      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1038      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1039          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1040          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1041              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043      }                                                                                                             </span>
<span  style="">1044                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1045      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1046      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1047          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1048          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1049              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051      }                                                                                                             </span>
<span  style="">1052                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1053      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1054      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1055          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1056              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057          }                                                                                                         </span>
<span  style="">1058                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1059          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1060              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061          }                                                                                                         </span>
<span  style="">1062                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1063          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1064          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1065          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1066              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1067          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1068          ft.addToBackStack(null);                                                                                  </span>
<span  style="">1069                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1070          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1071          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1072          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1073          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074      }                                                                                                             </span>
<span  style="">1075                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1076      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1077      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1078          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1079      }                                                                                                             </span>
<span  style="">1080                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1081      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1082      public void onShareDismissed() {                                                                              </span>
<span  style="">1083                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084      }                                                                                                             </span>
<span  style="">1085                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1086      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1087       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1088       */                                                                                                           </span>
<span  style="">1089                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1090      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1091      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1092          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1093          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1094              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096      }                                                                                                             </span>
<span  style="">1097                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1098      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1099      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1100          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1101              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1103          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104      }                                                                                                             </span>
<span  style="">1105                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1106      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1107      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1108          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1109              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110          }                                                                                                         </span>
<span  style="">1111                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1112          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1113              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115      }                                                                                                             </span>
<span  style="">1116                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1117      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1118      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1119          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120      }                                                                                                             </span>
<span  style="">1121                                                                                                                    </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="">1122      protected void saveNote() {                                                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1123          try {                                                                                                     </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1124              if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||            </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1125                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1125                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1126                  return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1127              } else {                                                                                              </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1128                  mNote = mNotesBucket.get(mNote.getSimperiumKey());                                                </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1129                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1130              }                                                                                                     </span>
<span  style="">1131                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1132              String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1133              String tagString = getNoteTagsString();                                                               </span>
<span  style="">1134                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1135              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1135              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnableðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1136                  mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1137                  mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1138                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1139                  mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1140                  mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1141                  mNote.save();                                                                                     </span>
<span  style="">1142                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1143                  AnalyticsTracker.track(                                                                           </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1144                      EDITOR_NOTE_EDITED,                                                                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1145                      CATEGORY_NOTE,                                                                                </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1146                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1147                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148              }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1149          } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1150              exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152      }                                                                                                             </span>
<span  style="">1153                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1154      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1155      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1156      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1157      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1158          mCurrentCursorPosition = selEnd;                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1159          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1160              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1161              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1162                  return;                                                                                           </span>
<span  style="">1163                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1164              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1165              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1166                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1167                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1168                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1168                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1169                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1170                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1171                      updateMenuItems();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1172                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173                  }                                                                                                 </span>
<span  style="">1174                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1175                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1176                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1177                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1178                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1179                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180                      }                                                                                             </span>
<span  style="">1181                                                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1182                      updateMenuItems();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1184              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1185                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1186                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1188          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1189              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1190              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192      }                                                                                                             </span>
<span  style="">1193                                                                                                                    </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1194      private void updateMenuItems() {                                                                              </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1195          mCopyMenuItem.setIcon(mCopyIcon);                                                                         </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1196          mShareMenuItem.setIcon(mShareIcon);                                                                       </span>
<span  style="">1197                                                                                                                    </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1198          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1199              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1200                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1201                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1202              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1203                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1204                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1205              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1206                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1207                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1208              } else {                                                                                              </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1209                  mViewLinkMenuItem.setIcon(mBrowserIcon);                                                          </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1210                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213      }                                                                                                             </span>
<span  style="">1214                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1215      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1216          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1217              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1218              mNote.save();                                                                                         </span>
<span  style="">1219                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1220              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1221              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1222                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1223              AnalyticsTracker.track(                                                                               </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1224                  isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                                    </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1225                  CATEGORY_NOTE,                                                                                    </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1226                  &quot;publish_note_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1227              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229      }                                                                                                             </span>
<span  style="">1230                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1231      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1232          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1233              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234          }                                                                                                         </span>
<span  style="">1235                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1236          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1237          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1238                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1239          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1240              if (mNote.isPublished()) {                                                                            </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1241                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1242                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)                   </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1243                              .show();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1244                  } else {                                                                                          </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1245                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1246                              .setAction(                                                                           </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1247                                  R.string.undo,                                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1248                                  new View.OnClickListener() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1249                                      @Override                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1250                                      public void onClick(View v) {                                                 </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1251                                          mHideActionOnSuccess = true;                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1252                                          unpublishNote();                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254                                  }                                                                                 </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1255                              )                                                                                     </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1256                              .show();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257                  }                                                                                                 </span>
<span  style="">1258                                                                                                                    </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1259                  copyToClipboard(mNote.getPublishedUrl());                                                         </span>

<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1260              } else {                                                                                              </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1261                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1262                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1263                              .show();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1264                  } else {                                                                                          </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1265                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1266                              .setAction(                                                                           </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1267                                  R.string.undo,                                                                    </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1268                                  new View.OnClickListener() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1269                                      @Override                                                                     </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1270                                      public void onClick(View v) {                                                 </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1271                                          mHideActionOnSuccess = true;                                              </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1272                                          publishNote();                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273                                      }                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274                                  }                                                                                 </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1275                              )                                                                                     </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1276                              .show();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1279          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1280              if (mNote.isPublished()) {                                                                            </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1281                  Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1282                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1283                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1284                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1285                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1286                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1287                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1288                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1291                          ).show();                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1292              } else {                                                                                              </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1293                  Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                            </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1294                          .setAction(                                                                               </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1295                              R.string.retry,                                                                       </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1296                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1297                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1298                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1299                                      mHideActionOnSuccess = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1300                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302                              }                                                                                     </span>
<span class="1929519410657596695" onmouseenter="enter('1929519410657596695');" onmouseout="out('1929519410657596695');" style="">1303                          ).show();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305          }                                                                                                         </span>
<span  style="">1306                                                                                                                    </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1307          mHideActionOnSuccess = false;                                                                             </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1308          requireActivity().invalidateOptionsMenu();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309      }                                                                                                             </span>
<span  style="">1310                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1311      private void publishNote() {                                                                                  </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1312          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1313              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1314              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315          }                                                                                                         </span>
<span  style="">1316                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1317          if (isAdded()) {                                                                                          </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style="">1318              mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);      </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1319              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320          }                                                                                                         </span>
<span  style="">1321                                                                                                                    </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1322          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323      }                                                                                                             </span>
<span  style="">1324                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1325      private void unpublishNote() {                                                                                </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1326          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1327              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1328              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1329          }                                                                                                         </span>
<span  style="">1330                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1331          if (isAdded()) {                                                                                          </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style="">1332              mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);    </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1333              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334          }                                                                                                         </span>
<span  style="">1335                                                                                                                    </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1336          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337      }                                                                                                             </span>
<span  style="">1338                                                                                                                    </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1339      private void copyToClipboard(String text) {                                                                   </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="">1340          ClipboardManager clipboard = (ClipboardManager) requireActivity()                                         </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="">1341                  .getSystemService(Context.CLIPBOARD_SERVICE);                                                     </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1342          ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                                </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="">1343          if (clipboard != null) {                                                                                  </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1344              clipboard.setPrimaryClip(clip);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346      }                                                                                                             </span>
<span  style="">1347                                                                                                                    </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1348 +    private void showShare(String text) {                                                                         </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1349 +        startActivity(                                                                                            </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1350 +            ShareCompat.IntentBuilder.from(requireActivity())                                                     </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1351 +                .setText(text)                                                                                    </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1352 +                .setType(&quot;text/plain&quot;)                                                                            </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1353 +                .createChooserIntent()                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1354 +        );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1355 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1356 +                                                                                                                  </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1357      private void showShareSheet() {                                                                               </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1358          if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                             </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1359              mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361      }                                                                                                             </span>
<span  style="">1362                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1363      private void showInfoSheet() {                                                                                </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1364          if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                               </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1365              mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367      }                                                                                                             </span>
<span  style="">1368                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1369      private void showHistorySheet() {                                                                             </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1370          if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                         </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1371              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1372              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1373              saveNote();                                                                                           </span>
<span  style="">1374                                                                                                                    </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1375              mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377      }                                                                                                             </span>
<span  style="">1378                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1379      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1380       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1381       */                                                                                                           </span>
<span  style="">1382                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1383      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1384      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1385                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386      }                                                                                                             </span>
<span  style="">1387                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1388      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1389      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1390          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1391              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1392                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1393                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1394                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1395                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1396                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1397                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1398                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1399                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400                                  }                                                                                 </span>
<span  style="">1401                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1402                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1403                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1405                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1407                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1408                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412      }                                                                                                             </span>
<span  style="">1413                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1414      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1415      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1416          if (mIsPaused) {                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1417              mNotesBucket.removeListener(this);                                                                    </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1418              mNotesBucket.stop();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420      }                                                                                                             </span>
<span  style="">1421                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1422      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1423      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1424          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1425          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1426              return;                                                                                               </span>
<span  style="">1427                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1428          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1429          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1430              return;                                                                                               </span>
<span  style="">1431                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1432          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1433      }                                                                                                             </span>
<span  style="">1434                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1435      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1436          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1437                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1438          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1439              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440          }                                                                                                         </span>
<span  style="">1441                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1442          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1443          protected void onPreExecute() {                                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1444              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1445                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1446              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1447                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1448                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1449              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450          }                                                                                                         </span>
<span  style="">1451                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1452          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1453          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1454              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1455                                                                                                                    </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1456              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1457                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458              }                                                                                                     </span>
<span  style="">1459                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1460              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1461              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1462              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1463                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1464              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1465                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span  style="">1466                                                                                                                    </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1467                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1468                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1469                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                  }                                                                                                 </span>
<span  style="">1471                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1472                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1473                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1474                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1475                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1477              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1478                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1479                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span  style="">1480                                                                                                                    </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1481                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1482                      Note currentNote = notesCursor.getObject();                                                   </span>
<span  style="">1483                                                                                                                    </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1484                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1485                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1486                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489              }                                                                                                     </span>
<span  style="">1490                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1491              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492          }                                                                                                         </span>
<span  style="">1493                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1494          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1495          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1496              final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                               </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style="">1497              if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1498                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499              }                                                                                                     </span>
<span  style="">1500                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1501              fragment.refreshContent(false);                                                                       </span>
<span  style="">1502                                                                                                                    </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1503              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1504                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1504                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1505                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1506                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507              }                                                                                                     </span>
<span  style="">1508                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1509              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1510                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1511              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1512                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1513                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1514                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1515                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1516                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1517                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1518                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1519                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520                          }                                                                                         </span>
<span  style="">1521                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1522                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1522                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSysðŸ”µ</abbr></span>
<span  style="">1523                                                                                                                    </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1524                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1525                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1528                  }, 100);                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1529              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1530                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1531                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532              }                                                                                                     </span>
<span  style="">1533                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1534              fragment.updateMarkdownView();                                                                        </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1535              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1536              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1537              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539      }                                                                                                             </span>
<span  style="">1540                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1541      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1542          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1543                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1544          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1545              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546          }                                                                                                         </span>
<span  style="">1547                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1548          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1549          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1550              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1551                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1552              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1553                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1554              }                                                                                                     </span>
<span  style="">1555                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1556              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1557          }                                                                                                         </span>
<span  style="">1558                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1559          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1560          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1561              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1562                                                                                                                    </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1563              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1564                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1565                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1566                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1569      }                                                                                                             </span>
<span  style="">1570                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1571      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1572          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1573              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574          }                                                                                                         </span>
<span  style="">1575                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1576          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1577              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579      }                                                                                                             </span>
<span  style="">1580                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1581      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1582      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1583          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1584              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585          }                                                                                                         </span>
<span  style="">1586                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1587          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1588          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1589              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1590              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1591          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1592              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1593              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1594                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1595                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1596                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1597              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1598              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1599              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601      }                                                                                                             </span>
<span  style="">1602                                                                                                                    </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1603      private ColorStateList getChipBackgroundColor() {                                                             </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1604          int[][] states = new int[][] {                                                                            </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1605              new int[] { android.R.attr.state_checked}, // checked                                                 </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1606              new int[] {-android.R.attr.state_checked}  // unchecked                                               </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1607          };                                                                                                        </span>
<span  style="">1608                                                                                                                    </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1609          int[] colors = new int[] {                                                                                </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1610              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),              </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1611              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)              </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1612          };                                                                                                        </span>
<span  style="">1613                                                                                                                    </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1614          return new ColorStateList(states, colors);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615      }                                                                                                             </span>
<span  style="">1616                                                                                                                    </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1617      private void setChips(CharSequence text) {                                                                    </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1618          mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                  </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1619          mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                    </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1620          mTagChips.setSingleSelection(true);                                                                       </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1621          mTagChips.removeAllViews();                                                                               </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1622          SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                              </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1623          tags.setString(text.toString());                                                                          </span>
<span  style="">1624                                                                                                                    </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1625          for (String tag : tags) {                                                                                 </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1626              final Chip chip = new Chip(requireContext());                                                         </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1627              chip.setText(tag);                                                                                    </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1628              chip.setCheckable(true);                                                                              </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1629              chip.setCheckedIcon(null);                                                                            </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1630              chip.setChipBackgroundColor(getChipBackgroundColor());                                                </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1631              chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor));          </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1632              chip.setStateListAnimator(null);                                                                      </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1633              chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1634                  @Override                                                                                         </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1635                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                      </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1636                      chip.setCloseIconVisible(isChecked);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1637                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1638              });                                                                                                   </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1639              chip.setOnCloseIconClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1640                  @Override                                                                                         </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1641                  public void onClick(View view) {                                                                  </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1642                      mTagChips.removeView(view);                                                                   </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1643                      updateTags();                                                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1644                      AnalyticsTracker.track(                                                                       </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1645                          EDITOR_TAG_REMOVED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1646                          CATEGORY_NOTE,                                                                            </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1647                          &quot;tag_removed_from_note&quot;                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1648                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1650              });                                                                                                   </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1651              mTagChips.addView(chip);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1652          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653      }                                                                                                             </span>
<span  style="">1654                                                                                                                    </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1655      private void updateTags() {                                                                                   </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1656          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1657              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658          }                                                                                                         </span>
<span  style="">1659                                                                                                                    </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1660          mNote.setTagString(getNoteTagsString());                                                                  </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1661          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1662          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1663          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1664      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1665  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            