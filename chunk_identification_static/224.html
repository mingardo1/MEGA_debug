<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>224</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    224
                    <a href="223.html">prev</a>
                    <a href="225.html">next</a>
                    <a href="224_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_f5db368495dc79a81ae500a4493160411144408a_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;f5db368495dc79a81ae500a4493160411144408a:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;f5db368495dc79a81ae500a4493160411144408a^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;f5db368495dc79a81ae500a4493160411144408a^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;de00faf7e4f61edac1b05e926931f24a8aa722c5:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">   3 import java.util.ArrayList;                                                                              </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">   4 import java.util.Calendar;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">   5 import java.util.List;                                                                                   </span>
<span  style="">   6                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   7 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   8 import android.app.Fragment;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   9 import android.content.Context;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">  10 import android.graphics.Typeface;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  12 import android.database.Cursor;                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  13 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  14 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  15 import android.text.Editable;                                                                            </span>
<span class="-273560163017703694" onmouseenter="enter('-273560163017703694');" onmouseout="out('-273560163017703694');" style="">  16 import android.text.Spannable;                                                                           </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  17 import android.text.SpannableString;                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  18 import android.text.Spanned;                                                                             </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19 import android.text.TextUtils;                                                                           </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  20 import android.text.TextWatcher;                                                                         </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  21 import android.util.Log;                                                                                 </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22 import android.view.LayoutInflater;                                                                      </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  23 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  24 import android.view.ViewGroup;                                                                           </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  25 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  26 import android.widget.ArrayAdapter;                                                                      </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  27 import android.widget.BaseAdapter;                                                                       </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  28 import android.widget.CursorAdapter;                                                                     </span>
<span class="-5161735605762446460" onmouseenter="enter('-5161735605762446460');" onmouseout="out('-5161735605762446460');" style="">  29 import android.widget.EditText;                                                                          </span>
<span class="8134811356038486348" onmouseenter="enter('8134811356038486348');" onmouseout="out('8134811356038486348');" style="">  30 import android.widget.FilterQueryProvider;                                                               </span>
<span class="738832544262858131" onmouseenter="enter('738832544262858131');" onmouseout="out('738832544262858131');" style="">  31 import android.widget.Filterable;                                                                        </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32 import android.widget.LinearLayout;                                                                      </span>
<span class="6118019645448811466" onmouseenter="enter('6118019645448811466');" onmouseout="out('6118019645448811466');" style="">  33 import android.widget.ListAdapter;                                                                       </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  34 import android.widget.MultiAutoCompleteTextView.Tokenizer;                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  35 import android.widget.TextView;                                                                          </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  36 import android.widget.ToggleButton;                                                                      </span>
<span  style="">  37                                                                                                          </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  38 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  39 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  40 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  41 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="7522538895261513094" onmouseenter="enter('7522538895261513094');" onmouseout="out('7522538895261513094');" style="">  42 import com.automattic.simplenote.utils.TypefaceSpan;                                                     </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  43 import com.automattic.simplenote.utils.Typefaces;                                                        </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  44 import com.google.analytics.tracking.android.EasyTracker;                                                </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  45 import com.google.analytics.tracking.android.Tracker;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  46 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="">  47 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  48 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  49 import com.simperium.client.Query;                                                                       </span>
<span  style="">  50                                                                                                          </span>
<span class="-3142892757748375832" onmouseenter="enter('-3142892757748375832');" onmouseout="out('-3142892757748375832');" style="">  51 public class NoteEditorFragment extends Fragment implements TextWatcher, OnTagAddedListener {            </span>
<span  style="">  52                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  53     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  54     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  55                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  56     private Note mNote;                                                                                  </span>
<span class="7660008197059021576" onmouseenter="enter('7660008197059021576');" onmouseout="out('7660008197059021576');" style="">  57     private EditText mContentEditText;                                                                   </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  58     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  59     private ToggleButton mPinButton;                                                                     </span>
<span class="5538665953767928170" onmouseenter="enter('5538665953767928170');" onmouseout="out('5538665953767928170');" style="">  60     private boolean mShowNoteTitle;                                                                      </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  61     private Handler mAutoSaveHandler;                                                                    </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  62     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  63     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  64     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  65      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  66      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  67      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  68     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69     }                                                                                                    </span>
<span  style="">  70                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  71     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  72     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  73         super.onCreate(savedInstanceState);                                                              </span>
<span  style="">  74                                                                                                          </span>
<span class="-1496429319349342270" onmouseenter="enter('-1496429319349342270');" onmouseout="out('-1496429319349342270');" style="">  75         if (!((NotesActivity) getActivity()).isLargeScreenLandscape())                                   </span>
<span class="6330052706173637194" onmouseenter="enter('6330052706173637194');" onmouseout="out('6330052706173637194');" style="">  76             mShowNoteTitle = true;                                                                       </span>
<span  style="">  77                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style="">  78         mAutoSaveHandler = new Handler();                                                                </span>
<span  style="">  79                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  80 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  81         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                              </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  82                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  83             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  84             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  85                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  86                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  87                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  88             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  89                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  90             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  91             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  92                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  93                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  94             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  95                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  96             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  97             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  98                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  99             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 101             @Override                                                                                    </span>
<span class="8156821713938614343" onmouseenter="enter('8156821713938614343');" onmouseout="out('8156821713938614343');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 102             public Cursor runQueryOnBackgroundThread(CharSequence filter){                               </span>
<span class="6851307140430031973" onmouseenter="enter('6851307140430031973');" onmouseout="out('6851307140430031973');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 103                 Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter));"> 103                 Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter)ðŸ”µ</abbr></span>
<span class="5538625856303982954" onmouseenter="enter('5538625856303982954');" onmouseout="out('5538625856303982954');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 104                 Activity activity = (Activity) getActivity();                                            </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 105                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 106                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 107                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 108                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 109                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 110                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 111                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 112                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 113                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 113                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 114                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 115             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 116         };                                                                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 117                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 118 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-2723434410959845299" onmouseenter="enter('-2723434410959845299');" onmouseout="out('-2723434410959845299');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119         mContentEditText = ((EditText) rootView.findViewById(R.id.note_content));                        </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123                                                                                                          </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124         mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                               </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="502208635557356679" onmouseenter="enter('502208635557356679');" onmouseout="out('502208635557356679');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126         if (((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)                   </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128                                                                                                          </span>
<span class="-7982135264033903740" onmouseenter="enter('-7982135264033903740');" onmouseout="out('-7982135264033903740');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129         if (getArguments() != null &amp;&amp; getArguments().containsKey(ARG_ITEM_ID)) {                         </span>
<span class="979392156944395522" onmouseenter="enter('979392156944395522');" onmouseout="out('979392156944395522');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130             String key = getArguments().getString(ARG_ITEM_ID);                                          </span>
<span class="3058880090979505534" onmouseenter="enter('3058880090979505534');" onmouseout="out('3058880090979505534');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131             new loadNoteTask().execute(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133                                                                                                          </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135 	}                                                                                                       </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139         super.onResume();                                                                                </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141         if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                             </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142             // Show soft keyboard                                                                        </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143             mContentEditText.requestFocus();                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 145             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 145             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146             if (inputMethodManager != null)                                                              </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147                 inputMethodManager.showSoftInput(mContentEditText, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152     public void onPause() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153         saveAndSyncNote();                                                                               </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155                                                                                                          </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 161 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 162 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 166     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 167         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="-2723434410959845299" onmouseenter="enter('-2723434410959845299');" onmouseout="out('-2723434410959845299');" style=""> 168         mContentEditText = ((EditText) rootView.findViewById(R.id.note_content));                        </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 169         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 170         mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 170         mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONTðŸ”µ</abbr></span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 171         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 172         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 173         mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));</span>
<span  style=""> 174                                                                                                          </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 175         mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                               </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 176         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="502208635557356679" onmouseenter="enter('502208635557356679');" onmouseout="out('502208635557356679');" style=""> 177         if (((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)                   </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 178             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span  style=""> 179                                                                                                          </span>
<span class="-7982135264033903740" onmouseenter="enter('-7982135264033903740');" onmouseout="out('-7982135264033903740');" style=""> 180         if (getArguments() != null &amp;&amp; getArguments().containsKey(ARG_ITEM_ID)) {                         </span>
<span class="979392156944395522" onmouseenter="enter('979392156944395522');" onmouseout="out('979392156944395522');" style=""> 181             String key = getArguments().getString(ARG_ITEM_ID);                                          </span>
<span class="3058880090979505534" onmouseenter="enter('3058880090979505534');" onmouseout="out('3058880090979505534');" style=""> 182             new loadNoteTask().execute(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183         }                                                                                                </span>
<span  style=""> 184                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 185         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 186 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187 	}                                                                                                       </span>
<span  style=""> 188                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 189     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 190     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 191         super.onResume();                                                                                </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 192         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 193         if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                             </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 194             // Show soft keyboard                                                                        </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 195             mContentEditText.requestFocus();                                                             </span>
<span  style=""> 196                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 197             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 197             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 198             if (inputMethodManager != null)                                                              </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 199                 inputMethodManager.showSoftInput(mContentEditText, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 203     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 204     public void onPause() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 205         saveAndSyncNote();                                                                               </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 206         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 207                                                                                                          </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 208         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 209             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style=""> 210                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 211         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212     }                                                                                                    </span>
<span  style=""> 213                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 214     public void setNote(String noteID) {                                                                 </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 215         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 216                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 217         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="2495964344956633624" onmouseenter="enter('2495964344956633624');" onmouseout="out('2495964344956633624');" style=""> 218         if (mNote != null)                                                                               </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 219             saveAndSyncNote();                                                                           </span>
<span  style=""> 220                                                                                                          </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style=""> 221         Simplenote simplenote = (Simplenote)getActivity().getApplication();                              </span>
<span class="-2998483632528805808" onmouseenter="enter('-2998483632528805808');" onmouseout="out('-2998483632528805808');" style=""> 222         Bucket&lt;Note&gt; notesBucket = simplenote.getNotesBucket();                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 223         try {                                                                                            </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 224             mNote = notesBucket.get(noteID);                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 225         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 226             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227         }                                                                                                </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 228         refreshContent(false);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229     }                                                                                                    </span>
<span  style=""> 230                                                                                                          </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 231     public void refreshContent(boolean isNoteUpdate) {                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 232         if (mNote != null) {                                                                             </span>
<span class="4947294885354614328" onmouseenter="enter('4947294885354614328');" onmouseout="out('4947294885354614328');" style=""> 233             Log.v(&quot;Simplenote&quot;, &quot;refreshing content&quot;);                                                   </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 234             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 235                                                                                                          </span>
<span class="9084290441742351375" onmouseenter="enter('9084290441742351375');" onmouseout="out('9084290441742351375');" style=""><abbr title=" 236             int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mContentEditText.getSelectionEnd());"> 236             int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toStrinðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 237             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style=""><abbr title=" 238             if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 238             if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSeleðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 239                 mContentEditText.setSelection(cursorPosition);                                           </span>
<span  style=""> 240                                                                                                          </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 241             mPinButton.setChecked(mNote.isPinned());                                                     </span>
<span  style=""> 242                                                                                                          </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 243             setActionBarTitle();                                                                         </span>
<span  style=""> 244                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 245             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247     }                                                                                                    </span>
<span  style=""> 248                                                                                                          </span>
<span class="-392171935892263585" onmouseenter="enter('-392171935892263585');" onmouseout="out('-392171935892263585');" style=""> 249     public void updateTagList(){                                                                         </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 250         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 251         if (activity == null) return;                                                                    </span>
<span  style=""> 252                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 253         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 254         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255     }                                                                                                    </span>
<span  style=""> 256                                                                                                          </span>
<span class="-6501448993933584559" onmouseenter="enter('-6501448993933584559');" onmouseout="out('-6501448993933584559');" style=""> 257     private void setActionBarTitle() {                                                                   </span>
<span class="1044437851216096859" onmouseenter="enter('1044437851216096859');" onmouseout="out('1044437851216096859');" style=""> 258         String title;                                                                                    </span>
<span class="4730412896387853151" onmouseenter="enter('4730412896387853151');" onmouseout="out('4730412896387853151');" style=""> 259         if (mShowNoteTitle &amp;&amp; getActivity() != null) {                                                   </span>
<span class="-8960038423765749168" onmouseenter="enter('-8960038423765749168');" onmouseout="out('-8960038423765749168');" style=""> 260             if (mNote.getTitle() != null &amp;&amp; !mNote.getTitle().equals(&quot;&quot;))                                </span>
<span class="-5915161712756481661" onmouseenter="enter('-5915161712756481661');" onmouseout="out('-5915161712756481661');" style=""> 261                 title = mNote.getTitle();                                                                </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 262             else                                                                                         </span>
<span class="5889035754693609241" onmouseenter="enter('5889035754693609241');" onmouseout="out('5889035754693609241');" style=""> 263                 title = getString(R.string.new_note);                                                    </span>
<span  style=""> 264                                                                                                          </span>
<span class="-5894217806054704471" onmouseenter="enter('-5894217806054704471');" onmouseout="out('-5894217806054704471');" style=""> 265             SpannableString s = new SpannableString(title);                                              </span>
<span class="5584952902551242782" onmouseenter="enter('5584952902551242782');" onmouseout="out('5584952902551242782');" style=""> 266             s.setSpan(new TypefaceSpan(getActivity().getBaseContext()), 0, s.length(),                   </span>
<span class="-848172540933228179" onmouseenter="enter('-848172540933228179');" onmouseout="out('-848172540933228179');" style=""> 267                     Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);                                                 </span>
<span class="8022484383441167908" onmouseenter="enter('8022484383441167908');" onmouseout="out('8022484383441167908');" style=""> 268             getActivity().getActionBar().setTitle(s);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 272     int newCursorLocation(String newText, String oldText, int cursorLocation) {                          </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 273         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 274         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 275         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 276         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 277         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 278         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 279         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 280         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 281                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 282         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 283                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 284         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 285                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 286         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 287         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 288             return newText.length();                                                                     </span>
<span  style=""> 289                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 290         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 291         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 292                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 293         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 294             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 294             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 295             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 295             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 296         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 297             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span  style=""> 299                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 300         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 301         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 302             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 303                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 304         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 305         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span  style=""> 307                                                                                                          </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 308     private Runnable autoSaveRunnable = new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 309         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 310         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 311             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 313     };                                                                                                   </span>
<span  style=""> 314                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 315     @Override                                                                                            </span>
<span class="-9205568981681343406" onmouseenter="enter('-9205568981681343406');" onmouseout="out('-9205568981681343406');" style=""> 316     public void onTagsChanged(String tagString){                                                         </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 317         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 318         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 319         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 320         mNote.save();                                                                                    </span>
<span class="-4835851531632304805" onmouseenter="enter('-4835851531632304805');" onmouseout="out('-4835851531632304805');" style=""> 321         if (getActivity() != null)                                                                       </span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 322             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323     }                                                                                                    </span>
<span  style=""> 324                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 325     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 326     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 327         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328     }                                                                                                    </span>
<span  style=""> 329                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 330     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 331     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 332         // Unused                                                                                        </span>
<span  style=""> 333                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334     }                                                                                                    </span>
<span  style=""> 335                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 336     @Override                                                                                            </span>
<span class="7273375812891434069" onmouseenter="enter('7273375812891434069');" onmouseout="out('7273375812891434069');" style=""> 337     public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {                        </span>
<span  style=""> 338                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 339         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span  style=""> 340                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 341         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 342             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 343             mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345     }                                                                                                    </span>
<span  style=""> 346                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 347     private void saveAndSyncNote() {                                                                     </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 348         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 349             return;                                                                                      </span>
<span  style=""> 350                                                                                                          </span>
<span class="-1853245796722779060" onmouseenter="enter('-1853245796722779060');" onmouseout="out('-1853245796722779060');" style=""> 351         new saveNoteTask().execute();                                                                    </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 352         setActionBarTitle();                                                                             </span>
<span  style=""> 353                                                                                                          </span>
<span class="-5951013917039188923" onmouseenter="enter('-5951013917039188923');" onmouseout="out('-5951013917039188923');" style=""> 354         Log.v(&quot;Simplenote&quot;, &quot;autosaving note&quot;);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355     }                                                                                                    </span>
<span  style=""> 356                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 357     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 358         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 359             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 360             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 361             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 362             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 363                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 364         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 365             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 366                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368     }                                                                                                    </span>
<span  style=""> 369                                                                                                          </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 370     // Use spaces in tag autocompletion list                                                             </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 371     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 371     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-tðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 372     public class SpaceTokenizer implements Tokenizer {                                                   </span>
<span  style=""> 373                                                                                                          </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 374         public int findTokenStart(CharSequence text, int cursor) {                                       </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 375             int i = cursor;                                                                              </span>
<span  style=""> 376                                                                                                          </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 377             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 378                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379             }                                                                                            </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 380             while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 381                 i++;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382             }                                                                                            </span>
<span  style=""> 383                                                                                                          </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 384             return i;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385         }                                                                                                </span>
<span  style=""> 386                                                                                                          </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 387         public int findTokenEnd(CharSequence text, int cursor) {                                         </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 388             int i = cursor;                                                                              </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 389             int len = text.length();                                                                     </span>
<span  style=""> 390                                                                                                          </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 391             while (i &lt; len) {                                                                            </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 392                 if (text.charAt(i) == &#x27; &#x27;) {                                                             </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 393                     return i;                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 394                 } else {                                                                                 </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 395                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397             }                                                                                            </span>
<span  style=""> 398                                                                                                          </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 399             return len;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400         }                                                                                                </span>
<span  style=""> 401                                                                                                          </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 402         public CharSequence terminateToken(CharSequence text) {                                          </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 403             int i = text.length();                                                                       </span>
<span  style=""> 404                                                                                                          </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 405             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 406                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407             }                                                                                            </span>
<span  style=""> 408                                                                                                          </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 409             if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                    </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 410                 return text;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 411             } else {                                                                                     </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 412                 if (text instanceof Spanned) {                                                           </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 413                     SpannableString sp = new SpannableString(text + &quot; &quot;);                                </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 414                     TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                            </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 415                             Object.class, sp, 0);                                                        </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 416                     return sp;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 417                 } else {                                                                                 </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 418                     return text + &quot; &quot;;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422     }                                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 424     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 425                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 426         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 427         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 428             String noteID = args[0];                                                                     </span>
<span class="6424563509553382563" onmouseenter="enter('6424563509553382563');" onmouseout="out('6424563509553382563');" style=""> 429             NotesActivity notesActivity = (NotesActivity)getActivity();                                  </span>
<span class="3372428562169226666" onmouseenter="enter('3372428562169226666');" onmouseout="out('3372428562169226666');" style=""> 430             Simplenote application = (Simplenote) notesActivity.getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 431             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 432             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 433                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-6154859570814008859" onmouseenter="enter('-6154859570814008859');" onmouseout="out('-6154859570814008859');" style=""> 434                 notesActivity.setCurrentNote(mNote);                                                     </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 435             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 436                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 438             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439         }                                                                                                </span>
<span  style=""> 440                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 441         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 442         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 443             refreshContent(false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445     }                                                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="-6338361705232509236" onmouseenter="enter('-6338361705232509236');" onmouseout="out('-6338361705232509236');" style=""> 447     private class saveNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 448                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 449         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 450         protected Void doInBackground(String... args) {                                                  </span>
<span class="7501654987306227365" onmouseenter="enter('7501654987306227365');" onmouseout="out('7501654987306227365');" style=""> 451             String content = mContentEditText.getText().toString();                                      </span>
<span class="5370167507398401430" onmouseenter="enter('5370167507398401430');" onmouseout="out('5370167507398401430');" style=""> 452             String tagString = mTagView.getText().toString();                                            </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 453             if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                   </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 454                 mNote.setContent(content);                                                               </span>
<span class="8315132155135825050" onmouseenter="enter('8315132155135825050');" onmouseout="out('8315132155135825050');" style=""> 455                 mNote.setTagString(mTagView.getText().toString());                                       </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 456                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 457                 // Send pinned event to google analytics if changed                                      </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 458                 mNote.setPinned(mPinButton.isChecked());                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 459                 mNote.save();                                                                            </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 460                 if (getActivity() != null) {                                                             </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 461                     Tracker tracker = EasyTracker.getTracker();                                          </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 462                     if (mNote.isPinned() != mPinButton.isChecked())                                      </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 463                         tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 463                         tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_noðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 464                     tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466             }                                                                                            </span>
<span  style=""> 467                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 468             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">   3 import java.util.ArrayList;                                                                              </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">   4 import java.util.Calendar;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">   5 import java.util.List;                                                                                   </span>
<span  style="">   6                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   7 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   8 import android.app.Fragment;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   9 import android.content.Context;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">  10 import android.graphics.Typeface;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  12 import android.database.Cursor;                                                                          </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  13 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  14 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  15 import android.text.Editable;                                                                            </span>
<span class="-273560163017703694" onmouseenter="enter('-273560163017703694');" onmouseout="out('-273560163017703694');" style="">  16 import android.text.Spannable;                                                                           </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  17 import android.text.SpannableString;                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  18 import android.text.Spanned;                                                                             </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  19 import android.text.TextUtils;                                                                           </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  20 import android.text.TextWatcher;                                                                         </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  21 import android.util.Log;                                                                                 </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22 import android.view.LayoutInflater;                                                                      </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  23 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  24 import android.view.ViewGroup;                                                                           </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  25 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  26 import android.widget.ArrayAdapter;                                                                      </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  27 import android.widget.BaseAdapter;                                                                       </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  28 import android.widget.CursorAdapter;                                                                     </span>
<span class="-5161735605762446460" onmouseenter="enter('-5161735605762446460');" onmouseout="out('-5161735605762446460');" style="">  29 import android.widget.EditText;                                                                          </span>
<span class="8134811356038486348" onmouseenter="enter('8134811356038486348');" onmouseout="out('8134811356038486348');" style="">  30 import android.widget.FilterQueryProvider;                                                               </span>
<span class="738832544262858131" onmouseenter="enter('738832544262858131');" onmouseout="out('738832544262858131');" style="">  31 import android.widget.Filterable;                                                                        </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32 import android.widget.LinearLayout;                                                                      </span>
<span class="6118019645448811466" onmouseenter="enter('6118019645448811466');" onmouseout="out('6118019645448811466');" style="">  33 import android.widget.ListAdapter;                                                                       </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  34 import android.widget.MultiAutoCompleteTextView.Tokenizer;                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  35 import android.widget.TextView;                                                                          </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  36 import android.widget.ToggleButton;                                                                      </span>
<span  style="">  37                                                                                                          </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  38 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  39 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  40 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  41 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="7522538895261513094" onmouseenter="enter('7522538895261513094');" onmouseout="out('7522538895261513094');" style="">  42 import com.automattic.simplenote.utils.TypefaceSpan;                                                     </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  43 import com.automattic.simplenote.utils.Typefaces;                                                        </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  44 import com.google.analytics.tracking.android.EasyTracker;                                                </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  45 import com.google.analytics.tracking.android.Tracker;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  46 import com.simperium.client.Bucket;                                                                      </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="">  47 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  48 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  49 import com.simperium.client.Query;                                                                       </span>
<span  style="">  50                                                                                                          </span>
<span class="-3142892757748375832" onmouseenter="enter('-3142892757748375832');" onmouseout="out('-3142892757748375832');" style="">  51 public class NoteEditorFragment extends Fragment implements TextWatcher, OnTagAddedListener {            </span>
<span  style="">  52                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  53     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  54     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  55                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  56     private Note mNote;                                                                                  </span>
<span class="7660008197059021576" onmouseenter="enter('7660008197059021576');" onmouseout="out('7660008197059021576');" style="">  57     private EditText mContentEditText;                                                                   </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  58     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  59     private ToggleButton mPinButton;                                                                     </span>
<span class="5538665953767928170" onmouseenter="enter('5538665953767928170');" onmouseout="out('5538665953767928170');" style="">  60     private boolean mShowNoteTitle;                                                                      </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  61     private Handler mAutoSaveHandler;                                                                    </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  62     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  63     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  64     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  65      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  66      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  67      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  68     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69     }                                                                                                    </span>
<span  style="">  70                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  71     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  72     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  73         super.onCreate(savedInstanceState);                                                              </span>
<span  style="">  74                                                                                                          </span>
<span class="-1496429319349342270" onmouseenter="enter('-1496429319349342270');" onmouseout="out('-1496429319349342270');" style="">  75         if (!((NotesActivity) getActivity()).isLargeScreenLandscape())                                   </span>
<span class="6330052706173637194" onmouseenter="enter('6330052706173637194');" onmouseout="out('6330052706173637194');" style="">  76             mShowNoteTitle = true;                                                                       </span>
<span  style="">  77                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style="">  78         mAutoSaveHandler = new Handler();                                                                </span>
<span  style="">  79                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  80 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  81         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                              </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  82                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  83             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  84             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  85                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  86                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  87                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  88             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  89                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  90             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  91             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  92                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  93                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  94             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  95                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  96             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  97             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  98                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  99             }                                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 101             @Override                                                                                    </span>
<span class="8156821713938614343" onmouseenter="enter('8156821713938614343');" onmouseout="out('8156821713938614343');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 102             public Cursor runQueryOnBackgroundThread(CharSequence filter){                               </span>
<span class="6851307140430031973" onmouseenter="enter('6851307140430031973');" onmouseout="out('6851307140430031973');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 103                 Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter));"> 103                 Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter)ðŸ”µ</abbr></span>
<span class="5538625856303982954" onmouseenter="enter('5538625856303982954');" onmouseout="out('5538625856303982954');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 104                 Activity activity = (Activity) getActivity();                                            </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 105                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 106                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 107                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 108                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 109                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 110                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 111                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 112                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 113                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 113                 if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.forðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 114                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 115             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 116         };                                                                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 117                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 118 ||||||| BASE                                                                                             </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 119 =======                                                                                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 120 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121     }                                                                                                    </span>
<span  style=""> 122                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 123     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 124     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 125         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="-2723434410959845299" onmouseenter="enter('-2723434410959845299');" onmouseout="out('-2723434410959845299');" style=""> 126         mContentEditText = ((EditText) rootView.findViewById(R.id.note_content));                        </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 127         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 128         mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 128         mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONTðŸ”µ</abbr></span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 129         mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                 </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 130         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 131         mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));</span>
<span  style=""> 132                                                                                                          </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 133         mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                               </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 134         mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                       </span>
<span class="502208635557356679" onmouseenter="enter('502208635557356679');" onmouseout="out('502208635557356679');" style=""> 135         if (((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)                   </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 136             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span  style=""> 137                                                                                                          </span>
<span class="-7982135264033903740" onmouseenter="enter('-7982135264033903740');" onmouseout="out('-7982135264033903740');" style=""> 138         if (getArguments() != null &amp;&amp; getArguments().containsKey(ARG_ITEM_ID)) {                         </span>
<span class="979392156944395522" onmouseenter="enter('979392156944395522');" onmouseout="out('979392156944395522');" style=""> 139             String key = getArguments().getString(ARG_ITEM_ID);                                          </span>
<span class="3058880090979505534" onmouseenter="enter('3058880090979505534');" onmouseout="out('3058880090979505534');" style=""> 140             new loadNoteTask().execute(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141         }                                                                                                </span>
<span  style=""> 142                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 143         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 144 		return rootView;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145 	}                                                                                                       </span>
<span  style=""> 146                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 147     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 148     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 149         super.onResume();                                                                                </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 150         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 151         if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                             </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 152             // Show soft keyboard                                                                        </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 153             mContentEditText.requestFocus();                                                             </span>
<span  style=""> 154                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 155             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 155             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 156             if (inputMethodManager != null)                                                              </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 157                 inputMethodManager.showSoftInput(mContentEditText, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 161     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 162     public void onPause() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 163         saveAndSyncNote();                                                                               </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 164         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 165                                                                                                          </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 166         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 167             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style=""> 168                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 169         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170     }                                                                                                    </span>
<span  style=""> 171                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 172     public void setNote(String noteID) {                                                                 </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 173         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 174                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 175         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="2495964344956633624" onmouseenter="enter('2495964344956633624');" onmouseout="out('2495964344956633624');" style=""> 176         if (mNote != null)                                                                               </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 177             saveAndSyncNote();                                                                           </span>
<span  style=""> 178                                                                                                          </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style=""> 179         Simplenote simplenote = (Simplenote)getActivity().getApplication();                              </span>
<span class="-2998483632528805808" onmouseenter="enter('-2998483632528805808');" onmouseout="out('-2998483632528805808');" style=""> 180         Bucket&lt;Note&gt; notesBucket = simplenote.getNotesBucket();                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 181         try {                                                                                            </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 182             mNote = notesBucket.get(noteID);                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 183         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 184             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185         }                                                                                                </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 186         refreshContent(false);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span  style=""> 188                                                                                                          </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 189     public void refreshContent(boolean isNoteUpdate) {                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 190         if (mNote != null) {                                                                             </span>
<span class="4947294885354614328" onmouseenter="enter('4947294885354614328');" onmouseout="out('4947294885354614328');" style=""> 191             Log.v(&quot;Simplenote&quot;, &quot;refreshing content&quot;);                                                   </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 192             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 193                                                                                                          </span>
<span class="9084290441742351375" onmouseenter="enter('9084290441742351375');" onmouseout="out('9084290441742351375');" style=""><abbr title=" 194             int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mContentEditText.getSelectionEnd());"> 194             int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toStrinðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 195             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style=""><abbr title=" 196             if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 196             if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSeleðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 197                 mContentEditText.setSelection(cursorPosition);                                           </span>
<span  style=""> 198                                                                                                          </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 199             mPinButton.setChecked(mNote.isPinned());                                                     </span>
<span  style=""> 200                                                                                                          </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 201             setActionBarTitle();                                                                         </span>
<span  style=""> 202                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 203             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205     }                                                                                                    </span>
<span  style=""> 206                                                                                                          </span>
<span class="-392171935892263585" onmouseenter="enter('-392171935892263585');" onmouseout="out('-392171935892263585');" style=""> 207     public void updateTagList(){                                                                         </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 208         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 209         if (activity == null) return;                                                                    </span>
<span  style=""> 210                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 211         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 212         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213     }                                                                                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-6501448993933584559" onmouseenter="enter('-6501448993933584559');" onmouseout="out('-6501448993933584559');" style=""> 215     private void setActionBarTitle() {                                                                   </span>
<span class="1044437851216096859" onmouseenter="enter('1044437851216096859');" onmouseout="out('1044437851216096859');" style=""> 216         String title;                                                                                    </span>
<span class="4730412896387853151" onmouseenter="enter('4730412896387853151');" onmouseout="out('4730412896387853151');" style=""> 217         if (mShowNoteTitle &amp;&amp; getActivity() != null) {                                                   </span>
<span class="-8960038423765749168" onmouseenter="enter('-8960038423765749168');" onmouseout="out('-8960038423765749168');" style=""> 218             if (mNote.getTitle() != null &amp;&amp; !mNote.getTitle().equals(&quot;&quot;))                                </span>
<span class="-5915161712756481661" onmouseenter="enter('-5915161712756481661');" onmouseout="out('-5915161712756481661');" style=""> 219                 title = mNote.getTitle();                                                                </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 220             else                                                                                         </span>
<span class="5889035754693609241" onmouseenter="enter('5889035754693609241');" onmouseout="out('5889035754693609241');" style=""> 221                 title = getString(R.string.new_note);                                                    </span>
<span  style=""> 222                                                                                                          </span>
<span class="-5894217806054704471" onmouseenter="enter('-5894217806054704471');" onmouseout="out('-5894217806054704471');" style=""> 223             SpannableString s = new SpannableString(title);                                              </span>
<span class="5584952902551242782" onmouseenter="enter('5584952902551242782');" onmouseout="out('5584952902551242782');" style=""> 224             s.setSpan(new TypefaceSpan(getActivity().getBaseContext()), 0, s.length(),                   </span>
<span class="-848172540933228179" onmouseenter="enter('-848172540933228179');" onmouseout="out('-848172540933228179');" style=""> 225                     Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);                                                 </span>
<span class="8022484383441167908" onmouseenter="enter('8022484383441167908');" onmouseout="out('8022484383441167908');" style=""> 226             getActivity().getActionBar().setTitle(s);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228     }                                                                                                    </span>
<span  style=""> 229                                                                                                          </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 230     int newCursorLocation(String newText, String oldText, int cursorLocation) {                          </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 231         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 232         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 233         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 234         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 235         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 236         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 237         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 238         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 239                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 240         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 241                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 242         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 243                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 244         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 245         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 246             return newText.length();                                                                     </span>
<span  style=""> 247                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 248         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 249         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 250                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 251         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 252             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 252             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 253             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 253             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 254         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 255             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256         }                                                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 258         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 259         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 260             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 261                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 262         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 263         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264     }                                                                                                    </span>
<span  style=""> 265                                                                                                          </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 266     private Runnable autoSaveRunnable = new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 267         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 268         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 269             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 271     };                                                                                                   </span>
<span  style=""> 272                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273     @Override                                                                                            </span>
<span class="-9205568981681343406" onmouseenter="enter('-9205568981681343406');" onmouseout="out('-9205568981681343406');" style=""> 274     public void onTagsChanged(String tagString){                                                         </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 275         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 276         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 277         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 278         mNote.save();                                                                                    </span>
<span class="-4835851531632304805" onmouseenter="enter('-4835851531632304805');" onmouseout="out('-4835851531632304805');" style=""> 279         if (getActivity() != null)                                                                       </span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 280             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281     }                                                                                                    </span>
<span  style=""> 282                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 283     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 284     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 285         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286     }                                                                                                    </span>
<span  style=""> 287                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 288     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 289     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 290         // Unused                                                                                        </span>
<span  style=""> 291                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292     }                                                                                                    </span>
<span  style=""> 293                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 294     @Override                                                                                            </span>
<span class="7273375812891434069" onmouseenter="enter('7273375812891434069');" onmouseout="out('7273375812891434069');" style=""> 295     public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {                        </span>
<span  style=""> 296                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 297         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span  style=""> 298                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 299         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 300             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 301             mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303     }                                                                                                    </span>
<span  style=""> 304                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 305     private void saveAndSyncNote() {                                                                     </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 306         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 307             return;                                                                                      </span>
<span  style=""> 308                                                                                                          </span>
<span class="-1853245796722779060" onmouseenter="enter('-1853245796722779060');" onmouseout="out('-1853245796722779060');" style=""> 309         new saveNoteTask().execute();                                                                    </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 310         setActionBarTitle();                                                                             </span>
<span  style=""> 311                                                                                                          </span>
<span class="-5951013917039188923" onmouseenter="enter('-5951013917039188923');" onmouseout="out('-5951013917039188923');" style=""> 312         Log.v(&quot;Simplenote&quot;, &quot;autosaving note&quot;);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313     }                                                                                                    </span>
<span  style=""> 314                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 315     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 316         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 317             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 318             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 319             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 320             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 321                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 322         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 323             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 324                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326     }                                                                                                    </span>
<span  style=""> 327                                                                                                          </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 328     // Use spaces in tag autocompletion list                                                             </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 329     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 329     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-tðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 330     public class SpaceTokenizer implements Tokenizer {                                                   </span>
<span  style=""> 331                                                                                                          </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 332         public int findTokenStart(CharSequence text, int cursor) {                                       </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 333             int i = cursor;                                                                              </span>
<span  style=""> 334                                                                                                          </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 335             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 336                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337             }                                                                                            </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 338             while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 339                 i++;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340             }                                                                                            </span>
<span  style=""> 341                                                                                                          </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 342             return i;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343         }                                                                                                </span>
<span  style=""> 344                                                                                                          </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 345         public int findTokenEnd(CharSequence text, int cursor) {                                         </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 346             int i = cursor;                                                                              </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 347             int len = text.length();                                                                     </span>
<span  style=""> 348                                                                                                          </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 349             while (i &lt; len) {                                                                            </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 350                 if (text.charAt(i) == &#x27; &#x27;) {                                                             </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 351                     return i;                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 352                 } else {                                                                                 </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 353                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355             }                                                                                            </span>
<span  style=""> 356                                                                                                          </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 357             return len;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358         }                                                                                                </span>
<span  style=""> 359                                                                                                          </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 360         public CharSequence terminateToken(CharSequence text) {                                          </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 361             int i = text.length();                                                                       </span>
<span  style=""> 362                                                                                                          </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 363             while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                 </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 364                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365             }                                                                                            </span>
<span  style=""> 366                                                                                                          </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 367             if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                    </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 368                 return text;                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 369             } else {                                                                                     </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 370                 if (text instanceof Spanned) {                                                           </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 371                     SpannableString sp = new SpannableString(text + &quot; &quot;);                                </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 372                     TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                            </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 373                             Object.class, sp, 0);                                                        </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 374                     return sp;                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 375                 } else {                                                                                 </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 376                     return text + &quot; &quot;;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380     }                                                                                                    </span>
<span  style=""> 381                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 382     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 383                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 385         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 386             String noteID = args[0];                                                                     </span>
<span class="6424563509553382563" onmouseenter="enter('6424563509553382563');" onmouseout="out('6424563509553382563');" style=""> 387             NotesActivity notesActivity = (NotesActivity)getActivity();                                  </span>
<span class="3372428562169226666" onmouseenter="enter('3372428562169226666');" onmouseout="out('3372428562169226666');" style=""> 388             Simplenote application = (Simplenote) notesActivity.getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 389             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 390             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 391                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-6154859570814008859" onmouseenter="enter('-6154859570814008859');" onmouseout="out('-6154859570814008859');" style=""> 392                 notesActivity.setCurrentNote(mNote);                                                     </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 393             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 394                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 396             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397         }                                                                                                </span>
<span  style=""> 398                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 399         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 400         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 401             refreshContent(false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403     }                                                                                                    </span>
<span  style=""> 404                                                                                                          </span>
<span class="-6338361705232509236" onmouseenter="enter('-6338361705232509236');" onmouseout="out('-6338361705232509236');" style=""> 405     private class saveNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span  style=""> 406                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 407         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 408         protected Void doInBackground(String... args) {                                                  </span>
<span class="7501654987306227365" onmouseenter="enter('7501654987306227365');" onmouseout="out('7501654987306227365');" style=""> 409             String content = mContentEditText.getText().toString();                                      </span>
<span class="5370167507398401430" onmouseenter="enter('5370167507398401430');" onmouseout="out('5370167507398401430');" style=""> 410             String tagString = mTagView.getText().toString();                                            </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 411             if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                   </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 412                 mNote.setContent(content);                                                               </span>
<span class="8315132155135825050" onmouseenter="enter('8315132155135825050');" onmouseout="out('8315132155135825050');" style=""> 413                 mNote.setTagString(mTagView.getText().toString());                                       </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 414                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 415                 // Send pinned event to google analytics if changed                                      </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 416                 mNote.setPinned(mPinButton.isChecked());                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 417                 mNote.save();                                                                            </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 418                 if (getActivity() != null) {                                                             </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 419                     Tracker tracker = EasyTracker.getTracker();                                          </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 420                     if (mNote.isPinned() != mPinButton.isChecked())                                      </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 421                         tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 421                         tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_noðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 422                     tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424             }                                                                                            </span>
<span  style=""> 425                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 426             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429 }                                                                                                        </span>








































</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   4 import android.app.Fragment;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   5 import android.content.Context;                                                                          </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   6 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   7 import android.graphics.Typeface;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">   8 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   9 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  10 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  11 import android.text.Editable;                                                                            </span>
<span class="-273560163017703694" onmouseenter="enter('-273560163017703694');" onmouseout="out('-273560163017703694');" style="">  12 import android.text.Spannable;                                                                           </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  13 import android.text.SpannableString;                                                                     </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  14 import android.text.Spanned;                                                                             </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  15 import android.text.TextUtils;                                                                           </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  16 import android.text.TextWatcher;                                                                         </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  17 import android.util.Log;                                                                                 </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  18 import android.view.LayoutInflater;                                                                      </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  19 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  20 import android.view.ViewGroup;                                                                           </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  21 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  22 import android.widget.ArrayAdapter;                                                                      </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="">  23 import android.widget.BaseAdapter;                                                                       </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  24 import android.widget.CursorAdapter;                                                                     </span>
<span class="-5161735605762446460" onmouseenter="enter('-5161735605762446460');" onmouseout="out('-5161735605762446460');" style="">  25 import android.widget.EditText;                                                                          </span>
<span class="8134811356038486348" onmouseenter="enter('8134811356038486348');" onmouseout="out('8134811356038486348');" style="">  26 import android.widget.FilterQueryProvider;                                                               </span>
<span class="738832544262858131" onmouseenter="enter('738832544262858131');" onmouseout="out('738832544262858131');" style="">  27 import android.widget.Filterable;                                                                        </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  28 import android.widget.LinearLayout;                                                                      </span>
<span class="6118019645448811466" onmouseenter="enter('6118019645448811466');" onmouseout="out('6118019645448811466');" style="">  29 import android.widget.ListAdapter;                                                                       </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  30 import android.widget.MultiAutoCompleteTextView.Tokenizer;                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  31 import android.widget.TextView;                                                                          </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  32 import android.widget.ToggleButton;                                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  33 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  34 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  35 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  36 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="7522538895261513094" onmouseenter="enter('7522538895261513094');" onmouseout="out('7522538895261513094');" style="">  37 import com.automattic.simplenote.utils.TypefaceSpan;                                                     </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="">  38 import com.automattic.simplenote.utils.Typefaces;                                                        </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  39 import com.google.analytics.tracking.android.EasyTracker;                                                </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  40 import com.google.analytics.tracking.android.Tracker;                                                    </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="">  41 import com.simperium.client.Bucket.ObjectCursor;                                                         </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  42 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  43 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  44 import com.simperium.client.Query;                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  45 import java.util.ArrayList;                                                                              </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  46 import java.util.Calendar;                                                                               </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  47 import java.util.List;                                                                                   </span>
<span  style="">  48                                                                                                          </span>
<span  style="">  49                                                                                                          </span>
<span class="1618452663405433161" onmouseenter="enter('1618452663405433161');" onmouseout="out('1618452663405433161');" style="">  50 public class NoteEditorFragment extends Fragment implements TextWatcher , OnTagAddedListener {           </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  51     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  52                                                                                                          </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  53     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  54                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  55     private Note mNote;                                                                                  </span>
<span  style="">  56                                                                                                          </span>
<span class="7660008197059021576" onmouseenter="enter('7660008197059021576');" onmouseout="out('7660008197059021576');" style="">  57     private EditText mContentEditText;                                                                   </span>
<span  style="">  58                                                                                                          </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  59     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span  style="">  60                                                                                                          </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  61     private ToggleButton mPinButton;                                                                     </span>
<span  style="">  62                                                                                                          </span>
<span class="5538665953767928170" onmouseenter="enter('5538665953767928170');" onmouseout="out('5538665953767928170');" style="">  63     private boolean mShowNoteTitle;                                                                      </span>
<span  style="">  64                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  65     private Handler mAutoSaveHandler;                                                                    </span>
<span  style="">  66                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  67     private LinearLayout mPlaceholderView;                                                               </span>
<span  style="">  68                                                                                                          </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="">  69     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span  style="">  70                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  71     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  72      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  73      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  74      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  75     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76     }                                                                                                    </span>
<span  style="">  77                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  78     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  79     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  80         super.onCreate(savedInstanceState);                                                              </span>
<span class="3212800391422206318" onmouseenter="enter('3212800391422206318');" onmouseout="out('3212800391422206318');" style="">  81         if (!((NotesActivity) (getActivity())).isLargeScreenLandscape()) {                               </span>
<span class="6330052706173637194" onmouseenter="enter('6330052706173637194');" onmouseout="out('6330052706173637194');" style="">  82             mShowNoteTitle = true;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83         }                                                                                                </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style="">  84         mAutoSaveHandler = new Handler();                                                                </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style="">  85         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  86             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style="">  87             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="2260898774317245438" onmouseenter="enter('2260898774317245438');" onmouseout="out('2260898774317245438');" style="">  88                 Activity activity = ((Activity) (context));                                              </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style="">  89                 if (activity == null) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">  90                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91                 }                                                                                        </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style="">  92                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93             }                                                                                            </span>
<span  style="">  94                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  95             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style="">  96             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="-6599830707153798207" onmouseenter="enter('-6599830707153798207');" onmouseout="out('-6599830707153798207');" style="">  97                 TextView textView = ((TextView) (view));                                                 </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style="">  98                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99             }                                                                                            </span>
<span  style=""> 100                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 101             @Override                                                                                    </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style=""> 102             public CharSequence convertToString(Cursor cursor){                                          </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 103                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104             }                                                                                            </span>
<span  style=""> 105                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 106             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 107             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="6851307140430031973" onmouseenter="enter('6851307140430031973');" onmouseout="out('6851307140430031973');" style=""><abbr title=" 108                 Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter));"> 108                 Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter)ðŸ”µ</abbr></span>
<span class="7543229546091785189" onmouseenter="enter('7543229546091785189');" onmouseout="out('7543229546091785189');" style=""> 109                 Activity activity = ((Activity) (getActivity()));                                        </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 110                 if (activity == null) {                                                                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 111                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112                 }                                                                                        </span>
<span class="3849441011104911255" onmouseenter="enter('3849441011104911255');" onmouseout="out('3849441011104911255');" style=""> 113                 Simplenote application = ((Simplenote) (activity.getApplication()));                     </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 114                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 115                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 116                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 117                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 118                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 119                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-3981714819480949036" onmouseenter="enter('-3981714819480949036');" onmouseout="out('-3981714819480949036');" style=""> 120                 if (filter != null) {                                                                    </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 121                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 121                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122                 }                                                                                        </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 123                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 125         };                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126     }                                                                                                    </span>
<span  style=""> 127                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 128     @Override                                                                                            </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 129     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 130         View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);               </span>
<span class="6289461498067704006" onmouseenter="enter('6289461498067704006');" onmouseout="out('6289461498067704006');" style=""> 131         mContentEditText = ((EditText) (rootView.findViewById(R.id.note_content)));                      </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 132         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style=""><abbr title=" 133         mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));"> 133         mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONTðŸ”µ</abbr></span>
<span class="4545655727599787961" onmouseenter="enter('4545655727599787961');" onmouseout="out('4545655727599787961');" style=""> 134         mTagView = ((TagsMultiAutoCompleteTextView) (rootView.findViewById(R.id.tag_view)));             </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 135         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style=""> 136         mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));</span>
<span class="1577312702828315360" onmouseenter="enter('1577312702828315360');" onmouseout="out('1577312702828315360');" style=""> 137         mPinButton = ((ToggleButton) (rootView.findViewById(R.id.pinButton)));                           </span>
<span class="8859941692086049893" onmouseenter="enter('8859941692086049893');" onmouseout="out('8859941692086049893');" style=""> 138         mPlaceholderView = ((LinearLayout) (rootView.findViewById(R.id.placeholder)));                   </span>
<span class="4940105333527548907" onmouseenter="enter('4940105333527548907');" onmouseout="out('4940105333527548907');" style=""> 139         if (((NotesActivity) (getActivity())).isLargeScreenLandscape() &amp;&amp; (mNote == null)) {             </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 140             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141         }                                                                                                </span>
<span class="-3110192674376248785" onmouseenter="enter('-3110192674376248785');" onmouseout="out('-3110192674376248785');" style=""> 142         if ((getArguments() != null) &amp;&amp; getArguments().containsKey(ARG_ITEM_ID)) {                       </span>
<span class="979392156944395522" onmouseenter="enter('979392156944395522');" onmouseout="out('979392156944395522');" style=""> 143             String key = getArguments().getString(ARG_ITEM_ID);                                          </span>
<span class="3058880090979505534" onmouseenter="enter('3058880090979505534');" onmouseout="out('3058880090979505534');" style=""> 144             new loadNoteTask().execute(key);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145         }                                                                                                </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 146         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 147         return rootView;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148     }                                                                                                    </span>
<span  style=""> 149                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 150     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 151     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 152         super.onResume();                                                                                </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 153         mTagView.setOnTagAddedListener(this);                                                            </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 154         if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                             </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 155             // Show soft keyboard                                                                        </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 156             mContentEditText.requestFocus();                                                             </span>
<span  style=""> 157                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 158             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 158             InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(CðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 159             if (inputMethodManager != null)                                                              </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 160                 inputMethodManager.showSoftInput(mContentEditText, 0);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 165     public void onPause() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 166         saveAndSyncNote();                                                                               </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 167         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 168                                                                                                          </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 169         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 170             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span  style=""> 171                                                                                                          </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 172         super.onPause();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173     }                                                                                                    </span>
<span  style=""> 174                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 175     public void setNote(String noteID) {                                                                 </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 176         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 177                                                                                                          </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 178         // If we have a note already (on a tablet in landscape), save the note.                          </span>
<span class="2495964344956633624" onmouseenter="enter('2495964344956633624');" onmouseout="out('2495964344956633624');" style=""> 179         if (mNote != null)                                                                               </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 180             saveAndSyncNote();                                                                           </span>
<span  style=""> 181                                                                                                          </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style=""> 182         Simplenote simplenote = (Simplenote)getActivity().getApplication();                              </span>
<span class="-2998483632528805808" onmouseenter="enter('-2998483632528805808');" onmouseout="out('-2998483632528805808');" style=""> 183         Bucket&lt;Note&gt; notesBucket = simplenote.getNotesBucket();                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 184         try {                                                                                            </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 185             mNote = notesBucket.get(noteID);                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 186         } catch (BucketObjectMissingException e) {                                                       </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 187             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188         }                                                                                                </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 189         refreshContent(false);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190     }                                                                                                    </span>
<span  style=""> 191                                                                                                          </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 192     public void refreshContent(boolean isNoteUpdate) {                                                   </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 193         if (mNote != null) {                                                                             </span>
<span class="4947294885354614328" onmouseenter="enter('4947294885354614328');" onmouseout="out('4947294885354614328');" style=""> 194             Log.v(&quot;Simplenote&quot;, &quot;refreshing content&quot;);                                                   </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 195             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 196                                                                                                          </span>
<span class="9084290441742351375" onmouseenter="enter('9084290441742351375');" onmouseout="out('9084290441742351375');" style=""><abbr title=" 197             int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mContentEditText.getSelectionEnd());"> 197             int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toStrinðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 198             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style=""><abbr title=" 199             if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 199             if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSeleðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 200                 mContentEditText.setSelection(cursorPosition);                                           </span>
<span  style=""> 201                                                                                                          </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 202             mPinButton.setChecked(mNote.isPinned());                                                     </span>
<span  style=""> 203                                                                                                          </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 204             setActionBarTitle();                                                                         </span>
<span  style=""> 205                                                                                                          </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 206             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208     }                                                                                                    </span>
<span  style=""> 209                                                                                                          </span>
<span class="-5496131723873966197" onmouseenter="enter('-5496131723873966197');" onmouseout="out('-5496131723873966197');" style=""> 210     public void updateTagList() {                                                                        </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 211         Activity activity = getActivity();                                                               </span>
<span class="-686470663642561295" onmouseenter="enter('-686470663642561295');" onmouseout="out('-686470663642561295');" style=""> 212         if (activity == null) {                                                                          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 213             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214         }                                                                                                </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 215         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 216         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217     }                                                                                                    </span>
<span  style=""> 218                                                                                                          </span>
<span class="-6501448993933584559" onmouseenter="enter('-6501448993933584559');" onmouseout="out('-6501448993933584559');" style=""> 219     private void setActionBarTitle() {                                                                   </span>
<span class="1044437851216096859" onmouseenter="enter('1044437851216096859');" onmouseout="out('1044437851216096859');" style=""> 220         String title;                                                                                    </span>
<span class="-2641001050748798506" onmouseenter="enter('-2641001050748798506');" onmouseout="out('-2641001050748798506');" style=""> 221         if (mShowNoteTitle &amp;&amp; (getActivity() != null)) {                                                 </span>
<span class="1536535917032383611" onmouseenter="enter('1536535917032383611');" onmouseout="out('1536535917032383611');" style=""> 222             if ((mNote.getTitle() != null) &amp;&amp; (!mNote.getTitle().equals(&quot;&quot;))) {                          </span>
<span class="-5915161712756481661" onmouseenter="enter('-5915161712756481661');" onmouseout="out('-5915161712756481661');" style=""> 223                 title = mNote.getTitle();                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224             } else {                                                                                     </span>
<span class="5889035754693609241" onmouseenter="enter('5889035754693609241');" onmouseout="out('5889035754693609241');" style=""> 225                 title = getString(R.string.new_note);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226             }                                                                                            </span>
<span class="-5894217806054704471" onmouseenter="enter('-5894217806054704471');" onmouseout="out('-5894217806054704471');" style=""> 227             SpannableString s = new SpannableString(title);                                              </span>
<span class="-5946011843383411534" onmouseenter="enter('-5946011843383411534');" onmouseout="out('-5946011843383411534');" style=""><abbr title=" 228             s.setSpan(new TypefaceSpan(getActivity().getBaseContext()), 0, s.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);"> 228             s.setSpan(new TypefaceSpan(getActivity().getBaseContext()), 0, s.length(), Spannable.SPAN_EXCðŸ”µ</abbr></span>
<span class="8022484383441167908" onmouseenter="enter('8022484383441167908');" onmouseout="out('8022484383441167908');" style=""> 229             getActivity().getActionBar().setTitle(s);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231     }                                                                                                    </span>
<span  style=""> 232                                                                                                          </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 233     int newCursorLocation(String newText, String oldText, int cursorLocation) {                          </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 234         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 235         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 236         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 237         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 238         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 239         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 240         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 241         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 242                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 243         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 244                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 245         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 246                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 247         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 248         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 249             return newText.length();                                                                     </span>
<span  style=""> 250                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 251         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 252         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 253                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 254         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 255             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 255             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 256             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 256             afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 257         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 258             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span  style=""> 260                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 261         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 262         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 263             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 264                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 265         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 266         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span  style=""> 268                                                                                                          </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 269     private Runnable autoSaveRunnable = new Runnable() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 270         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 271         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 272             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 274     };                                                                                                   </span>
<span  style=""> 275                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 276     @Override                                                                                            </span>
<span class="-9205568981681343406" onmouseenter="enter('-9205568981681343406');" onmouseout="out('-9205568981681343406');" style=""> 277     public void onTagsChanged(String tagString){                                                         </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 278         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 279         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 280         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 281         mNote.save();                                                                                    </span>
<span class="-4835851531632304805" onmouseenter="enter('-4835851531632304805');" onmouseout="out('-4835851531632304805');" style=""> 282         if (getActivity() != null)                                                                       </span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 283             EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 287     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 288         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 292     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 293         // Unused                                                                                        </span>
<span  style=""> 294                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295     }                                                                                                    </span>
<span  style=""> 296                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 297     @Override                                                                                            </span>
<span class="7273375812891434069" onmouseenter="enter('7273375812891434069');" onmouseout="out('7273375812891434069');" style=""> 298     public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {                        </span>
<span  style=""> 299                                                                                                          </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 300         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span  style=""> 301                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 302         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 303             mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                          </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 304             mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span  style=""> 307                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 308     private void saveAndSyncNote() {                                                                     </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 309         if (mNote == null)                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 310             return;                                                                                      </span>
<span  style=""> 311                                                                                                          </span>
<span class="-1853245796722779060" onmouseenter="enter('-1853245796722779060');" onmouseout="out('-1853245796722779060');" style=""> 312         new saveNoteTask().execute();                                                                    </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 313         setActionBarTitle();                                                                             </span>
<span  style=""> 314                                                                                                          </span>
<span class="-5951013917039188923" onmouseenter="enter('-5951013917039188923');" onmouseout="out('-5951013917039188923');" style=""> 315         Log.v(&quot;Simplenote&quot;, &quot;autosaving note&quot;);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316     }                                                                                                    </span>
<span  style=""> 317                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 318     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 319         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 320             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 321             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 322             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 323             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 324                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 325         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 326             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 327                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329     }                                                                                                    </span>
<span  style=""> 330                                                                                                          </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 331     // Use spaces in tag autocompletion list                                                             </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 332     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 332     // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-tðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 333     public class SpaceTokenizer implements Tokenizer {                                                   </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 334         public int findTokenStart(CharSequence text, int cursor) {                                       </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 335             int i = cursor;                                                                              </span>
<span class="5934463837521260685" onmouseenter="enter('5934463837521260685');" onmouseout="out('5934463837521260685');" style=""> 336             while ((i &gt; 0) &amp;&amp; (text.charAt(i - 1) != &#x27; &#x27;)) {                                             </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 337                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338             }                                                                                            </span>
<span class="-5358973501792243566" onmouseenter="enter('-5358973501792243566');" onmouseout="out('-5358973501792243566');" style=""> 339             while ((i &lt; cursor) &amp;&amp; (text.charAt(i) == &#x27; &#x27;)) {                                            </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 340                 i++;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341             }                                                                                            </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 342             return i;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343         }                                                                                                </span>
<span  style=""> 344                                                                                                          </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 345         public int findTokenEnd(CharSequence text, int cursor) {                                         </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 346             int i = cursor;                                                                              </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 347             int len = text.length();                                                                     </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 348             while (i &lt; len) {                                                                            </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 349                 if (text.charAt(i) == &#x27; &#x27;) {                                                             </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 350                     return i;                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 351                 } else {                                                                                 </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 352                     i++;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354             }                                                                                            </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 355             return len;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356         }                                                                                                </span>
<span  style=""> 357                                                                                                          </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 358         public CharSequence terminateToken(CharSequence text) {                                          </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 359             int i = text.length();                                                                       </span>
<span class="-1978436364843687679" onmouseenter="enter('-1978436364843687679');" onmouseout="out('-1978436364843687679');" style=""> 360             while ((i &gt; 0) &amp;&amp; (text.charAt(i - 1) == &#x27; &#x27;)) {                                             </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 361                 i--;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362             }                                                                                            </span>
<span class="4515862521225198503" onmouseenter="enter('4515862521225198503');" onmouseout="out('4515862521225198503');" style=""> 363             if ((i &gt; 0) &amp;&amp; (text.charAt(i - 1) == &#x27; &#x27;)) {                                                </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 364                 return text;                                                                             </span>
<span class="6635265685313620656" onmouseenter="enter('6635265685313620656');" onmouseout="out('6635265685313620656');" style=""> 365             } else if (text instanceof Spanned) {                                                        </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 366                 SpannableString sp = new SpannableString(text + &quot; &quot;);                                    </span>
<span class="-825398783849661023" onmouseenter="enter('-825398783849661023');" onmouseout="out('-825398783849661023');" style=""><abbr title=" 367                 TextUtils.copySpansFrom(((Spanned) (text)), 0, text.length(), java.lang.Object.class, sp, 0);"> 367                 TextUtils.copySpansFrom(((Spanned) (text)), 0, text.length(), java.lang.Object.class, sp,ðŸ”µ</abbr></span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 368                 return sp;                                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 369             } else {                                                                                     </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 370                 return text + &quot; &quot;;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373     }                                                                                                    </span>
<span  style=""> 374                                                                                                          </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 375     private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 376         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 377         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 378             String noteID = args[0];                                                                     </span>
<span class="-5535502332065979585" onmouseenter="enter('-5535502332065979585');" onmouseout="out('-5535502332065979585');" style=""> 379             NotesActivity notesActivity = ((NotesActivity) (getActivity()));                             </span>
<span class="-3539751911157662543" onmouseenter="enter('-3539751911157662543');" onmouseout="out('-3539751911157662543');" style=""> 380             Simplenote application = ((Simplenote) (notesActivity.getApplication()));                    </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 381             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 382             try {                                                                                        </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 383                 mNote = notesBucket.get(noteID);                                                         </span>
<span class="-6154859570814008859" onmouseenter="enter('-6154859570814008859');" onmouseout="out('-6154859570814008859');" style=""> 384                 notesActivity.setCurrentNote(mNote);                                                     </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 385             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 386                 // TODO: Handle a missing note                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 388             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span  style=""> 390                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 391         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 392         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 393             refreshContent(false);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395     }                                                                                                    </span>
<span  style=""> 396                                                                                                          </span>
<span class="-6338361705232509236" onmouseenter="enter('-6338361705232509236');" onmouseout="out('-6338361705232509236');" style=""> 397     private class saveNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 398         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 399         protected Void doInBackground(String... args) {                                                  </span>
<span class="7501654987306227365" onmouseenter="enter('7501654987306227365');" onmouseout="out('7501654987306227365');" style=""> 400             String content = mContentEditText.getText().toString();                                      </span>
<span class="5370167507398401430" onmouseenter="enter('5370167507398401430');" onmouseout="out('5370167507398401430');" style=""> 401             String tagString = mTagView.getText().toString();                                            </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 402             if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                   </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 403                 mNote.setContent(content);                                                               </span>
<span class="8315132155135825050" onmouseenter="enter('8315132155135825050');" onmouseout="out('8315132155135825050');" style=""> 404                 mNote.setTagString(mTagView.getText().toString());                                       </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 405                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 406                 // Send pinned event to google analytics if changed                                      </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 407                 mNote.setPinned(mPinButton.isChecked());                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 408                 mNote.save();                                                                            </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 409                 if (getActivity() != null) {                                                             </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 410                     Tracker tracker = EasyTracker.getTracker();                                          </span>
<span class="9119823558701234173" onmouseenter="enter('9119823558701234173');" onmouseout="out('9119823558701234173');" style=""> 411                     if (mNote.isPinned() != mPinButton.isChecked()) {                                    </span>
<span class="-3847688300875000686" onmouseenter="enter('-3847688300875000686');" onmouseout="out('-3847688300875000686');" style=""><abbr title=" 412                         tracker.sendEvent(&quot;note&quot;, mPinButton.isChecked() ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 412                         tracker.sendEvent(&quot;note&quot;, mPinButton.isChecked() ? &quot;pinned_note&quot; : &quot;unpinned_noteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                     }                                                                                    </span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 414                     tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 417             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420 }                                                                                                        </span>

















































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">   3  import java.util.ArrayList;                                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">   4  import java.util.Calendar;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">   5  import java.util.List;                                                                                            </span>
<span  style="">   6                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   7 +import android.app.Activity;                                                                                      </span>
<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   8  import android.app.Fragment;                                                                                      </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   9  import android.content.Context;                                                                                   </span>

<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  11 +import android.database.Cursor;                                                                                   </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  13  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  14  import android.text.Editable;                                                                                     </span>

<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  15  import android.text.SpannableString;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16  import android.text.Spanned;                                                                                      </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  17  import android.text.TextUtils;                                                                                    </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  18  import android.text.TextWatcher;                                                                                  </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  19  import android.util.Log;                                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  20  import android.view.LayoutInflater;                                                                               </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  21  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  22  import android.view.ViewGroup;                                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  23  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  24  import android.widget.ArrayAdapter;                                                                               </span>
<span class="-1389926198978222011" onmouseenter="enter('-1389926198978222011');" onmouseout="out('-1389926198978222011');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  25 +import android.widget.BaseAdapter;                                                                                </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import android.widget.CursorAdapter;                                                                              </span>
<span class="-5161735605762446460" onmouseenter="enter('-5161735605762446460');" onmouseout="out('-5161735605762446460');" style="">  27  import android.widget.EditText;                                                                                   </span>
<span class="8134811356038486348" onmouseenter="enter('8134811356038486348');" onmouseout="out('8134811356038486348');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  28 +import android.widget.FilterQueryProvider;                                                                        </span>
<span class="738832544262858131" onmouseenter="enter('738832544262858131');" onmouseout="out('738832544262858131');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import android.widget.Filterable;                                                                                 </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  30  import android.widget.LinearLayout;                                                                               </span>
<span class="6118019645448811466" onmouseenter="enter('6118019645448811466');" onmouseout="out('6118019645448811466');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +import android.widget.ListAdapter;                                                                                </span>
<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  32  import android.widget.MultiAutoCompleteTextView.Tokenizer;                                                        </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import android.widget.TextView;                                                                                   </span>
<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  34  import android.widget.ToggleButton;                                                                               </span>
<span  style="">  35                                                                                                                    </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  36  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  37  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  38  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  39  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>


<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  40  import com.google.analytics.tracking.android.EasyTracker;                                                         </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  41  import com.google.analytics.tracking.android.Tracker;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  42  import com.simperium.client.Bucket;                                                                               </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="">  43  import com.simperium.client.Bucket.ObjectCursor;                                                                  </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  44  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  45 +import com.simperium.client.Query;                                                                                </span>
<span  style="">  46                                                                                                                    </span>
<span class="-3142892757748375832" onmouseenter="enter('-3142892757748375832');" onmouseout="out('-3142892757748375832');" style="">  47  public class NoteEditorFragment extends Fragment implements TextWatcher, OnTagAddedListener {                     </span>
<span  style="">  48                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  49      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  50      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span  style="">  51                                                                                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  52      private Note mNote;                                                                                           </span>
<span class="7660008197059021576" onmouseenter="enter('7660008197059021576');" onmouseout="out('7660008197059021576');" style="">  53      private EditText mContentEditText;                                                                            </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  54      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  55      private ToggleButton mPinButton;                                                                              </span>
<span class="5538665953767928170" onmouseenter="enter('5538665953767928170');" onmouseout="out('5538665953767928170');" style="">  56      private boolean mShowNoteTitle;                                                                               </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  57      private Handler mAutoSaveHandler;                                                                             </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  58      private LinearLayout mPlaceholderView;                                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  59 -                                                                                                                  </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +    private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  61      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  62       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  63       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  64       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  65      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66      }                                                                                                             </span>
<span  style="">  67                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  68      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  69      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  70          super.onCreate(savedInstanceState);                                                                       </span>
<span  style="">  71                                                                                                                    </span>
<span class="-1496429319349342270" onmouseenter="enter('-1496429319349342270');" onmouseout="out('-1496429319349342270');" style="">  72          if (!((NotesActivity) getActivity()).isLargeScreenLandscape())                                            </span>
<span class="6330052706173637194" onmouseenter="enter('6330052706173637194');" onmouseout="out('6330052706173637194');" style="">  73              mShowNoteTitle = true;                                                                                </span>
<span  style="">  74                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style="">  75          mAutoSaveHandler = new Handler();                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  76 +                                                                                                                  </span>
<span class="3992270686517948303" onmouseenter="enter('3992270686517948303');" onmouseout="out('3992270686517948303');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  77 +        mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0){                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  79 +            @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +            public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  81 +                Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  82 +                if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  83 +                return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  84 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  85 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  86 +            @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  87 +            public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  88 +                TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  89 +                textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  90 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  91 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +            @Override                                                                                             </span>
<span class="-1664730445059241307" onmouseenter="enter('-1664730445059241307');" onmouseout="out('-1664730445059241307');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  93 +            public CharSequence convertToString(Cursor cursor){                                                   </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +                return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  97 +            @Override                                                                                             </span>
<span class="8156821713938614343" onmouseenter="enter('8156821713938614343');" onmouseout="out('8156821713938614343');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  98 +            public Cursor runQueryOnBackgroundThread(CharSequence filter){                                        </span>
<span class="6851307140430031973" onmouseenter="enter('6851307140430031973');" onmouseout="out('6851307140430031973');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  99 +                Log.v(Simplenote.TAG, String.format(&quot;runQueryOnBackgroundThread with filter: %s&quot;, filter));       </span>
<span class="5538625856303982954" onmouseenter="enter('5538625856303982954');" onmouseout="out('5538625856303982954');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 100 +                Activity activity = (Activity) getActivity();                                                     </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 101 +                if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 102 +                Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +                Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +                // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 105 +                query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +                // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +                query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +                // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-1465062097430607325" onmouseenter="enter('-1465062097430607325');" onmouseout="out('-1465062097430607325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 109 +                if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 109 +                if (filter != null ) query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%ðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +                return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 111 +            }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 112 +        };                                                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 113 +                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114      }                                                                                                             </span>
<span  style=""> 115                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 116      @Override                                                                                                     </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style=""> 117      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {           </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style=""> 118          View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                        </span>
<span class="-2723434410959845299" onmouseenter="enter('-2723434410959845299');" onmouseout="out('-2723434410959845299');" style=""> 119          mContentEditText = ((EditText) rootView.findViewById(R.id.note_content));                                 </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 120          mContentEditText.addTextChangedListener(this);                                                            </span>

<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style=""> 121          mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                          </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 122          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>

<span  style=""> 123                                                                                                                    </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style=""> 124          mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                                        </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style=""> 125          mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                                </span>
<span class="502208635557356679" onmouseenter="enter('502208635557356679');" onmouseout="out('502208635557356679');" style=""> 126          if (((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)                            </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 127              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span  style=""> 128                                                                                                                    </span>
<span class="-7982135264033903740" onmouseenter="enter('-7982135264033903740');" onmouseout="out('-7982135264033903740');" style=""> 129          if (getArguments() != null &amp;&amp; getArguments().containsKey(ARG_ITEM_ID)) {                                  </span>
<span class="979392156944395522" onmouseenter="enter('979392156944395522');" onmouseout="out('979392156944395522');" style=""> 130              String key = getArguments().getString(ARG_ITEM_ID);                                                   </span>
<span class="3058880090979505534" onmouseenter="enter('3058880090979505534');" onmouseout="out('3058880090979505534');" style=""> 131              new loadNoteTask().execute(key);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132          }                                                                                                         </span>
<span  style=""> 133                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +        mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>
<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style=""> 135  		return rootView;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136  	}                                                                                                                </span>
<span  style=""> 137                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 138      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 139      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 140          super.onResume();                                                                                         </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 141          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 142          if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                                      </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 143              // Show soft keyboard                                                                                 </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 144              mContentEditText.requestFocus();                                                                      </span>
<span  style=""> 145                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 146              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 146              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 147              if (inputMethodManager != null)                                                                       </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 148                  inputMethodManager.showSoftInput(mContentEditText, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150      }                                                                                                             </span>
<span  style=""> 151                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 152      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 153      public void onPause() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 154          saveAndSyncNote();                                                                                        </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 155          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 156                                                                                                                    </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 157          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 158              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 160          super.onPause();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161      }                                                                                                             </span>
<span  style=""> 162                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 163      public void setNote(String noteID) {                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 164          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 165                                                                                                                    </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 166          // If we have a note already (on a tablet in landscape), save the note.                                   </span>
<span class="2495964344956633624" onmouseenter="enter('2495964344956633624');" onmouseout="out('2495964344956633624');" style=""> 167          if (mNote != null)                                                                                        </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 168              saveAndSyncNote();                                                                                    </span>
<span  style=""> 169                                                                                                                    </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style=""> 170          Simplenote simplenote = (Simplenote)getActivity().getApplication();                                       </span>
<span class="-2998483632528805808" onmouseenter="enter('-2998483632528805808');" onmouseout="out('-2998483632528805808');" style=""> 171          Bucket&lt;Note&gt; notesBucket = simplenote.getNotesBucket();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 172          try {                                                                                                     </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 173              mNote = notesBucket.get(noteID);                                                                      </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 174          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 175              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176          }                                                                                                         </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 177          refreshContent(false);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178      }                                                                                                             </span>
<span  style=""> 179                                                                                                                    </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 180      public void refreshContent(boolean isNoteUpdate) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 181          if (mNote != null) {                                                                                      </span>
<span class="4947294885354614328" onmouseenter="enter('4947294885354614328');" onmouseout="out('4947294885354614328');" style=""> 182              Log.v(&quot;Simplenote&quot;, &quot;refreshing content&quot;);                                                            </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 183              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 184                                                                                                                    </span>
<span class="9084290441742351375" onmouseenter="enter('9084290441742351375');" onmouseout="out('9084290441742351375');" style=""><abbr title=" 185              int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mContentEditText.getSelectionEnd());"> 185              int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mConðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 186              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style=""><abbr title=" 187              if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 187              if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd(ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 188                  mContentEditText.setSelection(cursorPosition);                                                    </span>
<span  style=""> 189                                                                                                                    </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 190              mPinButton.setChecked(mNote.isPinned());                                                              </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 192              setActionBarTitle();                                                                                  </span>
<span  style=""> 193                                                                                                                    </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 194              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196      }                                                                                                             </span>
<span  style=""> 197                                                                                                                    </span>
<span class="-392171935892263585" onmouseenter="enter('-392171935892263585');" onmouseout="out('-392171935892263585');" style=""> 198      public void updateTagList(){                                                                                  </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 199 +        Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 200 +        if (activity == null) return;                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 201 +                                                                                                                  </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 202          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 203          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 204 -                                                                                                                  </span>
<span class="-1028179658854227214" onmouseenter="enter('-1028179658854227214');" onmouseout="out('-1028179658854227214');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 205 -        new setTagsAdapterTask().execute();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206      }                                                                                                             </span>
<span  style=""> 207                                                                                                                    </span>
<span class="-6501448993933584559" onmouseenter="enter('-6501448993933584559');" onmouseout="out('-6501448993933584559');" style=""> 208      private void setActionBarTitle() {                                                                            </span>
<span class="-7433084837374238880" onmouseenter="enter('-7433084837374238880');" onmouseout="out('-7433084837374238880');" style=""> 209          if (mShowNoteTitle) {                                                                                     </span>


<span class="-8960038423765749168" onmouseenter="enter('-8960038423765749168');" onmouseout="out('-8960038423765749168');" style=""> 210              if (mNote.getTitle() != null &amp;&amp; !mNote.getTitle().equals(&quot;&quot;))                                         </span>
<span class="-4982906393597799649" onmouseenter="enter('-4982906393597799649');" onmouseout="out('-4982906393597799649');" style=""> 211                  getActivity().getActionBar().setTitle(mNote.getTitle());                                          </span>

<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 212              else                                                                                                  </span>
<span class="-4269522014550866660" onmouseenter="enter('-4269522014550866660');" onmouseout="out('-4269522014550866660');" style=""> 213                  getActivity().getActionBar().setTitle(R.string.new_note);                                         </span>






<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215      }                                                                                                             </span>
<span  style=""> 216                                                                                                                    </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 217      int newCursorLocation(String newText, String oldText, int cursorLocation) {                                   </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 218          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 219          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 220          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 221          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 222          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 223          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 224          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 225          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 226                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 227          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 228                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 229          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 230                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 231          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 232          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 233              return newText.length();                                                                              </span>
<span  style=""> 234                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 235          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 236          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 237                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 238          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 239              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 239              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 240              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 240              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 241          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 242              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243          }                                                                                                         </span>
<span  style=""> 244                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 245          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 246          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 247              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 248                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 249          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 250          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251      }                                                                                                             </span>
<span  style=""> 252                                                                                                                    </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 253      private Runnable autoSaveRunnable = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 254          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 255          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 256              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 258      };                                                                                                            </span>
<span  style=""> 259                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 260      @Override                                                                                                     </span>
<span class="-9205568981681343406" onmouseenter="enter('-9205568981681343406');" onmouseout="out('-9205568981681343406');" style=""> 261      public void onTagsChanged(String tagString){                                                                  </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 262          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 263          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 264          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 265          mNote.save();                                                                                             </span>
<span class="-4835851531632304805" onmouseenter="enter('-4835851531632304805');" onmouseout="out('-4835851531632304805');" style=""> 266          if (getActivity() != null)                                                                                </span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 267              EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268      }                                                                                                             </span>
<span  style=""> 269                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 270      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 271      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 272          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273      }                                                                                                             </span>
<span  style=""> 274                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 275      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 276      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 277          // Unused                                                                                                 </span>
<span  style=""> 278                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279      }                                                                                                             </span>
<span  style=""> 280                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 281      @Override                                                                                                     </span>
<span class="7273375812891434069" onmouseenter="enter('7273375812891434069');" onmouseout="out('7273375812891434069');" style=""> 282      public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {                                 </span>
<span  style=""> 283                                                                                                                    </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 284          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span  style=""> 285                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 286          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 287              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 288              mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290      }                                                                                                             </span>
<span  style=""> 291                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 292      private void saveAndSyncNote() {                                                                              </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 293          if (mNote == null)                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 294              return;                                                                                               </span>
<span  style=""> 295                                                                                                                    </span>
<span class="-1853245796722779060" onmouseenter="enter('-1853245796722779060');" onmouseout="out('-1853245796722779060');" style=""> 296          new saveNoteTask().execute();                                                                             </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 297          setActionBarTitle();                                                                                      </span>
<span  style=""> 298                                                                                                                    </span>
<span class="-5951013917039188923" onmouseenter="enter('-5951013917039188923');" onmouseout="out('-5951013917039188923');" style=""> 299          Log.v(&quot;Simplenote&quot;, &quot;autosaving note&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300      }                                                                                                             </span>
<span  style=""> 301                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 302      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 303          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 304              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 305              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 306              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 307              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 308                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 309          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 310              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 311                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313      }                                                                                                             </span>
<span  style=""> 314                                                                                                                    </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 315      // Use spaces in tag autocompletion list                                                                      </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 316      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 316      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiaðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 317      public class SpaceTokenizer implements Tokenizer {                                                            </span>
<span  style=""> 318                                                                                                                    </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 319          public int findTokenStart(CharSequence text, int cursor) {                                                </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 320              int i = cursor;                                                                                       </span>
<span  style=""> 321                                                                                                                    </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 322              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 323                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324              }                                                                                                     </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 325              while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                         </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 326                  i++;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327              }                                                                                                     </span>
<span  style=""> 328                                                                                                                    </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 329              return i;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330          }                                                                                                         </span>
<span  style=""> 331                                                                                                                    </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 332          public int findTokenEnd(CharSequence text, int cursor) {                                                  </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 333              int i = cursor;                                                                                       </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 334              int len = text.length();                                                                              </span>
<span  style=""> 335                                                                                                                    </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 336              while (i &lt; len) {                                                                                     </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 337                  if (text.charAt(i) == &#x27; &#x27;) {                                                                      </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 338                      return i;                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 339                  } else {                                                                                          </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 340                      i++;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342              }                                                                                                     </span>
<span  style=""> 343                                                                                                                    </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 344              return len;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345          }                                                                                                         </span>
<span  style=""> 346                                                                                                                    </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 347          public CharSequence terminateToken(CharSequence text) {                                                   </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 348              int i = text.length();                                                                                </span>
<span  style=""> 349                                                                                                                    </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 350              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 351                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352              }                                                                                                     </span>
<span  style=""> 353                                                                                                                    </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 354              if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                             </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 355                  return text;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 356              } else {                                                                                              </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 357                  if (text instanceof Spanned) {                                                                    </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 358                      SpannableString sp = new SpannableString(text + &quot; &quot;);                                         </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 359                      TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                                     </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 360                              Object.class, sp, 0);                                                                 </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 361                      return sp;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 362                  } else {                                                                                          </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 363                      return text + &quot; &quot;;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367      }                                                                                                             </span>
<span  style=""> 368                                                                                                                    </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 369      private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 370                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 371          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 372          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 373              String noteID = args[0];                                                                              </span>
<span class="6424563509553382563" onmouseenter="enter('6424563509553382563');" onmouseout="out('6424563509553382563');" style=""> 374              NotesActivity notesActivity = (NotesActivity)getActivity();                                           </span>
<span class="3372428562169226666" onmouseenter="enter('3372428562169226666');" onmouseout="out('3372428562169226666');" style=""> 375              Simplenote application = (Simplenote) notesActivity.getApplication();                                 </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 376              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 377              try {                                                                                                 </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 378                  mNote = notesBucket.get(noteID);                                                                  </span>
<span class="-6154859570814008859" onmouseenter="enter('-6154859570814008859');" onmouseout="out('-6154859570814008859');" style=""> 379                  notesActivity.setCurrentNote(mNote);                                                              </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 380              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 381                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 383              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384          }                                                                                                         </span>
<span  style=""> 385                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 386          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 387          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 388              refreshContent(false);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 389 -        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 390 -    }                                                                                                             </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 391 -                                                                                                                  </span>
<span class="-8193729353024897311" onmouseenter="enter('-8193729353024897311');" onmouseout="out('-8193729353024897311');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 392 -    private class setTagsAdapterTask extends AsyncTask&lt;Void, List, List&gt; {                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 393 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 394 -        @Override                                                                                                 </span>
<span class="3117640362377415908" onmouseenter="enter('3117640362377415908');" onmouseout="out('3117640362377415908');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 395 -        protected List doInBackground(Void... voids) {                                                            </span>
<span class="3072130898554257503" onmouseenter="enter('3072130898554257503');" onmouseout="out('3072130898554257503');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 396 -            // Populate tag list                                                                                  </span>
<span class="-4819314506084115698" onmouseenter="enter('-4819314506084115698');" onmouseout="out('-4819314506084115698');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 397 -            if (getActivity() == null)                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 398 -                return null;                                                                                      </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 399 -            Simplenote simplenote = (Simplenote)getActivity().getApplication();                                   </span>
<span class="-5110266504124495650" onmouseenter="enter('-5110266504124495650');" onmouseout="out('-5110266504124495650');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 400 -            Bucket&lt;Tag&gt; tagBucket = simplenote.getTagsBucket();                                                   </span>
<span class="5854237755002178672" onmouseenter="enter('5854237755002178672');" onmouseout="out('5854237755002178672');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 401 -            ObjectCursor&lt;Tag&gt; tagsCursor = tagBucket.query().include(Tag.NAME_PROPERTY, Tag.NOTE_COUNT_INDEX_NAME).orderByKey().execute();"> 401 -            ObjectCursor&lt;Tag&gt; tagsCursor = tagBucket.query().include(Tag.NAME_PROPERTY, Tag.NOTE_COUNT_INDEX_NAME)ðŸ”µ</abbr></span>
<span class="-4946105276032529342" onmouseenter="enter('-4946105276032529342');" onmouseout="out('-4946105276032529342');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 402 -            List&lt;String&gt; allTags = new ArrayList&lt;String&gt;(tagsCursor.getCount());                                  </span>
<span class="-2065924649467803920" onmouseenter="enter('-2065924649467803920');" onmouseout="out('-2065924649467803920');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 403 -            int nameColumnIndex = tagsCursor.getColumnIndex(Tag.NAME_PROPERTY);                                   </span>
<span class="-190198607880682418" onmouseenter="enter('-190198607880682418');" onmouseout="out('-190198607880682418');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 404 -            while (tagsCursor.moveToNext()) {                                                                     </span>
<span class="3119107845186220219" onmouseenter="enter('3119107845186220219');" onmouseout="out('3119107845186220219');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 405 -                if (!mNote.hasTag(tagsCursor.getSimperiumKey()))                                                  </span>
<span class="4087438641097781239" onmouseenter="enter('4087438641097781239');" onmouseout="out('4087438641097781239');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 406 -                    allTags.add(tagsCursor.getString(nameColumnIndex));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 407 -            }                                                                                                     </span>
<span class="-8368882456679951895" onmouseenter="enter('-8368882456679951895');" onmouseout="out('-8368882456679951895');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 408 -            tagsCursor.close();                                                                                   </span>
<span class="5006840623637768212" onmouseenter="enter('5006840623637768212');" onmouseout="out('5006840623637768212');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 409 -            return allTags;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 410 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 411 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 412 -        @Override                                                                                                 </span>
<span class="-7563990847454016074" onmouseenter="enter('-7563990847454016074');" onmouseout="out('-7563990847454016074');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 413 -        protected void onPostExecute(List tags) {                                                                 </span>
<span class="180377333021844977" onmouseenter="enter('180377333021844977');" onmouseout="out('180377333021844977');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 414 -            if (tags != null &amp;&amp; tags.size() &gt; 0) {                                                                </span>
<span class="-1758625986899767119" onmouseenter="enter('-1758625986899767119');" onmouseout="out('-1758625986899767119');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 415 -                ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(getActivity(),                            </span>
<span class="-1875763580401946263" onmouseenter="enter('-1875763580401946263');" onmouseout="out('-1875763580401946263');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 416 -                        android.R.layout.simple_dropdown_item_1line, tags);                                       </span>
<span class="870780890030142241" onmouseenter="enter('870780890030142241');" onmouseout="out('870780890030142241');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 417 -                mTagView.setAdapter(adapter);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 418 -            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420      }                                                                                                             </span>
<span  style=""> 421                                                                                                                    </span>
<span class="-6338361705232509236" onmouseenter="enter('-6338361705232509236');" onmouseout="out('-6338361705232509236');" style=""> 422      private class saveNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 423                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 424          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 425          protected Void doInBackground(String... args) {                                                           </span>
<span class="7501654987306227365" onmouseenter="enter('7501654987306227365');" onmouseout="out('7501654987306227365');" style=""> 426              String content = mContentEditText.getText().toString();                                               </span>
<span class="5370167507398401430" onmouseenter="enter('5370167507398401430');" onmouseout="out('5370167507398401430');" style=""> 427              String tagString = mTagView.getText().toString();                                                     </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 428              if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                            </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 429                  mNote.setContent(content);                                                                        </span>
<span class="8315132155135825050" onmouseenter="enter('8315132155135825050');" onmouseout="out('8315132155135825050');" style=""> 430                  mNote.setTagString(mTagView.getText().toString());                                                </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 431                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 432                  // Send pinned event to google analytics if changed                                               </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 433                  mNote.setPinned(mPinButton.isChecked());                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 434                  mNote.save();                                                                                     </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 435                  if (getActivity() != null) {                                                                      </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 436                      Tracker tracker = EasyTracker.getTracker();                                                   </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 437                      if (mNote.isPinned() != mPinButton.isChecked())                                               </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 438                          tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 438                          tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pinðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 439                      tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441              }                                                                                                     </span>
<span  style=""> 442                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 443              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">   3  import java.util.ArrayList;                                                                                       </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">   4  import java.util.Calendar;                                                                                        </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">   5  import java.util.List;                                                                                            </span>
<span  style="">   6                                                                                                                    </span>

<span class="7622566010320033225" onmouseenter="enter('7622566010320033225');" onmouseout="out('7622566010320033225');" style="">   7  import android.app.Fragment;                                                                                      </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   8  import android.content.Context;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   9 +import android.graphics.Typeface;                                                                                 </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>

<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13  import android.text.Editable;                                                                                     </span>
<span class="-273560163017703694" onmouseenter="enter('-273560163017703694');" onmouseout="out('-273560163017703694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  14 +import android.text.Spannable;                                                                                    </span>
<span class="1789579566011512842" onmouseenter="enter('1789579566011512842');" onmouseout="out('1789579566011512842');" style="">  15  import android.text.SpannableString;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16  import android.text.Spanned;                                                                                      </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  17  import android.text.TextUtils;                                                                                    </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  18  import android.text.TextWatcher;                                                                                  </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  19  import android.util.Log;                                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  20  import android.view.LayoutInflater;                                                                               </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  21  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  22  import android.view.ViewGroup;                                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  23  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="-6895507238242713504" onmouseenter="enter('-6895507238242713504');" onmouseout="out('-6895507238242713504');" style="">  24  import android.widget.ArrayAdapter;                                                                               </span>


<span class="-5161735605762446460" onmouseenter="enter('-5161735605762446460');" onmouseout="out('-5161735605762446460');" style="">  25  import android.widget.EditText;                                                                                   </span>


<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  26  import android.widget.LinearLayout;                                                                               </span>

<span class="-2925966950149302455" onmouseenter="enter('-2925966950149302455');" onmouseout="out('-2925966950149302455');" style="">  27  import android.widget.MultiAutoCompleteTextView.Tokenizer;                                                        </span>

<span class="-1505700250942826116" onmouseenter="enter('-1505700250942826116');" onmouseout="out('-1505700250942826116');" style="">  28  import android.widget.ToggleButton;                                                                               </span>
<span  style="">  29                                                                                                                    </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  30  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  31  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  32  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  33  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="7522538895261513094" onmouseenter="enter('7522538895261513094');" onmouseout="out('7522538895261513094');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import com.automattic.simplenote.utils.TypefaceSpan;                                                              </span>
<span class="-4759064407281850862" onmouseenter="enter('-4759064407281850862');" onmouseout="out('-4759064407281850862');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import com.automattic.simplenote.utils.Typefaces;                                                                 </span>
<span class="-3620359719870897085" onmouseenter="enter('-3620359719870897085');" onmouseout="out('-3620359719870897085');" style="">  36  import com.google.analytics.tracking.android.EasyTracker;                                                         </span>
<span class="-1089094977948622186" onmouseenter="enter('-1089094977948622186');" onmouseout="out('-1089094977948622186');" style="">  37  import com.google.analytics.tracking.android.Tracker;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  38  import com.simperium.client.Bucket;                                                                               </span>
<span class="-456213946600528316" onmouseenter="enter('-456213946600528316');" onmouseout="out('-456213946600528316');" style="">  39  import com.simperium.client.Bucket.ObjectCursor;                                                                  </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  40  import com.simperium.client.BucketObjectMissingException;                                                         </span>

<span  style="">  41                                                                                                                    </span>
<span class="-3142892757748375832" onmouseenter="enter('-3142892757748375832');" onmouseout="out('-3142892757748375832');" style="">  42  public class NoteEditorFragment extends Fragment implements TextWatcher, OnTagAddedListener {                     </span>
<span  style="">  43                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  44      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  45      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span  style="">  46                                                                                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  47      private Note mNote;                                                                                           </span>
<span class="7660008197059021576" onmouseenter="enter('7660008197059021576');" onmouseout="out('7660008197059021576');" style="">  48      private EditText mContentEditText;                                                                            </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style="">  49      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="2959047860003936172" onmouseenter="enter('2959047860003936172');" onmouseout="out('2959047860003936172');" style="">  50      private ToggleButton mPinButton;                                                                              </span>
<span class="5538665953767928170" onmouseenter="enter('5538665953767928170');" onmouseout="out('5538665953767928170');" style="">  51      private boolean mShowNoteTitle;                                                                               </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style="">  52      private Handler mAutoSaveHandler;                                                                             </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style="">  53      private LinearLayout mPlaceholderView;                                                                        </span>
<span  style="">  54                                                                                                                    </span>

<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  55      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style="">  56       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style="">  57       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  58       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style="">  59      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60      }                                                                                                             </span>
<span  style="">  61                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  62      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style="">  63      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style="">  64          super.onCreate(savedInstanceState);                                                                       </span>
<span  style="">  65                                                                                                                    </span>
<span class="-1496429319349342270" onmouseenter="enter('-1496429319349342270');" onmouseout="out('-1496429319349342270');" style="">  66          if (!((NotesActivity) getActivity()).isLargeScreenLandscape())                                            </span>
<span class="6330052706173637194" onmouseenter="enter('6330052706173637194');" onmouseout="out('6330052706173637194');" style="">  67              mShowNoteTitle = true;                                                                                </span>
<span  style="">  68                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style="">  69          mAutoSaveHandler = new Handler();                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +                                                                                                                  </span>





































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71      }                                                                                                             </span>
<span  style="">  72                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  73      @Override                                                                                                     </span>
<span class="-7355940524539913821" onmouseenter="enter('-7355940524539913821');" onmouseout="out('-7355940524539913821');" style="">  74      public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {           </span>
<span class="6339769591252564933" onmouseenter="enter('6339769591252564933');" onmouseout="out('6339769591252564933');" style="">  75          View rootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                        </span>
<span class="-2723434410959845299" onmouseenter="enter('-2723434410959845299');" onmouseout="out('-2723434410959845299');" style="">  76          mContentEditText = ((EditText) rootView.findViewById(R.id.note_content));                                 </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">  77          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="5696002531157457292" onmouseenter="enter('5696002531157457292');" onmouseout="out('5696002531157457292');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +        mContentEditText.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH)); </span>
<span class="-5685601943521108416" onmouseenter="enter('-5685601943521108416');" onmouseout="out('-5685601943521108416');" style="">  79          mTagView = (TagsMultiAutoCompleteTextView) rootView.findViewById(R.id.tag_view);                          </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style="">  80          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-5145071175773162" onmouseenter="enter('-5145071175773162');" onmouseout="out('-5145071175773162');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  81 +        mTagView.setTypeface(Typefaces.get(getActivity().getBaseContext(), Simplenote.CUSTOM_FONT_PATH));         </span>
<span  style="">  82                                                                                                                    </span>
<span class="8838498328861850169" onmouseenter="enter('8838498328861850169');" onmouseout="out('8838498328861850169');" style="">  83          mPinButton = (ToggleButton) rootView.findViewById(R.id.pinButton);                                        </span>
<span class="-3806018576171196544" onmouseenter="enter('-3806018576171196544');" onmouseout="out('-3806018576171196544');" style="">  84          mPlaceholderView = (LinearLayout) rootView.findViewById(R.id.placeholder);                                </span>
<span class="502208635557356679" onmouseenter="enter('502208635557356679');" onmouseout="out('502208635557356679');" style="">  85          if (((NotesActivity) getActivity()).isLargeScreenLandscape() &amp;&amp; mNote == null)                            </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style="">  86              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span  style="">  87                                                                                                                    </span>
<span class="-7982135264033903740" onmouseenter="enter('-7982135264033903740');" onmouseout="out('-7982135264033903740');" style="">  88          if (getArguments() != null &amp;&amp; getArguments().containsKey(ARG_ITEM_ID)) {                                  </span>
<span class="979392156944395522" onmouseenter="enter('979392156944395522');" onmouseout="out('979392156944395522');" style="">  89              String key = getArguments().getString(ARG_ITEM_ID);                                                   </span>
<span class="3058880090979505534" onmouseenter="enter('3058880090979505534');" onmouseout="out('3058880090979505534');" style="">  90              new loadNoteTask().execute(key);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91          }                                                                                                         </span>
<span  style="">  92                                                                                                                    </span>

<span class="4654908577906893139" onmouseenter="enter('4654908577906893139');" onmouseout="out('4654908577906893139');" style="">  93  		return rootView;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94  	}                                                                                                                </span>
<span  style="">  95                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style="">  97      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style="">  98          super.onResume();                                                                                         </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style="">  99          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span class="1726616917938037339" onmouseenter="enter('1726616917938037339');" onmouseout="out('1726616917938037339');" style=""> 100          if (mNote != null &amp;&amp; mNote.getContent().isEmpty()) {                                                      </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style=""> 101              // Show soft keyboard                                                                                 </span>
<span class="-5568483982770704985" onmouseenter="enter('-5568483982770704985');" onmouseout="out('-5568483982770704985');" style=""> 102              mContentEditText.requestFocus();                                                                      </span>
<span  style=""> 103                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 104              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 104              InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INðŸ”µ</abbr></span>
<span class="-1476760297763804327" onmouseenter="enter('-1476760297763804327');" onmouseout="out('-1476760297763804327');" style=""> 105              if (inputMethodManager != null)                                                                       </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 106                  inputMethodManager.showSoftInput(mContentEditText, 0);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108      }                                                                                                             </span>
<span  style=""> 109                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 110      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 111      public void onPause() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 112          saveAndSyncNote();                                                                                        </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 113          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 114                                                                                                                    </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 115          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 116              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span  style=""> 117                                                                                                                    </span>
<span class="-7508449912261312872" onmouseenter="enter('-7508449912261312872');" onmouseout="out('-7508449912261312872');" style=""> 118          super.onPause();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119      }                                                                                                             </span>
<span  style=""> 120                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 121      public void setNote(String noteID) {                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 122          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 123                                                                                                                    </span>
<span class="-4019470309104916899" onmouseenter="enter('-4019470309104916899');" onmouseout="out('-4019470309104916899');" style=""> 124          // If we have a note already (on a tablet in landscape), save the note.                                   </span>
<span class="2495964344956633624" onmouseenter="enter('2495964344956633624');" onmouseout="out('2495964344956633624');" style=""> 125          if (mNote != null)                                                                                        </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 126              saveAndSyncNote();                                                                                    </span>
<span  style=""> 127                                                                                                                    </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style=""> 128          Simplenote simplenote = (Simplenote)getActivity().getApplication();                                       </span>
<span class="-2998483632528805808" onmouseenter="enter('-2998483632528805808');" onmouseout="out('-2998483632528805808');" style=""> 129          Bucket&lt;Note&gt; notesBucket = simplenote.getNotesBucket();                                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 130          try {                                                                                                     </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 131              mNote = notesBucket.get(noteID);                                                                      </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 132          } catch (BucketObjectMissingException e) {                                                                </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 133              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134          }                                                                                                         </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 135          refreshContent(false);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136      }                                                                                                             </span>
<span  style=""> 137                                                                                                                    </span>
<span class="-5323752859114125708" onmouseenter="enter('-5323752859114125708');" onmouseout="out('-5323752859114125708');" style=""> 138      public void refreshContent(boolean isNoteUpdate) {                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 139          if (mNote != null) {                                                                                      </span>
<span class="4947294885354614328" onmouseenter="enter('4947294885354614328');" onmouseout="out('4947294885354614328');" style=""> 140              Log.v(&quot;Simplenote&quot;, &quot;refreshing content&quot;);                                                            </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 141              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 142                                                                                                                    </span>
<span class="9084290441742351375" onmouseenter="enter('9084290441742351375');" onmouseout="out('9084290441742351375');" style=""><abbr title=" 143              int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mContentEditText.getSelectionEnd());"> 143              int cursorPosition = newCursorLocation(mNote.getContent(), mContentEditText.getText().toString(), mConðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 144              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="2384177704135095384" onmouseenter="enter('2384177704135095384');" onmouseout="out('2384177704135095384');" style=""><abbr title=" 145              if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd())"> 145              if (isNoteUpdate &amp;&amp; mContentEditText.hasFocus() &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd(ðŸ”µ</abbr></span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 146                  mContentEditText.setSelection(cursorPosition);                                                    </span>
<span  style=""> 147                                                                                                                    </span>
<span class="8723833736514346639" onmouseenter="enter('8723833736514346639');" onmouseout="out('8723833736514346639');" style=""> 148              mPinButton.setChecked(mNote.isPinned());                                                              </span>
<span  style=""> 149                                                                                                                    </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 150              setActionBarTitle();                                                                                  </span>
<span  style=""> 151                                                                                                                    </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 152              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154      }                                                                                                             </span>
<span  style=""> 155                                                                                                                    </span>
<span class="-392171935892263585" onmouseenter="enter('-392171935892263585');" onmouseout="out('-392171935892263585');" style=""> 156      public void updateTagList(){                                                                                  </span>



<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 157          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 158          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span  style=""> 159                                                                                                                    </span>
<span class="-1028179658854227214" onmouseenter="enter('-1028179658854227214');" onmouseout="out('-1028179658854227214');" style=""> 160          new setTagsAdapterTask().execute();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161      }                                                                                                             </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-6501448993933584559" onmouseenter="enter('-6501448993933584559');" onmouseout="out('-6501448993933584559');" style=""> 163      private void setActionBarTitle() {                                                                            </span>
<span class="-7433084837374238880" onmouseenter="enter('-7433084837374238880');" onmouseout="out('-7433084837374238880');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 164 -        if (mShowNoteTitle) {                                                                                     </span>
<span class="1044437851216096859" onmouseenter="enter('1044437851216096859');" onmouseout="out('1044437851216096859');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +        String title;                                                                                             </span>
<span class="4730412896387853151" onmouseenter="enter('4730412896387853151');" onmouseout="out('4730412896387853151');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +        if (mShowNoteTitle &amp;&amp; getActivity() != null) {                                                            </span>
<span class="-8960038423765749168" onmouseenter="enter('-8960038423765749168');" onmouseout="out('-8960038423765749168');" style=""> 167              if (mNote.getTitle() != null &amp;&amp; !mNote.getTitle().equals(&quot;&quot;))                                         </span>
<span class="-4982906393597799649" onmouseenter="enter('-4982906393597799649');" onmouseout="out('-4982906393597799649');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 168 -                getActivity().getActionBar().setTitle(mNote.getTitle());                                          </span>
<span class="-5915161712756481661" onmouseenter="enter('-5915161712756481661');" onmouseout="out('-5915161712756481661');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +                title = mNote.getTitle();                                                                         </span>
<span class="-7436048164614400339" onmouseenter="enter('-7436048164614400339');" onmouseout="out('-7436048164614400339');" style=""> 170              else                                                                                                  </span>
<span class="-4269522014550866660" onmouseenter="enter('-4269522014550866660');" onmouseout="out('-4269522014550866660');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 171 -                getActivity().getActionBar().setTitle(R.string.new_note);                                         </span>
<span class="5889035754693609241" onmouseenter="enter('5889035754693609241');" onmouseout="out('5889035754693609241');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +                title = getString(R.string.new_note);                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +                                                                                                                  </span>
<span class="-5894217806054704471" onmouseenter="enter('-5894217806054704471');" onmouseout="out('-5894217806054704471');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 174 +            SpannableString s = new SpannableString(title);                                                       </span>
<span class="5584952902551242782" onmouseenter="enter('5584952902551242782');" onmouseout="out('5584952902551242782');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +            s.setSpan(new TypefaceSpan(getActivity().getBaseContext()), 0, s.length(),                            </span>
<span class="-848172540933228179" onmouseenter="enter('-848172540933228179');" onmouseout="out('-848172540933228179');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +                    Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);                                                          </span>
<span class="8022484383441167908" onmouseenter="enter('8022484383441167908');" onmouseout="out('8022484383441167908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +            getActivity().getActionBar().setTitle(s);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179      }                                                                                                             </span>
<span  style=""> 180                                                                                                                    </span>
<span class="-3598917219400102100" onmouseenter="enter('-3598917219400102100');" onmouseout="out('-3598917219400102100');" style=""> 181      int newCursorLocation(String newText, String oldText, int cursorLocation) {                                   </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 182          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 183          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 184          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 185          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 186          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 187          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 188          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 189          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 190                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 191          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 192                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 193          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 194                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 195          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 196          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 197              return newText.length();                                                                              </span>
<span  style=""> 198                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 199          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 200          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 201                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 202          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 203              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 203              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="-6954326744185480821" onmouseenter="enter('-6954326744185480821');" onmouseout="out('-6954326744185480821');" style=""><abbr title=" 204              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursorLocation + deltaLength, newText.length()));"> 204              afterCursorMatches = oldText.substring(cursorLocation, oldText.length()).equals(newText.substring(cursðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 205          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 206              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207          }                                                                                                         </span>
<span  style=""> 208                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 209          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 210          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 211              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 212                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 213          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 214          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215      }                                                                                                             </span>
<span  style=""> 216                                                                                                                    </span>
<span class="-2625400308964710513" onmouseenter="enter('-2625400308964710513');" onmouseout="out('-2625400308964710513');" style=""> 217      private Runnable autoSaveRunnable = new Runnable() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 218          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 219          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 220              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 222      };                                                                                                            </span>
<span  style=""> 223                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 224      @Override                                                                                                     </span>
<span class="-9205568981681343406" onmouseenter="enter('-9205568981681343406');" onmouseout="out('-9205568981681343406');" style=""> 225      public void onTagsChanged(String tagString){                                                                  </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 226          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 227          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 228          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 229          mNote.save();                                                                                             </span>
<span class="-4835851531632304805" onmouseenter="enter('-4835851531632304805');" onmouseout="out('-4835851531632304805');" style=""> 230          if (getActivity() != null)                                                                                </span>
<span class="6723257739005267018" onmouseenter="enter('6723257739005267018');" onmouseout="out('6723257739005267018');" style=""> 231              EasyTracker.getTracker().sendEvent(&quot;note&quot;, &quot;added_tag&quot;, &quot;tag_added_to_note&quot;, null);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232      }                                                                                                             </span>
<span  style=""> 233                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 234      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 235      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 236          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237      }                                                                                                             </span>
<span  style=""> 238                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 240      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 241          // Unused                                                                                                 </span>
<span  style=""> 242                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243      }                                                                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 245      @Override                                                                                                     </span>
<span class="7273375812891434069" onmouseenter="enter('7273375812891434069');" onmouseout="out('7273375812891434069');" style=""> 246      public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {                                 </span>
<span  style=""> 247                                                                                                                    </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 248          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span  style=""> 249                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 250          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-1759186837358271276" onmouseenter="enter('-1759186837358271276');" onmouseout="out('-1759186837358271276');" style=""> 251              mAutoSaveHandler.removeCallbacks(autoSaveRunnable);                                                   </span>
<span class="3293488199898729012" onmouseenter="enter('3293488199898729012');" onmouseout="out('3293488199898729012');" style=""> 252              mAutoSaveHandler.postDelayed(autoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254      }                                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 256      private void saveAndSyncNote() {                                                                              </span>
<span class="8223376420483055518" onmouseenter="enter('8223376420483055518');" onmouseout="out('8223376420483055518');" style=""> 257          if (mNote == null)                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 258              return;                                                                                               </span>
<span  style=""> 259                                                                                                                    </span>
<span class="-1853245796722779060" onmouseenter="enter('-1853245796722779060');" onmouseout="out('-1853245796722779060');" style=""> 260          new saveNoteTask().execute();                                                                             </span>
<span class="-8849300132412343023" onmouseenter="enter('-8849300132412343023');" onmouseout="out('-8849300132412343023');" style=""> 261          setActionBarTitle();                                                                                      </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-5951013917039188923" onmouseenter="enter('-5951013917039188923');" onmouseout="out('-5951013917039188923');" style=""> 263          Log.v(&quot;Simplenote&quot;, &quot;autosaving note&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264      }                                                                                                             </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 266      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 267          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 268              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 269              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 270              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 271              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 272                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 273          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 274              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 275                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277      }                                                                                                             </span>
<span  style=""> 278                                                                                                                    </span>
<span class="-7756397172362790897" onmouseenter="enter('-7756397172362790897');" onmouseout="out('-7756397172362790897');" style=""> 279      // Use spaces in tag autocompletion list                                                                      </span>
<span class="-1372507320752332134" onmouseenter="enter('-1372507320752332134');" onmouseout="out('-1372507320752332134');" style=""><abbr title=" 280      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiautocompletetextview"> 280      // From http://stackoverflow.com/questions/3482981/how-to-replace-the-comma-with-a-space-when-i-use-the-multiaðŸ”µ</abbr></span>
<span class="-6991911761052014336" onmouseenter="enter('-6991911761052014336');" onmouseout="out('-6991911761052014336');" style=""> 281      public class SpaceTokenizer implements Tokenizer {                                                            </span>
<span  style=""> 282                                                                                                                    </span>
<span class="-4609073757456865647" onmouseenter="enter('-4609073757456865647');" onmouseout="out('-4609073757456865647');" style=""> 283          public int findTokenStart(CharSequence text, int cursor) {                                                </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 284              int i = cursor;                                                                                       </span>
<span  style=""> 285                                                                                                                    </span>
<span class="885050749614268129" onmouseenter="enter('885050749614268129');" onmouseout="out('885050749614268129');" style=""> 286              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) != &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 287                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288              }                                                                                                     </span>
<span class="9056743128114431706" onmouseenter="enter('9056743128114431706');" onmouseout="out('9056743128114431706');" style=""> 289              while (i &lt; cursor &amp;&amp; text.charAt(i) == &#x27; &#x27;) {                                                         </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 290                  i++;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291              }                                                                                                     </span>
<span  style=""> 292                                                                                                                    </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 293              return i;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294          }                                                                                                         </span>
<span  style=""> 295                                                                                                                    </span>
<span class="2525628184999821389" onmouseenter="enter('2525628184999821389');" onmouseout="out('2525628184999821389');" style=""> 296          public int findTokenEnd(CharSequence text, int cursor) {                                                  </span>
<span class="670749351451869648" onmouseenter="enter('670749351451869648');" onmouseout="out('670749351451869648');" style=""> 297              int i = cursor;                                                                                       </span>
<span class="6152179610427336026" onmouseenter="enter('6152179610427336026');" onmouseout="out('6152179610427336026');" style=""> 298              int len = text.length();                                                                              </span>
<span  style=""> 299                                                                                                                    </span>
<span class="1137414435201525157" onmouseenter="enter('1137414435201525157');" onmouseout="out('1137414435201525157');" style=""> 300              while (i &lt; len) {                                                                                     </span>
<span class="-6385241646050375066" onmouseenter="enter('-6385241646050375066');" onmouseout="out('-6385241646050375066');" style=""> 301                  if (text.charAt(i) == &#x27; &#x27;) {                                                                      </span>
<span class="6075150841634286147" onmouseenter="enter('6075150841634286147');" onmouseout="out('6075150841634286147');" style=""> 302                      return i;                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 303                  } else {                                                                                          </span>
<span class="-4968746635634186778" onmouseenter="enter('-4968746635634186778');" onmouseout="out('-4968746635634186778');" style=""> 304                      i++;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306              }                                                                                                     </span>
<span  style=""> 307                                                                                                                    </span>
<span class="7701238698032811091" onmouseenter="enter('7701238698032811091');" onmouseout="out('7701238698032811091');" style=""> 308              return len;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309          }                                                                                                         </span>
<span  style=""> 310                                                                                                                    </span>
<span class="3892553806520641045" onmouseenter="enter('3892553806520641045');" onmouseout="out('3892553806520641045');" style=""> 311          public CharSequence terminateToken(CharSequence text) {                                                   </span>
<span class="-814017234959701024" onmouseenter="enter('-814017234959701024');" onmouseout="out('-814017234959701024');" style=""> 312              int i = text.length();                                                                                </span>
<span  style=""> 313                                                                                                                    </span>
<span class="-2645617250828763966" onmouseenter="enter('-2645617250828763966');" onmouseout="out('-2645617250828763966');" style=""> 314              while (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                          </span>
<span class="-964312961439394859" onmouseenter="enter('-964312961439394859');" onmouseout="out('-964312961439394859');" style=""> 315                  i--;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316              }                                                                                                     </span>
<span  style=""> 317                                                                                                                    </span>
<span class="-6208188263403401654" onmouseenter="enter('-6208188263403401654');" onmouseout="out('-6208188263403401654');" style=""> 318              if (i &gt; 0 &amp;&amp; text.charAt(i - 1) == &#x27; &#x27;) {                                                             </span>
<span class="8811749182711908372" onmouseenter="enter('8811749182711908372');" onmouseout="out('8811749182711908372');" style=""> 319                  return text;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 320              } else {                                                                                              </span>
<span class="-8407561526953236331" onmouseenter="enter('-8407561526953236331');" onmouseout="out('-8407561526953236331');" style=""> 321                  if (text instanceof Spanned) {                                                                    </span>
<span class="1043151637988151558" onmouseenter="enter('1043151637988151558');" onmouseout="out('1043151637988151558');" style=""> 322                      SpannableString sp = new SpannableString(text + &quot; &quot;);                                         </span>
<span class="4069757121373026619" onmouseenter="enter('4069757121373026619');" onmouseout="out('4069757121373026619');" style=""> 323                      TextUtils.copySpansFrom((Spanned) text, 0, text.length(),                                     </span>
<span class="-4923471023181178896" onmouseenter="enter('-4923471023181178896');" onmouseout="out('-4923471023181178896');" style=""> 324                              Object.class, sp, 0);                                                                 </span>
<span class="-2938558251040814641" onmouseenter="enter('-2938558251040814641');" onmouseout="out('-2938558251040814641');" style=""> 325                      return sp;                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 326                  } else {                                                                                          </span>
<span class="8966119926299404710" onmouseenter="enter('8966119926299404710');" onmouseout="out('8966119926299404710');" style=""> 327                      return text + &quot; &quot;;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331      }                                                                                                             </span>
<span  style=""> 332                                                                                                                    </span>
<span class="4832835199818847464" onmouseenter="enter('4832835199818847464');" onmouseout="out('4832835199818847464');" style=""> 333      private class loadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 334                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 335          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 336          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style=""> 337              String noteID = args[0];                                                                              </span>
<span class="6424563509553382563" onmouseenter="enter('6424563509553382563');" onmouseout="out('6424563509553382563');" style=""> 338              NotesActivity notesActivity = (NotesActivity)getActivity();                                           </span>
<span class="3372428562169226666" onmouseenter="enter('3372428562169226666');" onmouseout="out('3372428562169226666');" style=""> 339              Simplenote application = (Simplenote) notesActivity.getApplication();                                 </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style=""> 340              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 341              try {                                                                                                 </span>
<span class="1900948898960959991" onmouseenter="enter('1900948898960959991');" onmouseout="out('1900948898960959991');" style=""> 342                  mNote = notesBucket.get(noteID);                                                                  </span>
<span class="-6154859570814008859" onmouseenter="enter('-6154859570814008859');" onmouseout="out('-6154859570814008859');" style=""> 343                  notesActivity.setCurrentNote(mNote);                                                              </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style=""> 344              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="9016552103124647674" onmouseenter="enter('9016552103124647674');" onmouseout="out('9016552103124647674');" style=""> 345                  // TODO: Handle a missing note                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 347              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348          }                                                                                                         </span>
<span  style=""> 349                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 350          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style=""> 351          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-2770512784578238911" onmouseenter="enter('-2770512784578238911');" onmouseout="out('-2770512784578238911');" style=""> 352              refreshContent(false);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354      }                                                                                                             </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-8193729353024897311" onmouseenter="enter('-8193729353024897311');" onmouseout="out('-8193729353024897311');" style=""> 356      private class setTagsAdapterTask extends AsyncTask&lt;Void, List, List&gt; {                                        </span>
<span  style=""> 357                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 358          @Override                                                                                                 </span>
<span class="3117640362377415908" onmouseenter="enter('3117640362377415908');" onmouseout="out('3117640362377415908');" style=""> 359          protected List doInBackground(Void... voids) {                                                            </span>
<span class="3072130898554257503" onmouseenter="enter('3072130898554257503');" onmouseout="out('3072130898554257503');" style=""> 360              // Populate tag list                                                                                  </span>
<span class="-4819314506084115698" onmouseenter="enter('-4819314506084115698');" onmouseout="out('-4819314506084115698');" style=""> 361              if (getActivity() == null)                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 362                  return null;                                                                                      </span>
<span class="6775797650935037694" onmouseenter="enter('6775797650935037694');" onmouseout="out('6775797650935037694');" style=""> 363              Simplenote simplenote = (Simplenote)getActivity().getApplication();                                   </span>
<span class="-5110266504124495650" onmouseenter="enter('-5110266504124495650');" onmouseout="out('-5110266504124495650');" style=""> 364              Bucket&lt;Tag&gt; tagBucket = simplenote.getTagsBucket();                                                   </span>
<span class="5854237755002178672" onmouseenter="enter('5854237755002178672');" onmouseout="out('5854237755002178672');" style=""><abbr title=" 365              ObjectCursor&lt;Tag&gt; tagsCursor = tagBucket.query().include(Tag.NAME_PROPERTY, Tag.NOTE_COUNT_INDEX_NAME).orderByKey().execute();"> 365              ObjectCursor&lt;Tag&gt; tagsCursor = tagBucket.query().include(Tag.NAME_PROPERTY, Tag.NOTE_COUNT_INDEX_NAME)ðŸ”µ</abbr></span>
<span class="-4946105276032529342" onmouseenter="enter('-4946105276032529342');" onmouseout="out('-4946105276032529342');" style=""> 366              List&lt;String&gt; allTags = new ArrayList&lt;String&gt;(tagsCursor.getCount());                                  </span>
<span class="-2065924649467803920" onmouseenter="enter('-2065924649467803920');" onmouseout="out('-2065924649467803920');" style=""> 367              int nameColumnIndex = tagsCursor.getColumnIndex(Tag.NAME_PROPERTY);                                   </span>
<span class="-190198607880682418" onmouseenter="enter('-190198607880682418');" onmouseout="out('-190198607880682418');" style=""> 368              while (tagsCursor.moveToNext()) {                                                                     </span>
<span class="3119107845186220219" onmouseenter="enter('3119107845186220219');" onmouseout="out('3119107845186220219');" style=""> 369                  if (!mNote.hasTag(tagsCursor.getSimperiumKey()))                                                  </span>
<span class="4087438641097781239" onmouseenter="enter('4087438641097781239');" onmouseout="out('4087438641097781239');" style=""> 370                      allTags.add(tagsCursor.getString(nameColumnIndex));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371              }                                                                                                     </span>
<span class="-8368882456679951895" onmouseenter="enter('-8368882456679951895');" onmouseout="out('-8368882456679951895');" style=""> 372              tagsCursor.close();                                                                                   </span>
<span class="5006840623637768212" onmouseenter="enter('5006840623637768212');" onmouseout="out('5006840623637768212');" style=""> 373              return allTags;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374          }                                                                                                         </span>
<span  style=""> 375                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 376          @Override                                                                                                 </span>
<span class="-7563990847454016074" onmouseenter="enter('-7563990847454016074');" onmouseout="out('-7563990847454016074');" style=""> 377          protected void onPostExecute(List tags) {                                                                 </span>
<span class="180377333021844977" onmouseenter="enter('180377333021844977');" onmouseout="out('180377333021844977');" style=""> 378              if (tags != null &amp;&amp; tags.size() &gt; 0) {                                                                </span>
<span class="-1758625986899767119" onmouseenter="enter('-1758625986899767119');" onmouseout="out('-1758625986899767119');" style=""> 379                  ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(getActivity(),                            </span>
<span class="-1875763580401946263" onmouseenter="enter('-1875763580401946263');" onmouseout="out('-1875763580401946263');" style=""> 380                          android.R.layout.simple_dropdown_item_1line, tags);                                       </span>
<span class="870780890030142241" onmouseenter="enter('870780890030142241');" onmouseout="out('870780890030142241');" style=""> 381                  mTagView.setAdapter(adapter);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384      }                                                                                                             </span>
<span  style=""> 385                                                                                                                    </span>
<span class="-6338361705232509236" onmouseenter="enter('-6338361705232509236');" onmouseout="out('-6338361705232509236');" style=""> 386      private class saveNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                            </span>
<span  style=""> 387                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 388          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style=""> 389          protected Void doInBackground(String... args) {                                                           </span>
<span class="7501654987306227365" onmouseenter="enter('7501654987306227365');" onmouseout="out('7501654987306227365');" style=""> 390              String content = mContentEditText.getText().toString();                                               </span>
<span class="5370167507398401430" onmouseenter="enter('5370167507398401430');" onmouseout="out('5370167507398401430');" style=""> 391              String tagString = mTagView.getText().toString();                                                     </span>
<span class="-8359444972541895470" onmouseenter="enter('-8359444972541895470');" onmouseout="out('-8359444972541895470');" style=""> 392              if (mNote.hasChanges(content, tagString.trim(), mPinButton.isChecked())) {                            </span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 393                  mNote.setContent(content);                                                                        </span>
<span class="8315132155135825050" onmouseenter="enter('8315132155135825050');" onmouseout="out('8315132155135825050');" style=""> 394                  mNote.setTagString(mTagView.getText().toString());                                                </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 395                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-5430078119462356953" onmouseenter="enter('-5430078119462356953');" onmouseout="out('-5430078119462356953');" style=""> 396                  // Send pinned event to google analytics if changed                                               </span>
<span class="-8280425794504398339" onmouseenter="enter('-8280425794504398339');" onmouseout="out('-8280425794504398339');" style=""> 397                  mNote.setPinned(mPinButton.isChecked());                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 398                  mNote.save();                                                                                     </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style=""> 399                  if (getActivity() != null) {                                                                      </span>
<span class="3230010952701963924" onmouseenter="enter('3230010952701963924');" onmouseout="out('3230010952701963924');" style=""> 400                      Tracker tracker = EasyTracker.getTracker();                                                   </span>
<span class="7411383674080963289" onmouseenter="enter('7411383674080963289');" onmouseout="out('7411383674080963289');" style=""> 401                      if (mNote.isPinned() != mPinButton.isChecked())                                               </span>
<span class="1805524535551115774" onmouseenter="enter('1805524535551115774');" onmouseout="out('1805524535551115774');" style=""><abbr title=" 402                          tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pin_button&quot;, null);"> 402                          tracker.sendEvent(&quot;note&quot;, (mPinButton.isChecked()) ? &quot;pinned_note&quot; : &quot;unpinned_note&quot;, &quot;pinðŸ”µ</abbr></span>
<span class="4667335955881066820" onmouseenter="enter('4667335955881066820');" onmouseout="out('4667335955881066820');" style=""> 403                      tracker.sendEvent(&quot;note&quot;, &quot;edited_note&quot;, &quot;editor_save&quot;, null);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405              }                                                                                                     </span>
<span  style=""> 406                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 407              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            