<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>211</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    211
                    <a href="210.html">prev</a>
                    <a href="212.html">next</a>
                    <a href="211_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_47fec386683d4f12911413ae693bacd60e1538d7_admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;47fec386683d4f12911413ae693bacd60e1538d7:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;47fec386683d4f12911413ae693bacd60e1538d7^1:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;47fec386683d4f12911413ae693bacd60e1538d7^2:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;a996923be2b09711d11d2a5df4df667dc9a00b19:admin/broadleaf-open-admin-platform/src/main/java/org/broadleafcommerce/openadmin/web/controller/entity/AdminBasicEntityController.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj], [s]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18 package org.broadleafcommerce.openadmin.web.controller.entity;                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21 import org.apache.commons.collections.MapUtils;                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  29 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  30 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  31 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  32 import org.broadleafcommerce.common.util.BLCArrayUtils;                                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  33 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  34 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  35 import org.broadleafcommerce.common.web.JsonResponse;                                                    </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  36 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  37 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  38 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  39 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  40 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  41 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  42 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  43 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  44 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  45 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  46 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  47 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  48 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  49 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  50 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  51 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  52 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  53 import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                 </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  54 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  55 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  56 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  57 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  58 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                   </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  59 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  59 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExteðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  61 import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                           </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  62 import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                             </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  63 import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                  </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  64 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  65 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  66 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  67 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  68 import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                               </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  69 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  70 import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                 </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  71 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  72 import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                       </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  73 import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  74 import org.springframework.stereotype.Controller;                                                        </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  75 import org.springframework.ui.Model;                                                                     </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  76 import org.springframework.util.MultiValueMap;                                                           </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  77 import org.springframework.validation.BindingResult;                                                     </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  78 import org.springframework.web.bind.WebDataBinder;                                                       </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  79 import org.springframework.web.bind.annotation.InitBinder;                                               </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  80 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  81 import org.springframework.web.bind.annotation.PathVariable;                                             </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  82 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  83 import org.springframework.web.bind.annotation.RequestMethod;                                            </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  84 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  85 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  86 import org.springframework.web.servlet.DispatcherServlet;                                                </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  87 import org.springframework.web.servlet.FlashMap;                                                         </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  88 import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                   </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  89 import org.springframework.web.util.UrlPathHelper;                                                       </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  90 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span  style="">  91                                                                                                          </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  92 import java.net.URLDecoder;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  93 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  94 import java.util.Arrays;                                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  95 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  96 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  97 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  98 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  99 import java.util.Set;                                                                                    </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style=""> 100 import java.util.stream.Stream;                                                                          </span>
<span  style=""> 101                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 102 import javax.annotation.Resource;                                                                        </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 103 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 104 import javax.servlet.http.HttpServletResponse;                                                           </span>
<span  style=""> 105                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106 /**                                                                                                      </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style=""><abbr title=" 107  * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 107  * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates everðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style=""><abbr title=" 108  * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 108  * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for ðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style=""> 109  * that is not explicitly customized by its own controller.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 110  *                                                                                                       </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 111  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 112  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113  */                                                                                                      </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 114 @Controller(&quot;blAdminBasicEntityController&quot;)                                                              </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 115 @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                      </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 116 public class AdminBasicEntityController extends AdminAbstractController {                                </span>
<span  style=""> 117                                                                                                          </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 118     protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                </span>
<span  style=""> 119                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 120     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 121     public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                             </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 122     public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                              </span>
<span  style=""> 123                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 124     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 125     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style=""> 126                                                                                                          </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 127     @Resource(name = &quot;blAdminUserDao&quot;)                                                                   </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 128     protected AdminUserDao adminUserDao;                                                                 </span>
<span  style=""> 129                                                                                                          </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 130     @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                 </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 131     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 132                                                                                                          </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 133     @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                      </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 134     protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;       </span>
<span  style=""> 135                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 136     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 137     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 138                                                                                                          </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 139     // ******************************************                                                        </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 140     // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                        </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 141     // ******************************************                                                        </span>
<span  style=""> 142                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143     /**                                                                                                  </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 144      * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 144      * Renders the main entity listing for the specified class, which is based on the current sectionKey ðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 145      * criteria.                                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 146      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 147      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 148      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 149      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 150      * @param pathVars                                                                                   </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 151      * @param requestParams a Map of property name -&gt; list critiera values                               </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 152      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 153      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 154      */                                                                                                  </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 155     @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                              </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 156     public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 157             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 158             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 159         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 160         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 161         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 162         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 162         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 163         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 164         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 165                                                                                                          </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 166         ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                 </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 167         listGrid.setSelectType(ListGrid.SelectType.NONE);                                                </span>
<span  style=""> 168                                                                                                          </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 169         Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                            </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 170         if (CollectionUtils.isNotEmpty(headerFields)) {                                                  </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 171             Field firstField = headerFields.iterator().next();                                           </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 172             if (requestParams.containsKey(firstField.getName())) {                                       </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 173                 model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span  style=""> 176                                                                                                          </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 177         model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                    </span>
<span  style=""> 178                                                                                                          </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 179         setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams); </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 180         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 181                                                                                                          </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 182         return &quot;modules/defaultContainer&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""><abbr title=" 185     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,"> 185     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String seðŸ”µ</abbr></span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 186             String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {         </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 187         List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                          </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 188         addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                       </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 189         extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);             </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 190         extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                 </span>
<span  style=""> 191                                                                                                          </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 192         // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of   </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 193         if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                  </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 194             model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 197         List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                   </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 198         String requestUri = request.getRequestURI();                                                     </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 199         if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {  </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 200             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 200             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length())ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201         }                                                                                                </span>
<span  style=""> 202                                                                                                          </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 203         model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                      </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 204         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 205         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 206         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 207         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 208         model.addAttribute(&quot;mainActions&quot;, mainActions);                                                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 209         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 210         setTypedEntityModelAttributes(request, model);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 213     @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                    </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 214     public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,         </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 215              HttpServletResponse response, Model model,                                                  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 216              @PathVariable Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 217              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 218         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 219         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 220         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 221         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 221         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 222                 .withCustomCriteria(getCustomCriteria(requestParams));                                   </span>
<span  style=""> 223                                                                                                          </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 224         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span  style=""> 225                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 226         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 227         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 228                                                                                                          </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 229         return formService.constructSelectizeOptionMap(drs, cmd);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 232     /**                                                                                                  </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 233      * Obtains the requested criteria parameter                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 234      *                                                                                                   </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 235      * @param requestParams                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 236      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 237      */                                                                                                  </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 238     protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                      </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 239         if (requestParams == null || requestParams.isEmpty()) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 240             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span  style=""> 242                                                                                                          </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 243         List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                      </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 244         String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                    </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 245         return new String[] {response};                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248     /**                                                                                                  </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""><abbr title=" 249      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances"> 249      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new inðŸ”µ</abbr></span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 250      * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 251      *                                                                                                   </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 252      * @param sectionClassName                                                                           </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 253      * @param cmd                                                                                        </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 254      * @param mainActions                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 255      */                                                                                                  </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 256     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 256     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormActioðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 257         if (isAddActionAllowed(sectionClassName, cmd)) {                                                 </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 258             mainActions.add(DefaultMainActions.ADD);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260     }                                                                                                    </span>
<span  style=""> 261                                                                                                          </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style=""> 262     protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                   </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 263         // If the user does not have create permissions, we will not add the &quot;Add New&quot; button            </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style=""> 264         boolean canCreate = true;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 265         try {                                                                                            </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 266             adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);         </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 267         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 268             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 269                 canCreate = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271         }                                                                                                </span>
<span  style=""> 272                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 273         if (canCreate) {                                                                                 </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style=""> 274             checkReadOnly: {                                                                             </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 275                 //check if all the metadata is read only                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 276                 for (Property property : cmd.getProperties()) {                                          </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 277                     if (property.getMetadata() instanceof BasicFieldMetadata) {                          </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 278                         if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||       </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 279                                 !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {          </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style=""> 280                             break checkReadOnly;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                 }                                                                                        </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 284                 canCreate = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286         }                                                                                                </span>
<span  style=""> 287                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 288         if (canCreate) {                                                                                 </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style=""><abbr title=" 289             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 289             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290         }                                                                                                </span>
<span  style=""> 291                                                                                                          </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style=""> 292         return canCreate;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 295     /**                                                                                                  </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""><abbr title=" 296      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any"> 296      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot rðŸ”µ</abbr></span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 297      * subcollections as operations on those collections require the parent level entity to first be saved and have"> 297      * subcollections as operations on those collections require the parent level entity to first be saveðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 298      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 298      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 299      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 300      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 301      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 302      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 303      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 304      * @param pathVars                                                                                   </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 305      * @param entityType                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 306      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 307      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 308      */                                                                                                  </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 309     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                          </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""><abbr title=" 310     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,"> 310     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 311             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 312             @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                       </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 313         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 314         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 315         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 316         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 316         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 317         ppr.setAddOperationInspect(true);                                                                </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 318         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 319                                                                                                          </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style=""><abbr title=" 320         // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 320         // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic typeðŸ”µ</abbr></span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 321         if (StringUtils.isBlank(entityType)) {                                                           </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 322             if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 323                 entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324             } else {                                                                                     </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 325                 entityType = getDefaultEntityType();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 327         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 328             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span  style=""> 330                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 331         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span  style=""> 332                                                                                                          </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""><abbr title=" 333         // We need to make sure that the ceiling entity is set to the interface and the specific entity type"> 333         // We need to make sure that the ceiling entity is set to the interface and the specific entity tðŸ”µ</abbr></span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 334         // is set to the type we&#x27;re going to be creating.                                                </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 335         entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                      </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 336         entityForm.setEntityType(entityType);                                                            </span>
<span  style=""> 337                                                                                                          </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""><abbr title=" 338         // When we initially build the class metadata (and thus, the entity form), we had all of the possible"> 338         // When we initially build the class metadata (and thus, the entity form), we had all of the possðŸ”µ</abbr></span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""><abbr title=" 339         // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the"> 339         // polymorphic fields built out. Now that we have a concrete entity type to render, we can removeðŸ”µ</abbr></span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 340         // fields that are not applicable for this given entity type.                                    </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 341         formService.removeNonApplicableFields(cmd, entityForm, entityType);                              </span>
<span  style=""> 342                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 343         modifyAddEntityForm(entityForm, pathVars);                                                       </span>
<span  style=""> 344                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 345         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 346         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                               </span>
<span  style=""> 347                                                                                                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 348         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 349         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 350         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 351         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 352         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 355     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""><abbr title=" 356      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 356      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 357      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 358      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 359      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 360      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 361      * @param pathVars                                                                                   </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 362      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 363      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 364      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 365      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 366      */                                                                                                  </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 367     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                         </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 368     public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,       </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 369             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title=" 370             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {"> 370             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 371         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 372         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 373         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 374         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 374         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassNameðŸ”µ</abbr></span>
<span  style=""> 375                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 376         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 377         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 377         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 378         Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();       </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 379         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 380                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 381         if (result.hasErrors()) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 382             entityForm.clearFieldsMap();                                                                 </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 383             formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                      </span>
<span  style=""> 384                                                                                                          </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 385             formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());          </span>
<span  style=""> 386                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 387             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span  style=""> 388                                                                                                          </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 389             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                           </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 390             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 391             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                 </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 392             model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 393             setModelAttributes(model, sectionKey);                                                       </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 394             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395         }                                                                                                </span>
<span  style=""> 396                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 397         // Note that AJAX Redirects need the context path prepended to them                              </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 398         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 398         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399     }                                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 401     /**                                                                                                  </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 402      * Renders the main entity form for the specified entity                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 403      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 404      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 405      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 406      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 407      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 408      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 409      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 410      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 411      */                                                                                                  </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 412     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                         </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 413     public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 414             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 415             @PathVariable(&quot;id&quot;) String id) throws Exception {                                            </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 416         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 417         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 418         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 419         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 419         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style=""> 420                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 421         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 422         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 423                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 424         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 424         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style=""> 425                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 426         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style=""> 427                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 428         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 429             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 430         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 431             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span  style=""> 433                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 434         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 435             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436         }                                                                                                </span>
<span  style=""> 437                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 438         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 439         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style=""> 440                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 441         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 442         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 443         int startIndex = request.getContextPath().length();                                              </span>
<span  style=""> 444                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 445         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 446         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style=""> 447                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 448         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 449         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 450         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 452         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 453                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 454         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 455         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style=""> 456                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 457         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 458             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 459             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 460             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 461             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 462         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 463             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 464             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 465             return &quot;modules/defaultContainer&quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467     }                                                                                                    </span>
<span  style=""> 468                                                                                                          </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 469     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 469     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, StrðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 470                                                               ClassMetadata cmd, Entity entity,          </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""><abbr title=" 471                                                               List&lt;SectionCrumb&gt; crumbs) throws Exception {"> 471                                                               List&lt;SectionCrumb&gt; crumbs) throws ExceptionðŸ”µ</abbr></span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 472         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 473         if (StringUtils.isEmpty(tabName)) {                                                              </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 474             tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475         }                                                                                                </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 476         return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477     }                                                                                                    </span>
<span  style=""> 478                                                                                                          </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 479     private boolean isAddRequest(Entity entity) {                                                        </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 480         ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                     </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""><abbr title=" 481         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);"> 481         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder)ðŸ”µ</abbr></span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 482         if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 483             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484         }                                                                                                </span>
<span  style=""> 485                                                                                                          </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 486         return resultHolder.getResult();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487     }                                                                                                    </span>
<span  style=""> 488                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 489     /**                                                                                                  </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 490      * Attempts to get the List Grid for the selected tab.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 491      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 492      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 493      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 494      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 495      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 496      * @param id                                                                                         </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 497      * @param tabName                                                                                    </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 498      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 499      * @param entity                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 500      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 501      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 502      */                                                                                                  </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 503     @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                 </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 504     public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 505             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 506             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 507             @PathVariable(value = &quot;tabName&quot;) String tabName,                                             </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 508             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                 </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 509             @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 510         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 511         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 512         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 513         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 513         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 514         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 515         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 516         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 516         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 517         entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                   </span>
<span  style=""> 518                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 519         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 520             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 521         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 522             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523         }                                                                                                </span>
<span  style=""> 524                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 525         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 526         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 527         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span  style=""> 528                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 529         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 530                                                                                                          </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 531         model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                       </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 532         model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 533         return &quot;modules/defaultContainer&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534     }                                                                                                    </span>
<span  style=""> 535                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 536     /**                                                                                                  </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 537      * Builds JSON that looks like this:                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 538      *                                                                                                   </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 539      * {&quot;errors&quot;:                                                                                        </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 540      *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                        </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 541      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 542      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 543      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 544      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 545      *        },                                                                                         </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 546      *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                       </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 547      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 548      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 549      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 550      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 551      *        }]                                                                                         </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 552      * }                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 553      *                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 554      */                                                                                                  </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 555     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)         </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 556     public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 557             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 558             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 559             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,           </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 560             RedirectAttributes ra) throws Exception {                                                    </span>
<span  style=""> 561                                                                                                          </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 562         saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                      </span>
<span  style=""> 563                                                                                                          </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 564         JsonResponse json = new JsonResponse(response);                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 565         if (result.hasErrors()) {                                                                        </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 566             populateJsonValidationErrors(entityForm, result, json);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567         }                                                                                                </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 568         List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                  </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 569         if (CollectionUtils.isNotEmpty(dirtyList)) {                                                     </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 570             json.with(&quot;dirty&quot;, dirtyList);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571         }                                                                                                </span>
<span  style=""> 572                                                                                                          </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 573         ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                      </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 574         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 574         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonReðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 575         if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 576             return resultHolder.getResult();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span  style=""> 578                                                                                                          </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 579         return json.done();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580     }                                                                                                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 582     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 582     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String iðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 583         List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 584         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 585         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 586         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 587         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 587         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 588         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 589         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 590         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 591         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style=""> 592                                                                                                          </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 593         for (Property p: entity.getProperties()) {                                                       </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 594             if (p.getIsDirty()) {                                                                        </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 595                 dirtyList.add(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597         }                                                                                                </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 598         return dirtyList;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599     }                                                                                                    </span>
<span  style=""> 600                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 601     /**                                                                                                  </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""><abbr title=" 602      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with"> 602      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity forðŸ”µ</abbr></span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 603      * error fields highlighted. On a successful save, it will refresh the entity page.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 604      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 605      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 606      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 607      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 608      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 609      * @param id                                                                                         </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 610      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 611      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 612      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 613      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 614      */                                                                                                  </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 615     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                        </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 616     public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,      </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 617             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 618             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 619             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 620             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 621         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 622         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 623         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 624         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 624         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 625         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 626                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 627         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span  style=""> 628                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 629         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 629         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 630         Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span  style=""> 631                                                                                                          </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 632         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 633         if (result.hasErrors()) {                                                                        </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 634             model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                      </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 635             model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                </span>
<span  style=""> 636                                                                                                          </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 637             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 637             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 638             entityForm.clearFieldsMap();                                                                 </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 639             formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);       </span>
<span  style=""> 640                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 641             if (isAddRequest(entity)) {                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 642                 modifyAddEntityForm(entityForm, pathVars);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 643             } else {                                                                                     </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 644                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span  style=""> 646                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 647             model.addAttribute(&quot;entity&quot;, entity);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 648             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span  style=""> 649                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 650             setModelAttributes(model, sectionKey);                                                       </span>
<span  style=""> 651                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 652             if (isAjaxRequest(request)) {                                                                </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 653                 entityForm.setReadOnly();                                                                </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 654                 model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                      </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 655                 model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());            </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 656                 return &quot;modules/modalContainer&quot;;                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 657             } else {                                                                                     </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 658                 model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                               </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 659                 model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                            </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 660                 return &quot;modules/defaultContainer&quot;;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662         }                                                                                                </span>
<span  style=""> 663                                                                                                          </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 664         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                          </span>
<span  style=""> 665                                                                                                          </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 666         return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 669     /**                                                                                                  </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 670      * Attempts to remove the given entity.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 671      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 672      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 673      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 674      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 675      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 676      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 677      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 678      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 679      */                                                                                                  </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 680     @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                 </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 681     public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 682             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 683             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 684             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 685             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 686         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 687         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 688         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style=""> 689                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 690         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 690         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 691         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 692         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 693         if (entity != null) {                                                                            </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 694             entityFormValidator.validate(entityForm, entity, result);                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 695             if (result.hasErrors()) {                                                                    </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 696                 // Create a flash attribute for the unsuccessful delete                                  </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 697                 FlashMap fm = new FlashMap();                                                            </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 698                 fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                            </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 699                 fm.put(&quot;headerFlashAlert&quot;, true);                                                        </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 700                 request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                  </span>
<span  style=""> 701                                                                                                          </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 702                 // Re-look back up the entity so that we can return something populated                  </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 703                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 703                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, secðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 704                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 704                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 705                 entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];   </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 706                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 706                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr,ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 707                 entityForm.clearFieldsMap();                                                             </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 708                 formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);   </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 709                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span  style=""> 710                                                                                                          </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 711                 return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 712                         .done();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span  style=""> 715                                                                                                          </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 716         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                        </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 717         ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                  </span>
<span  style=""> 718                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 719         if (isAjaxRequest(request)) {                                                                    </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 720             // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request       </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""><abbr title=" 721             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;"> 721             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successfðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722         } else {                                                                                         </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 723             return &quot;redirect:/&quot; + sectionKey;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 727     @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                 </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 728     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 728     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpSeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 729             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 730             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 731             @RequestParam String ids,                                                                    </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 732             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 733         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 734         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 735         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 736         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 736         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 737         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 737         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 738         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 739         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 740                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 741         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 742         ppr.setStartIndex(getStartIndex(requestParams));                                                 </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 743         ppr.setMaxIndex(getMaxIndex(requestParams));                                                     </span>
<span  style=""> 744                                                                                                          </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 745         if (md instanceof BasicFieldMetadata) {                                                          </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 746             String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                           </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 747             String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();          </span>
<span  style=""> 748                                                                                                          </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 749             List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));   </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 750             ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));               </span>
<span  style=""> 751                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 752             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 753             Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                             </span>
<span  style=""> 754                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 755             for (Entity e : drs.getRecords()) {                                                          </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 756                 String id = e.getPMap().get(idProp).getValue();                                          </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 757                 String disp = e.getPMap().get(displayProp).getDisplayValue();                            </span>
<span  style=""> 758                                                                                                          </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 759                 if (StringUtils.isBlank(disp)) {                                                         </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 760                     disp = e.getPMap().get(displayProp).getValue();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                 }                                                                                        </span>
<span  style=""> 762                                                                                                          </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 763                 returnMap.put(id,  disp);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764             }                                                                                            </span>
<span  style=""> 765                                                                                                          </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 766             return returnMap;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767         }                                                                                                </span>
<span  style=""> 768                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 769         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770     }                                                                                                    </span>
<span  style=""> 771                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 772     /**                                                                                                  </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 773      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 773      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a ðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 774      * then this method is invoked when a user clicks on the name of the default category field.         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 775      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 776      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 777      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 778      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 779      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 780      * @param collectionField                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 781      * @param id                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 782      * @return                                                                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 783      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 784      */                                                                                                  </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 785     @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)               </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""><abbr title=" 786     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 786     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 787             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 788             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 789             @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 790         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 791         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 792         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 793         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 793         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 794         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 795         BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                   </span>
<span  style=""> 796                                                                                                          </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 797         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 797         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 798         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 798         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : sectiðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 799         Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                              </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 800         varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                   </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 801         return viewEntityForm(request, response, model, varsForField, id);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802     }                                                                                                    </span>
<span  style=""> 803                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 804     @RequestMapping(                                                                                     </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 805             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,              </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 806             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 807     )                                                                                                    </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""><abbr title=" 808     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 808     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 809                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 810                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 811                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 812                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 813                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 814                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 814                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 815                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 816         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 816         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817     }                                                                                                    </span>
<span  style=""> 818                                                                                                          </span>
<span  style=""> 819                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 820     @RequestMapping(                                                                                     </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 821             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,         </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 822             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 823     )                                                                                                    </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 824     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 824     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response,ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 825                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 826                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 827                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 828                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 829                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 830                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 830                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 831                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 832         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 832         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833     }                                                                                                    </span>
<span  style=""> 834                                                                                                          </span>
<span  style=""> 835                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 836     /**                                                                                                  </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 837      * Returns the records for a given collectionField filtered by a particular criteria                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 838      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 839      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 840      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 841      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 842      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 843      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 844      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 845      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 846      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 847      */                                                                                                  </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 848     @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                    </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""><abbr title=" 849     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,"> 849     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 850             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 851             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 852             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 853             @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 854         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 855         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 856         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 857         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 857         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams,ðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 858         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 858         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 859         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style=""> 860                                                                                                          </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 861         ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);               </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title=" 862         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];"> 862         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style=""> 863                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 864         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 865         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 865         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParamsðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 866         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 867                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 868         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 869                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 870         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 871         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 872         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873     }                                                                                                    </span>
<span  style=""> 874                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 875     /**                                                                                                  </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 876      * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 876      * Shows the modal dialog that is used to add an item to a given collection. There are several possibðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 877      * of this call depending on the type of the specified collection field.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 878      *                                                                                                   </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 879      * &lt;ul&gt;                                                                                              </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 880      *  &lt;li&gt;                                                                                             </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 881      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 881      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so thaðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 882      *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 882      *    enter information and associate the record with this collection. Used by fields such as ProductðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 883      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 884      *  &lt;li&gt;                                                                                             </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 885      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 885      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entiðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 886      *    Used by fields such as &quot;allParentCategories&quot;.                                                  </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 887      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 888      *  &lt;li&gt;                                                                                             </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 889      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 889      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click onðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 890      *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 890      *    select it. The view rendered by this is identical to basic collection (lookup), but will perforðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 891      *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 891      *    on an adorned field, which may carry extra meta-information about the created relationship, sucðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 892      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 893      *  &lt;li&gt;                                                                                             </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 894      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 894      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on anðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 895      *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 895      *    select it. Once the user selects the entity, he will be presented with an empty form based on tðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 896      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 896      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, whiðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 897      *    to linking an entity, provide extra fields, such as a promotional message.                     </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 898      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 899      *  &lt;li&gt;                                                                                             </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 900      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 900      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. ðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 901      *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 901      *    populated either from the configured map keys, or as a result of a lookup in the case of a key ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 902      *    entity. Used by fields such as the mediaMap on a Sku.                                          </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 903      *  &lt;/li&gt;                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 904      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 905      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 906      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 907      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 908      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 909      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 910      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 911      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 912      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 913      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 914      */                                                                                                  </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 915     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""><abbr title=" 916     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 916     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 917             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 918             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 919             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 920             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 921         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 922         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 923         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title=" 924         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,"> 924         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style=""> 925                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 926         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 927         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 928                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style=""> 929         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style=""> 930                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style=""> 931                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style=""> 932                 .withMaxIndex(getMaxIndex(requestParams))                                                </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style=""> 933                 .withLastId(getLastId(requestParams))                                                    </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style=""> 934                 .withFirstId(getFirstId(requestParams))                                                  </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style=""> 935                 .withUpperCount(getUpperCount(requestParams))                                            </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style=""> 936                 .withLowerCount(getLowerCount(requestParams))                                            </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style=""> 937                 .withPageSize(getPageSize(requestParams))                                                </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style=""> 938                 .withPresentationFetch(true);                                                            </span>
<span  style=""> 939                                                                                                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style=""> 940         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style=""> 941             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style=""> 942             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 943                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 943                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""><abbr title=" 944                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types"> 944                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorpðŸ”µ</abbr></span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style=""> 945                 // for this entity.                                                                      </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style=""> 946                 String entityType = null;                                                                </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style=""> 947                 if (requestParams.containsKey(&quot;entityType&quot;)) {                                           </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style=""> 948                     entityType = requestParams.get(&quot;entityType&quot;).get(0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949                 }                                                                                        </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 950                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 951                     if (cmd.getPolymorphicEntities().getChildren().length == 0) {                        </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 952                         entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 953                     } else {                                                                             </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 954                         entityType = getDefaultEntityType();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 956                 } else {                                                                                 </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 957                     entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958                 }                                                                                        </span>
<span  style=""> 959                                                                                                          </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 960                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 961                     List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());       </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 962                     model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                      </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style=""> 963                     model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                         </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""><abbr title=" 964                     model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());"> 964                     model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyNameðŸ”µ</abbr></span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 965                     String requestUri = request.getRequestURI();                                         </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""><abbr title=" 966                     if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {"> 966                     if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 967                         requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 967                         requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968                     }                                                                                    </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 969                     model.addAttribute(&quot;currentUri&quot;, requestUri);                                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 970                     model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());         </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 971                     setModelAttributes(model, sectionKey);                                               </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 972                     return &quot;modules/modalContainer&quot;;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 973                 } else {                                                                                 </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style=""> 974                     ppr = ppr.withCeilingEntityClassname(entityType);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 975                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976             }                                                                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style=""> 977         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title=" 978             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);"> 978             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionTypðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style=""> 979             if (result.equals(ExtensionResultStatusType.HANDLED)) {                                      </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style=""> 980                 model.addAttribute(&quot;entityId&quot;, id);                                                      </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style=""> 981                 model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                            </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style=""> 982                 model.addAttribute(&quot;collectionField&quot;, collectionField);                                  </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 983                 return &quot;modules/modalContainer&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985         }                                                                                                </span>
<span  style=""> 986                                                                                                          </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style=""> 987         //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                        </span>
<span  style=""> 988                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 989         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 990                                                                                                          </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title=" 991         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);"> 991         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, colðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992     }                                                                                                    </span>
<span  style=""> 993                                                                                                          </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title=" 994     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)"> 994     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title=" 995     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 995     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 996             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 997             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 998             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style=""> 999             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1000         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1001         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1002         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1003         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1003         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1004         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1005         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1006         Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                               </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1007         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1008             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1008             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1009                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1010                     collectionItemId, responseMap);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1012         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013     }                                                                                                    </span>
<span  style="">1014                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1015     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1016      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1017      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1018      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1019      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1020      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1021      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1022      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1023      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1024      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1025      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1026      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1027     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1028     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1028     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HtðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1029             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1030             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1031             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1032             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1033         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1034         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1035         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1036         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1036         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1037                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1038         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1039         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1040                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1041         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1042                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1043                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1044                 .withMaxIndex(getMaxIndex(requestParams));                                               </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1045         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1045         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1046                 .toArray(String[]::new);                                                                 </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1047         ppr = ppr.withCustomCriteria( both);                                                             </span>
<span  style="">1048                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1049         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1050             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1051             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1052             ppr.setSectionEntityField(collectionField);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053         }                                                                                                </span>
<span  style="">1054                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1055         DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                            </span>
<span  style="">1056                                                                                                          </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style=""><abbr title="1057         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1057         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058     }                                                                                                    </span>
<span  style="">1059                                                                                                          </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1060     protected String[] buildSelectizeCustomCriteria() {                                                  </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1061         return new String[]{ IS_SELECTIZE_REQUEST };                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062     }                                                                                                    </span>
<span  style="">1063                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1064     /**                                                                                                  </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1065      * Adds the requested collection item via Selectize                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1066      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1067      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1068      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1069      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1070      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1071      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1072      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1073      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1074      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1075      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1076      */                                                                                                  </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1077     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)     </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1078     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1078     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpSðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1079             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1080             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1081             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1082             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1082             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1083         Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                 </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1084         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1085         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1086         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1087         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1087         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1088         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1089                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1090         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1091             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1092             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1093                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095         }                                                                                                </span>
<span  style="">1096                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1097         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1097         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1098         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1099         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1100         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1100         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1101                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1102         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1103         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1103         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1104         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1105         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1106                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1107         if (result.hasErrors()) {                                                                        </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1108             returnVal.put(&quot;error&quot;, result.getFieldError());                                              </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1109             return returnVal;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110         }                                                                                                </span>
<span  style="">1111                                                                                                          </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1112         if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                   </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1113             returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114         }                                                                                                </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1115         return returnVal;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1118     protected void declareShouldIgnoreAdditionStatusFilter() {                                           </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1119         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1119         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().gðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1120         additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121     }                                                                                                    </span>
<span  style="">1122                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1123     /**                                                                                                  </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1124      * Adds the requested collection item                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1125      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1126      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1127      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1128      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1129      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1130      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1131      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1132      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1133      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1134      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1135      */                                                                                                  </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1136     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)               </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style=""><abbr title="1137     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1137     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1138             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1139             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1140             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1141             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1141             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1142         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1143         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1144         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1145         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1145         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1146         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1147                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1148         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1149             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1150             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1151                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153         }                                                                                                </span>
<span  style="">1154                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1155         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1155         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1156         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1157         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1157         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1158         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1159         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1160         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1160         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1161         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1162         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1163                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1164         if (result.hasErrors()) {                                                                        </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1165             FieldMetadata md = collectionProperty.getMetadata();                                         </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1166             ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                             </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1167             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1167             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey,ðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1168                     md, ppr, entityForm, savedEntity);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span  style="">1170                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1171         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1172         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1172         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1173         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1174                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1175         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1176         model.addAttribute(&quot;actualEntityId&quot;, id);                                                        </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1177         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1178         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179     }                                                                                                    </span>
<span  style="">1180                                                                                                          </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1181     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)          </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1182     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1182     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse reðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1183             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1184             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1185             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1186             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1186             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1187         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1188         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1189         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1190         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1190         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1191         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1192                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1193         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1194             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1195             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1196                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1198         }                                                                                                </span>
<span  style="">1199                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1200         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1200         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1201         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1201         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1202         entity.setIsPreAdd(true);                                                                        </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1203         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1204         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1204         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1205         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span  style="">1206                                                                                                          </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1207         return new JsonResponse(response)                                                                </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1208                 .with(&quot;status&quot;, &quot;complete&quot;)                                                              </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1209                 .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())             </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1210                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1213     /**                                                                                                  </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1214      * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1214      * Builds out all of the model information needed for showing the add modal for collection items on bðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1215      * as well as after a POST with validation errors                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1216      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1217      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1218      * @param model                                                                                      </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1219      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1220      * @param collectionField                                                                            </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1221      * @param sectionKey                                                                                 </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1222      * @param collectionProperty                                                                         </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1223      * @param md                                                                                         </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1224      * @param ppr                                                                                        </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1225      * @return the appropriate view to display for the modal                                             </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1226      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1226      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StringðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1227      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1227      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1228      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1229      */                                                                                                  </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style=""><abbr title="1230     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,">1230     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse responseðŸ”µ</abbr></span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style=""><abbr title="1231             Model model, String id, String collectionField, String sectionKey, Property collectionProperty,">1231             Model model, String id, String collectionField, String sectionKey, Property collectionPropertðŸ”µ</abbr></span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1232             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1232             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throwsðŸ”µ</abbr></span>
<span  style="">1233                                                                                                          </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1234         // For requests to add a new collection item include the main class that the subsequent request comes from.">1234         // For requests to add a new collection item include the main class that the subsequent request cðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1235         // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1235         // For instance, with basic collections we know the main associated class for a fetch through theðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style=""><abbr title="1236         // persistence item but map and adorned target lookups make a standard persistence request. This solution">1236         // persistence item but map and adorned target lookups make a standard persistence request. This ðŸ”µ</abbr></span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1237         // fixes all cases.                                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1238         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1239         ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                           </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1240         ppr.setAddOperationInspect(true);                                                                </span>
<span  style="">1241                                                                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1242         if (entityForm != null) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1243             entityForm.clearFieldsMap();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244         }                                                                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1245         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1246         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1247             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1248                                                                                                          </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style=""><abbr title="1249             // When adding items to basic collections, we will sometimes show a form to persist a new record">1249             // When adding items to basic collections, we will sometimes show a form to persist a new recðŸ”µ</abbr></span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1250             // and sometimes show a list grid to allow the user to associate an existing record.         </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1251             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1252                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1252                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().geðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1253                 if (entityForm == null) {                                                                </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1254                     entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);         </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1255                     entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());               </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1256                     entityForm.setEntityType(ppr.getCeilingEntityClassname());                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1257                 } else {                                                                                 </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1258                     formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);       </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1259                     formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260                 }                                                                                        </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1261                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1261                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntitðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1262                 entityForm.getTabs().iterator().next().getIsVisible();                                   </span>
<span  style="">1263                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1264                 model.addAttribute(&quot;entityForm&quot;, entityForm);                                            </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1265                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1266             } else {                                                                                     </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1267                 DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                    </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1268                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1268                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1269                 listGrid.setPathOverride(request.getRequestURL().toString());                            </span>
<span  style="">1270                                                                                                          </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1271                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1271                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUPðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1272                     listGrid.removeAllRowActions();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273                 }                                                                                        </span>
<span  style="">1274                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1275                 model.addAttribute(&quot;listGrid&quot;, listGrid);                                                </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1276                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277             }                                                                                            </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1278         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1279             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1280                                                                                                          </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1281             // Even though this field represents an adorned target collection, the list we want to show in the modal">1281             // Even though this field represents an adorned target collection, the list we want to show iðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1282             // is the standard list grid for the target entity of this field                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1283             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1284             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1285             ppr.setSectionEntityField(collectionField);                                                  </span>
<span  style="">1286                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1287             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1287             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1288                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1289             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1290             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1290             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1291             listGrid.setSubCollectionFieldName(collectionField);                                         </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1292             listGrid.setPathOverride(request.getRequestURL().toString());                                </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1293             listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1294             if (entityForm == null) {                                                                    </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1295                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1295                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectiðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style=""><abbr title="1296                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());">1296                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassnameðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1297             } else {                                                                                     </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1298                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1298                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectioðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1299                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300             }                                                                                            </span>
<span  style="">1301                                                                                                          </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1302             listGrid.setListGridType(ListGrid.Type.ADORNED);                                             </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1303             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1304                 if (entry.getValue().getIsVisible()) {                                                   </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1305                     listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1306                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308             }                                                                                            </span>
<span  style="">1309                                                                                                          </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1310             // This is part of an add, so we want to be able to filter/sort the listgrid                 </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1311             listGrid.setIsSortable(false);                                                               </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1312             listGrid.setCanFilterAndSort(true);                                                          </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1313             listGrid.removeAllRowActions();                                                              </span>
<span  style="">1314                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1315             model.addAttribute(&quot;listGrid&quot;, listGrid);                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1316             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1317             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                 </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1318         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1319             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1320             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1320             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1321                                                                                                          </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1322             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1323                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1323                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1324             } else {                                                                                     </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1325                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1326                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327             }                                                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1328             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1329             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330         }                                                                                                </span>
<span  style="">1331                                                                                                          </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1332         // Set the parent id on the entity form                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1333         if (entityForm != null) {                                                                        </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1334             entityForm.setParentId(id);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335         }                                                                                                </span>
<span  style="">1336                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1337         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1338         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());            </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1339         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1340         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1341         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1342     }                                                                                                    </span>
<span  style="">1343                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1344     /**                                                                                                  </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1345      * Shows the appropriate modal dialog to edit the selected collection item                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1346      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1347      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1348      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1349      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1350      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1351      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1352      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1353      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1354      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1355      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1356      */                                                                                                  </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1357     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1357     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1358     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1358     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1359             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1360             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1361             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1362             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1363             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1364         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1364         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1365                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366     }                                                                                                    </span>
<span  style="">1367                                                                                                          </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1368     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET) </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1369     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1369     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1370             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1371             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1372             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1373             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style=""><abbr title="1374         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1374         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1375                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376     }                                                                                                    </span>
<span  style="">1377                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1378     /**                                                                                                  </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1379      * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1379      * Shows the appropriate modal dialog to view the selected collection item. This will display the modðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1380      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1381      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1382      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1383      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1384      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1385      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1386      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1387      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1388      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1389      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1390      */                                                                                                  </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1391     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1391     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1392     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1392     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1393             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1394             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1395             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1396             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1397             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1398         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1398         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1399                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1400                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1401         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1402         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1403         addAuditableDisplayFields(ef);                                                                   </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1404         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1405         ef.setReadOnly();                                                                                </span>
<span  style="">1406                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1407         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408     }                                                                                                    </span>
<span  style="">1409                                                                                                          </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style=""><abbr title="1410     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)">1410     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1411     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1411     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1412             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1413             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1414             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1415             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1416         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1416         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1417                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1418                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1419         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1420         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1421         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1422         ef.setReadOnly();                                                                                </span>
<span  style="">1423                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1424         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425     }                                                                                                    </span>
<span  style="">1426                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1427     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1427     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1428             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1428             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1429         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1429         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430     }                                                                                                    </span>
<span  style="">1431                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1432     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1432     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1433             String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1433             String id, String collectionField, String collectionItemId, String modalHeaderType) throws SeðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1434         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1434         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435     }                                                                                                    </span>
<span  style="">1436                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1437     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1437     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1438                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1438                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntitðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1439         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1439         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440     }                                                                                                    </span>
<span  style="">1441                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1442     /**                                                                                                  </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1443      * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1443      * Shows the view and populates the model for updating a collection item. You can also pass in an entðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1444      * which are optional. If they are not passed in then they are automatically looked up               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1445      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1446      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1447      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1448      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1449      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1450      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1451      * @param collectionItemId                                                                           </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1452      * @param modalHeaderType                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1453      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1454      * @param entity                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1455      * @return                                                                                           </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1456      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1457      */                                                                                                  </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1458     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1458     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-7524579279249503431" onmouseenter="enter('-7524579279249503431');" onmouseout="out('-7524579279249503431');" style=""><abbr title="1459             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1459             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1460         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1461         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1462         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1463         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1463         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1464         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1465         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1466         SectionCrumb nextCrumb = new SectionCrumb();                                                     </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1467         if (md instanceof MapMetadata) {                                                                 </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1468             nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1469         } else {                                                                                         </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1470             nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471         }                                                                                                </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1472         nextCrumb.setSectionId(collectionItemId);                                                        </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1473         if (!sectionCrumbs.contains(nextCrumb)) {                                                        </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1474             sectionCrumbs.add(nextCrumb);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475         }                                                                                                </span>
<span  style="">1476                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1477         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1477         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1478         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1478         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1479                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1480         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1481                                                                                                          </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1482         if (md instanceof BasicCollectionMetadata &amp;&amp;                                                     </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1483                 (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||      </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style=""><abbr title="1484                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) {">1484                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMðŸ”µ</abbr></span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1485             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1486                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1487             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1487             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1488             if (entity == null) {                                                                        </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1489                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1489                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490             }                                                                                            </span>
<span  style="">1491                                                                                                          </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1492             String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                     </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1493             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1493             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1494             if (entityForm == null) {                                                                    </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style=""><abbr title="1495                 entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1495                 entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1496             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1497                 entityForm.clearFieldsMap();                                                             </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style=""><abbr title="1498                 formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1498                 formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, secðŸ”µ</abbr></span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="">1499                 //remove all the actions since we&#x27;re not trying to redisplay them on the form            </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1500                 entityForm.removeAllActions();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501             }                                                                                            </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1502             entityForm.removeAction(DefaultEntityFormActions.DELETE);                                    </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1503             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1504             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1505             model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                    </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1506         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1507             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1508                                                                                                          </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1509             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1510                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1510                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1511                     collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0]; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512             }                                                                                            </span>
<span  style="">1513                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1514             boolean populateTypeAndId = true;                                                            </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style=""><abbr title="1515             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);">1515             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1516             if (entityForm == null) {                                                                    </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1517                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1517                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollecðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1518                 entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                            </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1519                 entityForm.addAction(DefaultAdornedEntityFormActions.Save);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1520             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1521                 entityForm.clearFieldsMap();                                                             </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1522                 String entityType = entityForm.getEntityType();                                          </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1523                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1523                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1524                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1525                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526             }                                                                                            </span>
<span  style="">1527                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1528             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1529             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1529             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1530                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1531                     collectionItemId, responseMap);                                                      </span>
<span  style="">1532                                                                                                          </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1533             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1533             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and ðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style=""><abbr title="1534             //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1534             //It should be the entity and referenced Id of the adorned entity (not the target entity and ðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1535             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1536             entityForm.setTranslationId(alternateId);                                                    </span>
<span  style="">1537                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1538             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1539             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1540                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1541                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542                 }                                                                                        </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1543                 Property p = cmd.getPMap().get(field);                                                   </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1544                 if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {           </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1545                     // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1545                     // Because we&#x27;re dealing with a nested adorned target collection, this particular reqðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1546                     // directly on the first adorned target collection. Because of this, we need the actual id property">1546                     // directly on the first adorned target collection. Because of this, we need the actuðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1547                     // from the entity that models the adorned target relationship, and not the id of the target object.">1547                     // from the entity that models the adorned target relationship, and not the id of theðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1548                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1548                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1549                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1549                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1550                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1551                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1552                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1552                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1553                             ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);      </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1554                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1555                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1556                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1557                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1557                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1558                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1559                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1559                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560                     }                                                                                    </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1561                 } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                        </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1562                     // See above comment for AdornedTargetCollectionMetadata                             </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1563                     MapMetadata mmd = (MapMetadata) p.getMetadata();                                     </span>
<span  style="">1564                                                                                                          </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1565                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1565                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1566                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1566                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1567                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1568                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1569                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1569                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1570                             mmd.getTargetClass(), sectionCrumbs);                                        </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1571                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1572                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1573                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1574                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1574                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1575                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1576                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1576                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579             }                                                                                            </span>
<span  style="">1580                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1581             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1581             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1582             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1583                                                                                                          </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1584             boolean atLeastOneBasicField = false;                                                        </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1585             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1586                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1586                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName(ðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1587                     atLeastOneBasicField = true;                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1588                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590             }                                                                                            </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1591             if (!atLeastOneBasicField) {                                                                 </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1592                 entityForm.removeAction(DefaultEntityFormActions.SAVE);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593             }                                                                                            </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1594             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1595             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1596             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                   </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1597         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1598             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span  style="">1599                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1600             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1600             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1601             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1602                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1602                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1603                     collectionItemId, sectionCrumbs, null).getEntity();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604             }                                                                                            </span>
<span  style="">1605                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1606             boolean populateTypeAndId = true;                                                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1607             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1608                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1608                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1609             } else {                                                                                     </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1610                 //save off the prior key before clearing out the fields map as it will not appear        </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1611                 //back on the saved entity                                                               </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1612                 String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                           </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1613                 entityForm.clearFieldsMap();                                                             </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1614                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1615                 entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                     </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1616                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617             }                                                                                            </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">1618 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1619                                                                                                          </span>
<span class="5318672738793745768" onmouseenter="enter('5318672738793745768');" onmouseout="out('5318672738793745768');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="1620             //For MappedCollections, we need to be specific on what ceilingEntity and translationId is used.">1620             //For MappedCollections, we need to be specific on what ceilingEntity and translationId is usðŸ”µ</abbr></span>
<span class="2806798156222000634" onmouseenter="enter('2806798156222000634');" onmouseout="out('2806798156222000634');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="1621             //It should be the entity and referenced Id of the value entity (not the target entity and Id).">1621             //It should be the entity and referenced Id of the value entity (not the target entity and IdðŸ”µ</abbr></span>
<span class="6626299943516834841" onmouseenter="enter('6626299943516834841');" onmouseout="out('6626299943516834841');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1622             if (entityForm.getCeilingEntityClassname() == null) {                                        </span>
<span class="7267210175865484771" onmouseenter="enter('7267210175865484771');" onmouseout="out('7267210175865484771');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1623                 entityForm.setCeilingEntityClassname(fmd.getValueClassName());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1624             }                                                                                            </span>
<span class="5641028696522950745" onmouseenter="enter('5641028696522950745');" onmouseout="out('5641028696522950745');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1625             entityForm.setTranslationId(collectionItemId);                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1626                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">1627 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1628             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1629         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1630                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1631         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1632         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1633         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1634         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1635         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1636     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1637                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1638     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1639      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1640      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1641      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1642      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1643      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1644      * @param pathVars                                                                                   </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1645 =======                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1646             try {                                                                                        </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="1647                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1647                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1648             } catch (Exception e) {                                                                      </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1649                 LOG.error(e);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1650             }                                                                                            </span>
<span class="-3626447344774920212" onmouseenter="enter('-3626447344774920212');" onmouseout="out('-3626447344774920212');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="1651             entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValue());">1651             entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValueðŸ”µ</abbr></span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">1652 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1653             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1653             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1654             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1655             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1656             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1657             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658         }                                                                                                </span>
<span  style="">1659                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1660         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1661         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1662         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1663         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1664         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1665     }                                                                                                    </span>
<span  style="">1666                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1667     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1668      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1669      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1670      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1671      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1672      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1673      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1674      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1675      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1676      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1676      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1677      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1678      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1679      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1680      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1681      */                                                                                                  </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1682     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)</span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1683     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1683     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1684             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1685             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1686             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1687             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1688             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1689             BindingResult result) throws Exception {                                                     </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1690         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1690         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1691     }                                                                                                    </span>
<span  style="">1692                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1693     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1694      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1695      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1696      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1697      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1698      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1699      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1700      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1701      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1702      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1702      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1703      * @param entityForm                                                                                 </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1704      * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1704      * @param alternateId in the case of adorned target collections, this is the primary key value of theðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1705      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1706      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1707      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1708      */                                                                                                  </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1709     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1709     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1710     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1710     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1711             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1712             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1713             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1714             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1715             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1716             @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                       </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1717             BindingResult result) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1718         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1719         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1720         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1721         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1721         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1722         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1723                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1724         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1724         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1725         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1725         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1726         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1727         // First, we must save the collection entity                                                     </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1728         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1728         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1729         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1730         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1731                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1732         if (result.hasErrors()) {                                                                        </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1733             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1733             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1734                     ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1735         }                                                                                                </span>
<span  style="">1736                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1737         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1738         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1739         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1739         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1740                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1741         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1742         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1743         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1744         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1745     }                                                                                                    </span>
<span  style="">1746                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style=""><abbr title="1747     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">1747     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1748     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1749             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1750             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1751             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1752             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1753             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1754             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1755         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1755         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1756     }                                                                                                    </span>
<span  style="">1757                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1758     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style=""><abbr title="1759      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">1759      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style=""><abbr title="1760      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">1760      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1761      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1762      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1763      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1764      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1765      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1766      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1767      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1768      * @param collectionItemId                                                                           </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1769      * @return an object explaining the state of the operation                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1770      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1771      */                                                                                                  </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1772     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1772     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, methoðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1773     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1774             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1775             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1776             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1777             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1778             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1779             @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                       </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1780             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1781         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1782         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1783         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1784         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1784         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1785         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1786         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1787                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1788         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1788         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1789         ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                               </span>
<span  style="">1790                                                                                                          </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1791         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1791         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1792                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1793         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1794                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1795         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1796             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1797             AdornedTargetList atl = ppr.getAdornedList();                                                </span>
<span  style="">1798                                                                                                          </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1799             // Get an entity form for the entity                                                         </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1800             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1800             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, falseðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style=""><abbr title="1801             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1801             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProðŸ”µ</abbr></span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style=""><abbr title="1802                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})">1802                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;}ðŸ”µ</abbr></span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1803                     .getDynamicResultSet().getRecords()[0];                                              </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1804             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1805             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1806                                                                                                          </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1807             // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1807             // Set the new sequence (note that it will come in 0-indexed but the persistence module expecðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1808             int sequenceValue = Integer.parseInt(newSequence) + 1;                                       </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1809             Field field = entityForm.findField(atl.getSortField());                                      </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1810             field.setValue(String.valueOf(sequenceValue));                                               </span>
<span  style="">1811                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1812             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1813             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1813             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1814             Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());    </span>
<span  style="">1815                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1816             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1817             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1818             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1819             return responseMap;                                                                          </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1820         } else if (md instanceof BasicCollectionMetadata) {                                              </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">1821             BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                   </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1822             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1823             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1823             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResulðŸ”µ</abbr></span>
<span  style="">1824                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1825             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1825             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1826             EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);     </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="1827             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1827             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">1828             if(listGridReadOnly){                                                                        </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">1829                         throw new SecurityServiceException();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1830             }                                                                                            </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1831             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1832                 Field f = new Field()                                                                    </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">1833                         .withName(cd.getSortProperty())                                                  </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1834                         .withFieldType(SupportedFieldType.HIDDEN.toString());                            </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1835                 entityForm.addHiddenField(mainMetadata, f);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1836             }                                                                                            </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1837             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span  style="">1838                                                                                                          </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1839             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1840                 int sequenceValue = Integer.parseInt(newSequence) + 1;                                   </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1841                 Field field = entityForm.findField(cd.getSortProperty());                                </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1842                 field.setValue(String.valueOf(sequenceValue));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843             }                                                                                            </span>
<span  style="">1844                                                                                                          </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1845             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1845             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1846             Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());  </span>
<span  style="">1847                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1848             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1849             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1850             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1851             return responseMap;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1852         } else {                                                                                         </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1853             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1853             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1855     }                                                                                                    </span>
<span  style="">1856                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1857     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1858      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1859      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1860      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1860      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1861      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1862      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1863      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1864      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1865      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1866      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1867      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1868      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1869      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1870      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1871      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1872      */                                                                                                  </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style=""><abbr title="1873     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)">1873     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethoðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1874     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1874     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1875             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1876             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1877             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1878             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1879         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1879         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1880     }                                                                                                    </span>
<span  style="">1881                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1882     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1883      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1884      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1885      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1885      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1886      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1887      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1888      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1889      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1890      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1891      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1892      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1893      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1894      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1895      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1896      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1897      */                                                                                                  </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="1898     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">1898     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method ðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1899     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1899     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1900             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1901             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1902             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1903             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1904             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1905         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1906         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1907         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1908         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1908         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1909         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1910                                                                                                          </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">1911         String priorKey = request.getParameter(&quot;key&quot;);                                                   </span>
<span  style="">1912                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1913         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1913         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1914         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1915         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1915         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1916         service.clearEntityManager();                                                                    </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">1917         // First, we must remove the collection entity                                                   </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="1918         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">1918         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style=""><abbr title="1919         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {">1919         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailurðŸ”µ</abbr></span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">1920             String error = &quot;There was an error removing the whatever&quot;;                                   </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">1921             if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {    </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">1922                 // If we failed, we&#x27;ll return some JSON with the first error                             </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="1923                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">1923                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator()ðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style=""><abbr title="1924             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) {">1924             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErroðŸ”µ</abbr></span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">1925                 error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1926             }                                                                                            </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1927             return new JsonResponse(response)                                                            </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">1928                 .with(&quot;status&quot;, &quot;error&quot;)                                                                 </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">1929                 .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1930                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1931         }                                                                                                </span>
<span  style="">1932                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1933         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1934         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1935         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1935         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1936                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1937         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1938         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1939         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1940         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1941     }                                                                                                    </span>
<span  style="">1942                                                                                                          </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">1943     public void addAuditableDisplayFields(EntityForm entityForm) {                                       </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">1944         Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                   </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">1945         if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                         </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">1946             addAuditableDisplayField(entityForm, createdBy);                                             </span>
<span  style="">1947                                                                                                          </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">1948             createdBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1949         }                                                                                                </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">1950         Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                   </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">1951         if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                         </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">1952             addAuditableDisplayField(entityForm, updatedBy);                                             </span>
<span  style="">1953                                                                                                          </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">1954             updatedBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1955         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1956     }                                                                                                    </span>
<span  style="">1957                                                                                                          </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">1958     private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                      </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">1959         Field displayField = buildAuditableDisplayField(userField);                                      </span>
<span  style="">1960                                                                                                          </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">1961         AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));           </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">1962         String userName = user == null ? null : user.getName();                                          </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">1963         displayField.setValue(userName);                                                                 </span>
<span  style="">1964                                                                                                          </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">1965         FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                            </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">1966         if (auditGroup != null) {                                                                        </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">1967             auditGroup.addField(displayField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1968         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1969     }                                                                                                    </span>
<span  style="">1970                                                                                                          </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">1971     private Field buildAuditableDisplayField(Field auditableField) {                                     </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">1972         return new Field().withFieldType(SupportedFieldType.STRING.toString())                           </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">1973                 .withName(auditableField.getName() + &quot;Display&quot;)                                          </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">1974                 .withFriendlyName(auditableField.getFriendlyName())                                      </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">1975                 .withOrder(auditableField.getOrder())                                                    </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">1976                 .withOwningEntityClass(auditableField.getOwningEntityClass())                            </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">1977                 .withReadOnly(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978     }                                                                                                    </span>
<span  style="">1979                                                                                                          </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">1980     protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">1981         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">1982         if (StringUtils.isBlank(tabName)) {                                                              </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">1983             TabMetadata firstTab = cmd.getFirstTab();                                                    </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">1984             return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1985         }                                                                                                </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">1986         return tabName;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1987     }                                                                                                    </span>
<span  style="">1988                                                                                                          </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1989     // *****************************************                                                         </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">1990     // Typed Entity Helper Methods                                                                       </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1991     // *****************************************                                                         </span>
<span  style="">1992                                                                                                          </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">1993     protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {              </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">1994         // Check if this is a typed entity                                                               </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">1995         AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);     </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">1996         if (typedEntitySection != null) {                                                                </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">1997             // Update the friendly name for this Entity Type                                             </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">1998             model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1999         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2000     }                                                                                                    </span>
<span  style="">2001                                                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2002     // *********************************                                                                 </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">2003     // ADDITIONAL SPRING-BOUND METHODS *                                                                 </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">2004     // *********************************                                                                 </span>
<span  style="">2005                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">2006     /**                                                                                                  </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style=""><abbr title="2007      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process.">2007      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding ðŸ”µ</abbr></span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="2008      * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">2008      * By default, we register a binder that treats empty Strings as null and a Boolean editor that suppoðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2009      * or false. If the value is passed in as null, it will treat it as false.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2010      *                                                                                                   </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2011      * @param binder                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2012      */                                                                                                  </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2013     @InitBinder                                                                                          </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2014     public void initBinder(WebDataBinder binder) {                                                       </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2015         binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                        </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2016         binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2017     }                                                                                                    </span>
<span  style="">2018                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2019 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18 package org.broadleafcommerce.openadmin.web.controller.entity;                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21 import org.apache.commons.collections.MapUtils;                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  29 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  30 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  31 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  32 import org.broadleafcommerce.common.util.BLCArrayUtils;                                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  33 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  34 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  35 import org.broadleafcommerce.common.web.JsonResponse;                                                    </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  36 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  37 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  38 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  39 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  40 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  41 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  42 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  43 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  44 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  45 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  46 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  47 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  48 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  49 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  50 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  51 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  52 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  53 import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                 </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  54 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  55 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  56 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  57 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  58 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                   </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  59 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  59 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExteðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  60 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  61 import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                           </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  62 import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                             </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  63 import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                  </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  64 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  65 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  66 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  67 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  68 import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                               </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  69 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  70 import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                 </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  71 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  72 import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                       </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  73 import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  74 import org.springframework.stereotype.Controller;                                                        </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  75 import org.springframework.ui.Model;                                                                     </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  76 import org.springframework.util.MultiValueMap;                                                           </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  77 import org.springframework.validation.BindingResult;                                                     </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  78 import org.springframework.web.bind.WebDataBinder;                                                       </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  79 import org.springframework.web.bind.annotation.InitBinder;                                               </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  80 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  81 import org.springframework.web.bind.annotation.PathVariable;                                             </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  82 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  83 import org.springframework.web.bind.annotation.RequestMethod;                                            </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  84 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  85 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  86 import org.springframework.web.servlet.DispatcherServlet;                                                </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  87 import org.springframework.web.servlet.FlashMap;                                                         </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  88 import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                   </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  89 import org.springframework.web.util.UrlPathHelper;                                                       </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  90 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span  style="">  91                                                                                                          </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  92 import java.net.URLDecoder;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  93 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  94 import java.util.Arrays;                                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  95 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  96 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  97 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  98 import java.util.Map.Entry;                                                                              </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  99 import java.util.Set;                                                                                    </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style=""> 100 import java.util.stream.Stream;                                                                          </span>
<span  style=""> 101                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 102 import javax.annotation.Resource;                                                                        </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 103 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 104 import javax.servlet.http.HttpServletResponse;                                                           </span>
<span  style=""> 105                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106 /**                                                                                                      </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style=""><abbr title=" 107  * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 107  * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates everðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style=""><abbr title=" 108  * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 108  * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for ðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style=""> 109  * that is not explicitly customized by its own controller.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 110  *                                                                                                       </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 111  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 112  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113  */                                                                                                      </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 114 @Controller(&quot;blAdminBasicEntityController&quot;)                                                              </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 115 @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                      </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 116 public class AdminBasicEntityController extends AdminAbstractController {                                </span>
<span  style=""> 117                                                                                                          </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 118     protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                </span>
<span  style=""> 119                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 120     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 121     public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                             </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 122     public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                              </span>
<span  style=""> 123                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 124     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 125     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style=""> 126                                                                                                          </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 127     @Resource(name = &quot;blAdminUserDao&quot;)                                                                   </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 128     protected AdminUserDao adminUserDao;                                                                 </span>
<span  style=""> 129                                                                                                          </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 130     @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                 </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 131     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 132                                                                                                          </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 133     @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                      </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 134     protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;       </span>
<span  style=""> 135                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 136     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 137     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 138                                                                                                          </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 139     // ******************************************                                                        </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 140     // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                        </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 141     // ******************************************                                                        </span>
<span  style=""> 142                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143     /**                                                                                                  </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 144      * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 144      * Renders the main entity listing for the specified class, which is based on the current sectionKey ðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 145      * criteria.                                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 146      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 147      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 148      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 149      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 150      * @param pathVars                                                                                   </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 151      * @param requestParams a Map of property name -&gt; list critiera values                               </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 152      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 153      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 154      */                                                                                                  </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 155     @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                              </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 156     public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 157             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 158             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 159         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 160         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 161         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 162         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 162         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 163         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 164         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 165                                                                                                          </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 166         ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                 </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 167         listGrid.setSelectType(ListGrid.SelectType.NONE);                                                </span>
<span  style=""> 168                                                                                                          </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 169         Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                            </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 170         if (CollectionUtils.isNotEmpty(headerFields)) {                                                  </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 171             Field firstField = headerFields.iterator().next();                                           </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 172             if (requestParams.containsKey(firstField.getName())) {                                       </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 173                 model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span  style=""> 176                                                                                                          </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 177         model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                    </span>
<span  style=""> 178                                                                                                          </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 179         setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams); </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 180         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 181                                                                                                          </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 182         return &quot;modules/defaultContainer&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""><abbr title=" 185     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,"> 185     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String seðŸ”µ</abbr></span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 186             String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {         </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 187         List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                          </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 188         addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                       </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 189         extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);             </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 190         extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                 </span>
<span  style=""> 191                                                                                                          </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 192         // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of   </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 193         if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                  </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 194             model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 197         List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                   </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 198         String requestUri = request.getRequestURI();                                                     </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 199         if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {  </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 200             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 200             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length())ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201         }                                                                                                </span>
<span  style=""> 202                                                                                                          </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 203         model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                      </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 204         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 205         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 206         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 207         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 208         model.addAttribute(&quot;mainActions&quot;, mainActions);                                                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 209         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 210         setTypedEntityModelAttributes(request, model);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 213     @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                    </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 214     public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,         </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 215              HttpServletResponse response, Model model,                                                  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 216              @PathVariable Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 217              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 218         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 219         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 220         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 221         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 221         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 222                 .withCustomCriteria(getCustomCriteria(requestParams));                                   </span>
<span  style=""> 223                                                                                                          </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 224         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span  style=""> 225                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 226         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 227         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 228                                                                                                          </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 229         return formService.constructSelectizeOptionMap(drs, cmd);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 232     /**                                                                                                  </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 233      * Obtains the requested criteria parameter                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 234      *                                                                                                   </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 235      * @param requestParams                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 236      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 237      */                                                                                                  </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 238     protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                      </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 239         if (requestParams == null || requestParams.isEmpty()) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 240             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span  style=""> 242                                                                                                          </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 243         List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                      </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 244         String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                    </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 245         return new String[] {response};                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248     /**                                                                                                  </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""><abbr title=" 249      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances"> 249      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new inðŸ”µ</abbr></span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 250      * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 251      *                                                                                                   </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 252      * @param sectionClassName                                                                           </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 253      * @param cmd                                                                                        </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 254      * @param mainActions                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 255      */                                                                                                  </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 256     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 256     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormActioðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 257         if (isAddActionAllowed(sectionClassName, cmd)) {                                                 </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 258             mainActions.add(DefaultMainActions.ADD);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260     }                                                                                                    </span>
<span  style=""> 261                                                                                                          </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style=""> 262     protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                   </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 263         // If the user does not have create permissions, we will not add the &quot;Add New&quot; button            </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style=""> 264         boolean canCreate = true;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 265         try {                                                                                            </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 266             adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);         </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 267         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 268             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 269                 canCreate = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271         }                                                                                                </span>
<span  style=""> 272                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 273         if (canCreate) {                                                                                 </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style=""> 274             checkReadOnly: {                                                                             </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 275                 //check if all the metadata is read only                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 276                 for (Property property : cmd.getProperties()) {                                          </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 277                     if (property.getMetadata() instanceof BasicFieldMetadata) {                          </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 278                         if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||       </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 279                                 !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {          </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style=""> 280                             break checkReadOnly;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                 }                                                                                        </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 284                 canCreate = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286         }                                                                                                </span>
<span  style=""> 287                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 288         if (canCreate) {                                                                                 </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style=""><abbr title=" 289             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 289             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290         }                                                                                                </span>
<span  style=""> 291                                                                                                          </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style=""> 292         return canCreate;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 295     /**                                                                                                  </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""><abbr title=" 296      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any"> 296      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot rðŸ”µ</abbr></span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 297      * subcollections as operations on those collections require the parent level entity to first be saved and have"> 297      * subcollections as operations on those collections require the parent level entity to first be saveðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 298      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 298      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 299      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 300      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 301      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 302      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 303      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 304      * @param pathVars                                                                                   </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 305      * @param entityType                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 306      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 307      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 308      */                                                                                                  </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 309     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                          </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""><abbr title=" 310     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,"> 310     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 311             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 312             @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                       </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 313         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 314         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 315         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 316         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 316         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 317         ppr.setAddOperationInspect(true);                                                                </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 318         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 319                                                                                                          </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style=""><abbr title=" 320         // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 320         // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic typeðŸ”µ</abbr></span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 321         if (StringUtils.isBlank(entityType)) {                                                           </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 322             if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 323                 entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324             } else {                                                                                     </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 325                 entityType = getDefaultEntityType();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 327         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 328             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span  style=""> 330                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 331         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span  style=""> 332                                                                                                          </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""><abbr title=" 333         // We need to make sure that the ceiling entity is set to the interface and the specific entity type"> 333         // We need to make sure that the ceiling entity is set to the interface and the specific entity tðŸ”µ</abbr></span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 334         // is set to the type we&#x27;re going to be creating.                                                </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 335         entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                      </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 336         entityForm.setEntityType(entityType);                                                            </span>
<span  style=""> 337                                                                                                          </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""><abbr title=" 338         // When we initially build the class metadata (and thus, the entity form), we had all of the possible"> 338         // When we initially build the class metadata (and thus, the entity form), we had all of the possðŸ”µ</abbr></span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""><abbr title=" 339         // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the"> 339         // polymorphic fields built out. Now that we have a concrete entity type to render, we can removeðŸ”µ</abbr></span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 340         // fields that are not applicable for this given entity type.                                    </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 341         formService.removeNonApplicableFields(cmd, entityForm, entityType);                              </span>
<span  style=""> 342                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 343         modifyAddEntityForm(entityForm, pathVars);                                                       </span>
<span  style=""> 344                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 345         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 346         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                               </span>
<span  style=""> 347                                                                                                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 348         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 349         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 350         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 351         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 352         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 355     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""><abbr title=" 356      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 356      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 357      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 358      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 359      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 360      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 361      * @param pathVars                                                                                   </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 362      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 363      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 364      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 365      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 366      */                                                                                                  </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 367     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                         </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 368     public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,       </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 369             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title=" 370             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {"> 370             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 371         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 372         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 373         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 374         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 374         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassNameðŸ”µ</abbr></span>
<span  style=""> 375                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 376         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 377         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 377         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 378         Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();       </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 379         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 380                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 381         if (result.hasErrors()) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 382             entityForm.clearFieldsMap();                                                                 </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 383             formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                      </span>
<span  style=""> 384                                                                                                          </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 385             formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());          </span>
<span  style=""> 386                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 387             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span  style=""> 388                                                                                                          </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 389             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                           </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 390             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 391             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                 </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 392             model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 393             setModelAttributes(model, sectionKey);                                                       </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 394             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395         }                                                                                                </span>
<span  style=""> 396                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 397         // Note that AJAX Redirects need the context path prepended to them                              </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 398         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 398         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399     }                                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 401     /**                                                                                                  </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 402      * Renders the main entity form for the specified entity                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 403      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 404      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 405      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 406      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 407      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 408      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 409      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 410      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 411      */                                                                                                  </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 412     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                         </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 413     public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 414             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 415             @PathVariable(&quot;id&quot;) String id) throws Exception {                                            </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 416         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 417         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 418         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 419         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 419         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style=""> 420                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 421         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 422         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 423                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 424         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 424         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style=""> 425                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 426         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style=""> 427                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 428         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 429             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 430         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 431             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span  style=""> 433                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 434         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 435             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436         }                                                                                                </span>
<span  style=""> 437                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 438         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 439         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style=""> 440                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 441         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 442         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 443         int startIndex = request.getContextPath().length();                                              </span>
<span  style=""> 444                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 445         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 446         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style=""> 447                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 448         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 449         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 450         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 452         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 453                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 454         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 455         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style=""> 456                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 457         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 458             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 459             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 460             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 461             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 462         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 463             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 464             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 465             return &quot;modules/defaultContainer&quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467     }                                                                                                    </span>
<span  style=""> 468                                                                                                          </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 469     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 469     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, StrðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 470                                                               ClassMetadata cmd, Entity entity,          </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""><abbr title=" 471                                                               List&lt;SectionCrumb&gt; crumbs) throws Exception {"> 471                                                               List&lt;SectionCrumb&gt; crumbs) throws ExceptionðŸ”µ</abbr></span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 472         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 473         if (StringUtils.isEmpty(tabName)) {                                                              </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 474             tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475         }                                                                                                </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 476         return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477     }                                                                                                    </span>
<span  style=""> 478                                                                                                          </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 479     private boolean isAddRequest(Entity entity) {                                                        </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 480         ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                     </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""><abbr title=" 481         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);"> 481         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder)ðŸ”µ</abbr></span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 482         if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 483             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484         }                                                                                                </span>
<span  style=""> 485                                                                                                          </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 486         return resultHolder.getResult();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487     }                                                                                                    </span>
<span  style=""> 488                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 489     /**                                                                                                  </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 490      * Attempts to get the List Grid for the selected tab.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 491      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 492      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 493      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 494      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 495      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 496      * @param id                                                                                         </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 497      * @param tabName                                                                                    </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 498      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 499      * @param entity                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 500      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 501      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 502      */                                                                                                  </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 503     @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                 </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 504     public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 505             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 506             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 507             @PathVariable(value = &quot;tabName&quot;) String tabName,                                             </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 508             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                 </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 509             @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 510         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 511         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 512         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 513         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 513         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 514         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 515         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 516         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 516         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 517         entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                   </span>
<span  style=""> 518                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 519         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 520             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 521         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 522             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523         }                                                                                                </span>
<span  style=""> 524                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 525         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 526         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 527         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span  style=""> 528                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 529         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 530                                                                                                          </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 531         model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                       </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 532         model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 533         return &quot;modules/defaultContainer&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534     }                                                                                                    </span>
<span  style=""> 535                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 536     /**                                                                                                  </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 537      * Builds JSON that looks like this:                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 538      *                                                                                                   </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 539      * {&quot;errors&quot;:                                                                                        </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 540      *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                        </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 541      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 542      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 543      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 544      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 545      *        },                                                                                         </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 546      *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                       </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 547      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 548      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 549      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 550      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 551      *        }]                                                                                         </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 552      * }                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 553      *                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 554      */                                                                                                  </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 555     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)         </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 556     public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 557             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 558             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 559             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,           </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 560             RedirectAttributes ra) throws Exception {                                                    </span>
<span  style=""> 561                                                                                                          </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 562         saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                      </span>
<span  style=""> 563                                                                                                          </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 564         JsonResponse json = new JsonResponse(response);                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 565         if (result.hasErrors()) {                                                                        </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 566             populateJsonValidationErrors(entityForm, result, json);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567         }                                                                                                </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 568         List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                  </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 569         if (CollectionUtils.isNotEmpty(dirtyList)) {                                                     </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 570             json.with(&quot;dirty&quot;, dirtyList);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571         }                                                                                                </span>
<span  style=""> 572                                                                                                          </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 573         ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                      </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 574         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 574         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonReðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 575         if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 576             return resultHolder.getResult();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span  style=""> 578                                                                                                          </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 579         return json.done();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580     }                                                                                                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 582     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 582     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String iðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 583         List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 584         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 585         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 586         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 587         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 587         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 588         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 589         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 590         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 591         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style=""> 592                                                                                                          </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 593         for (Property p: entity.getProperties()) {                                                       </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 594             if (p.getIsDirty()) {                                                                        </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 595                 dirtyList.add(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597         }                                                                                                </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 598         return dirtyList;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599     }                                                                                                    </span>
<span  style=""> 600                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 601     /**                                                                                                  </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""><abbr title=" 602      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with"> 602      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity forðŸ”µ</abbr></span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 603      * error fields highlighted. On a successful save, it will refresh the entity page.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 604      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 605      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 606      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 607      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 608      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 609      * @param id                                                                                         </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 610      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 611      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 612      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 613      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 614      */                                                                                                  </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 615     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                        </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 616     public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,      </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 617             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 618             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 619             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 620             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 621         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 622         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 623         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 624         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 624         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 625         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 626                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 627         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span  style=""> 628                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 629         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 629         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 630         Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span  style=""> 631                                                                                                          </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 632         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 633         if (result.hasErrors()) {                                                                        </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 634             model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                      </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 635             model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                </span>
<span  style=""> 636                                                                                                          </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 637             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 637             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 638             entityForm.clearFieldsMap();                                                                 </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 639             formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);       </span>
<span  style=""> 640                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 641             if (isAddRequest(entity)) {                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 642                 modifyAddEntityForm(entityForm, pathVars);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 643             } else {                                                                                     </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 644                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span  style=""> 646                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 647             model.addAttribute(&quot;entity&quot;, entity);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 648             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span  style=""> 649                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 650             setModelAttributes(model, sectionKey);                                                       </span>
<span  style=""> 651                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 652             if (isAjaxRequest(request)) {                                                                </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 653                 entityForm.setReadOnly();                                                                </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 654                 model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                      </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 655                 model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());            </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 656                 return &quot;modules/modalContainer&quot;;                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 657             } else {                                                                                     </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 658                 model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                               </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 659                 model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                            </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 660                 return &quot;modules/defaultContainer&quot;;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662         }                                                                                                </span>
<span  style=""> 663                                                                                                          </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 664         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                          </span>
<span  style=""> 665                                                                                                          </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 666         return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 669     /**                                                                                                  </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 670      * Attempts to remove the given entity.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 671      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 672      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 673      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 674      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 675      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 676      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 677      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 678      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 679      */                                                                                                  </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 680     @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                 </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 681     public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 682             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 683             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 684             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 685             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 686         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 687         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 688         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style=""> 689                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 690         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 690         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 691         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 692         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 693         if (entity != null) {                                                                            </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 694             entityFormValidator.validate(entityForm, entity, result);                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 695             if (result.hasErrors()) {                                                                    </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 696                 // Create a flash attribute for the unsuccessful delete                                  </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 697                 FlashMap fm = new FlashMap();                                                            </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 698                 fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                            </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 699                 fm.put(&quot;headerFlashAlert&quot;, true);                                                        </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 700                 request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                  </span>
<span  style=""> 701                                                                                                          </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 702                 // Re-look back up the entity so that we can return something populated                  </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 703                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 703                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, secðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 704                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 704                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 705                 entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];   </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 706                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 706                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr,ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 707                 entityForm.clearFieldsMap();                                                             </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 708                 formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);   </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 709                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span  style=""> 710                                                                                                          </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 711                 return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 712                         .done();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span  style=""> 715                                                                                                          </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 716         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                        </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 717         ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                  </span>
<span  style=""> 718                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 719         if (isAjaxRequest(request)) {                                                                    </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 720             // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request       </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""><abbr title=" 721             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;"> 721             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successfðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722         } else {                                                                                         </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 723             return &quot;redirect:/&quot; + sectionKey;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 727     @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                 </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 728     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 728     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpSeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 729             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 730             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 731             @RequestParam String ids,                                                                    </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 732             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 733         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 734         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 735         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 736         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 736         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 737         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 737         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 738         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 739         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 740                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 741         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 742         ppr.setStartIndex(getStartIndex(requestParams));                                                 </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 743         ppr.setMaxIndex(getMaxIndex(requestParams));                                                     </span>
<span  style=""> 744                                                                                                          </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 745         if (md instanceof BasicFieldMetadata) {                                                          </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 746             String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                           </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 747             String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();          </span>
<span  style=""> 748                                                                                                          </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 749             List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));   </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 750             ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));               </span>
<span  style=""> 751                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 752             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 753             Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                             </span>
<span  style=""> 754                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 755             for (Entity e : drs.getRecords()) {                                                          </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 756                 String id = e.getPMap().get(idProp).getValue();                                          </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 757                 String disp = e.getPMap().get(displayProp).getDisplayValue();                            </span>
<span  style=""> 758                                                                                                          </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 759                 if (StringUtils.isBlank(disp)) {                                                         </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 760                     disp = e.getPMap().get(displayProp).getValue();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                 }                                                                                        </span>
<span  style=""> 762                                                                                                          </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 763                 returnMap.put(id,  disp);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764             }                                                                                            </span>
<span  style=""> 765                                                                                                          </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 766             return returnMap;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767         }                                                                                                </span>
<span  style=""> 768                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 769         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770     }                                                                                                    </span>
<span  style=""> 771                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 772     /**                                                                                                  </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 773      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 773      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a ðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 774      * then this method is invoked when a user clicks on the name of the default category field.         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 775      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 776      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 777      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 778      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 779      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 780      * @param collectionField                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 781      * @param id                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 782      * @return                                                                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 783      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 784      */                                                                                                  </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 785     @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)               </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""><abbr title=" 786     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 786     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 787             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 788             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 789             @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 790         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 791         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 792         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 793         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 793         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 794         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 795         BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                   </span>
<span  style=""> 796                                                                                                          </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 797         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 797         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 798         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 798         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : sectiðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 799         Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                              </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 800         varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                   </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 801         return viewEntityForm(request, response, model, varsForField, id);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802     }                                                                                                    </span>
<span  style=""> 803                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 804     @RequestMapping(                                                                                     </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 805             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,              </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 806             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 807     )                                                                                                    </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""><abbr title=" 808     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 808     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 809                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 810                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 811                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 812                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 813                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 814                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 814                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 815                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 816         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 816         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817     }                                                                                                    </span>
<span  style=""> 818                                                                                                          </span>
<span  style=""> 819                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 820     @RequestMapping(                                                                                     </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 821             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,         </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 822             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 823     )                                                                                                    </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 824     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 824     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response,ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 825                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 826                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 827                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 828                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 829                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 830                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 830                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 831                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 832         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 832         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833     }                                                                                                    </span>
<span  style=""> 834                                                                                                          </span>
<span  style=""> 835                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 836     /**                                                                                                  </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 837      * Returns the records for a given collectionField filtered by a particular criteria                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 838      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 839      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 840      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 841      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 842      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 843      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 844      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 845      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 846      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 847      */                                                                                                  </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 848     @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                    </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""><abbr title=" 849     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,"> 849     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 850             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 851             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 852             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 853             @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 854         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 855         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 856         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 857         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 857         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams,ðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 858         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 858         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 859         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style=""> 860                                                                                                          </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 861         ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);               </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title=" 862         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];"> 862         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style=""> 863                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 864         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 865         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 865         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParamsðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 866         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 867                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 868         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 869                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 870         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 871         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 872         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873     }                                                                                                    </span>
<span  style=""> 874                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 875     /**                                                                                                  </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 876      * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 876      * Shows the modal dialog that is used to add an item to a given collection. There are several possibðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 877      * of this call depending on the type of the specified collection field.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 878      *                                                                                                   </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 879      * &lt;ul&gt;                                                                                              </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 880      *  &lt;li&gt;                                                                                             </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 881      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 881      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so thaðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 882      *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 882      *    enter information and associate the record with this collection. Used by fields such as ProductðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 883      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 884      *  &lt;li&gt;                                                                                             </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 885      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 885      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entiðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 886      *    Used by fields such as &quot;allParentCategories&quot;.                                                  </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 887      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 888      *  &lt;li&gt;                                                                                             </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 889      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 889      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click onðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 890      *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 890      *    select it. The view rendered by this is identical to basic collection (lookup), but will perforðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 891      *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 891      *    on an adorned field, which may carry extra meta-information about the created relationship, sucðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 892      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 893      *  &lt;li&gt;                                                                                             </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 894      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 894      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on anðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 895      *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 895      *    select it. Once the user selects the entity, he will be presented with an empty form based on tðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 896      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 896      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, whiðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 897      *    to linking an entity, provide extra fields, such as a promotional message.                     </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 898      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 899      *  &lt;li&gt;                                                                                             </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 900      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 900      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. ðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 901      *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 901      *    populated either from the configured map keys, or as a result of a lookup in the case of a key ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 902      *    entity. Used by fields such as the mediaMap on a Sku.                                          </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 903      *  &lt;/li&gt;                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 904      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 905      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 906      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 907      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 908      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 909      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 910      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 911      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 912      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 913      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 914      */                                                                                                  </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 915     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""><abbr title=" 916     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 916     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 917             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 918             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 919             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 920             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 921         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 922         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 923         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title=" 924         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,"> 924         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style=""> 925                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 926         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 927         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 928                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style=""> 929         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style=""> 930                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style=""> 931                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style=""> 932                 .withMaxIndex(getMaxIndex(requestParams))                                                </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style=""> 933                 .withLastId(getLastId(requestParams))                                                    </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style=""> 934                 .withFirstId(getFirstId(requestParams))                                                  </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style=""> 935                 .withUpperCount(getUpperCount(requestParams))                                            </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style=""> 936                 .withLowerCount(getLowerCount(requestParams))                                            </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style=""> 937                 .withPageSize(getPageSize(requestParams))                                                </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style=""> 938                 .withPresentationFetch(true);                                                            </span>
<span  style=""> 939                                                                                                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style=""> 940         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style=""> 941             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style=""> 942             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 943                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 943                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""><abbr title=" 944                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types"> 944                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorpðŸ”µ</abbr></span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style=""> 945                 // for this entity.                                                                      </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style=""> 946                 String entityType = null;                                                                </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style=""> 947                 if (requestParams.containsKey(&quot;entityType&quot;)) {                                           </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style=""> 948                     entityType = requestParams.get(&quot;entityType&quot;).get(0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949                 }                                                                                        </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 950                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 951                     if (cmd.getPolymorphicEntities().getChildren().length == 0) {                        </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 952                         entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 953                     } else {                                                                             </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 954                         entityType = getDefaultEntityType();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 956                 } else {                                                                                 </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 957                     entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958                 }                                                                                        </span>
<span  style=""> 959                                                                                                          </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 960                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 961                     List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());       </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 962                     model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                      </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style=""> 963                     model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                         </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""><abbr title=" 964                     model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());"> 964                     model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyNameðŸ”µ</abbr></span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 965                     String requestUri = request.getRequestURI();                                         </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""><abbr title=" 966                     if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {"> 966                     if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 967                         requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 967                         requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968                     }                                                                                    </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 969                     model.addAttribute(&quot;currentUri&quot;, requestUri);                                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 970                     model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());         </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 971                     setModelAttributes(model, sectionKey);                                               </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 972                     return &quot;modules/modalContainer&quot;;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 973                 } else {                                                                                 </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style=""> 974                     ppr = ppr.withCeilingEntityClassname(entityType);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 975                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976             }                                                                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style=""> 977         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title=" 978             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);"> 978             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionTypðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style=""> 979             if (result.equals(ExtensionResultStatusType.HANDLED)) {                                      </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style=""> 980                 model.addAttribute(&quot;entityId&quot;, id);                                                      </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style=""> 981                 model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                            </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style=""> 982                 model.addAttribute(&quot;collectionField&quot;, collectionField);                                  </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 983                 return &quot;modules/modalContainer&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985         }                                                                                                </span>
<span  style=""> 986                                                                                                          </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style=""> 987         //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                        </span>
<span  style=""> 988                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 989         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 990                                                                                                          </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title=" 991         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);"> 991         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, colðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992     }                                                                                                    </span>
<span  style=""> 993                                                                                                          </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title=" 994     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)"> 994     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title=" 995     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 995     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 996             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 997             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 998             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style=""> 999             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1000         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1001         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1002         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1003         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1003         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1004         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1005         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1006         Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                               </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1007         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1008             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1008             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1009                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1010                     collectionItemId, responseMap);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1012         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1013     }                                                                                                    </span>
<span  style="">1014                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1015     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1016      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1017      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1018      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1019      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1020      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1021      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1022      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1023      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1024      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1025      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1026      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1027     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1028     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1028     public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HtðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1029             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1030             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1031             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1032             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1033         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1034         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1035         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title="1036         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,">1036         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1037                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1038         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1039         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1040                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1041         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1042                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1043                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="">1044                 .withMaxIndex(getMaxIndex(requestParams));                                               </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style=""><abbr title="1045         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1045         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="">1046                 .toArray(String[]::new);                                                                 </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="">1047         ppr = ppr.withCustomCriteria( both);                                                             </span>
<span  style="">1048                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1049         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1050             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1051             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1052             ppr.setSectionEntityField(collectionField);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053         }                                                                                                </span>
<span  style="">1054                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1055         DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                            </span>
<span  style="">1056                                                                                                          </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style=""><abbr title="1057         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1057         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1058     }                                                                                                    </span>
<span  style="">1059                                                                                                          </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1060     protected String[] buildSelectizeCustomCriteria() {                                                  </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1061         return new String[]{ IS_SELECTIZE_REQUEST };                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062     }                                                                                                    </span>
<span  style="">1063                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1064     /**                                                                                                  </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1065      * Adds the requested collection item via Selectize                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1066      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1067      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1068      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1069      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1070      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1071      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1072      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1073      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1074      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1075      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1076      */                                                                                                  </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1077     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)     </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1078     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1078     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpSðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1079             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1080             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1081             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1082             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1082             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1083         Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                 </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1084         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1085         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1086         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1087         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1087         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1088         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1089                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1090         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1091             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1092             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1093                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095         }                                                                                                </span>
<span  style="">1096                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1097         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1097         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1098         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1099         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1100         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1100         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1101                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1102         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1103         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1103         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1104         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1105         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1106                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1107         if (result.hasErrors()) {                                                                        </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1108             returnVal.put(&quot;error&quot;, result.getFieldError());                                              </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1109             return returnVal;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110         }                                                                                                </span>
<span  style="">1111                                                                                                          </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1112         if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                   </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1113             returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1114         }                                                                                                </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1115         return returnVal;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1118     protected void declareShouldIgnoreAdditionStatusFilter() {                                           </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1119         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1119         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().gðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1120         additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121     }                                                                                                    </span>
<span  style="">1122                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1123     /**                                                                                                  </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1124      * Adds the requested collection item                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1125      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1126      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1127      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1128      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1129      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1130      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1131      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1132      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1133      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1134      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1135      */                                                                                                  </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1136     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)               </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style=""><abbr title="1137     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1137     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1138             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1139             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1140             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1141             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1141             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1142         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1143         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1144         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1145         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1145         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1146         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1147                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1148         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1149             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1150             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1151                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153         }                                                                                                </span>
<span  style="">1154                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1155         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1155         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1156         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1157         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1157         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1158         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1159         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1160         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1160         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1161         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1162         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1163                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1164         if (result.hasErrors()) {                                                                        </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1165             FieldMetadata md = collectionProperty.getMetadata();                                         </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1166             ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                             </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1167             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1167             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey,ðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1168                     md, ppr, entityForm, savedEntity);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span  style="">1170                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1171         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1172         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1172         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1173         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1174                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1175         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1176         model.addAttribute(&quot;actualEntityId&quot;, id);                                                        </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1177         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1178         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179     }                                                                                                    </span>
<span  style="">1180                                                                                                          </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1181     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)          </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1182     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1182     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse reðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1183             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1184             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1185             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1186             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1186             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1187         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1188         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1189         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1190         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1190         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1191         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1192                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1193         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1194             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1195             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1196                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1198         }                                                                                                </span>
<span  style="">1199                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1200         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1200         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1201         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1201         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1202         entity.setIsPreAdd(true);                                                                        </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1203         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1204         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1204         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1205         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span  style="">1206                                                                                                          </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1207         return new JsonResponse(response)                                                                </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1208                 .with(&quot;status&quot;, &quot;complete&quot;)                                                              </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1209                 .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())             </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1210                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1213     /**                                                                                                  </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1214      * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1214      * Builds out all of the model information needed for showing the add modal for collection items on bðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1215      * as well as after a POST with validation errors                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1216      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1217      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1218      * @param model                                                                                      </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1219      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1220      * @param collectionField                                                                            </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1221      * @param sectionKey                                                                                 </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1222      * @param collectionProperty                                                                         </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1223      * @param md                                                                                         </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1224      * @param ppr                                                                                        </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1225      * @return the appropriate view to display for the modal                                             </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1226      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1226      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StringðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1227      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1227      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1228      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1229      */                                                                                                  </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style=""><abbr title="1230     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,">1230     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse responseðŸ”µ</abbr></span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style=""><abbr title="1231             Model model, String id, String collectionField, String sectionKey, Property collectionProperty,">1231             Model model, String id, String collectionField, String sectionKey, Property collectionPropertðŸ”µ</abbr></span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1232             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1232             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throwsðŸ”µ</abbr></span>
<span  style="">1233                                                                                                          </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1234         // For requests to add a new collection item include the main class that the subsequent request comes from.">1234         // For requests to add a new collection item include the main class that the subsequent request cðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1235         // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1235         // For instance, with basic collections we know the main associated class for a fetch through theðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style=""><abbr title="1236         // persistence item but map and adorned target lookups make a standard persistence request. This solution">1236         // persistence item but map and adorned target lookups make a standard persistence request. This ðŸ”µ</abbr></span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1237         // fixes all cases.                                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1238         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1239         ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                           </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1240         ppr.setAddOperationInspect(true);                                                                </span>
<span  style="">1241                                                                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1242         if (entityForm != null) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1243             entityForm.clearFieldsMap();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1244         }                                                                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1245         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1246         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1247             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1248                                                                                                          </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style=""><abbr title="1249             // When adding items to basic collections, we will sometimes show a form to persist a new record">1249             // When adding items to basic collections, we will sometimes show a form to persist a new recðŸ”µ</abbr></span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1250             // and sometimes show a list grid to allow the user to associate an existing record.         </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1251             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1252                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1252                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().geðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1253                 if (entityForm == null) {                                                                </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1254                     entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);         </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1255                     entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());               </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1256                     entityForm.setEntityType(ppr.getCeilingEntityClassname());                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1257                 } else {                                                                                 </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1258                     formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);       </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1259                     formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260                 }                                                                                        </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1261                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1261                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntitðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1262                 entityForm.getTabs().iterator().next().getIsVisible();                                   </span>
<span  style="">1263                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1264                 model.addAttribute(&quot;entityForm&quot;, entityForm);                                            </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1265                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1266             } else {                                                                                     </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1267                 DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                    </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1268                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1268                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1269                 listGrid.setPathOverride(request.getRequestURL().toString());                            </span>
<span  style="">1270                                                                                                          </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1271                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1271                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUPðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1272                     listGrid.removeAllRowActions();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273                 }                                                                                        </span>
<span  style="">1274                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1275                 model.addAttribute(&quot;listGrid&quot;, listGrid);                                                </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1276                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277             }                                                                                            </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1278         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1279             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1280                                                                                                          </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1281             // Even though this field represents an adorned target collection, the list we want to show in the modal">1281             // Even though this field represents an adorned target collection, the list we want to show iðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1282             // is the standard list grid for the target entity of this field                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1283             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1284             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1285             ppr.setSectionEntityField(collectionField);                                                  </span>
<span  style="">1286                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1287             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1287             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1288                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1289             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1290             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1290             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1291             listGrid.setSubCollectionFieldName(collectionField);                                         </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1292             listGrid.setPathOverride(request.getRequestURL().toString());                                </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1293             listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1294             if (entityForm == null) {                                                                    </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1295                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1295                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectiðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style=""><abbr title="1296                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());">1296                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassnameðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1297             } else {                                                                                     </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1298                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1298                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectioðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1299                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300             }                                                                                            </span>
<span  style="">1301                                                                                                          </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1302             listGrid.setListGridType(ListGrid.Type.ADORNED);                                             </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1303             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1304                 if (entry.getValue().getIsVisible()) {                                                   </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1305                     listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1306                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1308             }                                                                                            </span>
<span  style="">1309                                                                                                          </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1310             // This is part of an add, so we want to be able to filter/sort the listgrid                 </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1311             listGrid.setIsSortable(false);                                                               </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1312             listGrid.setCanFilterAndSort(true);                                                          </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1313             listGrid.removeAllRowActions();                                                              </span>
<span  style="">1314                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1315             model.addAttribute(&quot;listGrid&quot;, listGrid);                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1316             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1317             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                 </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1318         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1319             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1320             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1320             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1321                                                                                                          </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1322             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1323                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1323                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1324             } else {                                                                                     </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1325                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1326                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327             }                                                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1328             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1329             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330         }                                                                                                </span>
<span  style="">1331                                                                                                          </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1332         // Set the parent id on the entity form                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1333         if (entityForm != null) {                                                                        </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1334             entityForm.setParentId(id);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1335         }                                                                                                </span>
<span  style="">1336                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1337         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1338         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());            </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1339         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1340         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1341         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1342     }                                                                                                    </span>
<span  style="">1343                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1344     /**                                                                                                  </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1345      * Shows the appropriate modal dialog to edit the selected collection item                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1346      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1347      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1348      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1349      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1350      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1351      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1352      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1353      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1354      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1355      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1356      */                                                                                                  </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1357     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1357     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1358     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1358     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1359             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1360             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1361             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1362             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1363             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1364         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1364         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1365                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366     }                                                                                                    </span>
<span  style="">1367                                                                                                          </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1368     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET) </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1369     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1369     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1370             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1371             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1372             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1373             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style=""><abbr title="1374         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1374         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1375                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376     }                                                                                                    </span>
<span  style="">1377                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1378     /**                                                                                                  </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1379      * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1379      * Shows the appropriate modal dialog to view the selected collection item. This will display the modðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1380      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1381      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1382      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1383      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1384      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1385      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1386      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1387      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1388      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1389      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1390      */                                                                                                  </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1391     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1391     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1392     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1392     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1393             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1394             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1395             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1396             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1397             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1398         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1398         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1399                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1400                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1401         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1402         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1403         addAuditableDisplayFields(ef);                                                                   </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1404         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1405         ef.setReadOnly();                                                                                </span>
<span  style="">1406                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1407         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408     }                                                                                                    </span>
<span  style="">1409                                                                                                          </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style=""><abbr title="1410     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)">1410     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1411     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1411     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1412             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1413             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1414             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1415             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1416         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1416         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1417                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1418                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1419         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1420         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1421         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1422         ef.setReadOnly();                                                                                </span>
<span  style="">1423                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1424         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425     }                                                                                                    </span>
<span  style="">1426                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1427     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1427     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1428             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1428             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1429         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1429         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430     }                                                                                                    </span>
<span  style="">1431                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1432     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1432     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1433             String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1433             String id, String collectionField, String collectionItemId, String modalHeaderType) throws SeðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1434         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1434         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435     }                                                                                                    </span>
<span  style="">1436                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1437     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1437     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1438                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1438                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntitðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1439         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1439         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440     }                                                                                                    </span>
<span  style="">1441                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1442     /**                                                                                                  </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1443      * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1443      * Shows the view and populates the model for updating a collection item. You can also pass in an entðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1444      * which are optional. If they are not passed in then they are automatically looked up               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1445      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1446      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1447      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1448      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1449      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1450      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1451      * @param collectionItemId                                                                           </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1452      * @param modalHeaderType                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1453      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1454      * @param entity                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1455      * @return                                                                                           </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1456      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1457      */                                                                                                  </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1458     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1458     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-7524579279249503431" onmouseenter="enter('-7524579279249503431');" onmouseout="out('-7524579279249503431');" style=""><abbr title="1459             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1459             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1460         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1461         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1462         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1463         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1463         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1464         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1465         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1466         SectionCrumb nextCrumb = new SectionCrumb();                                                     </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1467         if (md instanceof MapMetadata) {                                                                 </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1468             nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1469         } else {                                                                                         </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1470             nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1471         }                                                                                                </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1472         nextCrumb.setSectionId(collectionItemId);                                                        </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1473         if (!sectionCrumbs.contains(nextCrumb)) {                                                        </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1474             sectionCrumbs.add(nextCrumb);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1475         }                                                                                                </span>
<span  style="">1476                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1477         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1477         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1478         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1478         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1479                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1480         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1481                                                                                                          </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1482         if (md instanceof BasicCollectionMetadata &amp;&amp;                                                     </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1483                 (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||      </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style=""><abbr title="1484                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) {">1484                         ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMðŸ”µ</abbr></span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1485             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1486                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1487             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1487             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1488             if (entity == null) {                                                                        </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1489                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1489                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490             }                                                                                            </span>
<span  style="">1491                                                                                                          </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1492             String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                     </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1493             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1493             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1494             if (entityForm == null) {                                                                    </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style=""><abbr title="1495                 entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1495                 entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1496             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1497                 entityForm.clearFieldsMap();                                                             </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style=""><abbr title="1498                 formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1498                 formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, secðŸ”µ</abbr></span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="">1499                 //remove all the actions since we&#x27;re not trying to redisplay them on the form            </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1500                 entityForm.removeAllActions();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501             }                                                                                            </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1502             entityForm.removeAction(DefaultEntityFormActions.DELETE);                                    </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1503             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1504             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1505             model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                    </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1506         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1507             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1508                                                                                                          </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1509             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1510                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1510                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1511                     collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0]; </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512             }                                                                                            </span>
<span  style="">1513                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1514             boolean populateTypeAndId = true;                                                            </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style=""><abbr title="1515             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);">1515             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1516             if (entityForm == null) {                                                                    </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1517                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1517                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollecðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1518                 entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                            </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1519                 entityForm.addAction(DefaultAdornedEntityFormActions.Save);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1520             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1521                 entityForm.clearFieldsMap();                                                             </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1522                 String entityType = entityForm.getEntityType();                                          </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1523                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1523                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1524                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1525                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526             }                                                                                            </span>
<span  style="">1527                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1528             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1529             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1529             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1530                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1531                     collectionItemId, responseMap);                                                      </span>
<span  style="">1532                                                                                                          </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1533             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1533             //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and ðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style=""><abbr title="1534             //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1534             //It should be the entity and referenced Id of the adorned entity (not the target entity and ðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1535             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1536             entityForm.setTranslationId(alternateId);                                                    </span>
<span  style="">1537                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1538             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1539             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1540                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1541                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542                 }                                                                                        </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1543                 Property p = cmd.getPMap().get(field);                                                   </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1544                 if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {           </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1545                     // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1545                     // Because we&#x27;re dealing with a nested adorned target collection, this particular reqðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1546                     // directly on the first adorned target collection. Because of this, we need the actual id property">1546                     // directly on the first adorned target collection. Because of this, we need the actuðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1547                     // from the entity that models the adorned target relationship, and not the id of the target object.">1547                     // from the entity that models the adorned target relationship, and not the id of theðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1548                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1548                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1549                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1549                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1550                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1551                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1552                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1552                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1553                             ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);      </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1554                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1555                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1556                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1557                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1557                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1558                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1559                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1559                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560                     }                                                                                    </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1561                 } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                        </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1562                     // See above comment for AdornedTargetCollectionMetadata                             </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1563                     MapMetadata mmd = (MapMetadata) p.getMetadata();                                     </span>
<span  style="">1564                                                                                                          </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1565                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1565                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style=""><abbr title="1566                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,">1566                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1567                             alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();        </span>
<span  style="">1568                                                                                                          </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1569                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1569                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1570                             mmd.getTargetClass(), sectionCrumbs);                                        </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1571                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span  style="">1572                                                                                                          </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1573                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1574                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1574                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1575                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1576                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1576                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579             }                                                                                            </span>
<span  style="">1580                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1581             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1581             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1582             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1583                                                                                                          </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1584             boolean atLeastOneBasicField = false;                                                        </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1585             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1586                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1586                 if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName(ðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1587                     atLeastOneBasicField = true;                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1588                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590             }                                                                                            </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1591             if (!atLeastOneBasicField) {                                                                 </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1592                 entityForm.removeAction(DefaultEntityFormActions.SAVE);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593             }                                                                                            </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1594             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1595             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1596             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                   </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1597         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1598             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span  style="">1599                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1600             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1600             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1601             if (entity == null) {                                                                        </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style=""><abbr title="1602                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1602                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1603                     collectionItemId, sectionCrumbs, null).getEntity();                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604             }                                                                                            </span>
<span  style="">1605                                                                                                          </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1606             boolean populateTypeAndId = true;                                                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1607             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1608                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1608                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1609             } else {                                                                                     </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1610                 //save off the prior key before clearing out the fields map as it will not appear        </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1611                 //back on the saved entity                                                               </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1612                 String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                           </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1613                 entityForm.clearFieldsMap();                                                             </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1614                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1615                 entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                     </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1616                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617             }                                                                                            </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">1618 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1619                                                                                                          </span>
<span class="5318672738793745768" onmouseenter="enter('5318672738793745768');" onmouseout="out('5318672738793745768');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="1620             //For MappedCollections, we need to be specific on what ceilingEntity and translationId is used.">1620             //For MappedCollections, we need to be specific on what ceilingEntity and translationId is usðŸ”µ</abbr></span>
<span class="2806798156222000634" onmouseenter="enter('2806798156222000634');" onmouseout="out('2806798156222000634');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="1621             //It should be the entity and referenced Id of the value entity (not the target entity and Id).">1621             //It should be the entity and referenced Id of the value entity (not the target entity and IdðŸ”µ</abbr></span>
<span class="6626299943516834841" onmouseenter="enter('6626299943516834841');" onmouseout="out('6626299943516834841');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1622             if (entityForm.getCeilingEntityClassname() == null) {                                        </span>
<span class="7267210175865484771" onmouseenter="enter('7267210175865484771');" onmouseout="out('7267210175865484771');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1623                 entityForm.setCeilingEntityClassname(fmd.getValueClassName());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1624             }                                                                                            </span>
<span class="5641028696522950745" onmouseenter="enter('5641028696522950745');" onmouseout="out('5641028696522950745');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1625             entityForm.setTranslationId(collectionItemId);                                               </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1626                                                                                                          </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">1627 ||||||| BASE                                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1628                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1629             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1629             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1630             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1631             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1632             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1633             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1634         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">1635                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1636 =======                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1637             try {                                                                                        </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="1638                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1638                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1639             } catch (Exception e) {                                                                      </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1640                 LOG.error(e);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1641             }                                                                                            </span>
<span class="-3626447344774920212" onmouseenter="enter('-3626447344774920212');" onmouseout="out('-3626447344774920212');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="1642             entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValue());">1642             entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValueðŸ”µ</abbr></span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">1643 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1644             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1644             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1645             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1646             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1647             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1648             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649         }                                                                                                </span>
<span  style="">1650                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1651         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1652         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1653         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1654         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1655         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656     }                                                                                                    </span>
<span  style="">1657                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1658     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1659      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1660      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1661      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1662      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1663      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1664      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1665      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1666      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1667      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1667      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1668      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1669      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1670      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1671      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1672      */                                                                                                  </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1673     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)</span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1674     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1674     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1675             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1676             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1677             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1678             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1679             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1680             BindingResult result) throws Exception {                                                     </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1681         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1681         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682     }                                                                                                    </span>
<span  style="">1683                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1684     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1685      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1686      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1687      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1688      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1689      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1690      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1691      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1692      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1693      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1693      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1694      * @param entityForm                                                                                 </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1695      * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1695      * @param alternateId in the case of adorned target collections, this is the primary key value of theðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1696      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1697      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1698      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1699      */                                                                                                  </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1700     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1700     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1701     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1701     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1702             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1703             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1704             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1705             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1706             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1707             @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                       </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1708             BindingResult result) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1709         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1710         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1711         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1712         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1712         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1713         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1714                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1715         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1715         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1716         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1716         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1717         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1718         // First, we must save the collection entity                                                     </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1719         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1719         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1720         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1721         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1722                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1723         if (result.hasErrors()) {                                                                        </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1724             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1724             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1725                     ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726         }                                                                                                </span>
<span  style="">1727                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1728         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1729         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1730         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1730         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1731                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1732         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1733         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1734         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1735         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736     }                                                                                                    </span>
<span  style="">1737                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style=""><abbr title="1738     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">1738     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1739     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1740             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1741             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1742             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1743             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1744             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1745             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1746         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1746         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747     }                                                                                                    </span>
<span  style="">1748                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1749     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style=""><abbr title="1750      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">1750      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style=""><abbr title="1751      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">1751      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1752      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1753      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1754      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1755      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1756      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1757      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1758      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1759      * @param collectionItemId                                                                           </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1760      * @return an object explaining the state of the operation                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1761      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1762      */                                                                                                  </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1763     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1763     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, methoðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1764     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1765             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1766             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1767             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1768             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1769             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1770             @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                       </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1771             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1772         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1773         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1774         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1775         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1775         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1776         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1777         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style="">1778                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1779         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1779         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1780         ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                               </span>
<span  style="">1781                                                                                                          </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1782         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1782         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span  style="">1783                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1784         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span  style="">1785                                                                                                          </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1786         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1787             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1788             AdornedTargetList atl = ppr.getAdornedList();                                                </span>
<span  style="">1789                                                                                                          </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1790             // Get an entity form for the entity                                                         </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1791             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1791             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, falseðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style=""><abbr title="1792             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,">1792             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProðŸ”µ</abbr></span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style=""><abbr title="1793                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})">1793                     collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;}ðŸ”µ</abbr></span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1794                     .getDynamicResultSet().getRecords()[0];                                              </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1795             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1796             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span  style="">1797                                                                                                          </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1798             // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1798             // Set the new sequence (note that it will come in 0-indexed but the persistence module expecðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1799             int sequenceValue = Integer.parseInt(newSequence) + 1;                                       </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1800             Field field = entityForm.findField(atl.getSortField());                                      </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1801             field.setValue(String.valueOf(sequenceValue));                                               </span>
<span  style="">1802                                                                                                          </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1803             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1804             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1804             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1805             Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());    </span>
<span  style="">1806                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1807             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1808             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1809             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1810             return responseMap;                                                                          </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1811         } else if (md instanceof BasicCollectionMetadata) {                                              </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">1812             BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                   </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1813             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1814             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1814             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResulðŸ”µ</abbr></span>
<span  style="">1815                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1816             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1816             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1817             EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);     </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="1818             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1818             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="">1819             if(listGridReadOnly){                                                                        </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">1820                         throw new SecurityServiceException();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821             }                                                                                            </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1822             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1823                 Field f = new Field()                                                                    </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">1824                         .withName(cd.getSortProperty())                                                  </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1825                         .withFieldType(SupportedFieldType.HIDDEN.toString());                            </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1826                 entityForm.addHiddenField(mainMetadata, f);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827             }                                                                                            </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1828             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span  style="">1829                                                                                                          </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1830             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1831                 int sequenceValue = Integer.parseInt(newSequence) + 1;                                   </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1832                 Field field = entityForm.findField(cd.getSortProperty());                                </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1833                 field.setValue(String.valueOf(sequenceValue));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1834             }                                                                                            </span>
<span  style="">1835                                                                                                          </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1836             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1836             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1837             Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());  </span>
<span  style="">1838                                                                                                          </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1839             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1840             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1841             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1842             return responseMap;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1843         } else {                                                                                         </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1844             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1844             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1845         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1846     }                                                                                                    </span>
<span  style="">1847                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1848     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1849      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1850      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1851      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1851      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1852      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1853      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1854      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1855      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1856      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1857      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1858      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1859      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1860      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1861      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1862      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1863      */                                                                                                  </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style=""><abbr title="1864     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)">1864     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethoðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1865     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1865     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1866             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1867             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1868             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1869             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1870         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1870         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1871     }                                                                                                    </span>
<span  style="">1872                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1873     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1874      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1875      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1876      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1876      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1877      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1878      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1879      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1880      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1881      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1882      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1883      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1884      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1885      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1886      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1887      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1888      */                                                                                                  </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="1889     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">1889     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method ðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1890     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1890     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1891             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1892             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1893             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1894             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1895             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1896         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1897         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1898         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1899         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1899         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1900         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1901                                                                                                          </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">1902         String priorKey = request.getParameter(&quot;key&quot;);                                                   </span>
<span  style="">1903                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1904         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1904         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1905         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1906         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1906         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1907         service.clearEntityManager();                                                                    </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">1908         // First, we must remove the collection entity                                                   </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="1909         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">1909         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style=""><abbr title="1910         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {">1910         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailurðŸ”µ</abbr></span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">1911             String error = &quot;There was an error removing the whatever&quot;;                                   </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">1912             if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {    </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">1913                 // If we failed, we&#x27;ll return some JSON with the first error                             </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="1914                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">1914                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator()ðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style=""><abbr title="1915             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) {">1915             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErroðŸ”µ</abbr></span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">1916                 error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1917             }                                                                                            </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1918             return new JsonResponse(response)                                                            </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">1919                 .with(&quot;status&quot;, &quot;error&quot;)                                                                 </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">1920                 .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1921                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1922         }                                                                                                </span>
<span  style="">1923                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1924         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1925         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1926         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1926         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1927                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1928         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1929         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1930         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1931         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932     }                                                                                                    </span>
<span  style="">1933                                                                                                          </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">1934     public void addAuditableDisplayFields(EntityForm entityForm) {                                       </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">1935         Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                   </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">1936         if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                         </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">1937             addAuditableDisplayField(entityForm, createdBy);                                             </span>
<span  style="">1938                                                                                                          </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">1939             createdBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1940         }                                                                                                </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">1941         Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                   </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">1942         if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                         </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">1943             addAuditableDisplayField(entityForm, updatedBy);                                             </span>
<span  style="">1944                                                                                                          </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">1945             updatedBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1947     }                                                                                                    </span>
<span  style="">1948                                                                                                          </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">1949     private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                      </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">1950         Field displayField = buildAuditableDisplayField(userField);                                      </span>
<span  style="">1951                                                                                                          </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">1952         AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));           </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">1953         String userName = user == null ? null : user.getName();                                          </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">1954         displayField.setValue(userName);                                                                 </span>
<span  style="">1955                                                                                                          </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">1956         FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                            </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">1957         if (auditGroup != null) {                                                                        </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">1958             auditGroup.addField(displayField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1959         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1960     }                                                                                                    </span>
<span  style="">1961                                                                                                          </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">1962     private Field buildAuditableDisplayField(Field auditableField) {                                     </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">1963         return new Field().withFieldType(SupportedFieldType.STRING.toString())                           </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">1964                 .withName(auditableField.getName() + &quot;Display&quot;)                                          </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">1965                 .withFriendlyName(auditableField.getFriendlyName())                                      </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">1966                 .withOrder(auditableField.getOrder())                                                    </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">1967                 .withOwningEntityClass(auditableField.getOwningEntityClass())                            </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">1968                 .withReadOnly(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1969     }                                                                                                    </span>
<span  style="">1970                                                                                                          </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">1971     protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">1972         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">1973         if (StringUtils.isBlank(tabName)) {                                                              </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">1974             TabMetadata firstTab = cmd.getFirstTab();                                                    </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">1975             return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1976         }                                                                                                </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">1977         return tabName;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978     }                                                                                                    </span>
<span  style="">1979                                                                                                          </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1980     // *****************************************                                                         </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">1981     // Typed Entity Helper Methods                                                                       </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1982     // *****************************************                                                         </span>
<span  style="">1983                                                                                                          </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">1984     protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {              </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">1985         // Check if this is a typed entity                                                               </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">1986         AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);     </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">1987         if (typedEntitySection != null) {                                                                </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">1988             // Update the friendly name for this Entity Type                                             </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">1989             model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1990         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1991     }                                                                                                    </span>
<span  style="">1992                                                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1993     // *********************************                                                                 </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">1994     // ADDITIONAL SPRING-BOUND METHODS *                                                                 </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1995     // *********************************                                                                 </span>
<span  style="">1996                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1997     /**                                                                                                  </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style=""><abbr title="1998      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process.">1998      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding ðŸ”µ</abbr></span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="1999      * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">1999      * By default, we register a binder that treats empty Strings as null and a Boolean editor that suppoðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">2000      * or false. If the value is passed in as null, it will treat it as false.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">2001      *                                                                                                   </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">2002      * @param binder                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">2003      */                                                                                                  </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">2004     @InitBinder                                                                                          </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">2005     public void initBinder(WebDataBinder binder) {                                                       </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">2006         binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                        </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">2007         binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2008     }                                                                                                    </span>
<span  style="">2009                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">2010 }                                                                                                        </span>







</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3  * BroadleafCommerce Open Admin Platform                                                                 </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18 package org.broadleafcommerce.openadmin.web.controller.entity;                                           </span>
<span  style="">  19                                                                                                          </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  20 import com.fasterxml.jackson.databind.ObjectMapper;                                                      </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  21 import java.net.URLDecoder;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  22 import java.util.ArrayList;                                                                              </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="">  23 import java.util.Arrays;                                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  24 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  25 import java.util.List;                                                                                   </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  26 import java.util.Map.Entry;                                                                              </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  27 import java.util.Map;                                                                                    </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  28 import java.util.Set;                                                                                    </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style="">  29 import java.util.stream.Stream;                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  30 import javax.annotation.Resource;                                                                        </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style="">  31 import javax.servlet.http.HttpServletRequest;                                                            </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style="">  32 import javax.servlet.http.HttpServletResponse;                                                           </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  33 import org.apache.commons.collections.CollectionUtils;                                                   </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  34 import org.apache.commons.collections.MapUtils;                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  35 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  36 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  37 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  38 import org.broadleafcommerce.common.exception.SecurityServiceException;                                  </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  39 import org.broadleafcommerce.common.exception.ServiceException;                                          </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  40 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  41 import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                 </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  42 import org.broadleafcommerce.common.presentation.client.AddMethodType;                                   </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  43 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  44 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  45 import org.broadleafcommerce.common.util.BLCArrayUtils;                                                  </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  46 import org.broadleafcommerce.common.util.BLCMessageUtils;                                                </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  47 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  48 import org.broadleafcommerce.common.web.JsonResponse;                                                    </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  49 import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                              </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  50 import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                            </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  51 import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                      </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  52 import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                           </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  53 import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  54 import org.broadleafcommerce.openadmin.dto.ClassTree;                                                    </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  55 import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                           </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  56 import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                             </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  57 import org.broadleafcommerce.openadmin.dto.Entity;                                                       </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  58 import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  59 import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                        </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  60 import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                  </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  61 import org.broadleafcommerce.openadmin.dto.Property;                                                     </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  62 import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                 </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  63 import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                  </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  64 import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                      </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  65 import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                          </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  66 import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                 </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  67 import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                              </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  68 import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                 </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  69 import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                       </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  70 import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                  </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  71 import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                   </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  72 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  72 import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExteðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  73 import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;         </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  74 import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                           </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  75 import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                             </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  76 import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                  </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  77 import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                        </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  78 import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                      </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  79 import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                  </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  80 import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                         </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  81 import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                               </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  82 import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                       </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  83 import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                 </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  84 import org.broadleafcommerce.openadmin.web.form.entity.Field;                                            </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  85 import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                       </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  86 import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  87 import org.springframework.stereotype.Controller;                                                        </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  88 import org.springframework.ui.Model;                                                                     </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  89 import org.springframework.util.MultiValueMap;                                                           </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  90 import org.springframework.validation.BindingResult;                                                     </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  91 import org.springframework.web.bind.WebDataBinder;                                                       </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  92 import org.springframework.web.bind.annotation.InitBinder;                                               </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  93 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  94 import org.springframework.web.bind.annotation.PathVariable;                                             </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  95 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  96 import org.springframework.web.bind.annotation.RequestMethod;                                            </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  97 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  98 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  99 import org.springframework.web.servlet.DispatcherServlet;                                                </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style=""> 100 import org.springframework.web.servlet.FlashMap;                                                         </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style=""> 101 import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                   </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style=""> 102 import org.springframework.web.util.UrlPathHelper;                                                       </span>
<span  style=""> 103                                                                                                          </span>
<span  style=""> 104                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 105 /**                                                                                                      </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style=""><abbr title=" 106  * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 106  * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates everðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style=""><abbr title=" 107  * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 107  * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for ðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style=""> 108  * that is not explicitly customized by its own controller.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 109  *                                                                                                       </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 110  * @author Andre Azzolini (apazzolini)                                                                   </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 111  * @author Jeff Fischer                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 112  */                                                                                                      </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 113 @Controller(&quot;blAdminBasicEntityController&quot;)                                                              </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 114 @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                      </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 115 public class AdminBasicEntityController extends AdminAbstractController {                                </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 116     protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                </span>
<span  style=""> 117                                                                                                          </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 118     public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                   </span>
<span  style=""> 119                                                                                                          </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 120     public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                             </span>
<span  style=""> 121                                                                                                          </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 122     public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                              </span>
<span  style=""> 123                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 124     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 125     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style=""> 126                                                                                                          </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 127     @Resource(name = &quot;blAdminUserDao&quot;)                                                                   </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 128     protected AdminUserDao adminUserDao;                                                                 </span>
<span  style=""> 129                                                                                                          </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 130     @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                 </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 131     protected DynamicEntityDao dynamicEntityDao;                                                         </span>
<span  style=""> 132                                                                                                          </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 133     @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                      </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 134     protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;       </span>
<span  style=""> 135                                                                                                          </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 136     @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                        </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 137     protected RowLevelSecurityService rowLevelSecurityService;                                           </span>
<span  style=""> 138                                                                                                          </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 139     // ******************************************                                                        </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 140     // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                        </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 141     // ******************************************                                                        </span>
<span  style=""> 142                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143     /**                                                                                                  </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 144      * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 144      * Renders the main entity listing for the specified class, which is based on the current sectionKey ðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 145      * criteria.                                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 146      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 147      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 148      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 149      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 150      * @param pathVars                                                                                   </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 151      * @param requestParams a Map of property name -&gt; list critiera values                               </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 152      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 153      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 154      */                                                                                                  </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 155     @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                              </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 156     public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 157             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 158             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 159         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 160         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 161         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 162         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 162         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 163         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 164         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 165                                                                                                          </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 166         ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                 </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 167         listGrid.setSelectType(ListGrid.SelectType.NONE);                                                </span>
<span  style=""> 168                                                                                                          </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 169         Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                            </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 170         if (CollectionUtils.isNotEmpty(headerFields)) {                                                  </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 171             Field firstField = headerFields.iterator().next();                                           </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 172             if (requestParams.containsKey(firstField.getName())) {                                       </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 173                 model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span  style=""> 176                                                                                                          </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 177         model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                    </span>
<span  style=""> 178                                                                                                          </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 179         setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams); </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 180         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 181                                                                                                          </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 182         return &quot;modules/defaultContainer&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""><abbr title=" 185     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,"> 185     protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String seðŸ”µ</abbr></span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 186             String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {         </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 187         List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                          </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 188         addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                       </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 189         extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);             </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 190         extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                 </span>
<span  style=""> 191                                                                                                          </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 192         // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of   </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 193         if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                  </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 194             model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 197         List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                   </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 198         String requestUri = request.getRequestURI();                                                     </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 199         if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {  </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 200             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 200             requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length())ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201         }                                                                                                </span>
<span  style=""> 202                                                                                                          </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 203         model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                      </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 204         model.addAttribute(&quot;currentUri&quot;, requestUri);                                                    </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 205         model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 206         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 207         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 208         model.addAttribute(&quot;mainActions&quot;, mainActions);                                                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 209         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 210         setTypedEntityModelAttributes(request, model);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 213     @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                    </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 214     public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,         </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 215              HttpServletResponse response, Model model,                                                  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 216              @PathVariable Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 217              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 218         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 219         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 220         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                               </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 221         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 221         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 222                 .withCustomCriteria(getCustomCriteria(requestParams));                                   </span>
<span  style=""> 223                                                                                                          </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 224         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span  style=""> 225                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 226         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 227         DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                           </span>
<span  style=""> 228                                                                                                          </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 229         return formService.constructSelectizeOptionMap(drs, cmd);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 232     /**                                                                                                  </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 233      * Obtains the requested criteria parameter                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 234      *                                                                                                   </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 235      * @param requestParams                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 236      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 237      */                                                                                                  </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 238     protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                      </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 239         if (requestParams == null || requestParams.isEmpty()) {                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 240             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241         }                                                                                                </span>
<span  style=""> 242                                                                                                          </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 243         List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                      </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 244         String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                    </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 245         return new String[] {response};                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248     /**                                                                                                  </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""><abbr title=" 249      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances"> 249      * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new inðŸ”µ</abbr></span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 250      * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 251      *                                                                                                   </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 252      * @param sectionClassName                                                                           </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 253      * @param cmd                                                                                        </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 254      * @param mainActions                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 255      */                                                                                                  </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 256     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 256     protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormActioðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 257         if (isAddActionAllowed(sectionClassName, cmd)) {                                                 </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 258             mainActions.add(DefaultMainActions.ADD);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260     }                                                                                                    </span>
<span  style=""> 261                                                                                                          </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style=""> 262     protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                   </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 263         // If the user does not have create permissions, we will not add the &quot;Add New&quot; button            </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style=""> 264         boolean canCreate = true;                                                                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 265         try {                                                                                            </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 266             adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);         </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 267         } catch (ServiceException e) {                                                                   </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 268             if (e instanceof SecurityServiceException) {                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 269                 canCreate = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271         }                                                                                                </span>
<span  style=""> 272                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 273         if (canCreate) {                                                                                 </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style=""> 274             checkReadOnly: {                                                                             </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 275                 //check if all the metadata is read only                                                 </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 276                 for (Property property : cmd.getProperties()) {                                          </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 277                     if (property.getMetadata() instanceof BasicFieldMetadata) {                          </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 278                         if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||       </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 279                                 !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {          </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style=""> 280                             break checkReadOnly;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                 }                                                                                        </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 284                 canCreate = false;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286         }                                                                                                </span>
<span  style=""> 287                                                                                                          </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 288         if (canCreate) {                                                                                 </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style=""><abbr title=" 289             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 289             canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290         }                                                                                                </span>
<span  style=""> 291                                                                                                          </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style=""> 292         return canCreate;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 295     /**                                                                                                  </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""><abbr title=" 296      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any"> 296      * Renders the modal form that is used to add a new parent level entity. Note that this form cannot rðŸ”µ</abbr></span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 297      * subcollections as operations on those collections require the parent level entity to first be saved and have"> 297      * subcollections as operations on those collections require the parent level entity to first be saveðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 298      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 298      * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity ðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 299      * they can then perform operations on sub collections.                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 300      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 301      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 302      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 303      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 304      * @param pathVars                                                                                   </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 305      * @param entityType                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 306      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 307      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 308      */                                                                                                  </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 309     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                          </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""><abbr title=" 310     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,"> 310     public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 311             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 312             @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                       </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 313         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 314         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 315         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 316         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 316         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 317         ppr.setAddOperationInspect(true);                                                                </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 318         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 319                                                                                                          </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style=""><abbr title=" 320         // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 320         // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic typeðŸ”µ</abbr></span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 321         if (StringUtils.isBlank(entityType)) {                                                           </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 322             if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 323                 entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324             } else {                                                                                     </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 325                 entityType = getDefaultEntityType();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 327         } else {                                                                                         </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 328             entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span  style=""> 330                                                                                                          </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 331         EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                        </span>
<span  style=""> 332                                                                                                          </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""><abbr title=" 333         // We need to make sure that the ceiling entity is set to the interface and the specific entity type"> 333         // We need to make sure that the ceiling entity is set to the interface and the specific entity tðŸ”µ</abbr></span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 334         // is set to the type we&#x27;re going to be creating.                                                </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 335         entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                      </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 336         entityForm.setEntityType(entityType);                                                            </span>
<span  style=""> 337                                                                                                          </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""><abbr title=" 338         // When we initially build the class metadata (and thus, the entity form), we had all of the possible"> 338         // When we initially build the class metadata (and thus, the entity form), we had all of the possðŸ”µ</abbr></span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""><abbr title=" 339         // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the"> 339         // polymorphic fields built out. Now that we have a concrete entity type to render, we can removeðŸ”µ</abbr></span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 340         // fields that are not applicable for this given entity type.                                    </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 341         formService.removeNonApplicableFields(cmd, entityForm, entityType);                              </span>
<span  style=""> 342                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 343         modifyAddEntityForm(entityForm, pathVars);                                                       </span>
<span  style=""> 344                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 345         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 346         model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                               </span>
<span  style=""> 347                                                                                                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 348         model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 349         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 350         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 351         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 352         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 355     /**                                                                                                  </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""><abbr title=" 356      * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity."> 356      * Processes the request to add a new entity. If successful, returns a redirect to the newly created ðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 357      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 358      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 359      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 360      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 361      * @param pathVars                                                                                   </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 362      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 363      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 364      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 365      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 366      */                                                                                                  </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 367     @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                         </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 368     public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,       </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 369             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title=" 370             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {"> 370             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 371         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 372         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 373         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 374         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 374         ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassNameðŸ”µ</abbr></span>
<span  style=""> 375                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 376         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 377         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 377         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 378         Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();       </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 379         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span  style=""> 380                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 381         if (result.hasErrors()) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 382             entityForm.clearFieldsMap();                                                                 </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 383             formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                      </span>
<span  style=""> 384                                                                                                          </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 385             formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());          </span>
<span  style=""> 386                                                                                                          </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 387             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span  style=""> 388                                                                                                          </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 389             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                           </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 390             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 391             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                 </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 392             model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 393             setModelAttributes(model, sectionKey);                                                       </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 394             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395         }                                                                                                </span>
<span  style=""> 396                                                                                                          </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 397         // Note that AJAX Redirects need the context path prepended to them                              </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 398         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 398         return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399     }                                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 401     /**                                                                                                  </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 402      * Renders the main entity form for the specified entity                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 403      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 404      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 405      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 406      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 407      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 408      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 409      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 410      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 411      */                                                                                                  </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 412     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                         </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 413     public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 414             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 415             @PathVariable(&quot;id&quot;) String id) throws Exception {                                            </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 416         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 417         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 418         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 419         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 419         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span  style=""> 420                                                                                                          </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 421         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 422         Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 423                                                                                                          </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 424         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 424         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span  style=""> 425                                                                                                          </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 426         EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);        </span>
<span  style=""> 427                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 428         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 429             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 430         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 431             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432         }                                                                                                </span>
<span  style=""> 433                                                                                                          </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 434         if (request.getParameter(&quot;headerFlash&quot;) != null) {                                               </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 435             model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436         }                                                                                                </span>
<span  style=""> 437                                                                                                          </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 438         // Set the sectionKey again incase this is a typed entity                                        </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 439         entityForm.setSectionKey(sectionKey);                                                            </span>
<span  style=""> 440                                                                                                          </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 441         // Build the current url in the cast that this is a typed entity                                 </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 442         String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                   </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 443         int startIndex = request.getContextPath().length();                                              </span>
<span  style=""> 444                                                                                                          </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 445         // Remove the context path from servlet path                                                     </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 446         String currentUrl = originatingUri.substring(startIndex);                                        </span>
<span  style=""> 447                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 448         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 449         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 450         model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 452         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 453                                                                                                          </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 454         // We want to replace author ids with their names                                                </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 455         addAuditableDisplayFields(entityForm);                                                           </span>
<span  style=""> 456                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 457         if (isAjaxRequest(request)) {                                                                    </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 458             entityForm.setReadOnly();                                                                    </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 459             model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                          </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 460             model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 461             return &quot;modules/modalContainer&quot;;                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 462         } else {                                                                                         </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 463             model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                   </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 464             model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 465             return &quot;modules/defaultContainer&quot;;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467     }                                                                                                    </span>
<span  style=""> 468                                                                                                          </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 469     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 469     protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, StrðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 470                                                               ClassMetadata cmd, Entity entity,          </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""><abbr title=" 471                                                               List&lt;SectionCrumb&gt; crumbs) throws Exception {"> 471                                                               List&lt;SectionCrumb&gt; crumbs) throws ExceptionðŸ”µ</abbr></span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 472         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 473         if (StringUtils.isEmpty(tabName)) {                                                              </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 474             tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475         }                                                                                                </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 476         return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477     }                                                                                                    </span>
<span  style=""> 478                                                                                                          </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 479     private boolean isAddRequest(Entity entity) {                                                        </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 480         ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                     </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""><abbr title=" 481         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);"> 481         ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder)ðŸ”µ</abbr></span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 482         if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                      </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 483             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484         }                                                                                                </span>
<span  style=""> 485                                                                                                          </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 486         return resultHolder.getResult();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487     }                                                                                                    </span>
<span  style=""> 488                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 489     /**                                                                                                  </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 490      * Attempts to get the List Grid for the selected tab.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 491      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 492      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 493      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 494      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 495      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 496      * @param id                                                                                         </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 497      * @param tabName                                                                                    </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 498      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 499      * @param entity                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 500      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 501      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 502      */                                                                                                  </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 503     @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                 </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 504     public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 505             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 506             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 507             @PathVariable(value = &quot;tabName&quot;) String tabName,                                             </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 508             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                 </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 509             @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 510         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 511         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 512         List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                           </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""><abbr title=" 513         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);"> 513         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, patðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 514         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 515         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""><abbr title=" 516         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);"> 516         Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, cðŸ”µ</abbr></span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 517         entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                   </span>
<span  style=""> 518                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 519         if (isAddRequest(entity)) {                                                                      </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 520             modifyAddEntityForm(entityForm, pathVars);                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 521         } else {                                                                                         </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 522             modifyEntityForm(entityForm, pathVars);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523         }                                                                                                </span>
<span  style=""> 524                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 525         model.addAttribute(&quot;entity&quot;, entity);                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 526         model.addAttribute(&quot;entityForm&quot;, entityForm);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 527         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span  style=""> 528                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 529         setModelAttributes(model, sectionKey);                                                           </span>
<span  style=""> 530                                                                                                          </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 531         model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                       </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 532         model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 533         return &quot;modules/defaultContainer&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534     }                                                                                                    </span>
<span  style=""> 535                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 536     /**                                                                                                  </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 537      * Builds JSON that looks like this:                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 538      *                                                                                                   </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 539      * {&quot;errors&quot;:                                                                                        </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 540      *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                        </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 541      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 542      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 543      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 544      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 545      *        },                                                                                         </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 546      *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                       </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 547      *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                        </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 548      *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 549      *        &quot;errorType&quot;, &quot;field&quot;,                                                                      </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 550      *        &quot;tab&quot;: &quot;General&quot;                                                                           </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 551      *        }]                                                                                         </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 552      * }                                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 553      *                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 554      */                                                                                                  </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 555     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)         </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 556     public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,  </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 557             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 558             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 559             @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,           </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 560             RedirectAttributes ra) throws Exception {                                                    </span>
<span  style=""> 561                                                                                                          </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 562         saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                      </span>
<span  style=""> 563                                                                                                          </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 564         JsonResponse json = new JsonResponse(response);                                                  </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 565         if (result.hasErrors()) {                                                                        </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 566             populateJsonValidationErrors(entityForm, result, json);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567         }                                                                                                </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 568         List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                  </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 569         if (CollectionUtils.isNotEmpty(dirtyList)) {                                                     </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 570             json.with(&quot;dirty&quot;, dirtyList);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571         }                                                                                                </span>
<span  style=""> 572                                                                                                          </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 573         ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                      </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 574         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 574         ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonReðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 575         if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 576             return resultHolder.getResult();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span  style=""> 578                                                                                                          </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 579         return json.done();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580     }                                                                                                    </span>
<span  style=""> 581                                                                                                          </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 582     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 582     public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String iðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 583         List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 584         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 585         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 586         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 587         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 587         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 588         ClassMetadata cmd = null;                                                                        </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 589         Entity entity = null;                                                                            </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 590         cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                    </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 591         entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];           </span>
<span  style=""> 592                                                                                                          </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 593         for (Property p: entity.getProperties()) {                                                       </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 594             if (p.getIsDirty()) {                                                                        </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 595                 dirtyList.add(p.getName());                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597         }                                                                                                </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 598         return dirtyList;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599     }                                                                                                    </span>
<span  style=""> 600                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 601     /**                                                                                                  </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""><abbr title=" 602      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with"> 602      * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity forðŸ”µ</abbr></span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 603      * error fields highlighted. On a successful save, it will refresh the entity page.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 604      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 605      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 606      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 607      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 608      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 609      * @param id                                                                                         </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 610      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 611      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 612      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 613      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 614      */                                                                                                  </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 615     @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                        </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 616     public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,      </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 617             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 618             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 619             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 620             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 621         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 622         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 623         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 624         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 624         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 625         ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span  style=""> 626                                                                                                          </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 627         extractDynamicFormFields(cmd, entityForm);                                                       </span>
<span  style=""> 628                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 629         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 629         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 630         Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span  style=""> 631                                                                                                          </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 632         entityFormValidator.validate(entityForm, entity, result);                                        </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 633         if (result.hasErrors()) {                                                                        </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 634             model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                      </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 635             model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                </span>
<span  style=""> 636                                                                                                          </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 637             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 637             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 638             entityForm.clearFieldsMap();                                                                 </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 639             formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);       </span>
<span  style=""> 640                                                                                                          </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 641             if (isAddRequest(entity)) {                                                                  </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 642                 modifyAddEntityForm(entityForm, pathVars);                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 643             } else {                                                                                     </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 644                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645             }                                                                                            </span>
<span  style=""> 646                                                                                                          </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 647             model.addAttribute(&quot;entity&quot;, entity);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 648             model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                        </span>
<span  style=""> 649                                                                                                          </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 650             setModelAttributes(model, sectionKey);                                                       </span>
<span  style=""> 651                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 652             if (isAjaxRequest(request)) {                                                                </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 653                 entityForm.setReadOnly();                                                                </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 654                 model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                      </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 655                 model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());            </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 656                 return &quot;modules/modalContainer&quot;;                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 657             } else {                                                                                     </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 658                 model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                               </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 659                 model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                            </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 660                 return &quot;modules/defaultContainer&quot;;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662         }                                                                                                </span>
<span  style=""> 663                                                                                                          </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 664         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                          </span>
<span  style=""> 665                                                                                                          </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 666         return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 669     /**                                                                                                  </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 670      * Attempts to remove the given entity.                                                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 671      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 672      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 673      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 674      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 675      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 676      * @param id                                                                                         </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 677      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 678      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 679      */                                                                                                  </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 680     @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                 </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 681     public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 682             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 683             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 684             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,             </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 685             RedirectAttributes ra) throws Exception {                                                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 686         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 687         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 688         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span  style=""> 689                                                                                                          </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 690         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 690         String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 691         Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();    </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 692         // Removal does not normally return an Entity unless there is some validation error              </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 693         if (entity != null) {                                                                            </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 694             entityFormValidator.validate(entityForm, entity, result);                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 695             if (result.hasErrors()) {                                                                    </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 696                 // Create a flash attribute for the unsuccessful delete                                  </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 697                 FlashMap fm = new FlashMap();                                                            </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 698                 fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                            </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 699                 fm.put(&quot;headerFlashAlert&quot;, true);                                                        </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 700                 request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                  </span>
<span  style=""> 701                                                                                                          </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 702                 // Re-look back up the entity so that we can return something populated                  </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 703                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 703                 PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, secðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 704                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 704                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 705                 entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];   </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 706                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 706                 Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr,ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 707                 entityForm.clearFieldsMap();                                                             </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 708                 formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);   </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 709                 modifyEntityForm(entityForm, pathVars);                                                  </span>
<span  style=""> 710                                                                                                          </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 711                 return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 712                         .done();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span  style=""> 715                                                                                                          </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 716         ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                        </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 717         ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                  </span>
<span  style=""> 718                                                                                                          </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 719         if (isAjaxRequest(request)) {                                                                    </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 720             // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request       </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""><abbr title=" 721             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;"> 721             return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successfðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722         } else {                                                                                         </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 723             return &quot;redirect:/&quot; + sectionKey;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 727     @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                 </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 728     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 728     public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpSeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 729             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 730             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 731             @RequestParam String ids,                                                                    </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 732             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 733         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 734         String sectionClassName = getClassNameForSection(sectionKey);                                    </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 735         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                        </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 736         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 736         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParaðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 737         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 737         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 738         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 739         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 740                                                                                                          </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 741         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 742         ppr.setStartIndex(getStartIndex(requestParams));                                                 </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 743         ppr.setMaxIndex(getMaxIndex(requestParams));                                                     </span>
<span  style=""> 744                                                                                                          </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 745         if (md instanceof BasicFieldMetadata) {                                                          </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 746             String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                           </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 747             String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();          </span>
<span  style=""> 748                                                                                                          </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 749             List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));   </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 750             ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));               </span>
<span  style=""> 751                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 752             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 753             Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                             </span>
<span  style=""> 754                                                                                                          </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 755             for (Entity e : drs.getRecords()) {                                                          </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 756                 String id = e.getPMap().get(idProp).getValue();                                          </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 757                 String disp = e.getPMap().get(displayProp).getDisplayValue();                            </span>
<span  style=""> 758                                                                                                          </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 759                 if (StringUtils.isBlank(disp)) {                                                         </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 760                     disp = e.getPMap().get(displayProp).getValue();                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                 }                                                                                        </span>
<span  style=""> 762                                                                                                          </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 763                 returnMap.put(id,  disp);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764             }                                                                                            </span>
<span  style=""> 765                                                                                                          </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 766             return returnMap;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767         }                                                                                                </span>
<span  style=""> 768                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 769         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770     }                                                                                                    </span>
<span  style=""> 771                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 772     /**                                                                                                  </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 773      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 773      * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a ðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 774      * then this method is invoked when a user clicks on the name of the default category field.         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 775      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 776      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 777      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 778      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 779      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 780      * @param collectionField                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 781      * @param id                                                                                         </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 782      * @return                                                                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 783      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 784      */                                                                                                  </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 785     @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)               </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""><abbr title=" 786     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 786     public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 787             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 788             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 789             @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 790         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 791         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 792         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 793         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 793         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 794         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 795         BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                   </span>
<span  style=""> 796                                                                                                          </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 797         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 797         AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 798         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 798         String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : sectiðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 799         Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                              </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 800         varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                   </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 801         return viewEntityForm(request, response, model, varsForField, id);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802     }                                                                                                    </span>
<span  style=""> 803                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 804     @RequestMapping(                                                                                     </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 805             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,              </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 806             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 807     )                                                                                                    </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""><abbr title=" 808     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 808     public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 809                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 810                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 811                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 812                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 813                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 814                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 814                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 815                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 816         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 816         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817     }                                                                                                    </span>
<span  style=""> 818                                                                                                          </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 819     @RequestMapping(                                                                                     </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style=""> 820             value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,         </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 821             method = RequestMethod.POST                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 822     )                                                                                                    </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style=""><abbr title=" 823     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 823     public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response,ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 824                                         @PathVariable  Map&lt;String, String&gt; pathVars,                     </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 825                                         @PathVariable(value=&quot;id&quot;) String id,                             </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 826                                         @PathVariable(value=&quot;collectionField&quot;) String collectionField,   </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 827                                         @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId, </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 828                                         @PathVariable(value=&quot;tabName&quot;) String tabName,                   </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 829                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 829                                         @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throðŸ”µ</abbr></span>
<span  style=""> 830                                                                                                          </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 831         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 831         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832     }                                                                                                    </span>
<span  style=""> 833                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 834     /**                                                                                                  </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 835      * Returns the records for a given collectionField filtered by a particular criteria                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 836      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 837      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 838      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 839      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 840      * @param pathVars                                                                                   </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 841      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 842      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 843      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 844      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 845      */                                                                                                  </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 846     @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                    </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""><abbr title=" 847     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,"> 847     public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, ModðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 848             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 849             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 850             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 851             @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 852         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 853         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 854         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 855         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 855         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams,ðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""><abbr title=" 856         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 856         ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDataðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 857         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style=""> 858                                                                                                          </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 859         ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);               </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title=" 860         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];"> 860         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style=""> 861                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 862         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 863         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 863         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParamsðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 864         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style=""> 865                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 866         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 867                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 868         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 869         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 870         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871     }                                                                                                    </span>
<span  style=""> 872                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 873     /**                                                                                                  </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 874      * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 874      * Shows the modal dialog that is used to add an item to a given collection. There are several possibðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 875      * of this call depending on the type of the specified collection field.                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 876      *                                                                                                   </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 877      * &lt;ul&gt;                                                                                              </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 878      *  &lt;li&gt;                                                                                             </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 879      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 879      *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so thaðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 880      *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 880      *    enter information and associate the record with this collection. Used by fields such as ProductðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 881      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 882      *  &lt;li&gt;                                                                                             </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 883      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 883      *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entiðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 884      *    Used by fields such as &quot;allParentCategories&quot;.                                                  </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 885      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 886      *  &lt;li&gt;                                                                                             </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 887      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 887      *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click onðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 888      *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 888      *    select it. The view rendered by this is identical to basic collection (lookup), but will perforðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 889      *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 889      *    on an adorned field, which may carry extra meta-information about the created relationship, sucðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 890      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 891      *  &lt;li&gt;                                                                                             </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 892      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 892      *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on anðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 893      *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 893      *    select it. Once the user selects the entity, he will be presented with an empty form based on tðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 894      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 894      *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, whiðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 895      *    to linking an entity, provide extra fields, such as a promotional message.                     </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 896      *  &lt;/li&gt;                                                                                            </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 897      *  &lt;li&gt;                                                                                             </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 898      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 898      *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. ðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 899      *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 899      *    populated either from the configured map keys, or as a result of a lookup in the case of a key ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 900      *    entity. Used by fields such as the mediaMap on a Sku.                                          </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 901      *  &lt;/li&gt;                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 902      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 903      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 904      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 905      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 906      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 907      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 908      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 909      * @param requestParams                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 910      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 911      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 912      */                                                                                                  </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 913     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""><abbr title=" 914     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 914     public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model mðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 915             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 916             @PathVariable(value = &quot;id&quot;) String id,                                                       </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 917             @PathVariable(value = &quot;collectionField&quot;) String collectionField,                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 918             @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 919         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 920         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 921         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""><abbr title=" 922         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,"> 922         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style=""> 923                 sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 924         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 925         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span  style=""> 926                                                                                                          </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style=""> 927         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)        </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style=""> 928                 .withFilterAndSortCriteria(getCriteria(requestParams))                                   </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style=""> 929                 .withStartIndex(getStartIndex(requestParams))                                            </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style=""> 930                 .withMaxIndex(getMaxIndex(requestParams))                                                </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style=""> 931                 .withLastId(getLastId(requestParams))                                                    </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style=""> 932                 .withFirstId(getFirstId(requestParams))                                                  </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style=""> 933                 .withUpperCount(getUpperCount(requestParams))                                            </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style=""> 934                 .withLowerCount(getLowerCount(requestParams))                                            </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style=""> 935                 .withPageSize(getPageSize(requestParams))                                                </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style=""> 936                 .withPresentationFetch(true);                                                            </span>
<span  style=""> 937                                                                                                          </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style=""> 938         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style=""> 939             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style=""> 940             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""><abbr title=" 941                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();"> 941                 ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData(ðŸ”µ</abbr></span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""><abbr title=" 942                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types"> 942                 // If the entity type isn&#x27;t specified, we need to determine if there are various polymorpðŸ”µ</abbr></span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style=""> 943                 // for this entity.                                                                      </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style=""> 944                 String entityType = null;                                                                </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style=""> 945                 if (requestParams.containsKey(&quot;entityType&quot;)) {                                           </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style=""> 946                     entityType = requestParams.get(&quot;entityType&quot;).get(0);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947                 }                                                                                        </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 948                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 949                     if (cmd.getPolymorphicEntities().getChildren().length == 0) {                        </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 950                         entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 951                     } else {                                                                             </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 952                         entityType = getDefaultEntityType();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 954                 } else {                                                                                 </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 955                     entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956                 }                                                                                        </span>
<span  style=""> 957                                                                                                          </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 958                 if (StringUtils.isBlank(entityType)) {                                                   </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 959                     List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());       </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 960                     model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                      </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style=""> 961                     model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                         </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""><abbr title=" 962                     model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());"> 962                     model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyNameðŸ”µ</abbr></span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 963                     String requestUri = request.getRequestURI();                                         </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""><abbr title=" 964                     if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {"> 964                     if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 965                         requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 965                         requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966                     }                                                                                    </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 967                     model.addAttribute(&quot;currentUri&quot;, requestUri);                                        </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 968                     model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());         </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 969                     setModelAttributes(model, sectionKey);                                               </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 970                     return &quot;modules/modalContainer&quot;;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 971                 } else {                                                                                 </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style=""> 972                     ppr = ppr.withCeilingEntityClassname(entityType);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974             }                                                                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style=""> 975         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title=" 976             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);"> 976             ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionTypðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style=""> 977             if (result.equals(ExtensionResultStatusType.HANDLED)) {                                      </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style=""> 978                 model.addAttribute(&quot;entityId&quot;, id);                                                      </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style=""> 979                 model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                            </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style=""> 980                 model.addAttribute(&quot;collectionField&quot;, collectionField);                                  </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 981                 return &quot;modules/modalContainer&quot;;                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 983         }                                                                                                </span>
<span  style=""> 984                                                                                                          </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style=""> 985         //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                        </span>
<span  style=""> 986                                                                                                          </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 987         model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));       </span>
<span  style=""> 988                                                                                                          </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title=" 989         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);"> 989         return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, colðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 990     }                                                                                                    </span>
<span  style=""> 991                                                                                                          </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title=" 992     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)"> 992     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title=" 993     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 993     public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 994             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 995             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 996             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style=""> 997             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 998         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 999         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1000         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1001         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1001         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1002         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1003         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1004         Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                               </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1005         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1006             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1006             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1007                     collectionField,                                                                     </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1008                     collectionItemId, responseMap);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009         }                                                                                                </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1010         return responseMap;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011     }                                                                                                    </span>
<span  style="">1012                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1013     /**                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1014      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1015      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1016      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1017      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1018      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1019      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1020      * @param collectionField                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1021      * @param requestParams                                                                              </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1022      * @return Json collection data                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1023      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1024      */                                                                                                  </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1025     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)          </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">1026     @ResponseBody                                                                                        </span>
<span class="6684766987121317173" onmouseenter="enter('6684766987121317173');" onmouseout="out('6684766987121317173');" style=""><abbr title="1027     public Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model, @PathVariable">1027     public Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletRespoðŸ”µ</abbr></span>
<span class="6743964908211411778" onmouseenter="enter('6743964908211411778');" onmouseout="out('6743964908211411778');" style="">1028     Map&lt;String, String&gt; pathVars, @PathVariable(&quot;id&quot;)                                                    </span>
<span class="7290561676301767047" onmouseenter="enter('7290561676301767047');" onmouseout="out('7290561676301767047');" style="">1029     String id, @PathVariable(&quot;collectionField&quot;)                                                          </span>
<span class="5662947930050952773" onmouseenter="enter('5662947930050952773');" onmouseout="out('5662947930050952773');" style="">1030     String collectionField, @RequestParam                                                                </span>
<span class="1054657867470972542" onmouseenter="enter('1054657867470972542');" onmouseout="out('1054657867470972542');" style="">1031     MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                                      </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1032         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1033         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1034         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1035         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1035         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1036         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1037         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-4651186187628847625" onmouseenter="enter('-4651186187628847625');" onmouseout="out('-4651186187628847625');" style=""><abbr title="1038         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs).withFilterAndSortCriteria(getCriteria(requestParams)).withStartIndex(getStartIndex(requestParams)).withMaxIndex(getMaxIndex(requestParams));">1038         PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs).withFilðŸ”µ</abbr></span>
<span class="579227927421006312" onmouseenter="enter('579227927421006312');" onmouseout="out('579227927421006312');" style=""><abbr title="1039         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria())).toArray(String[]::new);">1039         String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizðŸ”µ</abbr></span>
<span class="-6207325927333710692" onmouseenter="enter('-6207325927333710692');" onmouseout="out('-6207325927333710692');" style="">1040         ppr = ppr.withCustomCriteria(both);                                                              </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1041         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1042             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1043             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1044             ppr.setSectionEntityField(collectionField);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1045         }                                                                                                </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1046         DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                            </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style=""><abbr title="1047         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1047         return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048     }                                                                                                    </span>
<span  style="">1049                                                                                                          </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1050     protected String[] buildSelectizeCustomCriteria() {                                                  </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1051         return new String[]{ IS_SELECTIZE_REQUEST };                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1052     }                                                                                                    </span>
<span  style="">1053                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1054     /**                                                                                                  </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1055      * Adds the requested collection item via Selectize                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1056      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1057      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1058      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1059      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1060      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1061      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1062      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1063      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1064      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1065      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1066      */                                                                                                  </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1067     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)     </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1068     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1068     public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpSðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1069             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1070             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1071             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1072             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1072             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1073         Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                 </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1074         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1075         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1076         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1077         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1077         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1078         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1079                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1080         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1081             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1082             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1083                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1085         }                                                                                                </span>
<span  style="">1086                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1087         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1087         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1088         ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                           </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1089         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1090         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1090         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span  style="">1091                                                                                                          </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1092         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1093         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1093         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1094         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1095         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1096                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1097         if (result.hasErrors()) {                                                                        </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1098             returnVal.put(&quot;error&quot;, result.getFieldError());                                              </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1099             return returnVal;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100         }                                                                                                </span>
<span  style="">1101                                                                                                          </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1102         if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                   </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1103             returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104         }                                                                                                </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1105         return returnVal;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106     }                                                                                                    </span>
<span  style="">1107                                                                                                          </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1108     protected void declareShouldIgnoreAdditionStatusFilter() {                                           </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1109         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1109         Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().gðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1110         additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111     }                                                                                                    </span>
<span  style="">1112                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1113     /**                                                                                                  </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1114      * Adds the requested collection item                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1115      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1116      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1117      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1118      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1119      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1120      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1121      * @param collectionField                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1122      * @param entityForm                                                                                 </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1123      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1124      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1125      */                                                                                                  </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1126     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)               </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style=""><abbr title="1127     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1127     public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model modelðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1128             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1129             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1130             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1131             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1131             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1132         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1133         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1134         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1135         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1135         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1136         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1137                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1138         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1139             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1140             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1141                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143         }                                                                                                </span>
<span  style="">1144                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1145         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1145         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1146         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1147         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1147         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1148         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1149         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1150         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1150         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1151         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1152         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1153                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1154         if (result.hasErrors()) {                                                                        </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1155             FieldMetadata md = collectionProperty.getMetadata();                                         </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1156             ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                             </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1157             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1157             return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey,ðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1158                     md, ppr, entityForm, savedEntity);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159         }                                                                                                </span>
<span  style="">1160                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1161         // Next, we must get the new list grid that represents this collection                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1162         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1162         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1163         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span  style="">1164                                                                                                          </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1165         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1166         model.addAttribute(&quot;actualEntityId&quot;, id);                                                        </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1167         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1168         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169     }                                                                                                    </span>
<span  style="">1170                                                                                                          </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1171     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)          </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1172     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1172     public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse reðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1173             @PathVariable Map&lt;String, String&gt; pathVars,                                                  </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1174             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1175             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""><abbr title="1176             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {">1176             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws ExcepðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1177         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1178         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1179         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1180         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1180         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1181         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1182                                                                                                          </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1183         if (StringUtils.isBlank(entityForm.getEntityType())) {                                           </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1184             FieldMetadata fmd = collectionProperty.getMetadata();                                        </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1185             if (fmd instanceof BasicCollectionMetadata) {                                                </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1186                 entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188         }                                                                                                </span>
<span  style="">1189                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1190         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1190         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1191         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1191         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1192         entity.setIsPreAdd(true);                                                                        </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1193         // First, we must save the collection entity                                                     </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1194         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1194         PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadataðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1195         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span  style="">1196                                                                                                          </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1197         return new JsonResponse(response)                                                                </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1198                 .with(&quot;status&quot;, &quot;complete&quot;)                                                              </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1199                 .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())             </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1200                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201     }                                                                                                    </span>
<span  style="">1202                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1203     /**                                                                                                  </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1204      * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1204      * Builds out all of the model information needed for showing the add modal for collection items on bðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1205      * as well as after a POST with validation errors                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1206      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1207      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1208      * @param model                                                                                      </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1209      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1210      * @param collectionField                                                                            </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1211      * @param sectionKey                                                                                 </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1212      * @param collectionProperty                                                                         </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1213      * @param md                                                                                         </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1214      * @param ppr                                                                                        </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1215      * @return the appropriate view to display for the modal                                             </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1216      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1216      * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StringðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1217      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1217      * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, StðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1218      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1219      */                                                                                                  </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style=""><abbr title="1220     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,">1220     protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse responseðŸ”µ</abbr></span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style=""><abbr title="1221             Model model, String id, String collectionField, String sectionKey, Property collectionProperty,">1221             Model model, String id, String collectionField, String sectionKey, Property collectionPropertðŸ”µ</abbr></span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1222             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1222             FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throwsðŸ”µ</abbr></span>
<span  style="">1223                                                                                                          </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1224         // For requests to add a new collection item include the main class that the subsequent request comes from.">1224         // For requests to add a new collection item include the main class that the subsequent request cðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1225         // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1225         // For instance, with basic collections we know the main associated class for a fetch through theðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style=""><abbr title="1226         // persistence item but map and adorned target lookups make a standard persistence request. This solution">1226         // persistence item but map and adorned target lookups make a standard persistence request. This ðŸ”µ</abbr></span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1227         // fixes all cases.                                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1228         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1229         ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                           </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1230         ppr.setAddOperationInspect(true);                                                                </span>
<span  style="">1231                                                                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1232         if (entityForm != null) {                                                                        </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1233             entityForm.clearFieldsMap();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234         }                                                                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1235         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1236         if (md instanceof BasicCollectionMetadata) {                                                     </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1237             BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                  </span>
<span  style="">1238                                                                                                          </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style=""><abbr title="1239             // When adding items to basic collections, we will sometimes show a form to persist a new record">1239             // When adding items to basic collections, we will sometimes show a form to persist a new recðŸ”µ</abbr></span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1240             // and sometimes show a list grid to allow the user to associate an existing record.         </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1241             if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                  </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1242                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1242                 ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().geðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1243                 if (entityForm == null) {                                                                </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1244                     entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);         </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1245                     entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());               </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1246                     entityForm.setEntityType(ppr.getCeilingEntityClassname());                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1247                 } else {                                                                                 </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1248                     formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);       </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1249                     formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1250                 }                                                                                        </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1251                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1251                 formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntitðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1252                 entityForm.getTabs().iterator().next().getIsVisible();                                   </span>
<span  style="">1253                                                                                                          </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1254                 model.addAttribute(&quot;entityForm&quot;, entityForm);                                            </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1255                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1256             } else {                                                                                     </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1257                 DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                    </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1258                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1258                 ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1259                 listGrid.setPathOverride(request.getRequestURL().toString());                            </span>
<span  style="">1260                                                                                                          </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1261                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1261                 if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUPðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1262                     listGrid.removeAllRowActions();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263                 }                                                                                        </span>
<span  style="">1264                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1265                 model.addAttribute(&quot;listGrid&quot;, listGrid);                                                </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1266                 model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267             }                                                                                            </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1268         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1269             AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                  </span>
<span  style="">1270                                                                                                          </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1271             // Even though this field represents an adorned target collection, the list we want to show in the modal">1271             // Even though this field represents an adorned target collection, the list we want to show iðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1272             // is the standard list grid for the target entity of this field                             </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1273             ppr.setOperationTypesOverride(null);                                                         </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1274             ppr.setType(PersistencePackageRequest.Type.STANDARD);                                        </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1275             ppr.setSectionEntityField(collectionField);                                                  </span>
<span  style="">1276                                                                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1277             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1277             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1278                                                                                                          </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1279             DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                        </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1280             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1280             ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1281             listGrid.setSubCollectionFieldName(collectionField);                                         </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1282             listGrid.setPathOverride(request.getRequestURL().toString());                                </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1283             listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1284             if (entityForm == null) {                                                                    </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1285                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1285                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectiðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style=""><abbr title="1286                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());">1286                 entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassnameðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1287             } else {                                                                                     </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1288                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1288                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectioðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1289                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290             }                                                                                            </span>
<span  style="">1291                                                                                                          </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1292             listGrid.setListGridType(ListGrid.Type.ADORNED);                                             </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1293             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1294                 if (entry.getValue().getIsVisible()) {                                                   </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1295                     listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                           </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1296                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298             }                                                                                            </span>
<span  style="">1299                                                                                                          </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1300             // This is part of an add, so we want to be able to filter/sort the listgrid                 </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1301             listGrid.setIsSortable(false);                                                               </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1302             listGrid.setCanFilterAndSort(true);                                                          </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1303             listGrid.removeAllRowActions();                                                              </span>
<span  style="">1304                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1305             model.addAttribute(&quot;listGrid&quot;, listGrid);                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1306             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1307             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                 </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1308         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1309             MapMetadata fmd = (MapMetadata) md;                                                          </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1310             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1310             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span  style="">1311                                                                                                          </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1312             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1313                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1313                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1314             } else {                                                                                     </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1315                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1316                 formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317             }                                                                                            </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1318             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1319             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320         }                                                                                                </span>
<span  style="">1321                                                                                                          </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1322         // Set the parent id on the entity form                                                          </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1323         if (entityForm != null) {                                                                        </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1324             entityForm.setParentId(id);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325         }                                                                                                </span>
<span  style="">1326                                                                                                          </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1327         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1328         model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());            </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1329         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1330         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1331         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332     }                                                                                                    </span>
<span  style="">1333                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1334     /**                                                                                                  </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1335      * Shows the appropriate modal dialog to edit the selected collection item                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1336      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1337      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1338      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1339      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1340      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1341      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1342      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1343      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1344      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1345      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1346      */                                                                                                  </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1347     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1347     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1348     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1348     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1349             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1350             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1351             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1352             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1353             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1354         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1354         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1355                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356     }                                                                                                    </span>
<span  style="">1357                                                                                                          </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1358     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET) </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style=""><abbr title="1359     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1359     public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, ModeðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1360             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1361             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1362             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1363             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style=""><abbr title="1364         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1364         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1365                 ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366     }                                                                                                    </span>
<span  style="">1367                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1368     /**                                                                                                  </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1369      * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1369      * Shows the appropriate modal dialog to view the selected collection item. This will display the modðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1370      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1371      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1372      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1373      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1374      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1375      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1376      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1377      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1378      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1379      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1380      */                                                                                                  </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1381     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1381     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1382     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1382     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1383             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1384             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1385             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1386             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1387             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1388         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1388         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1389                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1390                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1391         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1392         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1393         addAuditableDisplayFields(ef);                                                                   </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1394         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1395         ef.setReadOnly();                                                                                </span>
<span  style="">1396                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1397         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398     }                                                                                                    </span>
<span  style="">1399                                                                                                          </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style=""><abbr title="1400     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)">1400     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style=""><abbr title="1401     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1401     public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model ðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1402             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1403             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1404             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1405             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1406         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1406         String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, colleðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1407                 ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                         </span>
<span  style="">1408                                                                                                          </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1409         // Since this is a read-only view, actions don&#x27;t make sense in this context                      </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1410         EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                    </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1411         ef.removeAllActions();                                                                           </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1412         ef.setReadOnly();                                                                                </span>
<span  style="">1413                                                                                                          </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1414         return returnPath;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415     }                                                                                                    </span>
<span  style="">1416                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1417     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1417     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1418             String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1418             String id, String collectionField, String collectionItemId, String alternateId, String modalHðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1419         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1419         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420     }                                                                                                    </span>
<span  style="">1421                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1422     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1422     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1423             String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1423             String id, String collectionField, String collectionItemId, String modalHeaderType) throws SeðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1424         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1424         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425     }                                                                                                    </span>
<span  style="">1426                                                                                                          </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1427     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1427     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1428                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1428                 String id, String collectionField, String collectionItemId, String modalHeaderType, EntitðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1429         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1429         return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430     }                                                                                                    </span>
<span  style="">1431                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1432     /**                                                                                                  </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1433      * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1433      * Shows the view and populates the model for updating a collection item. You can also pass in an entðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1434      * which are optional. If they are not passed in then they are automatically looked up               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1435      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1436      * @param request                                                                                    </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1437      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1438      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1439      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1440      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1441      * @param collectionItemId                                                                           </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1442      * @param modalHeaderType                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1443      * @param entityForm                                                                                 </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1444      * @param entity                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1445      * @return                                                                                           </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1446      * @throws ServiceException                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1447      */                                                                                                  </span>
<span class="1266907140350915581" onmouseenter="enter('1266907140350915581');" onmouseout="out('1266907140350915581');" style=""><abbr title="1448     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars, String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1448     protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, StringðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1449         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1450         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1451         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1452         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1452         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1453         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1454         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1455         SectionCrumb nextCrumb = new SectionCrumb();                                                     </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1456         if (md instanceof MapMetadata) {                                                                 </span>
<span class="2710894502845994625" onmouseenter="enter('2710894502845994625');" onmouseout="out('2710894502845994625');" style="">1457             nextCrumb.setSectionIdentifier(((MapMetadata) (md)).getValueClassName());                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1458         } else {                                                                                         </span>
<span class="2766879942838671897" onmouseenter="enter('2766879942838671897');" onmouseout="out('2766879942838671897');" style="">1459             nextCrumb.setSectionIdentifier(((CollectionMetadata) (md)).getCollectionCeilingEntity());    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460         }                                                                                                </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1461         nextCrumb.setSectionId(collectionItemId);                                                        </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1462         if (!sectionCrumbs.contains(nextCrumb)) {                                                        </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1463             sectionCrumbs.add(nextCrumb);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1464         }                                                                                                </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1465         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1465         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1466         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1466         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1467         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="4263414014170134460" onmouseenter="enter('4263414014170134460');" onmouseout="out('4263414014170134460');" style=""><abbr title="1468         if ((md instanceof BasicCollectionMetadata) &amp;&amp; (((BasicCollectionMetadata) (md)).getAddMethodType().equals(AddMethodType.PERSIST) || ((BasicCollectionMetadata) (md)).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) {">1468         if ((md instanceof BasicCollectionMetadata) &amp;&amp; (((BasicCollectionMetadata) (md)).getAddMethodTypeðŸ”µ</abbr></span>
<span class="-996348376888288134" onmouseenter="enter('-996348376888288134');" onmouseout="out('-996348376888288134');" style="">1469             BasicCollectionMetadata fmd = ((BasicCollectionMetadata) (md));                              </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1470             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1470             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1471             if (entity == null) {                                                                        </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1472                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1472                 entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473             }                                                                                            </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1474             String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                     </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1475             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1475             Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1476             if (entityForm == null) {                                                                    </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style=""><abbr title="1477                 entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1477                 entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1478             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1479                 entityForm.clearFieldsMap();                                                             </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style=""><abbr title="1480                 formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1480                 formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, secðŸ”µ</abbr></span>
<span class="-3720772885488984407" onmouseenter="enter('-3720772885488984407');" onmouseout="out('-3720772885488984407');" style="">1481                 // remove all the actions since we&#x27;re not trying to redisplay them on the form           </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1482                 entityForm.removeAllActions();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483             }                                                                                            </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1484             entityForm.removeAction(DefaultEntityFormActions.DELETE);                                    </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1485             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1486             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1487             model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                    </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1488         } else if (md instanceof AdornedTargetCollectionMetadata) {                                      </span>
<span class="1508526977756681505" onmouseenter="enter('1508526977756681505');" onmouseout="out('1508526977756681505');" style="">1489             AdornedTargetCollectionMetadata fmd = ((AdornedTargetCollectionMetadata) (md));              </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1490             if (entity == null) {                                                                        </span>
<span class="-7347716823881482598" onmouseenter="enter('-7347716823881482598');" onmouseout="out('-7347716823881482598');" style=""><abbr title="1491                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty, collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0];">1491                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1492             }                                                                                            </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1493             boolean populateTypeAndId = true;                                                            </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style=""><abbr title="1494             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);">1494             boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1495             if (entityForm == null) {                                                                    </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1496                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1496                 entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollecðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1497                 entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                            </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1498                 entityForm.addAction(DefaultAdornedEntityFormActions.Save);                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1499             } else {                                                                                     </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1500                 entityForm.clearFieldsMap();                                                             </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1501                 String entityType = entityForm.getEntityType();                                          </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1502                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1502                 formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1503                 entityForm.setEntityType(entityType);                                                    </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1504                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505             }                                                                                            </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1506             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="7409812234697066835" onmouseenter="enter('7409812234697066835');" onmouseout="out('7409812234697066835');" style=""><abbr title="1507             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id, collectionField, collectionItemId, responseMap);">1507             adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, maðŸ”µ</abbr></span>
<span class="2742160767496208814" onmouseenter="enter('2742160767496208814');" onmouseout="out('2742160767496208814');" style=""><abbr title="1508             // For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1508             // For AdornedTargetCollections, we need to be specific on what translation ceilingEntity andðŸ”µ</abbr></span>
<span class="-5073242989205220681" onmouseenter="enter('-5073242989205220681');" onmouseout="out('-5073242989205220681');" style=""><abbr title="1509             // It should be the entity and referenced Id of the adorned entity (not the target entity and Id).">1509             // It should be the entity and referenced Id of the adorned entity (not the target entity andðŸ”µ</abbr></span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1510             entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                          </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1511             entityForm.setTranslationId(alternateId);                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1512             ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();  </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1513             for (String field : fmd.getMaintainedAdornedTargetFields()) {                                </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1514                 if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {           </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1515                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516                 }                                                                                        </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1517                 Property p = cmd.getPMap().get(field);                                                   </span>
<span class="8841772450259568211" onmouseenter="enter('8841772450259568211');" onmouseout="out('8841772450259568211');" style="">1518                 if ((p != null) &amp;&amp; (p.getMetadata() instanceof AdornedTargetCollectionMetadata)) {       </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1519                     // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1519                     // Because we&#x27;re dealing with a nested adorned target collection, this particular reqðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1520                     // directly on the first adorned target collection. Because of this, we need the actual id property">1520                     // directly on the first adorned target collection. Because of this, we need the actuðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1521                     // from the entity that models the adorned target relationship, and not the id of the target object.">1521                     // from the entity that models the adorned target relationship, and not the id of theðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1522                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1522                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-8700837243891184186" onmouseenter="enter('-8700837243891184186');" onmouseout="out('-8700837243891184186');" style=""><abbr title="1523                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null, alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();">1523                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="-8426069236906961510" onmouseenter="enter('-8426069236906961510');" onmouseout="out('-8426069236906961510');" style=""><abbr title="1524                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p, ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);">1524                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1525                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1526                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1527                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1527                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1528                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1529                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1529                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530                     }                                                                                    </span>
<span class="91478021664453737" onmouseenter="enter('91478021664453737');" onmouseout="out('91478021664453737');" style="">1531                 } else if ((p != null) &amp;&amp; (p.getMetadata() instanceof MapMetadata)) {                    </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1532                     // See above comment for AdornedTargetCollectionMetadata                             </span>
<span class="-5780842363226321337" onmouseenter="enter('-5780842363226321337');" onmouseout="out('-5780842363226321337');" style="">1533                     MapMetadata mmd = ((MapMetadata) (p.getMetadata()));                                 </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1534                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1534                     Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ðŸ”µ</abbr></span>
<span class="-8700837243891184186" onmouseenter="enter('-8700837243891184186');" onmouseout="out('-8700837243891184186');" style=""><abbr title="1535                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null, alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();">1535                     DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, nuðŸ”µ</abbr></span>
<span class="5816800760712485268" onmouseenter="enter('5816800760712485268');" onmouseout="out('5816800760712485268');" style=""><abbr title="1536                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p, mmd.getTargetClass(), sectionCrumbs);">1536                     ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(ðŸ”µ</abbr></span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1537                     listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                        </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1538                     if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {       </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1539                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1539                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1540                     } else {                                                                             </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1541                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1541                         entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544             }                                                                                            </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1545             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1545             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1546             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1547             boolean atLeastOneBasicField = false;                                                        </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1548             for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                       </span>
<span class="7813151848614995896" onmouseenter="enter('7813151848614995896');" onmouseout="out('7813151848614995896');" style=""><abbr title="1549                 if ((entry.getValue().getIsVisible() &amp;&amp; (!responseMap.containsKey(entry.getValue().getName()))) &amp;&amp; (!responseMap.containsKey(&quot;autoSubmit&quot;))) {">1549                 if ((entry.getValue().getIsVisible() &amp;&amp; (!responseMap.containsKey(entry.getValue().getNamðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1550                     atLeastOneBasicField = true;                                                         </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1551                     break;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553             }                                                                                            </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1554             if (!atLeastOneBasicField) {                                                                 </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1555                 entityForm.removeAction(DefaultEntityFormActions.SAVE);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556             }                                                                                            </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1557             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1558             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1559             model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                   </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1560         } else if (md instanceof MapMetadata) {                                                          </span>
<span class="2110793926177220554" onmouseenter="enter('2110793926177220554');" onmouseout="out('2110793926177220554');" style="">1561             MapMetadata fmd = ((MapMetadata) (md));                                                      </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1562             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1562             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1563             if (entity == null) {                                                                        </span>
<span class="6337078590900308198" onmouseenter="enter('6337078590900308198');" onmouseout="out('6337078590900308198');" style=""><abbr title="1564                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty, collectionItemId, sectionCrumbs, null).getEntity();">1564                 entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565             }                                                                                            </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1566             boolean populateTypeAndId = true;                                                            </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1567             if (entityForm == null) {                                                                    </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style=""><abbr title="1568                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);">1568                 entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id)ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1569             } else {                                                                                     </span>
<span class="-7948993312677492627" onmouseenter="enter('-7948993312677492627');" onmouseout="out('-7948993312677492627');" style="">1570                 // save off the prior key before clearing out the fields map as it will not appear       </span>
<span class="7896310386315991062" onmouseenter="enter('7896310386315991062');" onmouseout="out('7896310386315991062');" style="">1571                 // back on the saved entity                                                              </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1572                 String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                           </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1573                 entityForm.clearFieldsMap();                                                             </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1574                 formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);</span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1575                 entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                     </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1576                 populateTypeAndId = false;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577             }                                                                                            </span>
<span  style="">1578                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">1579 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="6626299943516834841" onmouseenter="enter('6626299943516834841');" onmouseout="out('6626299943516834841');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1580             if (entityForm.getCeilingEntityClassname() == null) {                                        </span>
<span class="7267210175865484771" onmouseenter="enter('7267210175865484771');" onmouseout="out('7267210175865484771');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1581                 entityForm.setCeilingEntityClassname(fmd.getValueClassName());                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1582             }                                                                                            </span>
<span class="5641028696522950745" onmouseenter="enter('5641028696522950745');" onmouseout="out('5641028696522950745');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">1583             entityForm.setTranslationId(collectionItemId);                                               </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">1584 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="1585 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">1585 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">1586 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1587                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1588             try {                                                                                        </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="1589                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1589                 entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1590             } catch (Exception e) {                                                                      </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1591                 LOG.error(e);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">1592             }                                                                                            </span>
<span class="-3626447344774920212" onmouseenter="enter('-3626447344774920212');" onmouseout="out('-3626447344774920212');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="1593             entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValue());">1593             entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValueðŸ”µ</abbr></span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style="">1594 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style="">1595                                                                                                          </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style=""><abbr title="1596             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);">1596             formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndIdðŸ”µ</abbr></span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1597             formService.populateMapEntityFormFields(entityForm, entity);                                 </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1598             addAuditableDisplayFields(entityForm);                                                       </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1599             model.addAttribute(&quot;entityForm&quot;, entityForm);                                                </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1600             model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601         }                                                                                                </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1602         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1603         model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                          </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1604         model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1605         setModelAttributes(model, sectionKey);                                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1606         return &quot;modules/modalContainer&quot;;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1607     }                                                                                                    </span>
<span  style="">1608                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1609     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1610      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1611      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1612      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1613      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1614      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1615      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1616      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1617      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1618      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1618      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1619      * @param entityForm                                                                                 </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1620      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1621      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1622      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1623      */                                                                                                  </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1624     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)</span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1625     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1625     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1626             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1627             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1628             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1629             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1630             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1631             BindingResult result) throws Exception {                                                     </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1632         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1632         return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633     }                                                                                                    </span>
<span  style="">1634                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1635     /**                                                                                                  </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1636      * Updates the specified collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1637      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1638      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1639      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1640      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1641      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1642      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1643      * @param collectionField                                                                            </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1644      * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1644      * @param collectionItemId the collection primary key value (in the case of adorned target collectionðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1645      * @param entityForm                                                                                 </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1646      * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1646      * @param alternateId in the case of adorned target collections, this is the primary key value of theðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1647      * @param result                                                                                     </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1648      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1649      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1650      */                                                                                                  </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1651     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1651     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style=""><abbr title="1652     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1652     public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1653             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1654             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1655             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1656             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1657             @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                   </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1658             @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                       </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1659             BindingResult result) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1660         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1661         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1662         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1663         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1663         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1664         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1665                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1666         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1666         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1667         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1667         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1668         service.clearEntityManager();                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1669         // First, we must save the collection entity                                                     </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1670         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1670         PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1671         Entity savedEntity = persistenceResponse.getEntity();                                            </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1672         entityFormValidator.validate(entityForm, savedEntity, result);                                   </span>
<span  style="">1673                                                                                                          </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1674         if (result.hasErrors()) {                                                                        </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1675             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1675             return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1676                     ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677         }                                                                                                </span>
<span  style="">1678                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1679         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1680         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1681         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1681         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1682                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1683         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1684         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1685         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1686         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1687     }                                                                                                    </span>
<span  style="">1688                                                                                                          </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style=""><abbr title="1689     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)">1689     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMetðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1690     public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,    </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1691             HttpServletResponse response, Model model,                                                   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1692             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1693             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1694             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1695             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1696             @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                    </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1697         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1697         return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698     }                                                                                                    </span>
<span  style="">1699                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1700     /**                                                                                                  </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style=""><abbr title="1701      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections">1701      * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target colðŸ”µ</abbr></span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style=""><abbr title="1702      * where a sort field is specified -- any other invocation is incorrect and will result in an exception.">1702      * where a sort field is specified -- any other invocation is incorrect and will result in an exceptiðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1703      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1704      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1705      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1706      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1707      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1708      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1709      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1710      * @param collectionItemId                                                                           </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1711      * @return an object explaining the state of the operation                                           </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1712      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1713      */                                                                                                  </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1714     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1714     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, methoðŸ”µ</abbr></span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">1715     @ResponseBody                                                                                        </span>
<span class="6593196576261885009" onmouseenter="enter('6593196576261885009');" onmouseout="out('6593196576261885009');" style=""><abbr title="1716     public Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request, HttpServletResponse response, Model model, @PathVariable">1716     public Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request, HttpServletResponðŸ”µ</abbr></span>
<span class="6743964908211411778" onmouseenter="enter('6743964908211411778');" onmouseout="out('6743964908211411778');" style="">1717     Map&lt;String, String&gt; pathVars, @PathVariable(&quot;id&quot;)                                                    </span>
<span class="7290561676301767047" onmouseenter="enter('7290561676301767047');" onmouseout="out('7290561676301767047');" style="">1718     String id, @PathVariable(&quot;collectionField&quot;)                                                          </span>
<span class="3933100388132335280" onmouseenter="enter('3933100388132335280');" onmouseout="out('3933100388132335280');" style="">1719     String collectionField, @PathVariable(&quot;collectionItemId&quot;)                                            </span>
<span class="3566979908250424514" onmouseenter="enter('3566979908250424514');" onmouseout="out('3566979908250424514');" style="">1720     String collectionItemId, @RequestParam(&quot;newSequence&quot;)                                                </span>
<span class="2140554780760345573" onmouseenter="enter('2140554780760345573');" onmouseout="out('2140554780760345573');" style="">1721     String newSequence, @PathVariable(&quot;alternateId&quot;)                                                     </span>
<span class="-584408892188902408" onmouseenter="enter('-584408892188902408');" onmouseout="out('-584408892188902408');" style="">1722     String alternateId) throws Exception {                                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1723         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1724         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1725         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1726         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1726         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1727         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1728         FieldMetadata md = collectionProperty.getMetadata();                                             </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1729         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1729         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1730         ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                               </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1731         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1731         Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getReðŸ”µ</abbr></span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1732         ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                 </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1733         if (md instanceof AdornedTargetCollectionMetadata) {                                             </span>
<span class="1508526977756681505" onmouseenter="enter('1508526977756681505');" onmouseout="out('1508526977756681505');" style="">1734             AdornedTargetCollectionMetadata fmd = ((AdornedTargetCollectionMetadata) (md));              </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1735             AdornedTargetList atl = ppr.getAdornedList();                                                </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1736             // Get an entity form for the entity                                                         </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1737             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1737             EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, falseðŸ”µ</abbr></span>
<span class="-1981682256389114708" onmouseenter="enter('-1981682256389114708');" onmouseout="out('-1981682256389114708');" style=""><abbr title="1738             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty, collectionItemId, sectionCrumbs, alternateId, new String[]{ &quot;reorderChildEntityFetch&quot; }).getDynamicResultSet().getRecords()[0];">1738             Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProðŸ”µ</abbr></span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1739             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1740             formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());       </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1741             // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1741             // Set the new sequence (note that it will come in 0-indexed but the persistence module expecðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1742             int sequenceValue = Integer.parseInt(newSequence) + 1;                                       </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1743             Field field = entityForm.findField(atl.getSortField());                                      </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1744             field.setValue(String.valueOf(sequenceValue));                                               </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1745             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1746             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1746             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1747             Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1748             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1749             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1750             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1751             return responseMap;                                                                          </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1752         } else if (md instanceof BasicCollectionMetadata) {                                              </span>
<span class="-3308266743120520516" onmouseenter="enter('-3308266743120520516');" onmouseout="out('-3308266743120520516');" style="">1753             BasicCollectionMetadata cd = ((BasicCollectionMetadata) (md));                               </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1754             Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                           </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1755             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1755             Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResulðŸ”µ</abbr></span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1756             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1756             ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClaðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1757             EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);     </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style=""><abbr title="1758             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1758             boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPðŸ”µ</abbr></span>
<span class="3605180257034127935" onmouseenter="enter('3605180257034127935');" onmouseout="out('3605180257034127935');" style="">1759             if (listGridReadOnly) {                                                                      </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="">1760                 throw new SecurityServiceException();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1761             }                                                                                            </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1762             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="-241898211494007007" onmouseenter="enter('-241898211494007007');" onmouseout="out('-241898211494007007');" style=""><abbr title="1763                 Field f = new Field().withName(cd.getSortProperty()).withFieldType(SupportedFieldType.HIDDEN.toString());">1763                 Field f = new Field().withName(cd.getSortProperty()).withFieldType(SupportedFieldType.HIDðŸ”µ</abbr></span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1764                 entityForm.addHiddenField(mainMetadata, f);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1765             }                                                                                            </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1766             formService.populateEntityFormFields(entityForm, entity);                                    </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1767             if (!StringUtils.isEmpty(cd.getSortProperty())) {                                            </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1768                 int sequenceValue = Integer.parseInt(newSequence) + 1;                                   </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1769                 Field field = entityForm.findField(cd.getSortProperty());                                </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1770                 field.setValue(String.valueOf(sequenceValue));                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1771             }                                                                                            </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1772             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1772             PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1773             Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());  </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1774             responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                             </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1775             responseMap.put(&quot;field&quot;, collectionField);                                                   </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1776             responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());   </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1777             return responseMap;                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1778         } else {                                                                                         </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1779             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1779             throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781     }                                                                                                    </span>
<span  style="">1782                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1783     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1784      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1785      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1786      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1786      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1787      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1788      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1789      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1790      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1791      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1792      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1793      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1794      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1795      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1796      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1797      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1798      */                                                                                                  </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style=""><abbr title="1799     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)">1799     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethoðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1800     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1800     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1801             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1802             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1803             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1804             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {          </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1805         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1805         return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806     }                                                                                                    </span>
<span  style="">1807                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1808     /**                                                                                                  </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1809      * Removes the requested collection item                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1810      *                                                                                                   </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1811      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1811      * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collectionðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1812      * map collection.                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1813      *                                                                                                   </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1814      * @param request                                                                                    </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1815      * @param response                                                                                   </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1816      * @param model                                                                                      </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1817      * @param pathVars                                                                                   </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1818      * @param id                                                                                         </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1819      * @param collectionField                                                                            </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1820      * @param collectionItemId                                                                           </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1821      * @return the return view path                                                                      </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1822      * @throws Exception                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1823      */                                                                                                  </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="1824     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">1824     @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method ðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style=""><abbr title="1825     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1825     public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1826             @PathVariable  Map&lt;String, String&gt; pathVars,                                                 </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1827             @PathVariable(value=&quot;id&quot;) String id,                                                         </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1828             @PathVariable(value=&quot;collectionField&quot;) String collectionField,                               </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1829             @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                             </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1830             @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                    </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1831         String sectionKey = getSectionKey(pathVars);                                                     </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1832         String mainClassName = getClassNameForSection(sectionKey);                                       </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1833         List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                    </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1834         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1834         ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClaðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1835         Property collectionProperty = mainMetadata.getPMap().get(collectionField);                       </span>
<span  style="">1836                                                                                                          </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">1837         String priorKey = request.getParameter(&quot;key&quot;);                                                   </span>
<span  style="">1838                                                                                                          </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1839         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1839         PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1840         declareShouldIgnoreAdditionStatusFilter();                                                       </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""><abbr title="1841         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1841         Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords(ðŸ”µ</abbr></span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1842         service.clearEntityManager();                                                                    </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">1843         // First, we must remove the collection entity                                                   </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="1844         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">1844         PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style=""><abbr title="1845         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {">1845         if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailurðŸ”µ</abbr></span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">1846             String error = &quot;There was an error removing the whatever&quot;;                                   </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">1847             if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {    </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">1848                 // If we failed, we&#x27;ll return some JSON with the first error                             </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="1849                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">1849                 error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator()ðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style=""><abbr title="1850             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) {">1850             } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErroðŸ”µ</abbr></span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">1851                 error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1852             }                                                                                            </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1853             return new JsonResponse(response)                                                            </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">1854                 .with(&quot;status&quot;, &quot;error&quot;)                                                                 </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">1855                 .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1856                 .done();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1857         }                                                                                                </span>
<span  style="">1858                                                                                                          </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1859         // Next, we must get the new list grid that represents this collection                           </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1860         // We return the new list grid so that it can replace the currently visible one                  </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1861         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1861         ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionðŸ”µ</abbr></span>
<span  style="">1862                                                                                                          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1863         model.addAttribute(&quot;listGrid&quot;, listGrid);                                                        </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1864         model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                            </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1865         setModelAttributes(model, sectionKey);                                                           </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1866         return &quot;views/standaloneListGrid&quot;;                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1867     }                                                                                                    </span>
<span  style="">1868                                                                                                          </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">1869     public void addAuditableDisplayFields(EntityForm entityForm) {                                       </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">1870         Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                   </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">1871         if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                         </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">1872             addAuditableDisplayField(entityForm, createdBy);                                             </span>
<span  style="">1873                                                                                                          </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">1874             createdBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1875         }                                                                                                </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">1876         Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                   </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">1877         if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                         </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">1878             addAuditableDisplayField(entityForm, updatedBy);                                             </span>
<span  style="">1879                                                                                                          </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">1880             updatedBy.setIsVisible(false);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1881         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1882     }                                                                                                    </span>
<span  style="">1883                                                                                                          </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">1884     private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                      </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">1885         Field displayField = buildAuditableDisplayField(userField);                                      </span>
<span  style="">1886                                                                                                          </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">1887         AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));           </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">1888         String userName = user == null ? null : user.getName();                                          </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">1889         displayField.setValue(userName);                                                                 </span>
<span  style="">1890                                                                                                          </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">1891         FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                            </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">1892         if (auditGroup != null) {                                                                        </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">1893             auditGroup.addField(displayField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1895     }                                                                                                    </span>
<span  style="">1896                                                                                                          </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">1897     private Field buildAuditableDisplayField(Field auditableField) {                                     </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">1898         return new Field().withFieldType(SupportedFieldType.STRING.toString())                           </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">1899                 .withName(auditableField.getName() + &quot;Display&quot;)                                          </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">1900                 .withFriendlyName(auditableField.getFriendlyName())                                      </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">1901                 .withOrder(auditableField.getOrder())                                                    </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">1902                 .withOwningEntityClass(auditableField.getOwningEntityClass())                            </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">1903                 .withReadOnly(true);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1904     }                                                                                                    </span>
<span  style="">1905                                                                                                          </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">1906     protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">1907         String tabName = pathVars.get(&quot;tabName&quot;);                                                        </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">1908         if (StringUtils.isBlank(tabName)) {                                                              </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">1909             TabMetadata firstTab = cmd.getFirstTab();                                                    </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">1910             return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1911         }                                                                                                </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">1912         return tabName;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1913     }                                                                                                    </span>
<span  style="">1914                                                                                                          </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1915     // *****************************************                                                         </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">1916     // Typed Entity Helper Methods                                                                       </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1917     // *****************************************                                                         </span>
<span  style="">1918                                                                                                          </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">1919     protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {              </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">1920         // Check if this is a typed entity                                                               </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">1921         AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);     </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">1922         if (typedEntitySection != null) {                                                                </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">1923             // Update the friendly name for this Entity Type                                             </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">1924             model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1925         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1926     }                                                                                                    </span>
<span  style="">1927                                                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1928     // *********************************                                                                 </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">1929     // ADDITIONAL SPRING-BOUND METHODS *                                                                 </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1930     // *********************************                                                                 </span>
<span  style="">1931                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1932     /**                                                                                                  </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style=""><abbr title="1933      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process.">1933      * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding ðŸ”µ</abbr></span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="1934      * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">1934      * By default, we register a binder that treats empty Strings as null and a Boolean editor that suppoðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">1935      * or false. If the value is passed in as null, it will treat it as false.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1936      *                                                                                                   </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">1937      * @param binder                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1938      */                                                                                                  </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">1939     @InitBinder                                                                                          </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">1940     public void initBinder(WebDataBinder binder) {                                                       </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">1941         binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                        </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">1942         binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1943     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1944 }                                                                                                        </span>









































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18  package org.broadleafcommerce.openadmin.web.controller.entity;                                                    </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21  import org.apache.commons.collections.MapUtils;                                                                   </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  29  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  30  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  31  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  32  import org.broadleafcommerce.common.util.BLCArrayUtils;                                                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  33  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  34  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  35  import org.broadleafcommerce.common.web.JsonResponse;                                                             </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  36  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  37  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  38  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  39  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  40  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  41  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  42  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  43  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  44  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  45  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  46  import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  47  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  48  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  49  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  50  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  51  import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                               </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  52  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  53  import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  54  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  55  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  56  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  57  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  58  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                            </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  59  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  59  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManaðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  60  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  61  import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                                    </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  62  import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                                      </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  63  import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                           </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  64  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  65  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  66  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  67  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  68  import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                                        </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  69  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  70  import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                          </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  71  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  72  import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                                </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  73  import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                             </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  74  import org.springframework.stereotype.Controller;                                                                 </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  75  import org.springframework.ui.Model;                                                                              </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  76  import org.springframework.util.MultiValueMap;                                                                    </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  77  import org.springframework.validation.BindingResult;                                                              </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  78  import org.springframework.web.bind.WebDataBinder;                                                                </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  79  import org.springframework.web.bind.annotation.InitBinder;                                                        </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  80  import org.springframework.web.bind.annotation.ModelAttribute;                                                    </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  81  import org.springframework.web.bind.annotation.PathVariable;                                                      </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  82  import org.springframework.web.bind.annotation.RequestMapping;                                                    </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  83  import org.springframework.web.bind.annotation.RequestMethod;                                                     </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  84  import org.springframework.web.bind.annotation.RequestParam;                                                      </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  85  import org.springframework.web.bind.annotation.ResponseBody;                                                      </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  86  import org.springframework.web.servlet.DispatcherServlet;                                                         </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  87  import org.springframework.web.servlet.FlashMap;                                                                  </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  88  import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                            </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  89  import org.springframework.web.util.UrlPathHelper;                                                                </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  90  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span  style="">  91                                                                                                                    </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  92  import java.net.URLDecoder;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  93  import java.util.ArrayList;                                                                                       </span>
<span class="-28465676010609596" onmouseenter="enter('-28465676010609596');" onmouseout="out('-28465676010609596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +import java.util.Arrays;                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  95  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  96  import java.util.List;                                                                                            </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  97  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  98  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  99  import java.util.Set;                                                                                             </span>
<span class="5924803009700709999" onmouseenter="enter('5924803009700709999');" onmouseout="out('5924803009700709999');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 100 +import java.util.stream.Stream;                                                                                   </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 101 +                                                                                                                  </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style=""> 102  import javax.annotation.Resource;                                                                                 </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 103  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 104  import javax.servlet.http.HttpServletResponse;                                                                    </span>
<span  style=""> 105                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106  /**                                                                                                               </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style=""><abbr title=" 107   * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 107   * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call toðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style=""><abbr title=" 108   * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 108   * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style=""> 109   * that is not explicitly customized by its own controller.                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 110   *                                                                                                                </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 111   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 112   * @author Jeff Fischer                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 113   */                                                                                                               </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 114  @Controller(&quot;blAdminBasicEntityController&quot;)                                                                       </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 115  @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                               </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 116  public class AdminBasicEntityController extends AdminAbstractController {                                         </span>
<span  style=""> 117                                                                                                                    </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 118      protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                         </span>
<span  style=""> 119                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 120      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 121      public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                                      </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 122      public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                                       </span>
<span  style=""> 123                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 124      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 125      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style=""> 126                                                                                                                    </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 127      @Resource(name = &quot;blAdminUserDao&quot;)                                                                            </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 128      protected AdminUserDao adminUserDao;                                                                          </span>
<span  style=""> 129                                                                                                                    </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 130      @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                          </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 131      protected DynamicEntityDao dynamicEntityDao;                                                                  </span>
<span  style=""> 132                                                                                                                    </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 133      @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                               </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 134      protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;                </span>
<span  style=""> 135                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 136      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 137      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style=""> 138                                                                                                                    </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 139      // ******************************************                                                                 </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 140      // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                                 </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 141      // ******************************************                                                                 </span>
<span  style=""> 142                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143      /**                                                                                                           </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 144       * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 144       * Renders the main entity listing for the specified class, which is based on the current sectionKey with someðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 145       * criteria.                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 146       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 147       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 148       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 149       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 150       * @param pathVars                                                                                            </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 151       * @param requestParams a Map of property name -&gt; list critiera values                                        </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 152       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 153       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 154       */                                                                                                           </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 155      @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                                       </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 156      public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 157              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 158              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 159          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 160          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 161          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 162          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 162          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 163          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 164          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 165                                                                                                                    </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 166          ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                          </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 167          listGrid.setSelectType(ListGrid.SelectType.NONE);                                                         </span>
<span  style=""> 168                                                                                                                    </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 169          Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                                     </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 170          if (CollectionUtils.isNotEmpty(headerFields)) {                                                           </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 171              Field firstField = headerFields.iterator().next();                                                    </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 172              if (requestParams.containsKey(firstField.getName())) {                                                </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 173                  model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175          }                                                                                                         </span>
<span  style=""> 176                                                                                                                    </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 177          model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                             </span>
<span  style=""> 178                                                                                                                    </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 179          setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams);          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 180          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style=""> 181                                                                                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 182          return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183      }                                                                                                             </span>
<span  style=""> 184                                                                                                                    </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""> 185      protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,</span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 186              String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {                  </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 187          List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                                   </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 188          addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                                </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 189          extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);                      </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 190          extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                          </span>
<span  style=""> 191                                                                                                                    </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 192          // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of            </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 193          if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                           </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 194              model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195          }                                                                                                         </span>
<span  style=""> 196                                                                                                                    </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 197          List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                            </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 198          String requestUri = request.getRequestURI();                                                              </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 199          if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {           </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""> 200              requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201          }                                                                                                         </span>
<span  style=""> 202                                                                                                                    </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 203          model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                               </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 204          model.addAttribute(&quot;currentUri&quot;, requestUri);                                                             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 205          model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                           </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 206          model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 207          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 208          model.addAttribute(&quot;mainActions&quot;, mainActions);                                                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 209          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 210          setTypedEntityModelAttributes(request, model);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211      }                                                                                                             </span>
<span  style=""> 212                                                                                                                    </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 213      @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                             </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 214      public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,                  </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 215               HttpServletResponse response, Model model,                                                           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 216               @PathVariable Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 217               @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 218          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 219          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 220          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 221          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 221          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 222                  .withCustomCriteria(getCustomCriteria(requestParams));                                            </span>
<span  style=""> 223                                                                                                                    </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 224          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span  style=""> 225                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 226          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 227          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 228                                                                                                                    </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 229          return formService.constructSelectizeOptionMap(drs, cmd);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230      }                                                                                                             </span>
<span  style=""> 231                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 232      /**                                                                                                           </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 233       * Obtains the requested criteria parameter                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 234       *                                                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 235       * @param requestParams                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 236       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 237       */                                                                                                           </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 238      protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                               </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 239          if (requestParams == null || requestParams.isEmpty()) {                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 240              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241          }                                                                                                         </span>
<span  style=""> 242                                                                                                                    </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 243          List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                               </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 244          String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                             </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 245          return new String[] {response};                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246      }                                                                                                             </span>
<span  style=""> 247                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248      /**                                                                                                           </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""> 249       * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances  </span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 250       * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 251       *                                                                                                            </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 252       * @param sectionClassName                                                                                    </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 253       * @param cmd                                                                                                 </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 254       * @param mainActions                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 255       */                                                                                                           </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 256      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 256      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainAcðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 257          if (isAddActionAllowed(sectionClassName, cmd)) {                                                          </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 258              mainActions.add(DefaultMainActions.ADD);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260      }                                                                                                             </span>
<span  style=""> 261                                                                                                                    </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style=""> 262      protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                            </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 263          // If the user does not have create permissions, we will not add the &quot;Add New&quot; button                     </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style=""> 264          boolean canCreate = true;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 265          try {                                                                                                     </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 266              adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);                  </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 267          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 268              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 269                  canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271          }                                                                                                         </span>
<span  style=""> 272                                                                                                                    </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 273          if (canCreate) {                                                                                          </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style=""> 274              checkReadOnly: {                                                                                      </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 275                  //check if all the metadata is read only                                                          </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 276                  for (Property property : cmd.getProperties()) {                                                   </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 277                      if (property.getMetadata() instanceof BasicFieldMetadata) {                                   </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 278                          if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||                </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 279                                  !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                   </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style=""> 280                              break checkReadOnly;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283                  }                                                                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 284                  canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286          }                                                                                                         </span>
<span  style=""> 287                                                                                                                    </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 288          if (canCreate) {                                                                                          </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style=""><abbr title=" 289              canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 289              canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectioðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290          }                                                                                                         </span>
<span  style=""> 291                                                                                                                    </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style=""> 292          return canCreate;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293      }                                                                                                             </span>
<span  style=""> 294                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 295      /**                                                                                                           </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""> 296       * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any</span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 297       * subcollections as operations on those collections require the parent level entity to first be saved and have"> 297       * subcollections as operations on those collections require the parent level entity to first be saved and havðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 298       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 298       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen whðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 299       * they can then perform operations on sub collections.                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 300       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 301       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 302       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 303       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 304       * @param pathVars                                                                                            </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 305       * @param entityType                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 306       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 307       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 308       */                                                                                                           </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 309      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                                   </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""> 310      public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 311              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 312              @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 313          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 314          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 315          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 316          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 316          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 317          ppr.setAddOperationInspect(true);                                                                         </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 318          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 319                                                                                                                    </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style=""><abbr title=" 320          // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 320          // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for thiðŸ”µ</abbr></span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 321          if (StringUtils.isBlank(entityType)) {                                                                    </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 322              if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                         </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 323                  entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324              } else {                                                                                              </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 325                  entityType = getDefaultEntityType();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 327          } else {                                                                                                  </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 328              entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329          }                                                                                                         </span>
<span  style=""> 330                                                                                                                    </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 331          EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                                 </span>
<span  style=""> 332                                                                                                                    </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""> 333          // We need to make sure that the ceiling entity is set to the interface and the specific entity type      </span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 334          // is set to the type we&#x27;re going to be creating.                                                         </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 335          entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                               </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 336          entityForm.setEntityType(entityType);                                                                     </span>
<span  style=""> 337                                                                                                                    </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""> 338          // When we initially build the class metadata (and thus, the entity form), we had all of the possible     </span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""> 339          // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the     </span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 340          // fields that are not applicable for this given entity type.                                             </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 341          formService.removeNonApplicableFields(cmd, entityForm, entityType);                                       </span>
<span  style=""> 342                                                                                                                    </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 343          modifyAddEntityForm(entityForm, pathVars);                                                                </span>
<span  style=""> 344                                                                                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 345          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 346          model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                        </span>
<span  style=""> 347                                                                                                                    </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 348          model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 349          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 350          model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 351          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 352          return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353      }                                                                                                             </span>
<span  style=""> 354                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 355      /**                                                                                                           </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""> 356       * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity.  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 357       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 358       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 359       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 360       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 361       * @param pathVars                                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 362       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 363       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 364       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 365       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 366       */                                                                                                           </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 367      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                                  </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 368      public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,                </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 369              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""> 370              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 371          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 372          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 373          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 374          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 374          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionðŸ”µ</abbr></span>
<span  style=""> 375                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 376          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 377          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 377          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 378          Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();                </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 379          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span  style=""> 380                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 381          if (result.hasErrors()) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 382              entityForm.clearFieldsMap();                                                                          </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 383              formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                               </span>
<span  style=""> 384                                                                                                                    </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 385              formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());                   </span>
<span  style=""> 386                                                                                                                    </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 387              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span  style=""> 388                                                                                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 389              model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 390              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 391              model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 392              model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 393              setModelAttributes(model, sectionKey);                                                                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 394              return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395          }                                                                                                         </span>
<span  style=""> 396                                                                                                                    </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 397          // Note that AJAX Redirects need the context path prepended to them                                       </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 398          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 398          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399      }                                                                                                             </span>
<span  style=""> 400                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 401      /**                                                                                                           </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 402       * Renders the main entity form for the specified entity                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 403       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 404       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 405       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 406       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 407       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 408       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 409       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 410       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 411       */                                                                                                           </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 412      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                                  </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 413      public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 414              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 415              @PathVariable(&quot;id&quot;) String id) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 416          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 417          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 418          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 419          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span  style=""> 420                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 421          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 422          Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];             </span>
<span  style=""> 423                                                                                                                    </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 424          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span  style=""> 425                                                                                                                    </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 426          EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                 </span>
<span  style=""> 427                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 428          if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 429              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 430          } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 431              modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432          }                                                                                                         </span>
<span  style=""> 433                                                                                                                    </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 434          if (request.getParameter(&quot;headerFlash&quot;) != null) {                                                        </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 435              model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436          }                                                                                                         </span>
<span  style=""> 437                                                                                                                    </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 438          // Set the sectionKey again incase this is a typed entity                                                 </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 439          entityForm.setSectionKey(sectionKey);                                                                     </span>
<span  style=""> 440                                                                                                                    </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 441          // Build the current url in the cast that this is a typed entity                                          </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 442          String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                            </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 443          int startIndex = request.getContextPath().length();                                                       </span>
<span  style=""> 444                                                                                                                    </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 445          // Remove the context path from servlet path                                                              </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 446          String currentUrl = originatingUri.substring(startIndex);                                                 </span>
<span  style=""> 447                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 448          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 449          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 450          model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                             </span>
<span  style=""> 451                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 452          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 453                                                                                                                    </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 454          // We want to replace author ids with their names                                                         </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 455          addAuditableDisplayFields(entityForm);                                                                    </span>
<span  style=""> 456                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 457          if (isAjaxRequest(request)) {                                                                             </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 458              entityForm.setReadOnly();                                                                             </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 459              model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                                   </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 460              model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                         </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 461              return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 462          } else {                                                                                                  </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 463              model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                            </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 464              model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                         </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 465              return &quot;modules/defaultContainer&quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467      }                                                                                                             </span>
<span  style=""> 468                                                                                                                    </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 469      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 469      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 470                                                                ClassMetadata cmd, Entity entity,                   </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""> 471                                                                List&lt;SectionCrumb&gt; crumbs) throws Exception {       </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 472          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 473          if (StringUtils.isEmpty(tabName)) {                                                                       </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 474              tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475          }                                                                                                         </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 476          return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477      }                                                                                                             </span>
<span  style=""> 478                                                                                                                    </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 479      private boolean isAddRequest(Entity entity) {                                                                 </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 480          ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                              </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""> 481          ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);        </span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 482          if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 483              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484          }                                                                                                         </span>
<span  style=""> 485                                                                                                                    </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 486          return resultHolder.getResult();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487      }                                                                                                             </span>
<span  style=""> 488                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 489      /**                                                                                                           </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 490       * Attempts to get the List Grid for the selected tab.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 491       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 492       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 493       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 494       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 495       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 496       * @param id                                                                                                  </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 497       * @param tabName                                                                                             </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 498       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 499       * @param entity                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 500       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 501       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 502       */                                                                                                           </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 503      @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                          </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 504      public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,            </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 505              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 506              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 507              @PathVariable(value = &quot;tabName&quot;) String tabName,                                                      </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 508              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                          </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 509              @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 510          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 511          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 512          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 513          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 514          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 515          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 516          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 517          entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                            </span>
<span  style=""> 518                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 519          if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 520              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 521          } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 522              modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523          }                                                                                                         </span>
<span  style=""> 524                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 525          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 526          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 527          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span  style=""> 528                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 529          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 530                                                                                                                    </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 531          model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                                </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 532          model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                             </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 533          return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534      }                                                                                                             </span>
<span  style=""> 535                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 536      /**                                                                                                           </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 537       * Builds JSON that looks like this:                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 538       *                                                                                                            </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 539       * {&quot;errors&quot;:                                                                                                 </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 540       *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                                 </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 541       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 542       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 543       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 544       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 545       *        },                                                                                                  </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 546       *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                                </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 547       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 548       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 549       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 550       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 551       *        }]                                                                                                  </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 552       * }                                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 553       *                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 554       */                                                                                                           </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 555      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)                  </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 556      public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 557              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 558              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 559              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                    </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 560              RedirectAttributes ra) throws Exception {                                                             </span>
<span  style=""> 561                                                                                                                    </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 562          saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                               </span>
<span  style=""> 563                                                                                                                    </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 564          JsonResponse json = new JsonResponse(response);                                                           </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 565          if (result.hasErrors()) {                                                                                 </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 566              populateJsonValidationErrors(entityForm, result, json);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567          }                                                                                                         </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 568          List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                           </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 569          if (CollectionUtils.isNotEmpty(dirtyList)) {                                                              </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 570              json.with(&quot;dirty&quot;, dirtyList);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571          }                                                                                                         </span>
<span  style=""> 572                                                                                                                    </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 573          ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                               </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 574          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 574          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(reðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 575          if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                         </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 576              return resultHolder.getResult();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577          }                                                                                                         </span>
<span  style=""> 578                                                                                                                    </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 579          return json.done();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580      }                                                                                                             </span>
<span  style=""> 581                                                                                                                    </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 582      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 582      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throwsðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 583          List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 584          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 585          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 586          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 587          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 587          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 588          ClassMetadata cmd = null;                                                                                 </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 589          Entity entity = null;                                                                                     </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 590          cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                             </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 591          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span  style=""> 592                                                                                                                    </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 593          for (Property p: entity.getProperties()) {                                                                </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 594              if (p.getIsDirty()) {                                                                                 </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 595                  dirtyList.add(p.getName());                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597          }                                                                                                         </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 598          return dirtyList;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599      }                                                                                                             </span>
<span  style=""> 600                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 601      /**                                                                                                           </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""> 602       * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with   </span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 603       * error fields highlighted. On a successful save, it will refresh the entity page.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 604       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 605       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 606       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 607       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 608       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 609       * @param id                                                                                                  </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 610       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 611       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 612       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 613       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 614       */                                                                                                           </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 615      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                                 </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 616      public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,               </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 617              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 618              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 619              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 620              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 621          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 622          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 623          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 624          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 624          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 625          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 626                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 627          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span  style=""> 628                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 629          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 629          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 630          Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span  style=""> 631                                                                                                                    </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 632          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 633          if (result.hasErrors()) {                                                                                 </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 634              model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                               </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 635              model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                         </span>
<span  style=""> 636                                                                                                                    </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 637              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 637              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 638              entityForm.clearFieldsMap();                                                                          </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 639              formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);                </span>
<span  style=""> 640                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 641              if (isAddRequest(entity)) {                                                                           </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 642                  modifyAddEntityForm(entityForm, pathVars);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 643              } else {                                                                                              </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 644                  modifyEntityForm(entityForm, pathVars);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645              }                                                                                                     </span>
<span  style=""> 646                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 647              model.addAttribute(&quot;entity&quot;, entity);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 648              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span  style=""> 649                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 650              setModelAttributes(model, sectionKey);                                                                </span>
<span  style=""> 651                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 652              if (isAjaxRequest(request)) {                                                                         </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 653                  entityForm.setReadOnly();                                                                         </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 654                  model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                               </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 655                  model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                     </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 656                  return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 657              } else {                                                                                              </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 658                  model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                        </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 659                  model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                     </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 660                  return &quot;modules/defaultContainer&quot;;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662          }                                                                                                         </span>
<span  style=""> 663                                                                                                                    </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 664          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                                   </span>
<span  style=""> 665                                                                                                                    </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 666          return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667      }                                                                                                             </span>
<span  style=""> 668                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 669      /**                                                                                                           </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 670       * Attempts to remove the given entity.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 671       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 672       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 673       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 674       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 675       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 676       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 677       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 678       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 679       */                                                                                                           </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 680      @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                          </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 681      public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,             </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 682              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 683              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 684              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 685              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 686          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 687          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 688          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span  style=""> 689                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 690          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 690          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 691          Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 692          // Removal does not normally return an Entity unless there is some validation error                       </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 693          if (entity != null) {                                                                                     </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 694              entityFormValidator.validate(entityForm, entity, result);                                             </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 695              if (result.hasErrors()) {                                                                             </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 696                  // Create a flash attribute for the unsuccessful delete                                           </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 697                  FlashMap fm = new FlashMap();                                                                     </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 698                  fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                                     </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 699                  fm.put(&quot;headerFlashAlert&quot;, true);                                                                 </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 700                  request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                           </span>
<span  style=""> 701                                                                                                                    </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 702                  // Re-look back up the entity so that we can return something populated                           </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 703                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 703                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 704                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 705                  entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];            </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 706                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 706                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 707                  entityForm.clearFieldsMap();                                                                      </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 708                  formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);            </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 709                  modifyEntityForm(entityForm, pathVars);                                                           </span>
<span  style=""> 710                                                                                                                    </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 711                  return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 712                          .done();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714          }                                                                                                         </span>
<span  style=""> 715                                                                                                                    </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 716          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                                 </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 717          ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                           </span>
<span  style=""> 718                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 719          if (isAjaxRequest(request)) {                                                                             </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 720              // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request                </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""> 721              return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 722          } else {                                                                                                  </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 723              return &quot;redirect:/&quot; + sectionKey;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 724          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725      }                                                                                                             </span>
<span  style=""> 726                                                                                                                    </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 727      @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                          </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 728      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 728      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletRespðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 729              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 730              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 731              @RequestParam String ids,                                                                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 732              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 733          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 734          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 735          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 736          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 736          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectiðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""> 737          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 738          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 739          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style=""> 740                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 741          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 742          ppr.setStartIndex(getStartIndex(requestParams));                                                          </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 743          ppr.setMaxIndex(getMaxIndex(requestParams));                                                              </span>
<span  style=""> 744                                                                                                                    </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 745          if (md instanceof BasicFieldMetadata) {                                                                   </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 746              String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                                    </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 747              String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();                   </span>
<span  style=""> 748                                                                                                                    </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 749              List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));            </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 750              ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));                        </span>
<span  style=""> 751                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 752              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 753              Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                                      </span>
<span  style=""> 754                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 755              for (Entity e : drs.getRecords()) {                                                                   </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 756                  String id = e.getPMap().get(idProp).getValue();                                                   </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 757                  String disp = e.getPMap().get(displayProp).getDisplayValue();                                     </span>
<span  style=""> 758                                                                                                                    </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 759                  if (StringUtils.isBlank(disp)) {                                                                  </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 760                      disp = e.getPMap().get(displayProp).getValue();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761                  }                                                                                                 </span>
<span  style=""> 762                                                                                                                    </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 763                  returnMap.put(id,  disp);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764              }                                                                                                     </span>
<span  style=""> 765                                                                                                                    </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 766              return returnMap;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767          }                                                                                                         </span>
<span  style=""> 768                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 769          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770      }                                                                                                             </span>
<span  style=""> 771                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 772      /**                                                                                                           </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 773       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 773       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of pðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 774       * then this method is invoked when a user clicks on the name of the default category field.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 775       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 776       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 777       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 778       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 779       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 780       * @param collectionField                                                                                     </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 781       * @param id                                                                                                  </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 782       * @return                                                                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 783       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 784       */                                                                                                           </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 785      @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)                        </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""> 786      public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 787              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 788              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 789              @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 790          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 791          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 792          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 793          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 793          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 794          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 795          BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                            </span>
<span  style=""> 796                                                                                                                    </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 797          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 797          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(),ðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 798          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 798          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrlðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 799          Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                                       </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 800          varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                            </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 801          return viewEntityForm(request, response, model, varsForField, id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802      }                                                                                                             </span>
<span  style=""> 803                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 804      @RequestMapping(                                                                                              </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 805              value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,                       </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 806              method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 807      )                                                                                                             </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""> 808      public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 809                                          @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 810                                          @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 811                                          @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 812                                          @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 813                                          @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 814                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 814                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style=""> 815                                                                                                                    </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 816          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 816          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817      }                                                                                                             </span>
<span  style=""> 818                                                                                                                    </span>
<span  style=""> 819                                                                                                                    </span>
















<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 820      /**                                                                                                           </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 821       * Returns the records for a given collectionField filtered by a particular criteria                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 822       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 823       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 824       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 825       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 826       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 827       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 828       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 829       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 830       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 831       */                                                                                                           </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 832      @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                             </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""> 833      public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 834              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 835              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 836              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 837              @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 838          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 839          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 840          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 841          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 841          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""> 842          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 843          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style=""> 844                                                                                                                    </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 845          ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);                        </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""> 846          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 847                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 848          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 849          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 849          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 850          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style=""> 851                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 852          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style=""> 853                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 854          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 855          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 856          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857      }                                                                                                             </span>
<span  style=""> 858                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 859      /**                                                                                                           </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 860       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 860       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 861       * of this call depending on the type of the specified collection field.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 862       *                                                                                                            </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 863       * &lt;ul&gt;                                                                                                       </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 864       *  &lt;li&gt;                                                                                                      </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 865       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 865       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the useðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 866       *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 866       *    enter information and associate the record with this collection. Used by fields such as ProductAttributeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 867       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 868       *  &lt;li&gt;                                                                                                      </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 869       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 869       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and seðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 870       *    Used by fields such as &quot;allParentCategories&quot;.                                                           </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 871       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 872       *  &lt;li&gt;                                                                                                      </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 873       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 873       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entitðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 874       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 874       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the opeðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 875       *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 875       *    on an adorned field, which may carry extra meta-information about the created relationship, such as ordeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 876       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 877       *  &lt;li&gt;                                                                                                      </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 878       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 878       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity aðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 879       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 879       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specifðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 880       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 880       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 881       *    to linking an entity, provide extra fields, such as a promotional message.                              </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 882       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 883       *  &lt;li&gt;                                                                                                      </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 884       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 884       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This fielðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 885       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 885       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 886       *    entity. Used by fields such as the mediaMap on a Sku.                                                   </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 887       *  &lt;/li&gt;                                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 888       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 889       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 890       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 891       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 892       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 893       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 894       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 895       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 896       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 897       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 898       */                                                                                                           </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 899      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                         </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""> 900      public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 901              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 902              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 903              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 904              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 905          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 906          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 907          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""> 908          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style=""> 909                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 910          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 911          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style=""> 912                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style=""> 913          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style=""> 914                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style=""> 915                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style=""> 916                  .withMaxIndex(getMaxIndex(requestParams))                                                         </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style=""> 917                  .withLastId(getLastId(requestParams))                                                             </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style=""> 918                  .withFirstId(getFirstId(requestParams))                                                           </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style=""> 919                  .withUpperCount(getUpperCount(requestParams))                                                     </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style=""> 920                  .withLowerCount(getLowerCount(requestParams))                                                     </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style=""> 921                  .withPageSize(getPageSize(requestParams))                                                         </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style=""> 922                  .withPresentationFetch(true);                                                                     </span>
<span  style=""> 923                                                                                                                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style=""> 924          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style=""> 925              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style=""> 926              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 927                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""> 928                  // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types</span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style=""> 929                  // for this entity.                                                                               </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style=""> 930                  String entityType = null;                                                                         </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style=""> 931                  if (requestParams.containsKey(&quot;entityType&quot;)) {                                                    </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style=""> 932                      entityType = requestParams.get(&quot;entityType&quot;).get(0);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933                  }                                                                                                 </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 934                  if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 935                      if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                 </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 936                          entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 937                      } else {                                                                                      </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 938                          entityType = getDefaultEntityType();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 939                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 940                  } else {                                                                                          </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 941                      entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942                  }                                                                                                 </span>
<span  style=""> 943                                                                                                                    </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 944                  if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 945                      List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 946                      model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                               </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style=""> 947                      model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 948                      model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());     </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 949                      String requestUri = request.getRequestURI();                                                  </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""><abbr title=" 950                      if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {"> 950                      if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) ðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 951                          requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 951                          requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.lengthðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952                      }                                                                                             </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 953                      model.addAttribute(&quot;currentUri&quot;, requestUri);                                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 954                      model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 955                      setModelAttributes(model, sectionKey);                                                        </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 956                      return &quot;modules/modalContainer&quot;;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 957                  } else {                                                                                          </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style=""> 958                      ppr = ppr.withCeilingEntityClassname(entityType);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960              }                                                                                                     </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style=""> 961          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title=" 962              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);"> 962              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(requestðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style=""> 963              if (result.equals(ExtensionResultStatusType.HANDLED)) {                                               </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style=""> 964                  model.addAttribute(&quot;entityId&quot;, id);                                                               </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style=""> 965                  model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                                     </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style=""> 966                  model.addAttribute(&quot;collectionField&quot;, collectionField);                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 967                  return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969          }                                                                                                         </span>
<span  style=""> 970                                                                                                                    </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style=""> 971          //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                                 </span>
<span  style=""> 972                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 973          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style=""> 974                                                                                                                    </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title=" 975          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);"> 975          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionPrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976      }                                                                                                             </span>
<span  style=""> 977                                                                                                                    </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title=" 978      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)"> 978      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POSðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title=" 979      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 979      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse resðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 980              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 981              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 982              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style=""> 983              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 984          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 985          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 986          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 987          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 987          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 988          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 989          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style=""> 990          Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style=""> 991          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title=" 992              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,"> 992              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style=""> 993                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style=""> 994                      collectionItemId, responseMap);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 995          }                                                                                                         </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style=""> 996          return responseMap;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 997      }                                                                                                             </span>
<span  style=""> 998                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 999      /**                                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1000       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1001       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1002       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1003       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1004       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1005       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1006       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1007       * @param requestParams                                                                                       </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1008       * @return Json collection data                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1009       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1010       */                                                                                                           </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1011      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)                   </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1012      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1012      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1013              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1014              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1015              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1016              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1017          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1018          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1019          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style="">1020          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1021                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1022          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1023          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1024                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1025          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1026                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1027                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1028 -                .withMaxIndex(getMaxIndex(requestParams))                                                         </span>
<span class="245535740239558332" onmouseenter="enter('245535740239558332');" onmouseout="out('245535740239558332');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1029 -                .withCustomCriteria(buildSelectizeCustomCriteria());                                              </span>
<span class="-115113180096268460" onmouseenter="enter('-115113180096268460');" onmouseout="out('-115113180096268460');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1030 +                .withMaxIndex(getMaxIndex(requestParams));                                                        </span>
<span class="1857239787668878379" onmouseenter="enter('1857239787668878379');" onmouseout="out('1857239787668878379');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1031 +        String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCriteria()))">1031 +        String[] both = Stream.concat(Arrays.stream(ppr.getCustomCriteria()), Arrays.stream(buildSelectizeCustomCrðŸ”µ</abbr></span>
<span class="8925682901439482297" onmouseenter="enter('8925682901439482297');" onmouseout="out('8925682901439482297');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1032 +                .toArray(String[]::new);                                                                          </span>
<span class="-226841645969872938" onmouseenter="enter('-226841645969872938');" onmouseout="out('-226841645969872938');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1033 +        ppr = ppr.withCustomCriteria( both);                                                                      </span>
<span  style="">1034                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1035          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1036              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1037              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1038              ppr.setSectionEntityField(collectionField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1039          }                                                                                                         </span>
<span  style="">1040                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1041          DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                     </span>
<span  style="">1042                                                                                                                    </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style="">1043          return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1044      }                                                                                                             </span>
<span  style="">1045                                                                                                                    </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1046      protected String[] buildSelectizeCustomCriteria() {                                                           </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1047          return new String[]{ IS_SELECTIZE_REQUEST };                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048      }                                                                                                             </span>
<span  style="">1049                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1050      /**                                                                                                           </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1051       * Adds the requested collection item via Selectize                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1052       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1053       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1054       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1055       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1056       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1057       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1058       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1059       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1060       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1061       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1062       */                                                                                                           </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1063      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)              </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1064      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1064      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1065              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1066              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1067              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1068              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1069          Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1070          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1071          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1072          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1073          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1073          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1074          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1075                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1076          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1077              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1078              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1079                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081          }                                                                                                         </span>
<span  style="">1082                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1083          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1083          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1084          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1085          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1086          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="">1087                                                                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1088          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1089          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1089          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1090          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1091          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1092                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1093          if (result.hasErrors()) {                                                                                 </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1094              returnVal.put(&quot;error&quot;, result.getFieldError());                                                       </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1095              return returnVal;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1096          }                                                                                                         </span>
<span  style="">1097                                                                                                                    </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1098          if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                            </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1099              returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1100          }                                                                                                         </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1101          return returnVal;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1102      }                                                                                                             </span>
<span  style="">1103                                                                                                                    </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1104      protected void declareShouldIgnoreAdditionStatusFilter() {                                                    </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1105          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1105          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditioðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1106          additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1107      }                                                                                                             </span>
<span  style="">1108                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1109      /**                                                                                                           </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1110       * Adds the requested collection item                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1111       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1112       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1113       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1114       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1115       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1116       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1117       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1118       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1119       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1120       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1121       */                                                                                                           </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1122      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)                        </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style="">1123      public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1124              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1125              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1126              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1127              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1128          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1129          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1130          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1131          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1131          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1132          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1133                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1134          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1135              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1136              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1137                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139          }                                                                                                         </span>
<span  style="">1140                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1141          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1141          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1142          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1143          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1144          service.clearEntityManager();                                                                             </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1145          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1146          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1146          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1147          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1148          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1149                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1150          if (result.hasErrors()) {                                                                                 </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1151              FieldMetadata md = collectionProperty.getMetadata();                                                  </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1152              ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                      </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1153              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1153              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectiðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1154                      md, ppr, entityForm, savedEntity);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1155          }                                                                                                         </span>
<span  style="">1156                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1157          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1158          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1158          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1159          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style="">1160                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1161          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1162          model.addAttribute(&quot;actualEntityId&quot;, id);                                                                 </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1163          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1164          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165      }                                                                                                             </span>
<span  style="">1166                                                                                                                    </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1167      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)                   </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1168      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1168      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, MðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1169              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1170              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1171              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1172              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1173          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1174          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1175          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1176          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1176          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1177          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1178                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1179          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1180              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1181              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1182                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1184          }                                                                                                         </span>
<span  style="">1185                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1186          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1186          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1187          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1188          entity.setIsPreAdd(true);                                                                                 </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1189          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1190          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1190          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1191          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span  style="">1192                                                                                                                    </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1193          return new JsonResponse(response)                                                                         </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1194                  .with(&quot;status&quot;, &quot;complete&quot;)                                                                       </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1195                  .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1196                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197      }                                                                                                             </span>
<span  style="">1198                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1199      /**                                                                                                           </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1200       * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1200       * Builds out all of the model information needed for showing the add modal for collection items on both the iðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1201       * as well as after a POST with validation errors                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1202       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1203       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1204       * @param model                                                                                               </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1205       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1206       * @param collectionField                                                                                     </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1207       * @param sectionKey                                                                                          </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1208       * @param collectionProperty                                                                                  </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1209       * @param md                                                                                                  </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1210       * @param ppr                                                                                                 </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1211       * @return the appropriate view to display for the modal                                                      </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1212       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1212       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityFðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1213       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1213       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MulðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1214       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1215       */                                                                                                           </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style="">1216      protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,        </span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style="">1217              Model model, String id, String collectionField, String sectionKey, Property collectionProperty,       </span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1218              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1218              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceEðŸ”µ</abbr></span>
<span  style="">1219                                                                                                                    </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1220          // For requests to add a new collection item include the main class that the subsequent request comes from.">1220          // For requests to add a new collection item include the main class that the subsequent request comes fromðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1221          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1221          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style="">1222          // persistence item but map and adorned target lookups make a standard persistence request. This solution </span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1223          // fixes all cases.                                                                                       </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1224          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1225          ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                                    </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1226          ppr.setAddOperationInspect(true);                                                                         </span>
<span  style="">1227                                                                                                                    </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1228          if (entityForm != null) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1229              entityForm.clearFieldsMap();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230          }                                                                                                         </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1231          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1232          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1233              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1234                                                                                                                    </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style="">1235              // When adding items to basic collections, we will sometimes show a form to persist a new record      </span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1236              // and sometimes show a list grid to allow the user to associate an existing record.                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1237              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1238                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1238                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1239                  if (entityForm == null) {                                                                         </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1240                      entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);                  </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1241                      entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());                        </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1242                      entityForm.setEntityType(ppr.getCeilingEntityClassname());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1243                  } else {                                                                                          </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1244                      formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);                </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1245                      formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246                  }                                                                                                 </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1247                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1247                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassnamðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1248                  entityForm.getTabs().iterator().next().getIsVisible();                                            </span>
<span  style="">1249                                                                                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1250                  model.addAttribute(&quot;entityForm&quot;, entityForm);                                                     </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1251                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1252              } else {                                                                                              </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1253                  DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                             </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1254                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1254                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1255                  listGrid.setPathOverride(request.getRequestURL().toString());                                     </span>
<span  style="">1256                                                                                                                    </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1257                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1257                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1258                      listGrid.removeAllRowActions();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1259                  }                                                                                                 </span>
<span  style="">1260                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1261                  model.addAttribute(&quot;listGrid&quot;, listGrid);                                                         </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1262                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263              }                                                                                                     </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1264          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1265              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1266                                                                                                                    </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1267              // Even though this field represents an adorned target collection, the list we want to show in the modal">1267              // Even though this field represents an adorned target collection, the list we want to show in the modðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1268              // is the standard list grid for the target entity of this field                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1269              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1270              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1271              ppr.setSectionEntityField(collectionField);                                                           </span>
<span  style="">1272                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1273              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1273              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1274                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1275              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1276              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1276              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectiðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1277              listGrid.setSubCollectionFieldName(collectionField);                                                  </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1278              listGrid.setPathOverride(request.getRequestURL().toString());                                         </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1279              listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());              </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1280              if (entityForm == null) {                                                                             </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1281                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1281                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style="">1282                  entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1283              } else {                                                                                              </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1284                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1284                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, ðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1285                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1286              }                                                                                                     </span>
<span  style="">1287                                                                                                                    </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1288              listGrid.setListGridType(ListGrid.Type.ADORNED);                                                      </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1289              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1290                  if (entry.getValue().getIsVisible()) {                                                            </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1291                      listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1292                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1293                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294              }                                                                                                     </span>
<span  style="">1295                                                                                                                    </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1296              // This is part of an add, so we want to be able to filter/sort the listgrid                          </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1297              listGrid.setIsSortable(false);                                                                        </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1298              listGrid.setCanFilterAndSort(true);                                                                   </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1299              listGrid.removeAllRowActions();                                                                       </span>
<span  style="">1300                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1301              model.addAttribute(&quot;listGrid&quot;, listGrid);                                                             </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1302              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1303              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                          </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1304          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1305              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1306              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1306              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1307                                                                                                                    </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1308              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1309                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1310              } else {                                                                                              </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1311                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1312                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1313              }                                                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1314              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1315              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316          }                                                                                                         </span>
<span  style="">1317                                                                                                                    </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1318          // Set the parent id on the entity form                                                                   </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1319          if (entityForm != null) {                                                                                 </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1320              entityForm.setParentId(id);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321          }                                                                                                         </span>
<span  style="">1322                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1323          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1324          model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());                     </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1325          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1326          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1327          return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1328      }                                                                                                             </span>
<span  style="">1329                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1330      /**                                                                                                           </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1331       * Shows the appropriate modal dialog to edit the selected collection item                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1332       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1333       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1334       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1335       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1336       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1337       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1338       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1339       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1340       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1341       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1342       */                                                                                                           </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1343      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1343      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1344      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1345              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1346              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1347              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1348              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1349              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1350          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1350          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1351                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352      }                                                                                                             </span>
<span  style="">1353                                                                                                                    </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1354      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET)          </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1355      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1356              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1357              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1358              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1359              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style="">1360          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,    </span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1361                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1362      }                                                                                                             </span>
<span  style="">1363                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1364      /**                                                                                                           </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1365       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1365       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as reaðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1366       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1367       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1368       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1369       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1370       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1371       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1372       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1373       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1374       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1375       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1376       */                                                                                                           </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1377      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1377      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMeðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1378      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1379              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1380              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1381              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1382              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1383              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1384          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1384          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1385                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1386                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1387          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1388          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1389          addAuditableDisplayFields(ef);                                                                            </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1390          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1391          ef.setReadOnly();                                                                                         </span>
<span  style="">1392                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1393          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1394      }                                                                                                             </span>
<span  style="">1395                                                                                                                    </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style="">1396      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)     </span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1397      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1398              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1399              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1400              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1401              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1402          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1402          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1403                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1404                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1405          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1406          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1407          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1408          ef.setReadOnly();                                                                                         </span>
<span  style="">1409                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1410          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411      }                                                                                                             </span>
<span  style="">1412                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1413      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1413      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1414              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1414              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1415          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1415          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416      }                                                                                                             </span>
<span  style="">1417                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1418      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1418      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1419              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1419              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceExceðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1420          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1420          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1421      }                                                                                                             </span>
<span  style="">1422                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1423      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1423      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1424                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1424                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1425          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1425          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1426      }                                                                                                             </span>
<span  style="">1427                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1428      /**                                                                                                           </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1429       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1429       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform aðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1430       * which are optional. If they are not passed in then they are automatically looked up                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1431       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1432       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1433       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1434       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1435       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1436       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1437       * @param collectionItemId                                                                                    </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1438       * @param modalHeaderType                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1439       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1440       * @param entity                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1441       * @return                                                                                                    </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1442       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1443       */                                                                                                           </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1444      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1444      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-7524579279249503431" onmouseenter="enter('-7524579279249503431');" onmouseout="out('-7524579279249503431');" style=""><abbr title="1445              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1445              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1446          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1447          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1448          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1449          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1449          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1450          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1451          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1452          SectionCrumb nextCrumb = new SectionCrumb();                                                              </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1453          if (md instanceof MapMetadata) {                                                                          </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1454              nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1455          } else {                                                                                                  </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1456              nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457          }                                                                                                         </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1458          nextCrumb.setSectionId(collectionItemId);                                                                 </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1459          if (!sectionCrumbs.contains(nextCrumb)) {                                                                 </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1460              sectionCrumbs.add(nextCrumb);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461          }                                                                                                         </span>
<span  style="">1462                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1463          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1463          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1464          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1464          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1465                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1466          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1467                                                                                                                    </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1468          if (md instanceof BasicCollectionMetadata &amp;&amp;                                                              </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1469                  (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||               </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style="">1470                          ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) { </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1471              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1472                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1473              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1473              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1474              if (entity == null) {                                                                                 </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1475                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1475                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476              }                                                                                                     </span>
<span  style="">1477                                                                                                                    </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1478              String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                              </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1479              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1479              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1480              if (entityForm == null) {                                                                             </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style=""><abbr title="1481                  entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1481                  entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbsðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1482              } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1483                  entityForm.clearFieldsMap();                                                                      </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style=""><abbr title="1484                  formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1484                  formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbðŸ”µ</abbr></span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="">1485                  //remove all the actions since we&#x27;re not trying to redisplay them on the form                     </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1486                  entityForm.removeAllActions();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487              }                                                                                                     </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1488              entityForm.removeAction(DefaultEntityFormActions.DELETE);                                             </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1489              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1490              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1491              model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                             </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1492          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1493              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1494                                                                                                                    </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1495              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1496                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1497                      collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0];          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498              }                                                                                                     </span>
<span  style="">1499                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1500              boolean populateTypeAndId = true;                                                                     </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style="">1501              boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);</span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1502              if (entityForm == null) {                                                                             </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1503                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1503                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem,ðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1504                  entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                                     </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1505                  entityForm.addAction(DefaultAdornedEntityFormActions.Save);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1506              } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1507                  entityForm.clearFieldsMap();                                                                      </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1508                  String entityType = entityForm.getEntityType();                                                   </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1509                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1509                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, ðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1510                  entityForm.setEntityType(entityType);                                                             </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1511                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512              }                                                                                                     </span>
<span  style="">1513                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1514              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1515              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1515              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1516                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1517                      collectionItemId, responseMap);                                                               </span>
<span  style="">1518                                                                                                                    </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1519              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1519              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is useðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style="">1520              //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).     </span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1521              entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                                   </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1522              entityForm.setTranslationId(alternateId);                                                             </span>
<span  style="">1523                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1524              ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();           </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1525              for (String field : fmd.getMaintainedAdornedTargetFields()) {                                         </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1526                  if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1527                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528                  }                                                                                                 </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1529                  Property p = cmd.getPMap().get(field);                                                            </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1530                  if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {                    </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1531                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1531                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request mustðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1532                      // directly on the first adorned target collection. Because of this, we need the actual id property">1532                      // directly on the first adorned target collection. Because of this, we need the actual id proðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1533                      // from the entity that models the adorned target relationship, and not the id of the target object.">1533                      // from the entity that models the adorned target relationship, and not the id of the target oðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1534                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1534                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1535                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1536                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1537                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1538                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1538                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1539                              ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);               </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1540                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1541                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1542                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1543                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1543                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1544                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1545                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1545                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546                      }                                                                                             </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1547                  } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                                 </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1548                      // See above comment for AdornedTargetCollectionMetadata                                      </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1549                      MapMetadata mmd = (MapMetadata) p.getMetadata();                                              </span>
<span  style="">1550                                                                                                                    </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1551                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1551                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1552                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1553                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1554                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1555                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1555                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1556                              mmd.getTargetClass(), sectionCrumbs);                                                 </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1557                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1558                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1559                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1560                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1560                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1561                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1562                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1562                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1563                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1564                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565              }                                                                                                     </span>
<span  style="">1566                                                                                                                    </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1567              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1568              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">1569                                                                                                                    </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1570              boolean atLeastOneBasicField = false;                                                                 </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1571              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1572                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1572                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !reðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1573                      atLeastOneBasicField = true;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1574                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1576              }                                                                                                     </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1577              if (!atLeastOneBasicField) {                                                                          </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1578                  entityForm.removeAction(DefaultEntityFormActions.SAVE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579              }                                                                                                     </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1580              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1581              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1582              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1583          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1584              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span  style="">1585                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1586              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1586              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1587              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1588                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1589                      collectionItemId, sectionCrumbs, null).getEntity();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1590              }                                                                                                     </span>
<span  style="">1591                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1592              boolean populateTypeAndId = true;                                                                     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1593              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1594                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1595              } else {                                                                                              </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1596                  //save off the prior key before clearing out the fields map as it will not appear                 </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1597                  //back on the saved entity                                                                        </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1598                  String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                                    </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1599                  entityForm.clearFieldsMap();                                                                      </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1600                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1601                  entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                              </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1602                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603              }                                                                                                     </span>
<span  style="">1604                                                                                                                    </span>
<span class="5318672738793745768" onmouseenter="enter('5318672738793745768');" onmouseout="out('5318672738793745768');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1605 +            //For MappedCollections, we need to be specific on what ceilingEntity and translationId is used.      </span>
<span class="2806798156222000634" onmouseenter="enter('2806798156222000634');" onmouseout="out('2806798156222000634');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1606 +            //It should be the entity and referenced Id of the value entity (not the target entity and Id).       </span>
<span class="6626299943516834841" onmouseenter="enter('6626299943516834841');" onmouseout="out('6626299943516834841');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1607 +            if (entityForm.getCeilingEntityClassname() == null) {                                                 </span>
<span class="7267210175865484771" onmouseenter="enter('7267210175865484771');" onmouseout="out('7267210175865484771');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1608 +                entityForm.setCeilingEntityClassname(fmd.getValueClassName());                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1609 +            }                                                                                                     </span>
<span class="5641028696522950745" onmouseenter="enter('5641028696522950745');" onmouseout="out('5641028696522950745');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1610 +            entityForm.setTranslationId(collectionItemId);                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1611 +                                                                                                                  </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1612              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1613              formService.populateMapEntityFormFields(entityForm, entity);                                          </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1614              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1615              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1616              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617          }                                                                                                         </span>
<span  style="">1618                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1619          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1620          model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                                   </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1621          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1622          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1623          return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624      }                                                                                                             </span>
<span  style="">1625                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1626      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1627       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1628       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1629       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1630       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1631       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1632       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1633       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1634       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1635       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1635       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1636       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1637       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1638       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1639       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1640       */                                                                                                           </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1641      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)         </span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1642      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1643              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1644              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1645              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1646              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1647              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1648              BindingResult result) throws Exception {                                                              </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1649          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1649          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1650      }                                                                                                             </span>
<span  style="">1651                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1652      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1653       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1654       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1655       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1656       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1657       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1658       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1659       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1660       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1661       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1661       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1662       * @param entityForm                                                                                          </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1663       * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1663       * @param alternateId in the case of adorned target collections, this is the primary key value of the collectiðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1664       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1665       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1666       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1667       */                                                                                                           </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1668      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1668      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1669      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1670              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1671              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1672              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1673              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1674              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1675              @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                                </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1676              BindingResult result) throws Exception {                                                              </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1677          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1678          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1679          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1680          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1680          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1681          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1682                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1683          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1683          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1684          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1685          service.clearEntityManager();                                                                             </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1686          // First, we must save the collection entity                                                              </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1687          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1687          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1688          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1689          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1690                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1691          if (result.hasErrors()) {                                                                                 </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1692              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1692              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alterðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1693                      ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694          }                                                                                                         </span>
<span  style="">1695                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1696          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1697          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1698          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1698          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">1699                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1700          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1701          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1702          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1703          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1704      }                                                                                                             </span>
<span  style="">1705                                                                                                                    </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style="">1706      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)</span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1707      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1708              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1709              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1710              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1711              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1712              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1713              @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                             </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1714          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1714          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715      }                                                                                                             </span>
<span  style="">1716                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1717      /**                                                                                                           </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style="">1718       * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections </span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style="">1719       * where a sort field is specified -- any other invocation is incorrect and will result in an exception.      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1720       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1721       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1722       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1723       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1724       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1725       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1726       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1727       * @param collectionItemId                                                                                    </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1728       * @return an object explaining the state of the operation                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1729       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1730       */                                                                                                           </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1731      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1731      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1732      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1733              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1734              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1735              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1736              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1737              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1738              @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                                </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1739              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1740          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1741          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1742          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1743          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1743          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1744          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1745          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1746                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1747          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1747          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1748          ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                                        </span>
<span  style="">1749                                                                                                                    </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1750          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1750          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1751                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1752          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1753                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1754          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1755              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1756              AdornedTargetList atl = ppr.getAdornedList();                                                         </span>
<span  style="">1757                                                                                                                    </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1758              // Get an entity form for the entity                                                                  </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1759              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1759              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style="">1760              Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,   </span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style="">1761                      collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})        </span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1762                      .getDynamicResultSet().getRecords()[0];                                                       </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1763              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1764              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">1765                                                                                                                    </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1766              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1766              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indeðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1767              int sequenceValue = Integer.parseInt(newSequence) + 1;                                                </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1768              Field field = entityForm.findField(atl.getSortField());                                               </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1769              field.setValue(String.valueOf(sequenceValue));                                                        </span>
<span  style="">1770                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1771              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1772              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1772              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1773              Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());             </span>
<span  style="">1774                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1775              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1776              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1777              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1778              return responseMap;                                                                                   </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1779          } else if (md instanceof BasicCollectionMetadata) {                                                       </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">1780              BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                            </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1781              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1782              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1782              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().geðŸ”µ</abbr></span>
<span  style="">1783                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1784              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1784              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1785              EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);              </span>
<span class="2758594966987635918" onmouseenter="enter('2758594966987635918');" onmouseout="out('2758594966987635918');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1786 +            boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentAdminUser(), entity);">1786 +            boolean listGridReadOnly = !rowLevelSecurityService.canUpdate(adminRemoteSecurityService.getPersistentðŸ”µ</abbr></span>
<span class="8701882977725374051" onmouseenter="enter('8701882977725374051');" onmouseout="out('8701882977725374051');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1787 +            if(listGridReadOnly){                                                                                 </span>
<span class="2312726484157116526" onmouseenter="enter('2312726484157116526');" onmouseout="out('2312726484157116526');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1788 +                        throw new SecurityServiceException();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1789 +            }                                                                                                     </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1790              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1791                  Field f = new Field()                                                                             </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">1792                          .withName(cd.getSortProperty())                                                           </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1793                          .withFieldType(SupportedFieldType.HIDDEN.toString());                                     </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1794                  entityForm.addHiddenField(mainMetadata, f);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1795              }                                                                                                     </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1796              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span  style="">1797                                                                                                                    </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1798              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1799                  int sequenceValue = Integer.parseInt(newSequence) + 1;                                            </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1800                  Field field = entityForm.findField(cd.getSortProperty());                                         </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1801                  field.setValue(String.valueOf(sequenceValue));                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1802              }                                                                                                     </span>
<span  style="">1803                                                                                                                    </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1804              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1804              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1805              Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());           </span>
<span  style="">1806                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1807              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1808              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1809              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1810              return responseMap;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1811          } else {                                                                                                  </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1812              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1812              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1813          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1814      }                                                                                                             </span>
<span  style="">1815                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1816      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1817       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1818       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1819       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1819       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1820       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1821       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1822       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1823       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1824       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1825       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1826       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1827       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1828       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1829       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1830       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1831       */                                                                                                           </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style="">1832      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)  </span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">1833      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1834              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1835              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1836              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1837              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1838          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1838          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, nulðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1839      }                                                                                                             </span>
<span  style="">1840                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1841      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1842       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1843       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1844       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1844       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1845       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1846       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1847       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1848       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1849       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1850       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1851       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1852       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1853       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1854       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1855       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1856       */                                                                                                           </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="1857      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">1857      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">1858      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1859              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1860              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1861              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1862              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1863              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1864          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1865          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1866          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1867          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1867          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1868          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1869                                                                                                                    </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">1870          String priorKey = request.getParameter(&quot;key&quot;);                                                            </span>
<span  style="">1871                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1872          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1872          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1873          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1874          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1875          service.clearEntityManager();                                                                             </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">1876          // First, we must remove the collection entity                                                            </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="1877          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">1877          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style="">1878          if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {   </span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">1879              String error = &quot;There was an error removing the whatever&quot;;                                            </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">1880              if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {             </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">1881                  // If we failed, we&#x27;ll return some JSON with the first error                                      </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="1882                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">1882                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().gðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style="">1883              } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) { </span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">1884                  error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1885              }                                                                                                     </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1886              return new JsonResponse(response)                                                                     </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">1887                  .with(&quot;status&quot;, &quot;error&quot;)                                                                          </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">1888                  .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1889                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1890          }                                                                                                         </span>
<span  style="">1891                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1892          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1893          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1894          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1894          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">1895                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1896          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1897          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1898          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1899          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1900      }                                                                                                             </span>
<span  style="">1901                                                                                                                    </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">1902      public void addAuditableDisplayFields(EntityForm entityForm) {                                                </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">1903          Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                            </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">1904          if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                                  </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">1905              addAuditableDisplayField(entityForm, createdBy);                                                      </span>
<span  style="">1906                                                                                                                    </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">1907              createdBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1908          }                                                                                                         </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">1909          Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                            </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">1910          if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                                  </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">1911              addAuditableDisplayField(entityForm, updatedBy);                                                      </span>
<span  style="">1912                                                                                                                    </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">1913              updatedBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1914          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1915      }                                                                                                             </span>
<span  style="">1916                                                                                                                    </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">1917      private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                               </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">1918          Field displayField = buildAuditableDisplayField(userField);                                               </span>
<span  style="">1919                                                                                                                    </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">1920          AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));                    </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">1921          String userName = user == null ? null : user.getName();                                                   </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">1922          displayField.setValue(userName);                                                                          </span>
<span  style="">1923                                                                                                                    </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">1924          FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                                     </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">1925          if (auditGroup != null) {                                                                                 </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">1926              auditGroup.addField(displayField);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1927          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1928      }                                                                                                             </span>
<span  style="">1929                                                                                                                    </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">1930      private Field buildAuditableDisplayField(Field auditableField) {                                              </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">1931          return new Field().withFieldType(SupportedFieldType.STRING.toString())                                    </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">1932                  .withName(auditableField.getName() + &quot;Display&quot;)                                                   </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">1933                  .withFriendlyName(auditableField.getFriendlyName())                                               </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">1934                  .withOrder(auditableField.getOrder())                                                             </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">1935                  .withOwningEntityClass(auditableField.getOwningEntityClass())                                     </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">1936                  .withReadOnly(true);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1937      }                                                                                                             </span>
<span  style="">1938                                                                                                                    </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">1939      protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                         </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">1940          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">1941          if (StringUtils.isBlank(tabName)) {                                                                       </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">1942              TabMetadata firstTab = cmd.getFirstTab();                                                             </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">1943              return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1944          }                                                                                                         </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">1945          return tabName;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1946      }                                                                                                             </span>
<span  style="">1947                                                                                                                    </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1948      // *****************************************                                                                  </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">1949      // Typed Entity Helper Methods                                                                                </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1950      // *****************************************                                                                  </span>
<span  style="">1951                                                                                                                    </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">1952      protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {                       </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">1953          // Check if this is a typed entity                                                                        </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">1954          AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);              </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">1955          if (typedEntitySection != null) {                                                                         </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">1956              // Update the friendly name for this Entity Type                                                      </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">1957              model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1958          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1959      }                                                                                                             </span>
<span  style="">1960                                                                                                                    </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1961      // *********************************                                                                          </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">1962      // ADDITIONAL SPRING-BOUND METHODS *                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1963      // *********************************                                                                          </span>
<span  style="">1964                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1965      /**                                                                                                           </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style="">1966       * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process. </span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="1967       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">1967       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports eitheðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">1968       * or false. If the value is passed in as null, it will treat it as false.                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1969       *                                                                                                            </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">1970       * @param binder                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1971       */                                                                                                           </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">1972      @InitBinder                                                                                                   </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">1973      public void initBinder(WebDataBinder binder) {                                                                </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">1974          binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                                 </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">1975          binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1976      }                                                                                                             </span>
<span  style="">1977                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1978  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-3339060969767811416" onmouseenter="enter('-3339060969767811416');" onmouseout="out('-3339060969767811416');" style="">   3   * BroadleafCommerce Open Admin Platform                                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="913821711322743166" onmouseenter="enter('913821711322743166');" onmouseout="out('913821711322743166');" style="">  18  package org.broadleafcommerce.openadmin.web.controller.entity;                                                    </span>
<span  style="">  19                                                                                                                    </span>
<span class="8596464405353709537" onmouseenter="enter('8596464405353709537');" onmouseout="out('8596464405353709537');" style="">  20  import org.apache.commons.collections.CollectionUtils;                                                            </span>
<span class="4020017653195254006" onmouseenter="enter('4020017653195254006');" onmouseout="out('4020017653195254006');" style="">  21  import org.apache.commons.collections.MapUtils;                                                                   </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  22  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  23  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  24  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="3542918789910249764" onmouseenter="enter('3542918789910249764');" onmouseout="out('3542918789910249764');" style="">  25  import org.broadleafcommerce.common.exception.SecurityServiceException;                                           </span>
<span class="5945096539699516699" onmouseenter="enter('5945096539699516699');" onmouseout="out('5945096539699516699');" style="">  26  import org.broadleafcommerce.common.exception.ServiceException;                                                   </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  27  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="-8339254235515724670" onmouseenter="enter('-8339254235515724670');" onmouseout="out('-8339254235515724670');" style="">  28  import org.broadleafcommerce.common.extension.ExtensionResultStatusType;                                          </span>
<span class="-6648433550510659033" onmouseenter="enter('-6648433550510659033');" onmouseout="out('-6648433550510659033');" style="">  29  import org.broadleafcommerce.common.presentation.client.AddMethodType;                                            </span>
<span class="1362364260528215152" onmouseenter="enter('1362364260528215152');" onmouseout="out('1362364260528215152');" style="">  30  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  31  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="2429458746821399950" onmouseenter="enter('2429458746821399950');" onmouseout="out('2429458746821399950');" style="">  32  import org.broadleafcommerce.common.util.BLCArrayUtils;                                                           </span>
<span class="2428099238642943960" onmouseenter="enter('2428099238642943960');" onmouseout="out('2428099238642943960');" style="">  33  import org.broadleafcommerce.common.util.BLCMessageUtils;                                                         </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  34  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-1418036767363331062" onmouseenter="enter('-1418036767363331062');" onmouseout="out('-1418036767363331062');" style="">  35  import org.broadleafcommerce.common.web.JsonResponse;                                                             </span>
<span class="-3361215363157046739" onmouseenter="enter('-3361215363157046739');" onmouseout="out('-3361215363157046739');" style="">  36  import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;                                       </span>
<span class="-1781055592725563383" onmouseenter="enter('-1781055592725563383');" onmouseout="out('-1781055592725563383');" style="">  37  import org.broadleafcommerce.openadmin.dto.AdornedTargetList;                                                     </span>
<span class="-6140296335181984013" onmouseenter="enter('-6140296335181984013');" onmouseout="out('-6140296335181984013');" style="">  38  import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;                                               </span>
<span class="4427537537958608766" onmouseenter="enter('4427537537958608766');" onmouseout="out('4427537537958608766');" style="">  39  import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;                                                    </span>
<span class="-1607559599739253077" onmouseenter="enter('-1607559599739253077');" onmouseout="out('-1607559599739253077');" style="">  40  import org.broadleafcommerce.openadmin.dto.ClassMetadata;                                                         </span>
<span class="5550564421881377532" onmouseenter="enter('5550564421881377532');" onmouseout="out('5550564421881377532');" style="">  41  import org.broadleafcommerce.openadmin.dto.ClassTree;                                                             </span>
<span class="-3165611006566133086" onmouseenter="enter('-3165611006566133086');" onmouseout="out('-3165611006566133086');" style="">  42  import org.broadleafcommerce.openadmin.dto.CollectionMetadata;                                                    </span>
<span class="-4742435063138209714" onmouseenter="enter('-4742435063138209714');" onmouseout="out('-4742435063138209714');" style="">  43  import org.broadleafcommerce.openadmin.dto.DynamicResultSet;                                                      </span>
<span class="-5093421835888664541" onmouseenter="enter('-5093421835888664541');" onmouseout="out('-5093421835888664541');" style="">  44  import org.broadleafcommerce.openadmin.dto.Entity;                                                                </span>
<span class="-8829499667991596741" onmouseenter="enter('-8829499667991596741');" onmouseout="out('-8829499667991596741');" style="">  45  import org.broadleafcommerce.openadmin.dto.FieldMetadata;                                                         </span>
<span class="6369021917986026789" onmouseenter="enter('6369021917986026789');" onmouseout="out('6369021917986026789');" style="">  46  import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;                                                 </span>
<span class="826821438795056004" onmouseenter="enter('826821438795056004');" onmouseout="out('826821438795056004');" style="">  47  import org.broadleafcommerce.openadmin.dto.MapMetadata;                                                           </span>
<span class="1983554291461039357" onmouseenter="enter('1983554291461039357');" onmouseout="out('1983554291461039357');" style="">  48  import org.broadleafcommerce.openadmin.dto.Property;                                                              </span>
<span class="1696571253156436279" onmouseenter="enter('1696571253156436279');" onmouseout="out('1696571253156436279');" style="">  49  import org.broadleafcommerce.openadmin.dto.SectionCrumb;                                                          </span>
<span class="5662236005419086618" onmouseenter="enter('5662236005419086618');" onmouseout="out('5662236005419086618');" style="">  50  import org.broadleafcommerce.openadmin.dto.TabMetadata;                                                           </span>
<span class="-8828889589519173652" onmouseenter="enter('-8828889589519173652');" onmouseout="out('-8828889589519173652');" style="">  51  import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;                                               </span>
<span class="4410643013278245372" onmouseenter="enter('4410643013278245372');" onmouseout="out('4410643013278245372');" style="">  52  import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;                                   </span>
<span class="2120683388748052627" onmouseenter="enter('2120683388748052627');" onmouseout="out('2120683388748052627');" style="">  53  import org.broadleafcommerce.openadmin.server.security.dao.AdminUserDao;                                          </span>
<span class="-7620175268967942501" onmouseenter="enter('-7620175268967942501');" onmouseout="out('-7620175268967942501');" style="">  54  import org.broadleafcommerce.openadmin.server.security.domain.AdminSection;                                       </span>
<span class="-6571883875867969954" onmouseenter="enter('-6571883875867969954');" onmouseout="out('-6571883875867969954');" style="">  55  import org.broadleafcommerce.openadmin.server.security.domain.AdminUser;                                          </span>
<span class="-4641149340176766185" onmouseenter="enter('-4641149340176766185');" onmouseout="out('-4641149340176766185');" style="">  56  import org.broadleafcommerce.openadmin.server.security.remote.EntityOperationType;                                </span>
<span class="78786346091609662" onmouseenter="enter('78786346091609662');" onmouseout="out('78786346091609662');" style="">  57  import org.broadleafcommerce.openadmin.server.security.service.RowLevelSecurityService;                           </span>
<span class="-8603256547657551769" onmouseenter="enter('-8603256547657551769');" onmouseout="out('-8603256547657551769');" style="">  58  import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;                            </span>
<span class="5585583973934060515" onmouseenter="enter('5585583973934060515');" onmouseout="out('5585583973934060515');" style=""><abbr title="  59  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManager;">  59  import org.broadleafcommerce.openadmin.server.service.persistence.extension.AdornedTargetAutoPopulateExtensionManaðŸ”µ</abbr></span>
<span class="-3086540061138981164" onmouseenter="enter('-3086540061138981164');" onmouseout="out('-3086540061138981164');" style="">  60  import org.broadleafcommerce.openadmin.server.service.persistence.module.BasicPersistenceModule;                  </span>
<span class="9131075895472939574" onmouseenter="enter('9131075895472939574');" onmouseout="out('9131075895472939574');" style="">  61  import org.broadleafcommerce.openadmin.web.controller.AdminAbstractController;                                    </span>
<span class="7254479112554025637" onmouseenter="enter('7254479112554025637');" onmouseout="out('7254479112554025637');" style="">  62  import org.broadleafcommerce.openadmin.web.controller.modal.ModalHeaderType;                                      </span>
<span class="4507704609742395614" onmouseenter="enter('4507704609742395614');" onmouseout="out('4507704609742395614');" style="">  63  import org.broadleafcommerce.openadmin.web.editor.NonNullBooleanEditor;                                           </span>
<span class="-2042519459673859584" onmouseenter="enter('-2042519459673859584');" onmouseout="out('-2042519459673859584');" style="">  64  import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;                                 </span>
<span class="3056790491614608405" onmouseenter="enter('3056790491614608405');" onmouseout="out('3056790491614608405');" style="">  65  import org.broadleafcommerce.openadmin.web.form.component.ListGrid;                                               </span>
<span class="1405974373227613661" onmouseenter="enter('1405974373227613661');" onmouseout="out('1405974373227613661');" style="">  66  import org.broadleafcommerce.openadmin.web.form.entity.DefaultAdornedEntityFormActions;                           </span>
<span class="2718350422838759693" onmouseenter="enter('2718350422838759693');" onmouseout="out('2718350422838759693');" style="">  67  import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;                                  </span>
<span class="-3560862041655103076" onmouseenter="enter('-3560862041655103076');" onmouseout="out('-3560862041655103076');" style="">  68  import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;                                        </span>
<span class="8035715143965725316" onmouseenter="enter('8035715143965725316');" onmouseout="out('8035715143965725316');" style="">  69  import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;                                                </span>
<span class="-3164920911156953697" onmouseenter="enter('-3164920911156953697');" onmouseout="out('-3164920911156953697');" style="">  70  import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;                                          </span>
<span class="6015559832933397076" onmouseenter="enter('6015559832933397076');" onmouseout="out('6015559832933397076');" style="">  71  import org.broadleafcommerce.openadmin.web.form.entity.Field;                                                     </span>
<span class="-5634654756625156689" onmouseenter="enter('-5634654756625156689');" onmouseout="out('-5634654756625156689');" style="">  72  import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;                                                </span>
<span class="8763280003660953520" onmouseenter="enter('8763280003660953520');" onmouseout="out('8763280003660953520');" style="">  73  import org.springframework.beans.propertyeditors.StringTrimmerEditor;                                             </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  74  import org.springframework.stereotype.Controller;                                                                 </span>
<span class="2230089600625206822" onmouseenter="enter('2230089600625206822');" onmouseout="out('2230089600625206822');" style="">  75  import org.springframework.ui.Model;                                                                              </span>
<span class="-8661390401087732702" onmouseenter="enter('-8661390401087732702');" onmouseout="out('-8661390401087732702');" style="">  76  import org.springframework.util.MultiValueMap;                                                                    </span>
<span class="-5446610002806720528" onmouseenter="enter('-5446610002806720528');" onmouseout="out('-5446610002806720528');" style="">  77  import org.springframework.validation.BindingResult;                                                              </span>
<span class="-5956639343389312225" onmouseenter="enter('-5956639343389312225');" onmouseout="out('-5956639343389312225');" style="">  78  import org.springframework.web.bind.WebDataBinder;                                                                </span>
<span class="6486986322776186621" onmouseenter="enter('6486986322776186621');" onmouseout="out('6486986322776186621');" style="">  79  import org.springframework.web.bind.annotation.InitBinder;                                                        </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  80  import org.springframework.web.bind.annotation.ModelAttribute;                                                    </span>
<span class="3963501418927616634" onmouseenter="enter('3963501418927616634');" onmouseout="out('3963501418927616634');" style="">  81  import org.springframework.web.bind.annotation.PathVariable;                                                      </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  82  import org.springframework.web.bind.annotation.RequestMapping;                                                    </span>
<span class="4584846860636268493" onmouseenter="enter('4584846860636268493');" onmouseout="out('4584846860636268493');" style="">  83  import org.springframework.web.bind.annotation.RequestMethod;                                                     </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  84  import org.springframework.web.bind.annotation.RequestParam;                                                      </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  85  import org.springframework.web.bind.annotation.ResponseBody;                                                      </span>
<span class="82864906475118767" onmouseenter="enter('82864906475118767');" onmouseout="out('82864906475118767');" style="">  86  import org.springframework.web.servlet.DispatcherServlet;                                                         </span>
<span class="4665273347041581179" onmouseenter="enter('4665273347041581179');" onmouseout="out('4665273347041581179');" style="">  87  import org.springframework.web.servlet.FlashMap;                                                                  </span>
<span class="4289605998216587359" onmouseenter="enter('4289605998216587359');" onmouseout="out('4289605998216587359');" style="">  88  import org.springframework.web.servlet.mvc.support.RedirectAttributes;                                            </span>
<span class="2383374134797300138" onmouseenter="enter('2383374134797300138');" onmouseout="out('2383374134797300138');" style="">  89  import org.springframework.web.util.UrlPathHelper;                                                                </span>
<span class="3949390651369204057" onmouseenter="enter('3949390651369204057');" onmouseout="out('3949390651369204057');" style="">  90  import com.fasterxml.jackson.databind.ObjectMapper;                                                               </span>
<span  style="">  91                                                                                                                    </span>
<span class="600097467176667378" onmouseenter="enter('600097467176667378');" onmouseout="out('600097467176667378');" style="">  92  import java.net.URLDecoder;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  93  import java.util.ArrayList;                                                                                       </span>

<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  94  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  95  import java.util.List;                                                                                            </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  96  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  97  import java.util.Map.Entry;                                                                                       </span>
<span class="3384353015976675773" onmouseenter="enter('3384353015976675773');" onmouseout="out('3384353015976675773');" style="">  98  import java.util.Set;                                                                                             </span>


<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  99  import javax.annotation.Resource;                                                                                 </span>
<span class="-2972028083581866805" onmouseenter="enter('-2972028083581866805');" onmouseout="out('-2972028083581866805');" style=""> 100  import javax.servlet.http.HttpServletRequest;                                                                     </span>
<span class="-2247759832438184775" onmouseenter="enter('-2247759832438184775');" onmouseout="out('-2247759832438184775');" style=""> 101  import javax.servlet.http.HttpServletResponse;                                                                    </span>
<span  style=""> 102                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 103  /**                                                                                                               </span>
<span class="4260469300841401635" onmouseenter="enter('4260469300841401635');" onmouseout="out('4260469300841401635');" style=""><abbr title=" 104   * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call to super"> 104   * The default implementation of the {@link #BroadleafAdminAbstractEntityController}. This delegates every call toðŸ”µ</abbr></span>
<span class="-3899564930283338794" onmouseenter="enter('-3899564930283338794');" onmouseout="out('-3899564930283338794');" style=""><abbr title=" 105   * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entity"> 105   * and does not provide any custom-tailored functionality. It is responsible for rendering the admin for every entðŸ”µ</abbr></span>
<span class="-5698631600182435917" onmouseenter="enter('-5698631600182435917');" onmouseout="out('-5698631600182435917');" style=""> 106   * that is not explicitly customized by its own controller.                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 107   *                                                                                                                </span>
<span class="-346667533686466806" onmouseenter="enter('-346667533686466806');" onmouseout="out('-346667533686466806');" style=""> 108   * @author Andre Azzolini (apazzolini)                                                                            </span>
<span class="-7311139588847938491" onmouseenter="enter('-7311139588847938491');" onmouseout="out('-7311139588847938491');" style=""> 109   * @author Jeff Fischer                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 110   */                                                                                                               </span>
<span class="4155455059275642147" onmouseenter="enter('4155455059275642147');" onmouseout="out('4155455059275642147');" style=""> 111  @Controller(&quot;blAdminBasicEntityController&quot;)                                                                       </span>
<span class="1298802560762502343" onmouseenter="enter('1298802560762502343');" onmouseout="out('1298802560762502343');" style=""> 112  @RequestMapping(&quot;/{sectionKey:.+}&quot;)                                                                               </span>
<span class="8857493697785984988" onmouseenter="enter('8857493697785984988');" onmouseout="out('8857493697785984988');" style=""> 113  public class AdminBasicEntityController extends AdminAbstractController {                                         </span>
<span  style=""> 114                                                                                                                    </span>
<span class="6387945601766467724" onmouseenter="enter('6387945601766467724');" onmouseout="out('6387945601766467724');" style=""> 115      protected static final Log LOG = LogFactory.getLog(AdminBasicEntityController.class);                         </span>
<span  style=""> 116                                                                                                                    </span>
<span class="-3043900363751028803" onmouseenter="enter('-3043900363751028803');" onmouseout="out('-3043900363751028803');" style=""> 117      public static final String ALTERNATE_ID_PROPERTY = &quot;ALTERNATE_ID&quot;;                                            </span>
<span class="4075481265342786632" onmouseenter="enter('4075481265342786632');" onmouseout="out('4075481265342786632');" style=""> 118      public static final String CUSTOM_CRITERIA = &quot;criteria&quot;;                                                      </span>
<span class="-5370879055704196240" onmouseenter="enter('-5370879055704196240');" onmouseout="out('-5370879055704196240');" style=""> 119      public static final String IS_SELECTIZE_REQUEST = &quot;isSelectizeRequest&quot;;                                       </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style=""> 121      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style=""> 122      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style=""> 123                                                                                                                    </span>
<span class="-5193304577016957246" onmouseenter="enter('-5193304577016957246');" onmouseout="out('-5193304577016957246');" style=""> 124      @Resource(name = &quot;blAdminUserDao&quot;)                                                                            </span>
<span class="-2542536430165066610" onmouseenter="enter('-2542536430165066610');" onmouseout="out('-2542536430165066610');" style=""> 125      protected AdminUserDao adminUserDao;                                                                          </span>
<span  style=""> 126                                                                                                                    </span>
<span class="1039661802170570045" onmouseenter="enter('1039661802170570045');" onmouseout="out('1039661802170570045');" style=""> 127      @Resource(name=&quot;blDynamicEntityDao&quot;)                                                                          </span>
<span class="-6629482740079052882" onmouseenter="enter('-6629482740079052882');" onmouseout="out('-6629482740079052882');" style=""> 128      protected DynamicEntityDao dynamicEntityDao;                                                                  </span>
<span  style=""> 129                                                                                                                    </span>
<span class="3323977399618509653" onmouseenter="enter('3323977399618509653');" onmouseout="out('3323977399618509653');" style=""> 130      @Resource(name = &quot;blAdornedTargetAutoPopulateExtensionManager&quot;)                                               </span>
<span class="-4810148452666974339" onmouseenter="enter('-4810148452666974339');" onmouseout="out('-4810148452666974339');" style=""> 131      protected AdornedTargetAutoPopulateExtensionManager adornedTargetAutoPopulateExtensionManager;                </span>
<span  style=""> 132                                                                                                                    </span>
<span class="-1073312679381587606" onmouseenter="enter('-1073312679381587606');" onmouseout="out('-1073312679381587606');" style=""> 133      @Resource(name = &quot;blRowLevelSecurityService&quot;)                                                                 </span>
<span class="7292046362506695965" onmouseenter="enter('7292046362506695965');" onmouseout="out('7292046362506695965');" style=""> 134      protected RowLevelSecurityService rowLevelSecurityService;                                                    </span>
<span  style=""> 135                                                                                                                    </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 136      // ******************************************                                                                 </span>
<span class="8145904524131922989" onmouseenter="enter('8145904524131922989');" onmouseout="out('8145904524131922989');" style=""> 137      // REQUEST-MAPPING BOUND CONTROLLER METHODS *                                                                 </span>
<span class="-459840192887909665" onmouseenter="enter('-459840192887909665');" onmouseout="out('-459840192887909665');" style=""> 138      // ******************************************                                                                 </span>
<span  style=""> 139                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 140      /**                                                                                                           </span>
<span class="5980196098348408716" onmouseenter="enter('5980196098348408716');" onmouseout="out('5980196098348408716');" style=""><abbr title=" 141       * Renders the main entity listing for the specified class, which is based on the current sectionKey with some optional"> 141       * Renders the main entity listing for the specified class, which is based on the current sectionKey with someðŸ”µ</abbr></span>
<span class="1756838433111210325" onmouseenter="enter('1756838433111210325');" onmouseout="out('1756838433111210325');" style=""> 142       * criteria.                                                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 143       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 144       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 145       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 146       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 147       * @param pathVars                                                                                            </span>
<span class="-7836494531350161829" onmouseenter="enter('-7836494531350161829');" onmouseout="out('-7836494531350161829');" style=""> 148       * @param requestParams a Map of property name -&gt; list critiera values                                        </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 149       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 150       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 151       */                                                                                                           </span>
<span class="854227037044969777" onmouseenter="enter('854227037044969777');" onmouseout="out('854227037044969777');" style=""> 152      @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET)                                                       </span>
<span class="5203424842505603172" onmouseenter="enter('5203424842505603172');" onmouseout="out('5203424842505603172');" style=""> 153      public String viewEntityList(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 154              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 155              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 156          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 157          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 158          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="1452589137399878084" onmouseenter="enter('1452589137399878084');" onmouseout="out('1452589137399878084');" style=""><abbr title=" 159          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars);"> 159          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 160          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 161          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-9123024135554384147" onmouseenter="enter('-9123024135554384147');" onmouseout="out('-9123024135554384147');" style=""> 163          ListGrid listGrid = formService.buildMainListGrid(drs, cmd, sectionKey, crumbs);                          </span>
<span class="-7197013270379460942" onmouseenter="enter('-7197013270379460942');" onmouseout="out('-7197013270379460942');" style=""> 164          listGrid.setSelectType(ListGrid.SelectType.NONE);                                                         </span>
<span  style=""> 165                                                                                                                    </span>
<span class="6707774114103003478" onmouseenter="enter('6707774114103003478');" onmouseout="out('6707774114103003478');" style=""> 166          Set&lt;Field&gt; headerFields = listGrid.getHeaderFields();                                                     </span>
<span class="6157449347608657417" onmouseenter="enter('6157449347608657417');" onmouseout="out('6157449347608657417');" style=""> 167          if (CollectionUtils.isNotEmpty(headerFields)) {                                                           </span>
<span class="7359980094802675712" onmouseenter="enter('7359980094802675712');" onmouseout="out('7359980094802675712');" style=""> 168              Field firstField = headerFields.iterator().next();                                                    </span>
<span class="-7992921859474727563" onmouseenter="enter('-7992921859474727563');" onmouseout="out('-7992921859474727563');" style=""> 169              if (requestParams.containsKey(firstField.getName())) {                                                </span>
<span class="-4847870846432586371" onmouseenter="enter('-4847870846432586371');" onmouseout="out('-4847870846432586371');" style=""> 170                  model.addAttribute(&quot;mainSearchTerm&quot;, requestParams.get(firstField.getName()).get(0));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172          }                                                                                                         </span>
<span  style=""> 173                                                                                                                    </span>
<span class="3294377821001327596" onmouseenter="enter('3294377821001327596');" onmouseout="out('3294377821001327596');" style=""> 174          model.addAttribute(&quot;viewType&quot;, &quot;entityList&quot;);                                                             </span>
<span  style=""> 175                                                                                                                    </span>
<span class="5223794068523842694" onmouseenter="enter('5223794068523842694');" onmouseout="out('5223794068523842694');" style=""> 176          setupViewEntityListBasicModel(request, cmd, sectionKey, sectionClassName, model, requestParams);          </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 177          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style=""> 178                                                                                                                    </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 179          return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180      }                                                                                                             </span>
<span  style=""> 181                                                                                                                    </span>
<span class="5512240627727429054" onmouseenter="enter('5512240627727429054');" onmouseout="out('5512240627727429054');" style=""> 182      protected void setupViewEntityListBasicModel(HttpServletRequest request, ClassMetadata cmd, String sectionKey,</span>
<span class="522743254766371502" onmouseenter="enter('522743254766371502');" onmouseout="out('522743254766371502');" style=""> 183              String sectionClassName, Model model, MultiValueMap&lt;String, String&gt; requestParams) {                  </span>
<span class="5787313217223527782" onmouseenter="enter('5787313217223527782');" onmouseout="out('5787313217223527782');" style=""> 184          List&lt;EntityFormAction&gt; mainActions = new ArrayList&lt;&gt;();                                                   </span>
<span class="-6495333239259317464" onmouseenter="enter('-6495333239259317464');" onmouseout="out('-6495333239259317464');" style=""> 185          addAddActionIfAllowed(sectionClassName, cmd, mainActions);                                                </span>
<span class="-5948121019403308590" onmouseenter="enter('-5948121019403308590');" onmouseout="out('-5948121019403308590');" style=""> 186          extensionManager.getProxy().addAdditionalMainActions(sectionClassName, mainActions);                      </span>
<span class="-381816252130957573" onmouseenter="enter('-381816252130957573');" onmouseout="out('-381816252130957573');" style=""> 187          extensionManager.getProxy().modifyMainActions(cmd, mainActions);                                          </span>
<span  style=""> 188                                                                                                                    </span>
<span class="-5498329164774951339" onmouseenter="enter('-5498329164774951339');" onmouseout="out('-5498329164774951339');" style=""> 189          // If this came from a delete save, we&#x27;ll have a headerFlash request parameter to take care of            </span>
<span class="6915846846822456322" onmouseenter="enter('6915846846822456322');" onmouseout="out('6915846846822456322');" style=""> 190          if (requestParams.containsKey(&quot;headerFlash&quot;)) {                                                           </span>
<span class="-7374079465520861767" onmouseenter="enter('-7374079465520861767');" onmouseout="out('-7374079465520861767');" style=""> 191              model.addAttribute(&quot;headerFlash&quot;, requestParams.get(&quot;headerFlash&quot;).get(0));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192          }                                                                                                         </span>
<span  style=""> 193                                                                                                                    </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 194          List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                            </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 195          String requestUri = request.getRequestURI();                                                              </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""> 196          if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {           </span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""> 197              requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198          }                                                                                                         </span>
<span  style=""> 199                                                                                                                    </span>
<span class="-3335875933652663591" onmouseenter="enter('-3335875933652663591');" onmouseout="out('-3335875933652663591');" style=""> 200          model.addAttribute(&quot;isFilter&quot;, (requestParams.size() &gt; 0));                                               </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 201          model.addAttribute(&quot;currentUri&quot;, requestUri);                                                             </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 202          model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                                           </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 203          model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 204          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-4219022137146036385" onmouseenter="enter('-4219022137146036385');" onmouseout="out('-4219022137146036385');" style=""> 205          model.addAttribute(&quot;mainActions&quot;, mainActions);                                                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 206          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-7167932239083034641" onmouseenter="enter('-7167932239083034641');" onmouseout="out('-7167932239083034641');" style=""> 207          setTypedEntityModelAttributes(request, model);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208      }                                                                                                             </span>
<span  style=""> 209                                                                                                                    </span>
<span class="-3612928683982517341" onmouseenter="enter('-3612928683982517341');" onmouseout="out('-3612928683982517341');" style=""> 210      @RequestMapping(value = &quot;/selectize&quot;, method = RequestMethod.GET)                                             </span>
<span class="-2536734120775641057" onmouseenter="enter('-2536734120775641057');" onmouseout="out('-2536734120775641057');" style=""> 211      public @ResponseBody Map&lt;String, Object&gt; viewEntityListSelectize(HttpServletRequest request,                  </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style=""> 212               HttpServletResponse response, Model model,                                                           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 213               @PathVariable Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 214               @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 215          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 216          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-1360124541010218678" onmouseenter="enter('-1360124541010218678');" onmouseout="out('-1360124541010218678');" style=""> 217          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, null, null);                                        </span>
<span class="3971039348455381302" onmouseenter="enter('3971039348455381302');" onmouseout="out('3971039348455381302');" style=""><abbr title=" 218          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbs, pathVars)"> 218          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, crumbðŸ”µ</abbr></span>
<span class="-5204717557696417186" onmouseenter="enter('-5204717557696417186');" onmouseout="out('-5204717557696417186');" style=""> 219                  .withCustomCriteria(getCustomCriteria(requestParams));                                            </span>
<span  style=""> 220                                                                                                                    </span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style=""> 221          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span  style=""> 222                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 223          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="8256501976011402349" onmouseenter="enter('8256501976011402349');" onmouseout="out('8256501976011402349');" style=""> 224          DynamicResultSet drs =  service.getRecords(ppr).getDynamicResultSet();                                    </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-6840686923261380416" onmouseenter="enter('-6840686923261380416');" onmouseout="out('-6840686923261380416');" style=""> 226          return formService.constructSelectizeOptionMap(drs, cmd);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227      }                                                                                                             </span>
<span  style=""> 228                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 229      /**                                                                                                           </span>
<span class="6015587852497052057" onmouseenter="enter('6015587852497052057');" onmouseout="out('6015587852497052057');" style=""> 230       * Obtains the requested criteria parameter                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 231       *                                                                                                            </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 232       * @param requestParams                                                                                       </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 233       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 234       */                                                                                                           </span>
<span class="-5224065764328446223" onmouseenter="enter('-5224065764328446223');" onmouseout="out('-5224065764328446223');" style=""> 235      protected String[] getCustomCriteria(Map&lt;String, List&lt;String&gt;&gt; requestParams) {                               </span>
<span class="8308653628584061101" onmouseenter="enter('8308653628584061101');" onmouseout="out('8308653628584061101');" style=""> 236          if (requestParams == null || requestParams.isEmpty()) {                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 237              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238          }                                                                                                         </span>
<span  style=""> 239                                                                                                                    </span>
<span class="-6200156504676301578" onmouseenter="enter('-6200156504676301578');" onmouseout="out('-6200156504676301578');" style=""> 240          List&lt;String&gt; criteria = requestParams.get(CUSTOM_CRITERIA);                                               </span>
<span class="3479198517250864619" onmouseenter="enter('3479198517250864619');" onmouseout="out('3479198517250864619');" style=""> 241          String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);                             </span>
<span class="3591199473111095603" onmouseenter="enter('3591199473111095603');" onmouseout="out('3591199473111095603');" style=""> 242          return new String[] {response};                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243      }                                                                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 245      /**                                                                                                           </span>
<span class="53051913897087216" onmouseenter="enter('53051913897087216');" onmouseout="out('53051913897087216');" style=""> 246       * Adds the &quot;Add&quot; button to the main entity form if the current user has permissions to create new instances  </span>
<span class="-2041834868205006384" onmouseenter="enter('-2041834868205006384');" onmouseout="out('-2041834868205006384');" style=""> 247       * of the entity and all of the fields in the entity aren&#x27;t marked as read only.                              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 248       *                                                                                                            </span>
<span class="2579837316240354786" onmouseenter="enter('2579837316240354786');" onmouseout="out('2579837316240354786');" style=""> 249       * @param sectionClassName                                                                                    </span>
<span class="3340688165449077744" onmouseenter="enter('3340688165449077744');" onmouseout="out('3340688165449077744');" style=""> 250       * @param cmd                                                                                                 </span>
<span class="-70241175981651056" onmouseenter="enter('-70241175981651056');" onmouseout="out('-70241175981651056');" style=""> 251       * @param mainActions                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 252       */                                                                                                           </span>
<span class="-3535265632615590771" onmouseenter="enter('-3535265632615590771');" onmouseout="out('-3535265632615590771');" style=""><abbr title=" 253      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainActions) {"> 253      protected void addAddActionIfAllowed(String sectionClassName, ClassMetadata cmd, List&lt;EntityFormAction&gt; mainAcðŸ”µ</abbr></span>
<span class="-1675673801723949520" onmouseenter="enter('-1675673801723949520');" onmouseout="out('-1675673801723949520');" style=""> 254          if (isAddActionAllowed(sectionClassName, cmd)) {                                                          </span>
<span class="-161553798203722975" onmouseenter="enter('-161553798203722975');" onmouseout="out('-161553798203722975');" style=""> 255              mainActions.add(DefaultMainActions.ADD);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257      }                                                                                                             </span>
<span  style=""> 258                                                                                                                    </span>
<span class="6251273327061769060" onmouseenter="enter('6251273327061769060');" onmouseout="out('6251273327061769060');" style=""> 259      protected boolean isAddActionAllowed(String sectionClassName, ClassMetadata cmd) {                            </span>
<span class="2379281051849826609" onmouseenter="enter('2379281051849826609');" onmouseout="out('2379281051849826609');" style=""> 260          // If the user does not have create permissions, we will not add the &quot;Add New&quot; button                     </span>
<span class="4837425918106440333" onmouseenter="enter('4837425918106440333');" onmouseout="out('4837425918106440333');" style=""> 261          boolean canCreate = true;                                                                                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 262          try {                                                                                                     </span>
<span class="-2050050318794737036" onmouseenter="enter('-2050050318794737036');" onmouseout="out('-2050050318794737036');" style=""> 263              adminRemoteSecurityService.securityCheck(sectionClassName, EntityOperationType.ADD);                  </span>
<span class="9220844322816084446" onmouseenter="enter('9220844322816084446');" onmouseout="out('9220844322816084446');" style=""> 264          } catch (ServiceException e) {                                                                            </span>
<span class="-8912377967087217182" onmouseenter="enter('-8912377967087217182');" onmouseout="out('-8912377967087217182');" style=""> 265              if (e instanceof SecurityServiceException) {                                                          </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 266                  canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268          }                                                                                                         </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 270          if (canCreate) {                                                                                          </span>
<span class="-4263024171062822587" onmouseenter="enter('-4263024171062822587');" onmouseout="out('-4263024171062822587');" style=""> 271              checkReadOnly: {                                                                                      </span>
<span class="-5650645308789885306" onmouseenter="enter('-5650645308789885306');" onmouseout="out('-5650645308789885306');" style=""> 272                  //check if all the metadata is read only                                                          </span>
<span class="-3497335608114491506" onmouseenter="enter('-3497335608114491506');" onmouseout="out('-3497335608114491506');" style=""> 273                  for (Property property : cmd.getProperties()) {                                                   </span>
<span class="-446642995335437650" onmouseenter="enter('-446642995335437650');" onmouseout="out('-446642995335437650');" style=""> 274                      if (property.getMetadata() instanceof BasicFieldMetadata) {                                   </span>
<span class="-4740706861929444273" onmouseenter="enter('-4740706861929444273');" onmouseout="out('-4740706861929444273');" style=""> 275                          if (((BasicFieldMetadata) property.getMetadata()).getReadOnly() == null ||                </span>
<span class="7731016670197656615" onmouseenter="enter('7731016670197656615');" onmouseout="out('7731016670197656615');" style=""> 276                                  !((BasicFieldMetadata) property.getMetadata()).getReadOnly()) {                   </span>
<span class="7135533341781534816" onmouseenter="enter('7135533341781534816');" onmouseout="out('7135533341781534816');" style=""> 277                              break checkReadOnly;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280                  }                                                                                                 </span>
<span class="-5562308883634048055" onmouseenter="enter('-5562308883634048055');" onmouseout="out('-5562308883634048055');" style=""> 281                  canCreate = false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283          }                                                                                                         </span>
<span  style=""> 284                                                                                                                    </span>
<span class="-3452128956938556370" onmouseenter="enter('-3452128956938556370');" onmouseout="out('-3452128956938556370');" style=""> 285          if (canCreate) {                                                                                          </span>
<span class="-5729139490324794214" onmouseenter="enter('-5729139490324794214');" onmouseout="out('-5729139490324794214');" style=""><abbr title=" 286              canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectionClassName, cmd);"> 286              canCreate = rowLevelSecurityService.canAdd(adminRemoteSecurityService.getPersistentAdminUser(), sectioðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287          }                                                                                                         </span>
<span  style=""> 288                                                                                                                    </span>
<span class="2674140840454218035" onmouseenter="enter('2674140840454218035');" onmouseout="out('2674140840454218035');" style=""> 289          return canCreate;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290      }                                                                                                             </span>
<span  style=""> 291                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 292      /**                                                                                                           </span>
<span class="-403478592182410175" onmouseenter="enter('-403478592182410175');" onmouseout="out('-403478592182410175');" style=""> 293       * Renders the modal form that is used to add a new parent level entity. Note that this form cannot render any</span>
<span class="-2684076904077363908" onmouseenter="enter('-2684076904077363908');" onmouseout="out('-2684076904077363908');" style=""><abbr title=" 294       * subcollections as operations on those collections require the parent level entity to first be saved and have"> 294       * subcollections as operations on those collections require the parent level entity to first be saved and havðŸ”µ</abbr></span>
<span class="-2496660529180512497" onmouseenter="enter('-2496660529180512497');" onmouseout="out('-2496660529180512497');" style=""><abbr title=" 295       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen where"> 295       * and id. Once the entity is initially saved, we will redirect the user to the normal manage entity screen whðŸ”µ</abbr></span>
<span class="-5672334976076130102" onmouseenter="enter('-5672334976076130102');" onmouseout="out('-5672334976076130102');" style=""> 296       * they can then perform operations on sub collections.                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 297       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 298       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 299       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 300       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 301       * @param pathVars                                                                                            </span>
<span class="-7339043177630483847" onmouseenter="enter('-7339043177630483847');" onmouseout="out('-7339043177630483847');" style=""> 302       * @param entityType                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 303       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 304       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 305       */                                                                                                           </span>
<span class="-6494270766546423105" onmouseenter="enter('-6494270766546423105');" onmouseout="out('-6494270766546423105');" style=""> 306      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.GET)                                                   </span>
<span class="8522113168804045570" onmouseenter="enter('8522113168804045570');" onmouseout="out('8522113168804045570');" style=""> 307      public String viewAddEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 308              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-1715631339976075770" onmouseenter="enter('-1715631339976075770');" onmouseout="out('-1715631339976075770');" style=""> 309              @RequestParam(defaultValue = &quot;&quot;) String entityType) throws Exception {                                </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 310          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 311          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 312          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 313          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 313          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style=""> 314          ppr.setAddOperationInspect(true);                                                                         </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 315          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 316                                                                                                                    </span>
<span class="4862894803792873117" onmouseenter="enter('4862894803792873117');" onmouseout="out('4862894803792873117');" style=""><abbr title=" 317          // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for this entity."> 317          // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types for thiðŸ”µ</abbr></span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 318          if (StringUtils.isBlank(entityType)) {                                                                    </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 319              if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                         </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 320                  entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 321              } else {                                                                                              </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 322                  entityType = getDefaultEntityType();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 324          } else {                                                                                                  </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 325              entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326          }                                                                                                         </span>
<span  style=""> 327                                                                                                                    </span>
<span class="4098005746663533241" onmouseenter="enter('4098005746663533241');" onmouseout="out('4098005746663533241');" style=""> 328          EntityForm entityForm = formService.createEntityForm(cmd, sectionCrumbs);                                 </span>
<span  style=""> 329                                                                                                                    </span>
<span class="5826594571687596812" onmouseenter="enter('5826594571687596812');" onmouseout="out('5826594571687596812');" style=""> 330          // We need to make sure that the ceiling entity is set to the interface and the specific entity type      </span>
<span class="37161952125740808" onmouseenter="enter('37161952125740808');" onmouseout="out('37161952125740808');" style=""> 331          // is set to the type we&#x27;re going to be creating.                                                         </span>
<span class="5062735442039535924" onmouseenter="enter('5062735442039535924');" onmouseout="out('5062735442039535924');" style=""> 332          entityForm.setCeilingEntityClassname(cmd.getCeilingType());                                               </span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style=""> 333          entityForm.setEntityType(entityType);                                                                     </span>
<span  style=""> 334                                                                                                                    </span>
<span class="-5227856854691424770" onmouseenter="enter('-5227856854691424770');" onmouseout="out('-5227856854691424770');" style=""> 335          // When we initially build the class metadata (and thus, the entity form), we had all of the possible     </span>
<span class="5105619661852614163" onmouseenter="enter('5105619661852614163');" onmouseout="out('5105619661852614163');" style=""> 336          // polymorphic fields built out. Now that we have a concrete entity type to render, we can remove the     </span>
<span class="-3843175043245177501" onmouseenter="enter('-3843175043245177501');" onmouseout="out('-3843175043245177501');" style=""> 337          // fields that are not applicable for this given entity type.                                             </span>
<span class="-2935519954456371455" onmouseenter="enter('-2935519954456371455');" onmouseout="out('-2935519954456371455');" style=""> 338          formService.removeNonApplicableFields(cmd, entityForm, entityType);                                       </span>
<span  style=""> 339                                                                                                                    </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 340          modifyAddEntityForm(entityForm, pathVars);                                                                </span>
<span  style=""> 341                                                                                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 342          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 343          model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                        </span>
<span  style=""> 344                                                                                                                    </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 345          model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 346          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 347          model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                              </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 348          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 349          return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350      }                                                                                                             </span>
<span  style=""> 351                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 352      /**                                                                                                           </span>
<span class="-2292124409166412817" onmouseenter="enter('-2292124409166412817');" onmouseout="out('-2292124409166412817');" style=""> 353       * Processes the request to add a new entity. If successful, returns a redirect to the newly created entity.  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 354       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 355       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 356       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 357       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 358       * @param pathVars                                                                                            </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 359       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 360       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 361       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 362       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 363       */                                                                                                           </span>
<span class="-1840738840686664300" onmouseenter="enter('-1840738840686664300');" onmouseout="out('-1840738840686664300');" style=""> 364      @RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)                                                  </span>
<span class="8551380442207718095" onmouseenter="enter('8551380442207718095');" onmouseout="out('8551380442207718095');" style=""> 365      public String addEntity(HttpServletRequest request, HttpServletResponse response, Model model,                </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 366              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style=""> 367              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 368          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 369          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 370          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="2596618104185041854" onmouseenter="enter('2596618104185041854');" onmouseout="out('2596618104185041854');" style=""><abbr title=" 371          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 371          ClassMetadata cmd = service.getClassMetadata(getSectionPersistencePackageRequest(sectionClassName, sectionðŸ”µ</abbr></span>
<span  style=""> 372                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 373          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 374          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 374          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4281879219750019053" onmouseenter="enter('-4281879219750019053');" onmouseout="out('-4281879219750019053');" style=""> 375          Entity entity = service.addEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();                </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 376          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span  style=""> 377                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 378          if (result.hasErrors()) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 379              entityForm.clearFieldsMap();                                                                          </span>
<span class="-312181662169537666" onmouseenter="enter('-312181662169537666');" onmouseout="out('-312181662169537666');" style=""> 380              formService.populateEntityForm(cmd, entity, entityForm, sectionCrumbs);                               </span>
<span  style=""> 381                                                                                                                    </span>
<span class="254171966199148419" onmouseenter="enter('254171966199148419');" onmouseout="out('254171966199148419');" style=""> 382              formService.removeNonApplicableFields(cmd, entityForm, entityForm.getEntityType());                   </span>
<span  style=""> 383                                                                                                                    </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 384              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span  style=""> 385                                                                                                                    </span>
<span class="-816008806055241643" onmouseenter="enter('-816008806055241643');" onmouseout="out('-816008806055241643');" style=""> 386              model.addAttribute(&quot;viewType&quot;, &quot;modal/entityAdd&quot;);                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 387              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 388              model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                          </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 389              model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 390              setModelAttributes(model, sectionKey);                                                                </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 391              return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392          }                                                                                                         </span>
<span  style=""> 393                                                                                                                    </span>
<span class="7931002159447649906" onmouseenter="enter('7931002159447649906');" onmouseout="out('7931002159447649906');" style=""> 394          // Note that AJAX Redirects need the context path prepended to them                                       </span>
<span class="-9104189425594863479" onmouseenter="enter('-9104189425594863479');" onmouseout="out('-9104189425594863479');" style=""><abbr title=" 395          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue();"> 395          return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;/&quot; + entity.getPMap().get(&quot;id&quot;).getValue(ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396      }                                                                                                             </span>
<span  style=""> 397                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 398      /**                                                                                                           </span>
<span class="9102199281013466170" onmouseenter="enter('9102199281013466170');" onmouseout="out('9102199281013466170');" style=""> 399       * Renders the main entity form for the specified entity                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 400       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 401       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 402       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 403       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 404       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 405       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 406       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 407       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 408       */                                                                                                           </span>
<span class="7083955269921705584" onmouseenter="enter('7083955269921705584');" onmouseout="out('7083955269921705584');" style=""> 409      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)                                                  </span>
<span class="-4309552397998806559" onmouseenter="enter('-4309552397998806559');" onmouseout="out('-4309552397998806559');" style=""> 410      public String viewEntityForm(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 411              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="-2194094146044801021" onmouseenter="enter('-2194094146044801021');" onmouseout="out('-2194094146044801021');" style=""> 412              @PathVariable(&quot;id&quot;) String id) throws Exception {                                                     </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 413          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 414          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 415          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 416          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span  style=""> 417                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 418          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8780243800866475465" onmouseenter="enter('-8780243800866475465');" onmouseout="out('-8780243800866475465');" style=""> 419          Entity entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];             </span>
<span  style=""> 420                                                                                                                    </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 421          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span  style=""> 422                                                                                                                    </span>
<span class="872584542219399793" onmouseenter="enter('872584542219399793');" onmouseout="out('872584542219399793');" style=""> 423          EntityForm entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                 </span>
<span  style=""> 424                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 425          if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 426              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 427          } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 428              modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429          }                                                                                                         </span>
<span  style=""> 430                                                                                                                    </span>
<span class="1981952247030149381" onmouseenter="enter('1981952247030149381');" onmouseout="out('1981952247030149381');" style=""> 431          if (request.getParameter(&quot;headerFlash&quot;) != null) {                                                        </span>
<span class="-2367607735703612103" onmouseenter="enter('-2367607735703612103');" onmouseout="out('-2367607735703612103');" style=""> 432              model.addAttribute(&quot;headerFlash&quot;, request.getParameter(&quot;headerFlash&quot;));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433          }                                                                                                         </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-6569554975283424126" onmouseenter="enter('-6569554975283424126');" onmouseout="out('-6569554975283424126');" style=""> 435          // Set the sectionKey again incase this is a typed entity                                                 </span>
<span class="4201932972037321722" onmouseenter="enter('4201932972037321722');" onmouseout="out('4201932972037321722');" style=""> 436          entityForm.setSectionKey(sectionKey);                                                                     </span>
<span  style=""> 437                                                                                                                    </span>
<span class="5387752430767952558" onmouseenter="enter('5387752430767952558');" onmouseout="out('5387752430767952558');" style=""> 438          // Build the current url in the cast that this is a typed entity                                          </span>
<span class="3856485652570637824" onmouseenter="enter('3856485652570637824');" onmouseout="out('3856485652570637824');" style=""> 439          String originatingUri = new UrlPathHelper().getOriginatingRequestUri(request);                            </span>
<span class="-1728408616530607173" onmouseenter="enter('-1728408616530607173');" onmouseout="out('-1728408616530607173');" style=""> 440          int startIndex = request.getContextPath().length();                                                       </span>
<span  style=""> 441                                                                                                                    </span>
<span class="654052499558570629" onmouseenter="enter('654052499558570629');" onmouseout="out('654052499558570629');" style=""> 442          // Remove the context path from servlet path                                                              </span>
<span class="526107488063217153" onmouseenter="enter('526107488063217153');" onmouseout="out('526107488063217153');" style=""> 443          String currentUrl = originatingUri.substring(startIndex);                                                 </span>
<span  style=""> 444                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 445          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 446          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-4977411250845897884" onmouseenter="enter('-4977411250845897884');" onmouseout="out('-4977411250845897884');" style=""> 447          model.addAttribute(&quot;currentUrl&quot;, currentUrl);                                                             </span>
<span  style=""> 448                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 449          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 450                                                                                                                    </span>
<span class="8236570979651257825" onmouseenter="enter('8236570979651257825');" onmouseout="out('8236570979651257825');" style=""> 451          // We want to replace author ids with their names                                                         </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style=""> 452          addAuditableDisplayFields(entityForm);                                                                    </span>
<span  style=""> 453                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 454          if (isAjaxRequest(request)) {                                                                             </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 455              entityForm.setReadOnly();                                                                             </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 456              model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                                   </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 457              model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                         </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 458              return &quot;modules/modalContainer&quot;;                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 459          } else {                                                                                                  </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 460              model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                            </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 461              model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                         </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 462              return &quot;modules/defaultContainer&quot;;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464      }                                                                                                             </span>
<span  style=""> 465                                                                                                                    </span>
<span class="9182660926479189949" onmouseenter="enter('9182660926479189949');" onmouseout="out('9182660926479189949');" style=""><abbr title=" 466      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathVars,"> 466      protected Map&lt;String, DynamicResultSet&gt; getViewSubRecords(HttpServletRequest request, Map&lt;String, String&gt; pathðŸ”µ</abbr></span>
<span class="4477928710658117231" onmouseenter="enter('4477928710658117231');" onmouseout="out('4477928710658117231');" style=""> 467                                                                ClassMetadata cmd, Entity entity,                   </span>
<span class="5660295431162582196" onmouseenter="enter('5660295431162582196');" onmouseout="out('5660295431162582196');" style=""> 468                                                                List&lt;SectionCrumb&gt; crumbs) throws Exception {       </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style=""> 469          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="5384642555226517985" onmouseenter="enter('5384642555226517985');" onmouseout="out('5384642555226517985');" style=""> 470          if (StringUtils.isEmpty(tabName)) {                                                                       </span>
<span class="-3672533750283461484" onmouseenter="enter('-3672533750283461484');" onmouseout="out('-3672533750283461484');" style=""> 471              tabName = cmd.getFirstTab() == null ? &quot;General&quot; : cmd.getFirstTab().getTabName();                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472          }                                                                                                         </span>
<span class="-5882478663361935855" onmouseenter="enter('-5882478663361935855');" onmouseout="out('-5882478663361935855');" style=""> 473          return service.getRecordsForSelectedTab(cmd, entity, crumbs, tabName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474      }                                                                                                             </span>
<span  style=""> 475                                                                                                                    </span>
<span class="1953795048205106952" onmouseenter="enter('1953795048205106952');" onmouseout="out('1953795048205106952');" style=""> 476      private boolean isAddRequest(Entity entity) {                                                                 </span>
<span class="-2989581670667655563" onmouseenter="enter('-2989581670667655563');" onmouseout="out('-2989581670667655563');" style=""> 477          ExtensionResultHolder&lt;Boolean&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                              </span>
<span class="2773544387861748911" onmouseenter="enter('2773544387861748911');" onmouseout="out('2773544387861748911');" style=""> 478          ExtensionResultStatusType result = extensionManager.getProxy().isAddRequest(entity, resultHolder);        </span>
<span class="8622638495597819717" onmouseenter="enter('8622638495597819717');" onmouseout="out('8622638495597819717');" style=""> 479          if (result.equals(ExtensionResultStatusType.NOT_HANDLED)) {                                               </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 480              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481          }                                                                                                         </span>
<span  style=""> 482                                                                                                                    </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 483          return resultHolder.getResult();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484      }                                                                                                             </span>
<span  style=""> 485                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 486      /**                                                                                                           </span>
<span class="-4864218972040039628" onmouseenter="enter('-4864218972040039628');" onmouseout="out('-4864218972040039628');" style=""> 487       * Attempts to get the List Grid for the selected tab.                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 488       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 489       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 490       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 491       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 492       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 493       * @param id                                                                                                  </span>
<span class="4841027518362301903" onmouseenter="enter('4841027518362301903');" onmouseout="out('4841027518362301903');" style=""> 494       * @param tabName                                                                                             </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 495       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 496       * @param entity                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 497       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 498       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 499       */                                                                                                           </span>
<span class="-7675092144868804288" onmouseenter="enter('-7675092144868804288');" onmouseout="out('-7675092144868804288');" style=""> 500      @RequestMapping(value = &quot;/{id}/{tab:[0-9]+}/{tabName}&quot;, method = RequestMethod.POST)                          </span>
<span class="-2248541185927650044" onmouseenter="enter('-2248541185927650044');" onmouseout="out('-2248541185927650044');" style=""> 501      public String viewEntityTab(HttpServletRequest request, HttpServletResponse response, Model model,            </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 502              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 503              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="2259450910520289810" onmouseenter="enter('2259450910520289810');" onmouseout="out('2259450910520289810');" style=""> 504              @PathVariable(value = &quot;tabName&quot;) String tabName,                                                      </span>
<span class="2754607649135651414" onmouseenter="enter('2754607649135651414');" onmouseout="out('2754607649135651414');" style=""> 505              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm,                                          </span>
<span class="-2950467864443381399" onmouseenter="enter('-2950467864443381399');" onmouseout="out('-2950467864443381399');" style=""> 506              @ModelAttribute(value = &quot;entity&quot;) Entity entity) throws Exception {                                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 507          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 508          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-4536538478423353936" onmouseenter="enter('-4536538478423353936');" onmouseout="out('-4536538478423353936');" style=""> 509          List&lt;SectionCrumb&gt; crumbs = getSectionCrumbs(request, sectionKey, id);                                    </span>
<span class="7448677779013604849" onmouseenter="enter('7448677779013604849');" onmouseout="out('7448677779013604849');" style=""> 510          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, crumbs, pathVars);  </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 511          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 512          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span class="-1542864321304829050" onmouseenter="enter('-1542864321304829050');" onmouseout="out('-1542864321304829050');" style=""> 513          Map&lt;String, DynamicResultSet&gt; subRecordsMap = getViewSubRecords(request, pathVars, cmd, entity, crumbs);  </span>
<span class="-3846048132763499568" onmouseenter="enter('-3846048132763499568');" onmouseout="out('-3846048132763499568');" style=""> 514          entityForm = formService.createEntityForm(cmd, entity, subRecordsMap, crumbs);                            </span>
<span  style=""> 515                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 516          if (isAddRequest(entity)) {                                                                               </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 517              modifyAddEntityForm(entityForm, pathVars);                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 518          } else {                                                                                                  </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 519              modifyEntityForm(entityForm, pathVars);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520          }                                                                                                         </span>
<span  style=""> 521                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 522          model.addAttribute(&quot;entity&quot;, entity);                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style=""> 523          model.addAttribute(&quot;entityForm&quot;, entityForm);                                                             </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 524          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span  style=""> 525                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 526          setModelAttributes(model, sectionKey);                                                                    </span>
<span  style=""> 527                                                                                                                    </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 528          model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                                </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 529          model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                             </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 530          return &quot;modules/defaultContainer&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531      }                                                                                                             </span>
<span  style=""> 532                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 533      /**                                                                                                           </span>
<span class="26428616724277901" onmouseenter="enter('26428616724277901');" onmouseout="out('26428616724277901');" style=""> 534       * Builds JSON that looks like this:                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 535       *                                                                                                            </span>
<span class="-619170819873097874" onmouseenter="enter('-619170819873097874');" onmouseout="out('-619170819873097874');" style=""> 536       * {&quot;errors&quot;:                                                                                                 </span>
<span class="-7867797149207986089" onmouseenter="enter('-7867797149207986089');" onmouseout="out('-7867797149207986089');" style=""> 537       *      [{&quot;message&quot;:&quot;This field is Required&quot;,                                                                 </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 538       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 539       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 540       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 541       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="762081609125064039" onmouseenter="enter('762081609125064039');" onmouseout="out('762081609125064039');" style=""> 542       *        },                                                                                                  </span>
<span class="2065208195238134241" onmouseenter="enter('2065208195238134241');" onmouseout="out('2065208195238134241');" style=""> 543       *        {&quot;message&quot;:&quot;This field is Required&quot;,                                                                </span>
<span class="5571013926509347967" onmouseenter="enter('5571013926509347967');" onmouseout="out('5571013926509347967');" style=""> 544       *        &quot;code&quot;: &quot;requiredValidationFailure&quot;                                                                 </span>
<span class="2193225165471793404" onmouseenter="enter('2193225165471793404');" onmouseout="out('2193225165471793404');" style=""> 545       *        &quot;field&quot;:&quot;defaultSku--name&quot;,                                                                         </span>
<span class="-292030086071489485" onmouseenter="enter('-292030086071489485');" onmouseout="out('-292030086071489485');" style=""> 546       *        &quot;errorType&quot;, &quot;field&quot;,                                                                               </span>
<span class="-614892938232592574" onmouseenter="enter('-614892938232592574');" onmouseout="out('-614892938232592574');" style=""> 547       *        &quot;tab&quot;: &quot;General&quot;                                                                                    </span>
<span class="-832778532632947969" onmouseenter="enter('-832778532632947969');" onmouseout="out('-832778532632947969');" style=""> 548       *        }]                                                                                                  </span>
<span class="8941010846014250828" onmouseenter="enter('8941010846014250828');" onmouseout="out('8941010846014250828');" style=""> 549       * }                                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 550       *                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 551       */                                                                                                           </span>
<span class="726178843151373675" onmouseenter="enter('726178843151373675');" onmouseout="out('726178843151373675');" style=""> 552      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST, produces = &quot;application/json&quot;)                  </span>
<span class="-4245682307765667372" onmouseenter="enter('-4245682307765667372');" onmouseout="out('-4245682307765667372');" style=""> 553      public String saveEntityJson(HttpServletRequest request, HttpServletResponse response, Model model,           </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 554              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 555              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="-5165411007609652701" onmouseenter="enter('-5165411007609652701');" onmouseout="out('-5165411007609652701');" style=""> 556              @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                    </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 557              RedirectAttributes ra) throws Exception {                                                             </span>
<span  style=""> 558                                                                                                                    </span>
<span class="-7049584637685461961" onmouseenter="enter('-7049584637685461961');" onmouseout="out('-7049584637685461961');" style=""> 559          saveEntity(request, response, model, pathVars, id, entityForm, result, ra);                               </span>
<span  style=""> 560                                                                                                                    </span>
<span class="2770382331963423086" onmouseenter="enter('2770382331963423086');" onmouseout="out('2770382331963423086');" style=""> 561          JsonResponse json = new JsonResponse(response);                                                           </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 562          if (result.hasErrors()) {                                                                                 </span>
<span class="6668101882629849049" onmouseenter="enter('6668101882629849049');" onmouseout="out('6668101882629849049');" style=""> 563              populateJsonValidationErrors(entityForm, result, json);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564          }                                                                                                         </span>
<span class="-8719030961107019295" onmouseenter="enter('-8719030961107019295');" onmouseout="out('-8719030961107019295');" style=""> 565          List&lt;String&gt; dirtyList = buildDirtyList(pathVars, request, id);                                           </span>
<span class="-2397478597494600131" onmouseenter="enter('-2397478597494600131');" onmouseout="out('-2397478597494600131');" style=""> 566          if (CollectionUtils.isNotEmpty(dirtyList)) {                                                              </span>
<span class="-6863151800017638945" onmouseenter="enter('-6863151800017638945');" onmouseout="out('-6863151800017638945');" style=""> 567              json.with(&quot;dirty&quot;, dirtyList);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568          }                                                                                                         </span>
<span  style=""> 569                                                                                                                    </span>
<span class="1148846903613025505" onmouseenter="enter('1148846903613025505');" onmouseout="out('1148846903613025505');" style=""> 570          ExtensionResultHolder&lt;String&gt; resultHolder = new ExtensionResultHolder&lt;&gt;();                               </span>
<span class="772761850497532920" onmouseenter="enter('772761850497532920');" onmouseout="out('772761850497532920');" style=""><abbr title=" 571          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(response, result.hasErrors(), getSectionKey(pathVars), id, resultHolder);"> 571          ExtensionResultStatusType resultStatusType = extensionManager.getProxy().overrideSaveEntityJsonResponse(reðŸ”µ</abbr></span>
<span class="-7225919658162387284" onmouseenter="enter('-7225919658162387284');" onmouseout="out('-7225919658162387284');" style=""> 572          if (resultStatusType.equals(ExtensionResultStatusType.HANDLED)) {                                         </span>
<span class="2335728720915807395" onmouseenter="enter('2335728720915807395');" onmouseout="out('2335728720915807395');" style=""> 573              return resultHolder.getResult();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574          }                                                                                                         </span>
<span  style=""> 575                                                                                                                    </span>
<span class="-3901811907821215875" onmouseenter="enter('-3901811907821215875');" onmouseout="out('-3901811907821215875');" style=""> 576          return json.done();                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577      }                                                                                                             </span>
<span  style=""> 578                                                                                                                    </span>
<span class="-2624067384280123527" onmouseenter="enter('-2624067384280123527');" onmouseout="out('-2624067384280123527');" style=""><abbr title=" 579      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throws ServiceException {"> 579      public List&lt;String&gt; buildDirtyList(Map&lt;String, String&gt; pathVars, HttpServletRequest request, String id) throwsðŸ”µ</abbr></span>
<span class="-6199220983064020273" onmouseenter="enter('-6199220983064020273');" onmouseout="out('-6199220983064020273');" style=""> 580          List&lt;String&gt; dirtyList = new ArrayList&lt;&gt;();                                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 581          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 582          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 583          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 584          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 584          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="-6293964121119142853" onmouseenter="enter('-6293964121119142853');" onmouseout="out('-6293964121119142853');" style=""> 585          ClassMetadata cmd = null;                                                                                 </span>
<span class="-6100049554794336383" onmouseenter="enter('-6100049554794336383');" onmouseout="out('-6100049554794336383');" style=""> 586          Entity entity = null;                                                                                     </span>
<span class="-7221558264805358950" onmouseenter="enter('-7221558264805358950');" onmouseout="out('-7221558264805358950');" style=""> 587          cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();                             </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 588          entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];                    </span>
<span  style=""> 589                                                                                                                    </span>
<span class="-538034338216639378" onmouseenter="enter('-538034338216639378');" onmouseout="out('-538034338216639378');" style=""> 590          for (Property p: entity.getProperties()) {                                                                </span>
<span class="-5586383415891827802" onmouseenter="enter('-5586383415891827802');" onmouseout="out('-5586383415891827802');" style=""> 591              if (p.getIsDirty()) {                                                                                 </span>
<span class="-1571805809811752662" onmouseenter="enter('-1571805809811752662');" onmouseout="out('-1571805809811752662');" style=""> 592                  dirtyList.add(p.getName());                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594          }                                                                                                         </span>
<span class="7211627429904225799" onmouseenter="enter('7211627429904225799');" onmouseout="out('7211627429904225799');" style=""> 595          return dirtyList;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596      }                                                                                                             </span>
<span  style=""> 597                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 598      /**                                                                                                           </span>
<span class="-1912365624495655250" onmouseenter="enter('-1912365624495655250');" onmouseout="out('-1912365624495655250');" style=""> 599       * Attempts to save the given entity. If validation is unsuccessful, it will re-render the entity form with   </span>
<span class="3378821078357952120" onmouseenter="enter('3378821078357952120');" onmouseout="out('3378821078357952120');" style=""> 600       * error fields highlighted. On a successful save, it will refresh the entity page.                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 601       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 602       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 603       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 604       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 605       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 606       * @param id                                                                                                  </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style=""> 607       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style=""> 608       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 609       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 610       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 611       */                                                                                                           </span>
<span class="681227659796054179" onmouseenter="enter('681227659796054179');" onmouseout="out('681227659796054179');" style=""> 612      @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.POST)                                                 </span>
<span class="2696827203115285075" onmouseenter="enter('2696827203115285075');" onmouseout="out('2696827203115285075');" style=""> 613      public String saveEntity(HttpServletRequest request, HttpServletResponse response, Model model,               </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 614              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 615              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 616              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 617              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 618          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 619          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 620          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 621          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 621          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 622          ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();               </span>
<span  style=""> 623                                                                                                                    </span>
<span class="-4959046161090402131" onmouseenter="enter('-4959046161090402131');" onmouseout="out('-4959046161090402131');" style=""> 624          extractDynamicFormFields(cmd, entityForm);                                                                </span>
<span  style=""> 625                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 626          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 626          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="-4517703585527939334" onmouseenter="enter('-4517703585527939334');" onmouseout="out('-4517703585527939334');" style=""> 627          Entity entity = service.updateEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span  style=""> 628                                                                                                                    </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 629          entityFormValidator.validate(entityForm, entity, result);                                                 </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 630          if (result.hasErrors()) {                                                                                 </span>
<span class="-9083492279253959347" onmouseenter="enter('-9083492279253959347');" onmouseout="out('-9083492279253959347');" style=""> 631              model.addAttribute(&quot;headerFlash&quot;, &quot;save.unsuccessful&quot;);                                               </span>
<span class="-3255113992478543295" onmouseenter="enter('-3255113992478543295');" onmouseout="out('-3255113992478543295');" style=""> 632              model.addAttribute(&quot;headerFlashAlert&quot;, true);                                                         </span>
<span  style=""> 633                                                                                                                    </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 634              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 634              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 635              entityForm.clearFieldsMap();                                                                          </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 636              formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);                </span>
<span  style=""> 637                                                                                                                    </span>
<span class="866690756091128541" onmouseenter="enter('866690756091128541');" onmouseout="out('866690756091128541');" style=""> 638              if (isAddRequest(entity)) {                                                                           </span>
<span class="-9055696754430154144" onmouseenter="enter('-9055696754430154144');" onmouseout="out('-9055696754430154144');" style=""> 639                  modifyAddEntityForm(entityForm, pathVars);                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 640              } else {                                                                                              </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 641                  modifyEntityForm(entityForm, pathVars);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642              }                                                                                                     </span>
<span  style=""> 643                                                                                                                    </span>
<span class="-8005063546895619069" onmouseenter="enter('-8005063546895619069');" onmouseout="out('-8005063546895619069');" style=""> 644              model.addAttribute(&quot;entity&quot;, entity);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style=""> 645              model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                 </span>
<span  style=""> 646                                                                                                                    </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 647              setModelAttributes(model, sectionKey);                                                                </span>
<span  style=""> 648                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 649              if (isAjaxRequest(request)) {                                                                         </span>
<span class="7356620202531041753" onmouseenter="enter('7356620202531041753');" onmouseout="out('7356620202531041753');" style=""> 650                  entityForm.setReadOnly();                                                                         </span>
<span class="5332308135205776861" onmouseenter="enter('5332308135205776861');" onmouseout="out('5332308135205776861');" style=""> 651                  model.addAttribute(&quot;viewType&quot;, &quot;modal/entityView&quot;);                                               </span>
<span class="4999052042157491707" onmouseenter="enter('4999052042157491707');" onmouseout="out('4999052042157491707');" style=""> 652                  model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.VIEW_ENTITY.getType());                     </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 653                  return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 654              } else {                                                                                              </span>
<span class="-9186208801255720147" onmouseenter="enter('-9186208801255720147');" onmouseout="out('-9186208801255720147');" style=""> 655                  model.addAttribute(&quot;useAjaxUpdate&quot;, true);                                                        </span>
<span class="-4186728612395086803" onmouseenter="enter('-4186728612395086803');" onmouseout="out('-4186728612395086803');" style=""> 656                  model.addAttribute(&quot;viewType&quot;, &quot;entityEdit&quot;);                                                     </span>
<span class="-8888412066156990741" onmouseenter="enter('-8888412066156990741');" onmouseout="out('-8888412066156990741');" style=""> 657                  return &quot;modules/defaultContainer&quot;;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659          }                                                                                                         </span>
<span  style=""> 660                                                                                                                    </span>
<span class="-8977665602521560288" onmouseenter="enter('-8977665602521560288');" onmouseout="out('-8977665602521560288');" style=""> 661          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;save.successful&quot;);                                                   </span>
<span  style=""> 662                                                                                                                    </span>
<span class="5326436654777975784" onmouseenter="enter('5326436654777975784');" onmouseout="out('5326436654777975784');" style=""> 663          return &quot;redirect:/&quot; + sectionKey + &quot;/&quot; + id;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664      }                                                                                                             </span>
<span  style=""> 665                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 666      /**                                                                                                           </span>
<span class="4876253458579857532" onmouseenter="enter('4876253458579857532');" onmouseout="out('4876253458579857532');" style=""> 667       * Attempts to remove the given entity.                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 668       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 669       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 670       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 671       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 672       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 673       * @param id                                                                                                  </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 674       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 675       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 676       */                                                                                                           </span>
<span class="8293921381301703428" onmouseenter="enter('8293921381301703428');" onmouseout="out('8293921381301703428');" style=""> 677      @RequestMapping(value = &quot;/{id}/delete&quot;, method = RequestMethod.POST)                                          </span>
<span class="2313354717081876463" onmouseenter="enter('2313354717081876463');" onmouseout="out('2313354717081876463');" style=""> 678      public String removeEntity(HttpServletRequest request, HttpServletResponse response, Model model,             </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 679              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 680              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="-4070161356240747615" onmouseenter="enter('-4070161356240747615');" onmouseout="out('-4070161356240747615');" style=""> 681              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result,                      </span>
<span class="-8377204068919013534" onmouseenter="enter('-8377204068919013534');" onmouseout="out('-8377204068919013534');" style=""> 682              RedirectAttributes ra) throws Exception {                                                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 683          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 684          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 685          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span  style=""> 686                                                                                                                    </span>
<span class="8924350377579193296" onmouseenter="enter('8924350377579193296');" onmouseout="out('8924350377579193296');" style=""><abbr title=" 687          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCustomCriteria());"> 687          String[] sectionCriteria = customCriteriaService.mergeSectionCustomCriteria(sectionClassName, getSectionCuðŸ”µ</abbr></span>
<span class="6624819200143935214" onmouseenter="enter('6624819200143935214');" onmouseout="out('6624819200143935214');" style=""> 688          Entity entity = service.removeEntity(entityForm, sectionCriteria, sectionCrumbs).getEntity();             </span>
<span class="-6561774320633688873" onmouseenter="enter('-6561774320633688873');" onmouseout="out('-6561774320633688873');" style=""> 689          // Removal does not normally return an Entity unless there is some validation error                       </span>
<span class="-2807113977407494827" onmouseenter="enter('-2807113977407494827');" onmouseout="out('-2807113977407494827');" style=""> 690          if (entity != null) {                                                                                     </span>
<span class="6387591393977647956" onmouseenter="enter('6387591393977647956');" onmouseout="out('6387591393977647956');" style=""> 691              entityFormValidator.validate(entityForm, entity, result);                                             </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style=""> 692              if (result.hasErrors()) {                                                                             </span>
<span class="354313568014337940" onmouseenter="enter('354313568014337940');" onmouseout="out('354313568014337940');" style=""> 693                  // Create a flash attribute for the unsuccessful delete                                           </span>
<span class="-3408473788799892596" onmouseenter="enter('-3408473788799892596');" onmouseout="out('-3408473788799892596');" style=""> 694                  FlashMap fm = new FlashMap();                                                                     </span>
<span class="-3785724779356953427" onmouseenter="enter('-3785724779356953427');" onmouseout="out('-3785724779356953427');" style=""> 695                  fm.put(&quot;headerFlash&quot;, &quot;delete.unsuccessful&quot;);                                                     </span>
<span class="2000410372434500283" onmouseenter="enter('2000410372434500283');" onmouseout="out('2000410372434500283');" style=""> 696                  fm.put(&quot;headerFlashAlert&quot;, true);                                                                 </span>
<span class="-216272657842661141" onmouseenter="enter('-216272657842661141');" onmouseout="out('-216272657842661141');" style=""> 697                  request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE, fm);                           </span>
<span  style=""> 698                                                                                                                    </span>
<span class="-9154666565283892619" onmouseenter="enter('-9154666565283892619');" onmouseout="out('-9154666565283892619');" style=""> 699                  // Re-look back up the entity so that we can return something populated                           </span>
<span class="4282540080013759409" onmouseenter="enter('4282540080013759409');" onmouseout="out('4282540080013759409');" style=""><abbr title=" 700                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbs, pathVars);"> 700                  PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, sectionCrumbðŸ”µ</abbr></span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 701                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-8733438670030443717" onmouseenter="enter('-8733438670030443717');" onmouseout="out('-8733438670030443717');" style=""> 702                  entity = service.getRecord(ppr, id, cmd, false).getDynamicResultSet().getRecords()[0];            </span>
<span class="-1751195764969422173" onmouseenter="enter('-1751195764969422173');" onmouseout="out('-1751195764969422173');" style=""><abbr title=" 703                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, sectionCrumbs);"> 703                  Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForAllSubCollections(ppr, entity, ðŸ”µ</abbr></span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style=""> 704                  entityForm.clearFieldsMap();                                                                      </span>
<span class="3638724345026879346" onmouseenter="enter('3638724345026879346');" onmouseout="out('3638724345026879346');" style=""> 705                  formService.populateEntityForm(cmd, entity, subRecordsMap, entityForm, sectionCrumbs);            </span>
<span class="-1918535871427094882" onmouseenter="enter('-1918535871427094882');" onmouseout="out('-1918535871427094882');" style=""> 706                  modifyEntityForm(entityForm, pathVars);                                                           </span>
<span  style=""> 707                                                                                                                    </span>
<span class="-1358530666837283115" onmouseenter="enter('-1358530666837283115');" onmouseout="out('-1358530666837283115');" style=""> 708                  return populateJsonValidationErrors(entityForm, result, new JsonResponse(response))               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style=""> 709                          .done();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711          }                                                                                                         </span>
<span  style=""> 712                                                                                                                    </span>
<span class="3611526951082120901" onmouseenter="enter('3611526951082120901');" onmouseout="out('3611526951082120901');" style=""> 713          ra.addFlashAttribute(&quot;headerFlash&quot;, &quot;delete.successful&quot;);                                                 </span>
<span class="2579818068351246488" onmouseenter="enter('2579818068351246488');" onmouseout="out('2579818068351246488');" style=""> 714          ra.addFlashAttribute(&quot;headerFlashAlert&quot;, true);                                                           </span>
<span  style=""> 715                                                                                                                    </span>
<span class="1916110883796229758" onmouseenter="enter('1916110883796229758');" onmouseout="out('1916110883796229758');" style=""> 716          if (isAjaxRequest(request)) {                                                                             </span>
<span class="-5684384949344822714" onmouseenter="enter('-5684384949344822714');" onmouseout="out('-5684384949344822714');" style=""> 717              // redirect attributes won&#x27;t work here since ajaxredirect actually makes a new request                </span>
<span class="-9107475529968351628" onmouseenter="enter('-9107475529968351628');" onmouseout="out('-9107475529968351628');" style=""> 718              return &quot;ajaxredirect:&quot; + getContextPath(request) + sectionKey + &quot;?headerFlash=delete.successful&quot;;     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 719          } else {                                                                                                  </span>
<span class="4357427724598824699" onmouseenter="enter('4357427724598824699');" onmouseout="out('4357427724598824699');" style=""> 720              return &quot;redirect:/&quot; + sectionKey;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 722      }                                                                                                             </span>
<span  style=""> 723                                                                                                                    </span>
<span class="-2983794507366563158" onmouseenter="enter('-2983794507366563158');" onmouseout="out('-2983794507366563158');" style=""> 724      @RequestMapping(value = &quot;/{collectionField:.*}/details&quot;, method = RequestMethod.GET)                          </span>
<span class="-527911248282232950" onmouseenter="enter('-527911248282232950');" onmouseout="out('-527911248282232950');" style=""><abbr title=" 725      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletResponse response, Model model,"> 725      public @ResponseBody Map&lt;String, String&gt; getCollectionValueDetails(HttpServletRequest request, HttpServletRespðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 726              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 727              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-5250072335910309101" onmouseenter="enter('-5250072335910309101');" onmouseout="out('-5250072335910309101');" style=""> 728              @RequestParam String ids,                                                                             </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 729              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 730          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="1649393097671814093" onmouseenter="enter('1649393097671814093');" onmouseout="out('1649393097671814093');" style=""> 731          String sectionClassName = getClassNameForSection(sectionKey);                                             </span>
<span class="4646131203125045792" onmouseenter="enter('4646131203125045792');" onmouseout="out('4646131203125045792');" style=""> 732          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, null, null);                                 </span>
<span class="-5225610456611199616" onmouseenter="enter('-5225610456611199616');" onmouseout="out('-5225610456611199616');" style=""><abbr title=" 733          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectionCrumbs, pathVars);"> 733          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(sectionClassName, requestParams, sectiðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""> 734          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 735          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 736          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style=""> 737                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style=""> 738          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span class="-2120492003233088270" onmouseenter="enter('-2120492003233088270');" onmouseout="out('-2120492003233088270');" style=""> 739          ppr.setStartIndex(getStartIndex(requestParams));                                                          </span>
<span class="2736790979641523309" onmouseenter="enter('2736790979641523309');" onmouseout="out('2736790979641523309');" style=""> 740          ppr.setMaxIndex(getMaxIndex(requestParams));                                                              </span>
<span  style=""> 741                                                                                                                    </span>
<span class="-8000769512056204294" onmouseenter="enter('-8000769512056204294');" onmouseout="out('-8000769512056204294');" style=""> 742          if (md instanceof BasicFieldMetadata) {                                                                   </span>
<span class="-1954892043355765019" onmouseenter="enter('-1954892043355765019');" onmouseout="out('-1954892043355765019');" style=""> 743              String idProp = ((BasicFieldMetadata) md).getForeignKeyProperty();                                    </span>
<span class="6288096257758990604" onmouseenter="enter('6288096257758990604');" onmouseout="out('6288096257758990604');" style=""> 744              String displayProp = ((BasicFieldMetadata) md).getForeignKeyDisplayValueProperty();                   </span>
<span  style=""> 745                                                                                                                    </span>
<span class="-6477100624593005266" onmouseenter="enter('-6477100624593005266');" onmouseout="out('-6477100624593005266');" style=""> 746              List&lt;String&gt; filterValues = BLCArrayUtils.asList(ids.split(FILTER_VALUE_SEPARATOR_REGEX));            </span>
<span class="3640259021720155935" onmouseenter="enter('3640259021720155935');" onmouseout="out('3640259021720155935');" style=""> 747              ppr.addFilterAndSortCriteria(new FilterAndSortCriteria(idProp, filterValues));                        </span>
<span  style=""> 748                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style=""> 749              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2768740094948248396" onmouseenter="enter('-2768740094948248396');" onmouseout="out('-2768740094948248396');" style=""> 750              Map&lt;String, String&gt; returnMap = new HashMap&lt;&gt;();                                                      </span>
<span  style=""> 751                                                                                                                    </span>
<span class="-5517026699518874938" onmouseenter="enter('-5517026699518874938');" onmouseout="out('-5517026699518874938');" style=""> 752              for (Entity e : drs.getRecords()) {                                                                   </span>
<span class="4979367110517822568" onmouseenter="enter('4979367110517822568');" onmouseout="out('4979367110517822568');" style=""> 753                  String id = e.getPMap().get(idProp).getValue();                                                   </span>
<span class="-4946347213336092877" onmouseenter="enter('-4946347213336092877');" onmouseout="out('-4946347213336092877');" style=""> 754                  String disp = e.getPMap().get(displayProp).getDisplayValue();                                     </span>
<span  style=""> 755                                                                                                                    </span>
<span class="3483982845402449596" onmouseenter="enter('3483982845402449596');" onmouseout="out('3483982845402449596');" style=""> 756                  if (StringUtils.isBlank(disp)) {                                                                  </span>
<span class="-2027181132953179584" onmouseenter="enter('-2027181132953179584');" onmouseout="out('-2027181132953179584');" style=""> 757                      disp = e.getPMap().get(displayProp).getValue();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758                  }                                                                                                 </span>
<span  style=""> 759                                                                                                                    </span>
<span class="-1075893121428940879" onmouseenter="enter('-1075893121428940879');" onmouseout="out('-1075893121428940879');" style=""> 760                  returnMap.put(id,  disp);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761              }                                                                                                     </span>
<span  style=""> 762                                                                                                                    </span>
<span class="9157811424862351106" onmouseenter="enter('9157811424862351106');" onmouseout="out('9157811424862351106');" style=""> 763              return returnMap;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 764          }                                                                                                         </span>
<span  style=""> 765                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 766          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767      }                                                                                                             </span>
<span  style=""> 768                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 769      /**                                                                                                           </span>
<span class="7896529828316523089" onmouseenter="enter('7896529828316523089');" onmouseout="out('7896529828316523089');" style=""><abbr title=" 770       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of products"> 770       * Shows the modal popup for the current selected &quot;to-one&quot; field. For instance, if you are viewing a list of pðŸ”µ</abbr></span>
<span class="8702245574166025616" onmouseenter="enter('8702245574166025616');" onmouseout="out('8702245574166025616');" style=""> 771       * then this method is invoked when a user clicks on the name of the default category field.                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 772       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 773       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 774       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 775       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 776       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 777       * @param collectionField                                                                                     </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 778       * @param id                                                                                                  </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 779       * @return                                                                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 780       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 781       */                                                                                                           </span>
<span class="1405910210670150204" onmouseenter="enter('1405910210670150204');" onmouseout="out('1405910210670150204');" style=""> 782      @RequestMapping(value = &quot;/{collectionField:.*}/{id}/view&quot;, method = RequestMethod.GET)                        </span>
<span class="-5496524556428427140" onmouseenter="enter('-5496524556428427140');" onmouseout="out('-5496524556428427140');" style=""> 783      public String viewCollectionItemDetails(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 784              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 785              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-1857511616350008386" onmouseenter="enter('-1857511616350008386');" onmouseout="out('-1857511616350008386');" style=""> 786              @PathVariable(value=&quot;id&quot;) String id) throws Exception {                                               </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 787          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 788          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 789          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title=" 790          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();"> 790          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 791          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="2157347470680130722" onmouseenter="enter('2157347470680130722');" onmouseout="out('2157347470680130722');" style=""> 792          BasicFieldMetadata md = (BasicFieldMetadata) collectionProperty.getMetadata();                            </span>
<span  style=""> 793                                                                                                                    </span>
<span class="-1856968160831305726" onmouseenter="enter('-1856968160831305726');" onmouseout="out('-1856968160831305726');" style=""><abbr title=" 794          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(), sectionKey);"> 794          AdminSection section = adminNavigationService.findAdminSectionByClassAndSectionId(md.getForeignKeyClass(),ðŸ”µ</abbr></span>
<span class="-151095669048618305" onmouseenter="enter('-151095669048618305');" onmouseout="out('-151095669048618305');" style=""><abbr title=" 795          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrl();"> 795          String sectionUrlKey = (section.getUrl().startsWith(&quot;/&quot;)) ? section.getUrl().substring(1) : section.getUrlðŸ”µ</abbr></span>
<span class="4949862081138664893" onmouseenter="enter('4949862081138664893');" onmouseout="out('4949862081138664893');" style=""> 796          Map&lt;String, String&gt; varsForField = new HashMap&lt;&gt;();                                                       </span>
<span class="-4429965231898090358" onmouseenter="enter('-4429965231898090358');" onmouseout="out('-4429965231898090358');" style=""> 797          varsForField.put(&quot;sectionKey&quot;, sectionUrlKey);                                                            </span>
<span class="4805235980730638518" onmouseenter="enter('4805235980730638518');" onmouseout="out('4805235980730638518');" style=""> 798          return viewEntityForm(request, response, model, varsForField, id);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799      }                                                                                                             </span>
<span  style=""> 800                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style=""> 801      @RequestMapping(                                                                                              </span>
<span class="4528666449367390600" onmouseenter="enter('4528666449367390600');" onmouseout="out('4528666449367390600');" style=""> 802              value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{tab:[0-9]+}/{tabName}&quot;,                       </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style=""> 803              method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 804      )                                                                                                             </span>
<span class="1786222500639285262" onmouseenter="enter('1786222500639285262');" onmouseout="out('1786222500639285262');" style=""> 805      public String viewCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 806                                          @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 807                                          @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 808                                          @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style=""> 809                                          @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style=""> 810                                          @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style=""><abbr title=" 811                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 811                                          @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style=""> 812                                                                                                                    </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style=""><abbr title=" 813          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 813          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814      }                                                                                                             </span>
<span  style=""> 815                                                                                                                    </span>
<span  style=""> 816                                                                                                                    </span>
<span class="2731983140361230349" onmouseenter="enter('2731983140361230349');" onmouseout="out('2731983140361230349');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 817 +    @RequestMapping(                                                                                              </span>
<span class="-3329921938797888660" onmouseenter="enter('-3329921938797888660');" onmouseout="out('-3329921938797888660');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 818 +            value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view/{tab:[0-9]+}/{tabName}&quot;,                  </span>
<span class="7470628324060602258" onmouseenter="enter('7470628324060602258');" onmouseout="out('7470628324060602258');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 819 +            method = RequestMethod.POST                                                                           </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 820 +    )                                                                                                             </span>
<span class="546530564983480962" onmouseenter="enter('546530564983480962');" onmouseout="out('546530564983480962');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 821 +    public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model model,"> 821 +    public String viewReadOnlyCollectionItemTab(HttpServletRequest request, HttpServletResponse response, Model moðŸ”µ</abbr></span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 822 +                                        @PathVariable  Map&lt;String, String&gt; pathVars,                              </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 823 +                                        @PathVariable(value=&quot;id&quot;) String id,                                      </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 824 +                                        @PathVariable(value=&quot;collectionField&quot;) String collectionField,            </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 825 +                                        @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,          </span>
<span class="1347902176383833481" onmouseenter="enter('1347902176383833481');" onmouseout="out('1347902176383833481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 826 +                                        @PathVariable(value=&quot;tabName&quot;) String tabName,                            </span>
<span class="-2122907702415237135" onmouseenter="enter('-2122907702415237135');" onmouseout="out('-2122907702415237135');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 827 +                                        @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws Exception {"> 827 +                                        @ModelAttribute(value = &quot;entityForm&quot;) EntityForm entityForm) throws ExceptðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 828 +                                                                                                                  </span>
<span class="2284268618604436814" onmouseenter="enter('2284268618604436814');" onmouseout="out('2284268618604436814');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 829 +        return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeaderType.VIEW_COLLECTION_ITEM.getType(), entityForm, null);"> 829 +        return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, ModalHeadðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 830 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 831 +                                                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 832 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 833      /**                                                                                                           </span>
<span class="1274042523848442367" onmouseenter="enter('1274042523848442367');" onmouseout="out('1274042523848442367');" style=""> 834       * Returns the records for a given collectionField filtered by a particular criteria                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 835       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 836       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 837       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 838       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 839       * @param pathVars                                                                                            </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 840       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 841       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 842       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 843       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 844       */                                                                                                           </span>
<span class="-4095443548484775059" onmouseenter="enter('-4095443548484775059');" onmouseout="out('-4095443548484775059');" style=""> 845      @RequestMapping(value = &quot;/{id}/{collectionField:.*}&quot;, method = RequestMethod.GET)                             </span>
<span class="-5889287394210369546" onmouseenter="enter('-5889287394210369546');" onmouseout="out('-5889287394210369546');" style=""> 846      public String getCollectionFieldRecords(HttpServletRequest request, HttpServletResponse response, Model model,</span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style=""> 847              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 848              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 849              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="3465670919255037355" onmouseenter="enter('3465670919255037355');" onmouseout="out('3465670919255037355');" style=""> 850              @RequestParam  MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                        </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 851          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 852          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 853          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-6545915569490985196" onmouseenter="enter('-6545915569490985196');" onmouseout="out('-6545915569490985196');" style=""><abbr title=" 854          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCrumbs, pathVars);"> 854          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, requestParams, sectionCðŸ”µ</abbr></span>
<span class="-7085294426206085681" onmouseenter="enter('-7085294426206085681');" onmouseout="out('-7085294426206085681');" style=""> 855          ClassMetadata mainMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();      </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 856          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style=""> 857                                                                                                                    </span>
<span class="-3734134243620930531" onmouseenter="enter('-3734134243620930531');" onmouseout="out('-3734134243620930531');" style=""> 858          ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);                        </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style=""> 859          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style=""> 860                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style=""> 861          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-8440278474384944243" onmouseenter="enter('-8440278474384944243');" onmouseout="out('-8440278474384944243');" style=""><abbr title=" 862          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionKey, sectionCrumbs);"> 862          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, requestParams, sectionðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style=""> 863          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style=""> 864                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 865          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style=""> 866                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style=""> 867          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 868          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style=""> 869          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870      }                                                                                                             </span>
<span  style=""> 871                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 872      /**                                                                                                           </span>
<span class="-2279175998905644242" onmouseenter="enter('-2279175998905644242');" onmouseout="out('-2279175998905644242');" style=""><abbr title=" 873       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomes"> 873       * Shows the modal dialog that is used to add an item to a given collection. There are several possible outcomðŸ”µ</abbr></span>
<span class="-3490572548815062734" onmouseenter="enter('-3490572548815062734');" onmouseout="out('-3490572548815062734');" style=""> 874       * of this call depending on the type of the specified collection field.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 875       *                                                                                                            </span>
<span class="2717555647352622731" onmouseenter="enter('2717555647352622731');" onmouseout="out('2717555647352622731');" style=""> 876       * &lt;ul&gt;                                                                                                       </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 877       *  &lt;li&gt;                                                                                                      </span>
<span class="4930235181592711719" onmouseenter="enter('4930235181592711719');" onmouseout="out('4930235181592711719');" style=""><abbr title=" 878       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the user may"> 878       *    &lt;b&gt;Basic Collection (Persist)&lt;/b&gt; - Renders a blank form for the specified target entity so that the useðŸ”µ</abbr></span>
<span class="-3142080293607523336" onmouseenter="enter('-3142080293607523336');" onmouseout="out('-3142080293607523336');" style=""><abbr title=" 879       *    enter information and associate the record with this collection. Used by fields such as ProductAttribute."> 879       *    enter information and associate the record with this collection. Used by fields such as ProductAttributeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 880       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 881       *  &lt;li&gt;                                                                                                      </span>
<span class="6319691685860667757" onmouseenter="enter('6319691685860667757');" onmouseout="out('6319691685860667757');" style=""><abbr title=" 882       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and select it."> 882       *    &lt;b&gt;Basic Collection (Lookup)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and seðŸ”µ</abbr></span>
<span class="-8731186021492741581" onmouseenter="enter('-8731186021492741581');" onmouseout="out('-8731186021492741581');" style=""> 883       *    Used by fields such as &quot;allParentCategories&quot;.                                                           </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 884       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 885       *  &lt;li&gt;                                                                                                      </span>
<span class="-6847404578833725914" onmouseenter="enter('-6847404578833725914');" onmouseout="out('-6847404578833725914');" style=""><abbr title=" 886       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 886       *    &lt;b&gt;Adorned Collection (without form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entitðŸ”µ</abbr></span>
<span class="568361472595397074" onmouseenter="enter('568361472595397074');" onmouseout="out('568361472595397074');" style=""><abbr title=" 887       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the operation"> 887       *    select it. The view rendered by this is identical to basic collection (lookup), but will perform the opeðŸ”µ</abbr></span>
<span class="-4048066359856567222" onmouseenter="enter('-4048066359856567222');" onmouseout="out('-4048066359856567222');" style=""><abbr title=" 888       *    on an adorned field, which may carry extra meta-information about the created relationship, such as order."> 888       *    on an adorned field, which may carry extra meta-information about the created relationship, such as ordeðŸ”µ</abbr></span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 889       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 890       *  &lt;li&gt;                                                                                                      </span>
<span class="7355096557601214207" onmouseenter="enter('7355096557601214207');" onmouseout="out('7355096557601214207');" style=""><abbr title=" 891       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity and"> 891       *    &lt;b&gt;Adorned Collection (with form)&lt;/b&gt; - Renders a list grid that allows the user to click on an entity aðŸ”µ</abbr></span>
<span class="-146713903552295440" onmouseenter="enter('-146713903552295440');" onmouseout="out('-146713903552295440');" style=""><abbr title=" 892       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specified"> 892       *    select it. Once the user selects the entity, he will be presented with an empty form based on the specifðŸ”µ</abbr></span>
<span class="7585671366133275820" onmouseenter="enter('7585671366133275820');" onmouseout="out('7585671366133275820');" style=""><abbr title=" 893       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addition"> 893       *    &quot;maintainedAdornedTargetFields&quot; for this field. Used by fields such as &quot;crossSellProducts&quot;, which in addðŸ”µ</abbr></span>
<span class="7350312284882119043" onmouseenter="enter('7350312284882119043');" onmouseout="out('7350312284882119043');" style=""> 894       *    to linking an entity, provide extra fields, such as a promotional message.                              </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 895       *  &lt;/li&gt;                                                                                                     </span>
<span class="3706201315693353419" onmouseenter="enter('3706201315693353419');" onmouseout="out('3706201315693353419');" style=""> 896       *  &lt;li&gt;                                                                                                      </span>
<span class="8829232354049589291" onmouseenter="enter('8829232354049589291');" onmouseout="out('8829232354049589291');" style=""><abbr title=" 897       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This field is"> 897       *    &lt;b&gt;Map Collection&lt;/b&gt; - Renders a form for the target entity that has an additional key field. This fielðŸ”µ</abbr></span>
<span class="-8508051731153769866" onmouseenter="enter('-8508051731153769866');" onmouseout="out('-8508051731153769866');" style=""><abbr title=" 898       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on another"> 898       *    populated either from the configured map keys, or as a result of a lookup in the case of a key based on ðŸ”µ</abbr></span>
<span class="-6056737616128420156" onmouseenter="enter('-6056737616128420156');" onmouseout="out('-6056737616128420156');" style=""> 899       *    entity. Used by fields such as the mediaMap on a Sku.                                                   </span>
<span class="229435711692215518" onmouseenter="enter('229435711692215518');" onmouseout="out('229435711692215518');" style=""> 900       *  &lt;/li&gt;                                                                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 901       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style=""> 902       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style=""> 903       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style=""> 904       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style=""> 905       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style=""> 906       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style=""> 907       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style=""> 908       * @param requestParams                                                                                       </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style=""> 909       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style=""> 910       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 911       */                                                                                                           </span>
<span class="835275592837580694" onmouseenter="enter('835275592837580694');" onmouseout="out('835275592837580694');" style=""> 912      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.GET)                         </span>
<span class="2460266594736272943" onmouseenter="enter('2460266594736272943');" onmouseout="out('2460266594736272943');" style=""> 913      public String showAddCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,    </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 914              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style=""> 915              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style=""> 916              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style=""> 917              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 918          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 919          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 920          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style=""> 921          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style=""> 922                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style=""> 923          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style=""> 924          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style=""> 925                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style=""> 926          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style=""> 927                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style=""> 928                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style=""> 929                  .withMaxIndex(getMaxIndex(requestParams))                                                         </span>
<span class="2941692162045974129" onmouseenter="enter('2941692162045974129');" onmouseout="out('2941692162045974129');" style=""> 930                  .withLastId(getLastId(requestParams))                                                             </span>
<span class="-9137331061893195290" onmouseenter="enter('-9137331061893195290');" onmouseout="out('-9137331061893195290');" style=""> 931                  .withFirstId(getFirstId(requestParams))                                                           </span>
<span class="-6497878492174321892" onmouseenter="enter('-6497878492174321892');" onmouseout="out('-6497878492174321892');" style=""> 932                  .withUpperCount(getUpperCount(requestParams))                                                     </span>
<span class="-8373154769706308503" onmouseenter="enter('-8373154769706308503');" onmouseout="out('-8373154769706308503');" style=""> 933                  .withLowerCount(getLowerCount(requestParams))                                                     </span>
<span class="-1051723743320189375" onmouseenter="enter('-1051723743320189375');" onmouseout="out('-1051723743320189375');" style=""> 934                  .withPageSize(getPageSize(requestParams))                                                         </span>
<span class="-6582704259903712752" onmouseenter="enter('-6582704259903712752');" onmouseout="out('-6582704259903712752');" style=""> 935                  .withPresentationFetch(true);                                                                     </span>
<span  style=""> 936                                                                                                                    </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style=""> 937          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style=""> 938              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style=""> 939              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style=""> 940                  ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();       </span>
<span class="-2914433993330253670" onmouseenter="enter('-2914433993330253670');" onmouseout="out('-2914433993330253670');" style=""> 941                  // If the entity type isn&#x27;t specified, we need to determine if there are various polymorphic types</span>
<span class="-7795450821592681641" onmouseenter="enter('-7795450821592681641');" onmouseout="out('-7795450821592681641');" style=""> 942                  // for this entity.                                                                               </span>
<span class="6186895968667433501" onmouseenter="enter('6186895968667433501');" onmouseout="out('6186895968667433501');" style=""> 943                  String entityType = null;                                                                         </span>
<span class="3580632700461537732" onmouseenter="enter('3580632700461537732');" onmouseout="out('3580632700461537732');" style=""> 944                  if (requestParams.containsKey(&quot;entityType&quot;)) {                                                    </span>
<span class="-1630371572733568969" onmouseenter="enter('-1630371572733568969');" onmouseout="out('-1630371572733568969');" style=""> 945                      entityType = requestParams.get(&quot;entityType&quot;).get(0);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946                  }                                                                                                 </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 947                  if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="2333848870190395940" onmouseenter="enter('2333848870190395940');" onmouseout="out('2333848870190395940');" style=""> 948                      if (cmd.getPolymorphicEntities().getChildren().length == 0) {                                 </span>
<span class="2097783908693957449" onmouseenter="enter('2097783908693957449');" onmouseout="out('2097783908693957449');" style=""> 949                          entityType = cmd.getPolymorphicEntities().getFullyQualifiedClassname();                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 950                      } else {                                                                                      </span>
<span class="-6902702564943152777" onmouseenter="enter('-6902702564943152777');" onmouseout="out('-6902702564943152777');" style=""> 951                          entityType = getDefaultEntityType();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 953                  } else {                                                                                          </span>
<span class="7843468667819793383" onmouseenter="enter('7843468667819793383');" onmouseout="out('7843468667819793383');" style=""> 954                      entityType = URLDecoder.decode(entityType, &quot;UTF-8&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955                  }                                                                                                 </span>
<span  style=""> 956                                                                                                                    </span>
<span class="4772034882902081020" onmouseenter="enter('4772034882902081020');" onmouseout="out('4772034882902081020');" style=""> 957                  if (StringUtils.isBlank(entityType)) {                                                            </span>
<span class="-5632901614715850082" onmouseenter="enter('-5632901614715850082');" onmouseout="out('-5632901614715850082');" style=""> 958                      List&lt;ClassTree&gt; entityTypes = getAddEntityTypes(cmd.getPolymorphicEntities());                </span>
<span class="-1786762136943638870" onmouseenter="enter('-1786762136943638870');" onmouseout="out('-1786762136943638870');" style=""> 959                      model.addAttribute(&quot;entityTypes&quot;, entityTypes);                                               </span>
<span class="-7344898891916261334" onmouseenter="enter('-7344898891916261334');" onmouseout="out('-7344898891916261334');" style=""> 960                      model.addAttribute(&quot;viewType&quot;, &quot;modal/entityTypeSelection&quot;);                                  </span>
<span class="4114307546969826358" onmouseenter="enter('4114307546969826358');" onmouseout="out('4114307546969826358');" style=""> 961                      model.addAttribute(&quot;entityFriendlyName&quot;, cmd.getPolymorphicEntities().getFriendlyName());     </span>
<span class="-2813713255221264789" onmouseenter="enter('-2813713255221264789');" onmouseout="out('-2813713255221264789');" style=""> 962                      String requestUri = request.getRequestURI();                                                  </span>
<span class="2670437920401576748" onmouseenter="enter('2670437920401576748');" onmouseout="out('2670437920401576748');" style=""><abbr title=" 963                      if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) {"> 963                      if (!request.getContextPath().equals(&quot;/&quot;) &amp;&amp; requestUri.startsWith(request.getContextPath())) ðŸ”µ</abbr></span>
<span class="-901741071381030126" onmouseenter="enter('-901741071381030126');" onmouseout="out('-901741071381030126');" style=""><abbr title=" 964                          requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.length());"> 964                          requestUri = requestUri.substring(request.getContextPath().length() + 1, requestUri.lengthðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965                      }                                                                                             </span>
<span class="-4266558034071691802" onmouseenter="enter('-4266558034071691802');" onmouseout="out('-4266558034071691802');" style=""> 966                      model.addAttribute(&quot;currentUri&quot;, requestUri);                                                 </span>
<span class="-7253477283405475092" onmouseenter="enter('-7253477283405475092');" onmouseout="out('-7253477283405475092');" style=""> 967                      model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_ENTITY.getType());                  </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style=""> 968                      setModelAttributes(model, sectionKey);                                                        </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 969                      return &quot;modules/modalContainer&quot;;                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 970                  } else {                                                                                          </span>
<span class="-58316621888079189" onmouseenter="enter('-58316621888079189');" onmouseout="out('-58316621888079189');" style=""> 971                      ppr = ppr.withCeilingEntityClassname(entityType);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973              }                                                                                                     </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style=""> 974          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-8815560953057448419" onmouseenter="enter('-8815560953057448419');" onmouseout="out('-8815560953057448419');" style=""><abbr title=" 975              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);"> 975              ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(requestðŸ”µ</abbr></span>
<span class="6674469997589527714" onmouseenter="enter('6674469997589527714');" onmouseout="out('6674469997589527714');" style=""> 976              if (result.equals(ExtensionResultStatusType.HANDLED)) {                                               </span>
<span class="1057476267973220454" onmouseenter="enter('1057476267973220454');" onmouseout="out('1057476267973220454');" style=""> 977                  model.addAttribute(&quot;entityId&quot;, id);                                                               </span>
<span class="6720161805434028669" onmouseenter="enter('6720161805434028669');" onmouseout="out('6720161805434028669');" style=""> 978                  model.addAttribute(&quot;sectionKey&quot;, sectionKey);                                                     </span>
<span class="-2435595331613687341" onmouseenter="enter('-2435595331613687341');" onmouseout="out('-2435595331613687341');" style=""> 979                  model.addAttribute(&quot;collectionField&quot;, collectionField);                                           </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style=""> 980                  return &quot;modules/modalContainer&quot;;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 981              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 982          }                                                                                                         </span>
<span  style=""> 983                                                                                                                    </span>
<span class="3903557829936589355" onmouseenter="enter('3903557829936589355');" onmouseout="out('3903557829936589355');" style=""> 984          //service.getContextSpecificRelationshipId(mainMetadata, entity, prefix);                                 </span>
<span  style=""> 985                                                                                                                    </span>
<span class="6576809561193708131" onmouseenter="enter('6576809561193708131');" onmouseout="out('6576809561193708131');" style=""> 986          model.addAttribute(&quot;currentParams&quot;, new ObjectMapper().writeValueAsString(requestParams));                </span>
<span  style=""> 987                                                                                                                    </span>
<span class="6180232744784249160" onmouseenter="enter('6180232744784249160');" onmouseout="out('6180232744784249160');" style=""><abbr title=" 988          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty, md, ppr, null, null);"> 988          return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionPrðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989      }                                                                                                             </span>
<span  style=""> 990                                                                                                                    </span>
<span class="373770933822047642" onmouseenter="enter('373770933822047642');" onmouseout="out('373770933822047642');" style=""><abbr title=" 991      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POST)"> 991      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add/{collectionItemId}/verify&quot;, method = RequestMethod.POSðŸ”µ</abbr></span>
<span class="-870509305261572147" onmouseenter="enter('-870509305261572147');" onmouseout="out('-870509305261572147');" style=""><abbr title=" 992      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,"> 992      public @ResponseBody Map&lt;String, Object&gt; addCollectionItem(HttpServletRequest request, HttpServletResponse resðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style=""> 993              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style=""> 994              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style=""> 995              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style=""> 996              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style=""> 997          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style=""> 998          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style=""> 999          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1000          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1000          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1001          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1002          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1003          Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                        </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1004          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1005              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1005              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1006                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1007                      collectionItemId, responseMap);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008          }                                                                                                         </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1009          return responseMap;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010      }                                                                                                             </span>
<span  style="">1011                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1012      /**                                                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1013       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1014       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1015       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1016       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1017       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1018       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1019       * @param collectionField                                                                                     </span>
<span class="-3886153901014472312" onmouseenter="enter('-3886153901014472312');" onmouseout="out('-3886153901014472312');" style="">1020       * @param requestParams                                                                                       </span>
<span class="-4008047975326689228" onmouseenter="enter('-4008047975326689228');" onmouseout="out('-4008047975326689228');" style="">1021       * @return Json collection data                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1022       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1023       */                                                                                                           </span>
<span class="1491507797785399205" onmouseenter="enter('1491507797785399205');" onmouseout="out('1491507797785399205');" style="">1024      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize&quot;, method = RequestMethod.GET)                   </span>
<span class="3394871197523978831" onmouseenter="enter('3394871197523978831');" onmouseout="out('3394871197523978831');" style=""><abbr title="1025      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletResponse response, Model model,">1025      public @ResponseBody Map&lt;String, Object&gt; getSelectizeCollectionOptions(HttpServletRequest request, HttpServletðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1026              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="7801446570851981981" onmouseenter="enter('7801446570851981981');" onmouseout="out('7801446570851981981');" style="">1027              @PathVariable(value = &quot;id&quot;) String id,                                                                </span>
<span class="4713833916830794200" onmouseenter="enter('4713833916830794200');" onmouseout="out('4713833916830794200');" style="">1028              @PathVariable(value = &quot;collectionField&quot;) String collectionField,                                      </span>
<span class="-2945988258914821593" onmouseenter="enter('-2945988258914821593');" onmouseout="out('-2945988258914821593');" style="">1029              @RequestParam MultiValueMap&lt;String, String&gt; requestParams) throws Exception {                         </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1030          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1031          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1032          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-3489429610696180181" onmouseenter="enter('-3489429610696180181');" onmouseout="out('-3489429610696180181');" style="">1033          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName,  </span>
<span class="3509078744615154166" onmouseenter="enter('3509078744615154166');" onmouseout="out('3509078744615154166');" style="">1034                  sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();                               </span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1035          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1036          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1037                                                                                                                    </span>
<span class="-3154651088293222897" onmouseenter="enter('-3154651088293222897');" onmouseout="out('-3154651088293222897');" style="">1038          PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs)                 </span>
<span class="-6426257397240599496" onmouseenter="enter('-6426257397240599496');" onmouseout="out('-6426257397240599496');" style="">1039                  .withFilterAndSortCriteria(getCriteria(requestParams))                                            </span>
<span class="2108540405732330992" onmouseenter="enter('2108540405732330992');" onmouseout="out('2108540405732330992');" style="">1040                  .withStartIndex(getStartIndex(requestParams))                                                     </span>
<span class="4786121744461484155" onmouseenter="enter('4786121744461484155');" onmouseout="out('4786121744461484155');" style="">1041                  .withMaxIndex(getMaxIndex(requestParams))                                                         </span>
<span class="245535740239558332" onmouseenter="enter('245535740239558332');" onmouseout="out('245535740239558332');" style="">1042                  .withCustomCriteria(buildSelectizeCustomCriteria());                                              </span>




<span  style="">1043                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1044          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1045              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1046              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1047              ppr.setSectionEntityField(collectionField);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048          }                                                                                                         </span>
<span  style="">1049                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1050          DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                     </span>
<span  style="">1051                                                                                                                    </span>
<span class="9153362413933125536" onmouseenter="enter('9153362413933125536');" onmouseout="out('9153362413933125536');" style="">1052          return formService.buildSelectizeCollectionInfo(id, drs, collectionProperty, sectionKey, sectionCrumbs);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053      }                                                                                                             </span>
<span  style="">1054                                                                                                                    </span>
<span class="-7439222430983038453" onmouseenter="enter('-7439222430983038453');" onmouseout="out('-7439222430983038453');" style="">1055      protected String[] buildSelectizeCustomCriteria() {                                                           </span>
<span class="-4161579644301235736" onmouseenter="enter('-4161579644301235736');" onmouseout="out('-4161579644301235736');" style="">1056          return new String[]{ IS_SELECTIZE_REQUEST };                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057      }                                                                                                             </span>
<span  style="">1058                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1059      /**                                                                                                           </span>
<span class="-7141111024633203374" onmouseenter="enter('-7141111024633203374');" onmouseout="out('-7141111024633203374');" style="">1060       * Adds the requested collection item via Selectize                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1061       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1062       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1063       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1064       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1065       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1066       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1067       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1068       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1069       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1070       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1071       */                                                                                                           </span>
<span class="4942792763487402415" onmouseenter="enter('4942792763487402415');" onmouseout="out('4942792763487402415');" style="">1072      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/selectize-add&quot;, method = RequestMethod.POST)              </span>
<span class="8163998475300370418" onmouseenter="enter('8163998475300370418');" onmouseout="out('8163998475300370418');" style=""><abbr title="1073      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1073      public @ResponseBody Map&lt;String, Object&gt; addSelectizeCollectionItem(HttpServletRequest request, HttpServletResðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1074              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1075              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1076              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1077              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-3120252458037341618" onmouseenter="enter('-3120252458037341618');" onmouseout="out('-3120252458037341618');" style="">1078          Map&lt;String, Object&gt; returnVal = new HashMap&lt;&gt;();                                                          </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1079          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1080          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1081          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1082          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1082          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1083          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1084                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1085          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1086              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1087              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1088                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1090          }                                                                                                         </span>
<span  style="">1091                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1092          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1092          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="242274841373215217" onmouseenter="enter('242274841373215217');" onmouseout="out('242274841373215217');" style="">1093          ppr.addCustomCriteria(buildSelectizeCustomCriteria());                                                    </span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1094          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1095          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span  style="">1096                                                                                                                    </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1097          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1098          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1098          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1099          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1100          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1101                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1102          if (result.hasErrors()) {                                                                                 </span>
<span class="842224369260603633" onmouseenter="enter('842224369260603633');" onmouseout="out('842224369260603633');" style="">1103              returnVal.put(&quot;error&quot;, result.getFieldError());                                                       </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1104              return returnVal;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105          }                                                                                                         </span>
<span  style="">1106                                                                                                                    </span>
<span class="2610632867002015507" onmouseenter="enter('2610632867002015507');" onmouseout="out('2610632867002015507');" style="">1107          if (savedEntity.findProperty(ALTERNATE_ID_PROPERTY) != null) {                                            </span>
<span class="-5383740165855607078" onmouseenter="enter('-5383740165855607078');" onmouseout="out('-5383740165855607078');" style="">1108              returnVal.put(&quot;alternateId&quot;, savedEntity.findProperty(ALTERNATE_ID_PROPERTY).getValue());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109          }                                                                                                         </span>
<span class="-7825370386877723068" onmouseenter="enter('-7825370386877723068');" onmouseout="out('-7825370386877723068');" style="">1110          return returnVal;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111      }                                                                                                             </span>
<span  style="">1112                                                                                                                    </span>
<span class="5412920841771640365" onmouseenter="enter('5412920841771640365');" onmouseout="out('5412920841771640365');" style="">1113      protected void declareShouldIgnoreAdditionStatusFilter() {                                                    </span>
<span class="-4270951653865217168" onmouseenter="enter('-4270951653865217168');" onmouseout="out('-4270951653865217168');" style=""><abbr title="1114          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditionalProperties();">1114          Map&lt;String, Object&gt; additionalProperties = BroadleafRequestContext.getBroadleafRequestContext().getAdditioðŸ”µ</abbr></span>
<span class="-3723341051420574210" onmouseenter="enter('-3723341051420574210');" onmouseout="out('-3723341051420574210');" style="">1115          additionalProperties.put(&quot;shouldIgnoreAdditionStatusFilter&quot;, true);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116      }                                                                                                             </span>
<span  style="">1117                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1118      /**                                                                                                           </span>
<span class="1325408264830379158" onmouseenter="enter('1325408264830379158');" onmouseout="out('1325408264830379158');" style="">1119       * Adds the requested collection item                                                                         </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1120       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1121       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1122       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1123       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1124       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1125       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1126       * @param collectionField                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1127       * @param entityForm                                                                                          </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1128       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1129       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1130       */                                                                                                           </span>
<span class="-2068929988984533631" onmouseenter="enter('-2068929988984533631');" onmouseout="out('-2068929988984533631');" style="">1131      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/add&quot;, method = RequestMethod.POST)                        </span>
<span class="-6457137423768539998" onmouseenter="enter('-6457137423768539998');" onmouseout="out('-6457137423768539998');" style="">1132      public String addCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,        </span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1133              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1134              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1135              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1136              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1137          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1138          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1139          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1140          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1140          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1141          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1142                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1143          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1144              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1145              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1146                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148          }                                                                                                         </span>
<span  style="">1149                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1150          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1150          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1151          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1152          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1153          service.clearEntityManager();                                                                             </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1154          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1155          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1155          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1156          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1157          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1158                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1159          if (result.hasErrors()) {                                                                                 </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1160              FieldMetadata md = collectionProperty.getMetadata();                                                  </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1161              ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                      </span>
<span class="4503162777083318611" onmouseenter="enter('4503162777083318611');" onmouseout="out('4503162777083318611');" style=""><abbr title="1162              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectionProperty,">1162              return buildAddCollectionItemModel(request, response, model, id, collectionField, sectionKey, collectiðŸ”µ</abbr></span>
<span class="5267635088951466475" onmouseenter="enter('5267635088951466475');" onmouseout="out('5267635088951466475');" style="">1163                      md, ppr, entityForm, savedEntity);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164          }                                                                                                         </span>
<span  style="">1165                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1166          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1167          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1167          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1168          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span  style="">1169                                                                                                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1170          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="7250522969210652718" onmouseenter="enter('7250522969210652718');" onmouseout="out('7250522969210652718');" style="">1171          model.addAttribute(&quot;actualEntityId&quot;, id);                                                                 </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1172          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1173          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174      }                                                                                                             </span>
<span  style="">1175                                                                                                                    </span>
<span class="-8003545521832011894" onmouseenter="enter('-8003545521832011894');" onmouseout="out('-8003545521832011894');" style="">1176      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/addEmpty&quot;, method = RequestMethod.POST)                   </span>
<span class="162700220048203938" onmouseenter="enter('162700220048203938');" onmouseout="out('162700220048203938');" style=""><abbr title="1177      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,">1177      public @ResponseBody String addEmptyCollectionItem(HttpServletRequest request, HttpServletResponse response, MðŸ”µ</abbr></span>
<span class="9080178630750613356" onmouseenter="enter('9080178630750613356');" onmouseout="out('9080178630750613356');" style="">1178              @PathVariable Map&lt;String, String&gt; pathVars,                                                           </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1179              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1180              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="4340432618416424941" onmouseenter="enter('4340432618416424941');" onmouseout="out('4340432618416424941');" style="">1181              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm, BindingResult result) throws Exception {   </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1182          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1183          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1184          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1185          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1185          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1186          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1187                                                                                                                    </span>
<span class="-6595863764736615866" onmouseenter="enter('-6595863764736615866');" onmouseout="out('-6595863764736615866');" style="">1188          if (StringUtils.isBlank(entityForm.getEntityType())) {                                                    </span>
<span class="8181101062672404960" onmouseenter="enter('8181101062672404960');" onmouseout="out('8181101062672404960');" style="">1189              FieldMetadata fmd = collectionProperty.getMetadata();                                                 </span>
<span class="2527411229913876505" onmouseenter="enter('2527411229913876505');" onmouseout="out('2527411229913876505');" style="">1190              if (fmd instanceof BasicCollectionMetadata) {                                                         </span>
<span class="7749679000663231640" onmouseenter="enter('7749679000663231640');" onmouseout="out('7749679000663231640');" style="">1191                  entityForm.setEntityType(((BasicCollectionMetadata) fmd).getCollectionCeilingEntity());           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193          }                                                                                                         </span>
<span  style="">1194                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1195          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1195          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1196          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-5337934248855825573" onmouseenter="enter('-5337934248855825573');" onmouseout="out('-5337934248855825573');" style="">1197          entity.setIsPreAdd(true);                                                                                 </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1198          // First, we must save the collection entity                                                              </span>
<span class="6484400768602424454" onmouseenter="enter('6484400768602424454');" onmouseout="out('6484400768602424454');" style=""><abbr title="1199          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, sectionCrumbs);">1199          PersistenceResponse persistenceResponse = service.addSubCollectionEntity(entityForm, mainMetadata, collectðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1200          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span  style="">1201                                                                                                                    </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1202          return new JsonResponse(response)                                                                         </span>
<span class="-645443211281069037" onmouseenter="enter('-645443211281069037');" onmouseout="out('-645443211281069037');" style="">1203                  .with(&quot;status&quot;, &quot;complete&quot;)                                                                       </span>
<span class="-7858493257692229655" onmouseenter="enter('-7858493257692229655');" onmouseout="out('-7858493257692229655');" style="">1204                  .with(&quot;id&quot;, savedEntity.findProperty(entityForm.getIdProperty()).getValue())                      </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1205                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206      }                                                                                                             </span>
<span  style="">1207                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1208      /**                                                                                                           </span>
<span class="-6140462241686685910" onmouseenter="enter('-6140462241686685910');" onmouseout="out('-6140462241686685910');" style=""><abbr title="1209       * Builds out all of the model information needed for showing the add modal for collection items on both the initial GET">1209       * Builds out all of the model information needed for showing the add modal for collection items on both the iðŸ”µ</abbr></span>
<span class="9052968863197617086" onmouseenter="enter('9052968863197617086');" onmouseout="out('9052968863197617086');" style="">1210       * as well as after a POST with validation errors                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1211       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1212       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1213       * @param model                                                                                               </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1214       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1215       * @param collectionField                                                                                     </span>
<span class="7403666429378321004" onmouseenter="enter('7403666429378321004');" onmouseout="out('7403666429378321004');" style="">1216       * @param sectionKey                                                                                          </span>
<span class="-7927619294366963435" onmouseenter="enter('-7927619294366963435');" onmouseout="out('-7927619294366963435');" style="">1217       * @param collectionProperty                                                                                  </span>
<span class="-5426566728726502924" onmouseenter="enter('-5426566728726502924');" onmouseout="out('-5426566728726502924');" style="">1218       * @param md                                                                                                  </span>
<span class="4349163197755218506" onmouseenter="enter('4349163197755218506');" onmouseout="out('4349163197755218506');" style="">1219       * @param ppr                                                                                                 </span>
<span class="2094225145376343101" onmouseenter="enter('2094225145376343101');" onmouseout="out('2094225145376343101');" style="">1220       * @return the appropriate view to display for the modal                                                      </span>
<span class="450948407444547835" onmouseenter="enter('450948407444547835');" onmouseout="out('450948407444547835');" style=""><abbr title="1221       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityForm, BindingResult)}">1221       * @see {@link #addCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, EntityFðŸ”µ</abbr></span>
<span class="3423849059172457982" onmouseenter="enter('3423849059172457982');" onmouseout="out('3423849059172457982');" style=""><abbr title="1222       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MultiValueMap)}">1222       * @see {@link #showAddCollectionItem(HttpServletRequest, HttpServletResponse, Model, Map, String, String, MulðŸ”µ</abbr></span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1223       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1224       */                                                                                                           </span>
<span class="-4127331421111161450" onmouseenter="enter('-4127331421111161450');" onmouseout="out('-4127331421111161450');" style="">1225      protected String buildAddCollectionItemModel(HttpServletRequest request, HttpServletResponse response,        </span>
<span class="1808182660955839449" onmouseenter="enter('1808182660955839449');" onmouseout="out('1808182660955839449');" style="">1226              Model model, String id, String collectionField, String sectionKey, Property collectionProperty,       </span>
<span class="-5972908184992702659" onmouseenter="enter('-5972908184992702659');" onmouseout="out('-5972908184992702659');" style=""><abbr title="1227              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceException {">1227              FieldMetadata md, PersistencePackageRequest ppr, EntityForm entityForm, Entity entity) throws ServiceEðŸ”µ</abbr></span>
<span  style="">1228                                                                                                                    </span>
<span class="-2054675889041043286" onmouseenter="enter('-2054675889041043286');" onmouseout="out('-2054675889041043286');" style=""><abbr title="1229          // For requests to add a new collection item include the main class that the subsequent request comes from.">1229          // For requests to add a new collection item include the main class that the subsequent request comes fromðŸ”µ</abbr></span>
<span class="7422952884503198827" onmouseenter="enter('7422952884503198827');" onmouseout="out('7422952884503198827');" style=""><abbr title="1230          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKey">1230          // For instance, with basic collections we know the main associated class for a fetch through the ForeignKðŸ”µ</abbr></span>
<span class="5831142982738818001" onmouseenter="enter('5831142982738818001');" onmouseout="out('5831142982738818001');" style="">1231          // persistence item but map and adorned target lookups make a standard persistence request. This solution </span>
<span class="-3910081436214830376" onmouseenter="enter('-3910081436214830376');" onmouseout="out('-3910081436214830376');" style="">1232          // fixes all cases.                                                                                       </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1233          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-8007514226035577536" onmouseenter="enter('-8007514226035577536');" onmouseout="out('-8007514226035577536');" style="">1234          ppr.addCustomCriteria(&quot;owningClass=&quot; + mainClassName);                                                    </span>
<span class="5215062918947094881" onmouseenter="enter('5215062918947094881');" onmouseout="out('5215062918947094881');" style="">1235          ppr.setAddOperationInspect(true);                                                                         </span>
<span  style="">1236                                                                                                                    </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1237          if (entityForm != null) {                                                                                 </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1238              entityForm.clearFieldsMap();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1239          }                                                                                                         </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1240          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-1532720970191757712" onmouseenter="enter('-1532720970191757712');" onmouseout="out('-1532720970191757712');" style="">1241          if (md instanceof BasicCollectionMetadata) {                                                              </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1242              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1243                                                                                                                    </span>
<span class="5473401195179812518" onmouseenter="enter('5473401195179812518');" onmouseout="out('5473401195179812518');" style="">1244              // When adding items to basic collections, we will sometimes show a form to persist a new record      </span>
<span class="3817220166052180028" onmouseenter="enter('3817220166052180028');" onmouseout="out('3817220166052180028');" style="">1245              // and sometimes show a list grid to allow the user to associate an existing record.                  </span>
<span class="-7272899612546422146" onmouseenter="enter('-7272899612546422146');" onmouseout="out('-7272899612546422146');" style="">1246              if (fmd.getAddMethodType().equals(AddMethodType.PERSIST)) {                                           </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1247                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1247                  ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1248                  if (entityForm == null) {                                                                         </span>
<span class="509426350308747164" onmouseenter="enter('509426350308747164');" onmouseout="out('509426350308747164');" style="">1249                      entityForm = formService.createEntityForm(collectionMetadata,sectionCrumbs);                  </span>
<span class="2737056182573571703" onmouseenter="enter('2737056182573571703');" onmouseout="out('2737056182573571703');" style="">1250                      entityForm.setCeilingEntityClassname(ppr.getCeilingEntityClassname());                        </span>
<span class="2710161406345740991" onmouseenter="enter('2710161406345740991');" onmouseout="out('2710161406345740991');" style="">1251                      entityForm.setEntityType(ppr.getCeilingEntityClassname());                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1252                  } else {                                                                                          </span>
<span class="-5799643084244932085" onmouseenter="enter('-5799643084244932085');" onmouseout="out('-5799643084244932085');" style="">1253                      formService.populateEntityForm(collectionMetadata, entityForm, sectionCrumbs);                </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1254                      formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255                  }                                                                                                 </span>
<span class="-7315185064917392199" onmouseenter="enter('-7315185064917392199');" onmouseout="out('-7315185064917392199');" style=""><abbr title="1256                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassname());">1256                  formService.removeNonApplicableFields(collectionMetadata, entityForm, ppr.getCeilingEntityClassnamðŸ”µ</abbr></span>
<span class="1687533348183327340" onmouseenter="enter('1687533348183327340');" onmouseout="out('1687533348183327340');" style="">1257                  entityForm.getTabs().iterator().next().getIsVisible();                                            </span>
<span  style="">1258                                                                                                                    </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1259                  model.addAttribute(&quot;entityForm&quot;, entityForm);                                                     </span>
<span class="-2634442257361103125" onmouseenter="enter('-2634442257361103125');" onmouseout="out('-2634442257361103125');" style="">1260                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleAddEntity&quot;);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1261              } else {                                                                                              </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1262                  DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                             </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1263                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1263                  ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sðŸ”µ</abbr></span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1264                  listGrid.setPathOverride(request.getRequestURL().toString());                                     </span>
<span  style="">1265                                                                                                                    </span>
<span class="6493773829436488040" onmouseenter="enter('6493773829436488040');" onmouseout="out('6493773829436488040');" style=""><abbr title="1266                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fmd.getAddMethodType())) {">1266                  if (AddMethodType.LOOKUP.equals(fmd.getAddMethodType()) || AddMethodType.SELECTIZE_LOOKUP.equals(fðŸ”µ</abbr></span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1267                      listGrid.removeAllRowActions();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1268                  }                                                                                                 </span>
<span  style="">1269                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1270                  model.addAttribute(&quot;listGrid&quot;, listGrid);                                                         </span>
<span class="-4615041483574305082" onmouseenter="enter('-4615041483574305082');" onmouseout="out('-4615041483574305082');" style="">1271                  model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleSelectEntity&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1272              }                                                                                                     </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1273          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1274              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1275                                                                                                                    </span>
<span class="-4994014003685781795" onmouseenter="enter('-4994014003685781795');" onmouseout="out('-4994014003685781795');" style=""><abbr title="1276              // Even though this field represents an adorned target collection, the list we want to show in the modal">1276              // Even though this field represents an adorned target collection, the list we want to show in the modðŸ”µ</abbr></span>
<span class="3396745077097675731" onmouseenter="enter('3396745077097675731');" onmouseout="out('3396745077097675731');" style="">1277              // is the standard list grid for the target entity of this field                                      </span>
<span class="2483520132597674649" onmouseenter="enter('2483520132597674649');" onmouseout="out('2483520132597674649');" style="">1278              ppr.setOperationTypesOverride(null);                                                                  </span>
<span class="-7122938661029434364" onmouseenter="enter('-7122938661029434364');" onmouseout="out('-7122938661029434364');" style="">1279              ppr.setType(PersistencePackageRequest.Type.STANDARD);                                                 </span>
<span class="6901858484753166023" onmouseenter="enter('6901858484753166023');" onmouseout="out('6901858484753166023');" style="">1280              ppr.setSectionEntityField(collectionField);                                                           </span>
<span  style="">1281                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1282              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1282              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1283                                                                                                                    </span>
<span class="301151810532897107" onmouseenter="enter('301151810532897107');" onmouseout="out('301151810532897107');" style="">1284              DynamicResultSet drs = service.getRecords(ppr).getDynamicResultSet();                                 </span>
<span class="-2345582796497859124" onmouseenter="enter('-2345582796497859124');" onmouseout="out('-2345582796497859124');" style=""><abbr title="1285              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectionCrumbs);">1285              ListGrid listGrid = formService.buildCollectionListGrid(id, drs, collectionProperty, sectionKey, sectiðŸ”µ</abbr></span>
<span class="1884537605734649521" onmouseenter="enter('1884537605734649521');" onmouseout="out('1884537605734649521');" style="">1286              listGrid.setSubCollectionFieldName(collectionField);                                                  </span>
<span class="-6349032840682010013" onmouseenter="enter('-6349032840682010013');" onmouseout="out('-6349032840682010013');" style="">1287              listGrid.setPathOverride(request.getRequestURL().toString());                                         </span>
<span class="2370419943178688476" onmouseenter="enter('2370419943178688476');" onmouseout="out('2370419943178688476');" style="">1288              listGrid.setFriendlyName(collectionMetadata.getPolymorphicEntities().getFriendlyName());              </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1289              if (entityForm == null) {                                                                             </span>
<span class="-1229292684052118628" onmouseenter="enter('-1229292684052118628');" onmouseout="out('-1229292684052118628');" style=""><abbr title="1290                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, true);">1290                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs,ðŸ”µ</abbr></span>
<span class="-7486141420721649683" onmouseenter="enter('-7486141420721649683');" onmouseout="out('-7486141420721649683');" style="">1291                  entityForm.setCeilingEntityClassname(ppr.getAdornedList().getAdornedTargetEntityClassname());     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1292              } else {                                                                                              </span>
<span class="7685228187033982459" onmouseenter="enter('7685228187033982459');" onmouseout="out('7685228187033982459');" style=""><abbr title="1293                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, true);">1293                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, entityForm, sectionCrumbs, ðŸ”µ</abbr></span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1294                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295              }                                                                                                     </span>
<span  style="">1296                                                                                                                    </span>
<span class="5169338689637413329" onmouseenter="enter('5169338689637413329');" onmouseout="out('5169338689637413329');" style="">1297              listGrid.setListGridType(ListGrid.Type.ADORNED);                                                      </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1298              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="8450559638200016101" onmouseenter="enter('8450559638200016101');" onmouseout="out('8450559638200016101');" style="">1299                  if (entry.getValue().getIsVisible()) {                                                            </span>
<span class="1657391013588898454" onmouseenter="enter('1657391013588898454');" onmouseout="out('1657391013588898454');" style="">1300                      listGrid.setListGridType(ListGrid.Type.ADORNED_WITH_FORM);                                    </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1301                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1302                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1303              }                                                                                                     </span>
<span  style="">1304                                                                                                                    </span>
<span class="-757286675881477752" onmouseenter="enter('-757286675881477752');" onmouseout="out('-757286675881477752');" style="">1305              // This is part of an add, so we want to be able to filter/sort the listgrid                          </span>
<span class="3421525283764936758" onmouseenter="enter('3421525283764936758');" onmouseout="out('3421525283764936758');" style="">1306              listGrid.setIsSortable(false);                                                                        </span>
<span class="-2714096270635703274" onmouseenter="enter('-2714096270635703274');" onmouseout="out('-2714096270635703274');" style="">1307              listGrid.setCanFilterAndSort(true);                                                                   </span>
<span class="2544638267985543974" onmouseenter="enter('2544638267985543974');" onmouseout="out('2544638267985543974');" style="">1308              listGrid.removeAllRowActions();                                                                       </span>
<span  style="">1309                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1310              model.addAttribute(&quot;listGrid&quot;, listGrid);                                                             </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1311              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-1071174233767081578" onmouseenter="enter('-1071174233767081578');" onmouseout="out('-1071174233767081578');" style="">1312              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedSelectEntity&quot;);                                          </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1313          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1314              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1315              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1315              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span  style="">1316                                                                                                                    </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1317              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1318                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1319              } else {                                                                                              </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1320                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="3430167897814743775" onmouseenter="enter('3430167897814743775');" onmouseout="out('3430167897814743775');" style="">1321                  formService.populateEntityFormFieldValues(collectionMetadata, entity, entityForm);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322              }                                                                                                     </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1323              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="-892500240032703395" onmouseenter="enter('-892500240032703395');" onmouseout="out('-892500240032703395');" style="">1324              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapAddEntity&quot;);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325          }                                                                                                         </span>
<span  style="">1326                                                                                                                    </span>
<span class="6074380392351813368" onmouseenter="enter('6074380392351813368');" onmouseout="out('6074380392351813368');" style="">1327          // Set the parent id on the entity form                                                                   </span>
<span class="428061459827264798" onmouseenter="enter('428061459827264798');" onmouseout="out('428061459827264798');" style="">1328          if (entityForm != null) {                                                                                 </span>
<span class="-3154229542834445725" onmouseenter="enter('-3154229542834445725');" onmouseout="out('-3154229542834445725');" style="">1329              entityForm.setParentId(id);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330          }                                                                                                         </span>
<span  style="">1331                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1332          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="7819166863376485578" onmouseenter="enter('7819166863376485578');" onmouseout="out('7819166863376485578');" style="">1333          model.addAttribute(&quot;modalHeaderType&quot;, ModalHeaderType.ADD_COLLECTION_ITEM.getType());                     </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1334          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1335          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1336          return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337      }                                                                                                             </span>
<span  style="">1338                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1339      /**                                                                                                           </span>
<span class="3915085583429756257" onmouseenter="enter('3915085583429756257');" onmouseout="out('3915085583429756257');" style="">1340       * Shows the appropriate modal dialog to edit the selected collection item                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1341       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1342       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1343       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1344       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1345       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1346       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1347       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1348       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1349       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1350       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1351       */                                                                                                           </span>
<span class="5941881897199209931" onmouseenter="enter('5941881897199209931');" onmouseout="out('5941881897199209931');" style=""><abbr title="1352      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.GET)">1352      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1353      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1354              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1355              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1356              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1357              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1358              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1359          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1359          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1360                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361      }                                                                                                             </span>
<span  style="">1362                                                                                                                    </span>
<span class="-3777402830265989862" onmouseenter="enter('-3777402830265989862');" onmouseout="out('-3777402830265989862');" style="">1363      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.GET)          </span>
<span class="-4908339404803295782" onmouseenter="enter('-4908339404803295782');" onmouseout="out('-4908339404803295782');" style="">1364      public String showUpdateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model, </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1365              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1366              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1367              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1368              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="7585768018133278114" onmouseenter="enter('7585768018133278114');" onmouseout="out('7585768018133278114');" style="">1369          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,    </span>
<span class="-1960257468419948758" onmouseenter="enter('-1960257468419948758');" onmouseout="out('-1960257468419948758');" style="">1370                  ModalHeaderType.UPDATE_COLLECTION_ITEM.getType());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371      }                                                                                                             </span>
<span  style="">1372                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1373      /**                                                                                                           </span>
<span class="6761933478321573145" onmouseenter="enter('6761933478321573145');" onmouseout="out('6761933478321573145');" style=""><abbr title="1374       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as readonly">1374       * Shows the appropriate modal dialog to view the selected collection item. This will display the modal as reaðŸ”µ</abbr></span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1375       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1376       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1377       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1378       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1379       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1380       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1381       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1382       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1383       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1384       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1385       */                                                                                                           </span>
<span class="5228464490364608791" onmouseenter="enter('5228464490364608791');" onmouseout="out('5228464490364608791');" style=""><abbr title="1386      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMethod.GET)">1386      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view&quot;, method = RequestMeðŸ”µ</abbr></span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1387      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1388              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1389              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1390              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1391              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1392              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="7887850161668822106" onmouseenter="enter('7887850161668822106');" onmouseout="out('7887850161668822106');" style=""><abbr title="1393          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1393          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1394                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1395                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1396          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1397          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="7289613241506142720" onmouseenter="enter('7289613241506142720');" onmouseout="out('7289613241506142720');" style="">1398          addAuditableDisplayFields(ef);                                                                            </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1399          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1400          ef.setReadOnly();                                                                                         </span>
<span  style="">1401                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1402          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403      }                                                                                                             </span>
<span  style="">1404                                                                                                                    </span>
<span class="6858008221927215769" onmouseenter="enter('6858008221927215769');" onmouseout="out('6858008221927215769');" style="">1405      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/view&quot;, method = RequestMethod.GET)     </span>
<span class="5253033568903944771" onmouseenter="enter('5253033568903944771');" onmouseout="out('5253033568903944771');" style="">1406      public String showViewCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,   </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1407              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1408              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1409              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1410              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="2521791674908842244" onmouseenter="enter('2521791674908842244');" onmouseout="out('2521791674908842244');" style=""><abbr title="1411          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null,">1411          String returnPath = showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemðŸ”µ</abbr></span>
<span class="3577092831509406770" onmouseenter="enter('3577092831509406770');" onmouseout="out('3577092831509406770');" style="">1412                  ModalHeaderType.VIEW_COLLECTION_ITEM.getType());                                                  </span>
<span  style="">1413                                                                                                                    </span>
<span class="31897919845004115" onmouseenter="enter('31897919845004115');" onmouseout="out('31897919845004115');" style="">1414          // Since this is a read-only view, actions don&#x27;t make sense in this context                               </span>
<span class="-4450365867670114419" onmouseenter="enter('-4450365867670114419');" onmouseout="out('-4450365867670114419');" style="">1415          EntityForm ef = (EntityForm) model.asMap().get(&quot;entityForm&quot;);                                             </span>
<span class="8625028479691986712" onmouseenter="enter('8625028479691986712');" onmouseout="out('8625028479691986712');" style="">1416          ef.removeAllActions();                                                                                    </span>
<span class="-5643274933892579495" onmouseenter="enter('-5643274933892579495');" onmouseout="out('-5643274933892579495');" style="">1417          ef.setReadOnly();                                                                                         </span>
<span  style="">1418                                                                                                                    </span>
<span class="8472562720288088352" onmouseenter="enter('8472562720288088352');" onmouseout="out('8472562720288088352');" style="">1419          return returnPath;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420      }                                                                                                             </span>
<span  style="">1421                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1422      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1422      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="6852009337058352330" onmouseenter="enter('6852009337058352330');" onmouseout="out('6852009337058352330');" style=""><abbr title="1423              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType) throws ServiceException {">1423              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-2699953653458232908" onmouseenter="enter('-2699953653458232908');" onmouseout="out('-2699953653458232908');" style=""><abbr title="1424          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId, modalHeaderType, null, null);">1424          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425      }                                                                                                             </span>
<span  style="">1426                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1427      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1427      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-3706011950121400951" onmouseenter="enter('-3706011950121400951');" onmouseout="out('-3706011950121400951');" style=""><abbr title="1428              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceException {">1428              String id, String collectionField, String collectionItemId, String modalHeaderType) throws ServiceExceðŸ”µ</abbr></span>
<span class="-6899013896128397577" onmouseenter="enter('-6899013896128397577');" onmouseout="out('-6899013896128397577');" style=""><abbr title="1429          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, null, null);">1429          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430      }                                                                                                             </span>
<span  style="">1431                                                                                                                    </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1432      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1432      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="4852573692087282601" onmouseenter="enter('4852573692087282601');" onmouseout="out('4852573692087282601');" style=""><abbr title="1433                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1433                  String id, String collectionField, String collectionItemId, String modalHeaderType, EntityForm entðŸ”µ</abbr></span>
<span class="6580107021722154279" onmouseenter="enter('6580107021722154279');" onmouseout="out('6580107021722154279');" style=""><abbr title="1434          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modalHeaderType, entityForm, entity);">1434          return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, null, modðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435      }                                                                                                             </span>
<span  style="">1436                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1437      /**                                                                                                           </span>
<span class="837861132196545598" onmouseenter="enter('837861132196545598');" onmouseout="out('837861132196545598');" style=""><abbr title="1438       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform and entity">1438       * Shows the view and populates the model for updating a collection item. You can also pass in an entityform aðŸ”µ</abbr></span>
<span class="5643306329084644224" onmouseenter="enter('5643306329084644224');" onmouseout="out('5643306329084644224');" style="">1439       * which are optional. If they are not passed in then they are automatically looked up                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1440       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1441       * @param request                                                                                             </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1442       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1443       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1444       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1445       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1446       * @param collectionItemId                                                                                    </span>
<span class="-5929844173285242940" onmouseenter="enter('-5929844173285242940');" onmouseout="out('-5929844173285242940');" style="">1447       * @param modalHeaderType                                                                                     </span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1448       * @param entityForm                                                                                          </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style="">1449       * @param entity                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style="">1450       * @return                                                                                                    </span>
<span class="8449301783782133383" onmouseenter="enter('8449301783782133383');" onmouseout="out('8449301783782133383');" style="">1451       * @throws ServiceException                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1452       */                                                                                                           </span>
<span class="-6584628192976964117" onmouseenter="enter('-6584628192976964117');" onmouseout="out('-6584628192976964117');" style=""><abbr title="1453      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVars,">1453      protected String showViewUpdateCollection(HttpServletRequest request, Model model, Map&lt;String, String&gt; pathVarðŸ”µ</abbr></span>
<span class="-7524579279249503431" onmouseenter="enter('-7524579279249503431');" onmouseout="out('-7524579279249503431');" style=""><abbr title="1454              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderType, EntityForm entityForm, Entity entity) throws ServiceException {">1454              String id, String collectionField, String collectionItemId, String alternateId, String modalHeaderTypeðŸ”µ</abbr></span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1455          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1456          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1457          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1458          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1458          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1459          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1460          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span class="-2889762407992276786" onmouseenter="enter('-2889762407992276786');" onmouseout="out('-2889762407992276786');" style="">1461          SectionCrumb nextCrumb = new SectionCrumb();                                                              </span>
<span class="4180533444018328805" onmouseenter="enter('4180533444018328805');" onmouseout="out('4180533444018328805');" style="">1462          if (md instanceof MapMetadata) {                                                                          </span>
<span class="-382349485821163458" onmouseenter="enter('-382349485821163458');" onmouseout="out('-382349485821163458');" style="">1463              nextCrumb.setSectionIdentifier(((MapMetadata) md).getValueClassName());                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1464          } else {                                                                                                  </span>
<span class="1919475910220989527" onmouseenter="enter('1919475910220989527');" onmouseout="out('1919475910220989527');" style="">1465              nextCrumb.setSectionIdentifier(((CollectionMetadata) md).getCollectionCeilingEntity());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1466          }                                                                                                         </span>
<span class="3745082800889494172" onmouseenter="enter('3745082800889494172');" onmouseout="out('3745082800889494172');" style="">1467          nextCrumb.setSectionId(collectionItemId);                                                                 </span>
<span class="7047611651117816234" onmouseenter="enter('7047611651117816234');" onmouseout="out('7047611651117816234');" style="">1468          if (!sectionCrumbs.contains(nextCrumb)) {                                                                 </span>
<span class="-6316688126111539901" onmouseenter="enter('-6316688126111539901');" onmouseout="out('-6316688126111539901');" style="">1469              sectionCrumbs.add(nextCrumb);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470          }                                                                                                         </span>
<span  style="">1471                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1472          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1472          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1473          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1473          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1474                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1475          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1476                                                                                                                    </span>
<span class="4300500518149699432" onmouseenter="enter('4300500518149699432');" onmouseout="out('4300500518149699432');" style="">1477          if (md instanceof BasicCollectionMetadata &amp;&amp;                                                              </span>
<span class="3179311364823579995" onmouseenter="enter('3179311364823579995');" onmouseout="out('3179311364823579995');" style="">1478                  (((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST) ||               </span>
<span class="-5057368181444983975" onmouseenter="enter('-5057368181444983975');" onmouseout="out('-5057368181444983975');" style="">1479                          ((BasicCollectionMetadata) md).getAddMethodType().equals(AddMethodType.PERSIST_EMPTY))) { </span>
<span class="6607267312947776736" onmouseenter="enter('6607267312947776736');" onmouseout="out('6607267312947776736');" style="">1480              BasicCollectionMetadata fmd = (BasicCollectionMetadata) md;                                           </span>
<span  style="">1481                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1482              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1482              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1483              if (entity == null) {                                                                                 </span>
<span class="4597721164047448054" onmouseenter="enter('4597721164047448054');" onmouseout="out('4597721164047448054');" style=""><abbr title="1484                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().getRecords()[0];">1484                  entity = service.getRecord(ppr, collectionItemId, collectionMetadata, true).getDynamicResultSet().ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1485              }                                                                                                     </span>
<span  style="">1486                                                                                                                    </span>
<span class="-7942197356638317765" onmouseenter="enter('-7942197356638317765');" onmouseout="out('-7942197356638317765');" style="">1487              String currentTabName = getCurrentTabName(pathVars, collectionMetadata);                              </span>
<span class="9017537031938626444" onmouseenter="enter('9017537031938626444');" onmouseout="out('9017537031938626444');" style=""><abbr title="1488              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entity, sectionCrumbs, currentTabName);">1488              Map&lt;String, DynamicResultSet&gt; subRecordsMap = service.getRecordsForSelectedTab(collectionMetadata, entðŸ”µ</abbr></span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1489              if (entityForm == null) {                                                                             </span>
<span class="-3582618966464933757" onmouseenter="enter('-3582618966464933757');" onmouseout="out('-3582618966464933757');" style=""><abbr title="1490                  entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbs);">1490                  entityForm = formService.createEntityForm(collectionMetadata, entity, subRecordsMap, sectionCrumbsðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1491              } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1492                  entityForm.clearFieldsMap();                                                                      </span>
<span class="1859879359946483810" onmouseenter="enter('1859879359946483810');" onmouseout="out('1859879359946483810');" style=""><abbr title="1493                  formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbs);">1493                  formService.populateEntityForm(collectionMetadata, entity, subRecordsMap, entityForm, sectionCrumbðŸ”µ</abbr></span>
<span class="5496760487980360743" onmouseenter="enter('5496760487980360743');" onmouseout="out('5496760487980360743');" style="">1494                  //remove all the actions since we&#x27;re not trying to redisplay them on the form                     </span>
<span class="-6469844840195102556" onmouseenter="enter('-6469844840195102556');" onmouseout="out('-6469844840195102556');" style="">1495                  entityForm.removeAllActions();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496              }                                                                                                     </span>
<span class="-3892497188964586657" onmouseenter="enter('-3892497188964586657');" onmouseout="out('-3892497188964586657');" style="">1497              entityForm.removeAction(DefaultEntityFormActions.DELETE);                                             </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1498              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1499              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="2070483683171714322" onmouseenter="enter('2070483683171714322');" onmouseout="out('2070483683171714322');" style="">1500              model.addAttribute(&quot;viewType&quot;, &quot;modal/simpleEditEntity&quot;);                                             </span>
<span class="205388064165131770" onmouseenter="enter('205388064165131770');" onmouseout="out('205388064165131770');" style="">1501          } else if (md instanceof AdornedTargetCollectionMetadata) {                                               </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1502              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span  style="">1503                                                                                                                    </span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1504              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1505                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2961516840614790290" onmouseenter="enter('-2961516840614790290');" onmouseout="out('-2961516840614790290');" style="">1506                      collectionItemId, sectionCrumbs, alternateId).getDynamicResultSet().getRecords()[0];          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1507              }                                                                                                     </span>
<span  style="">1508                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1509              boolean populateTypeAndId = true;                                                                     </span>
<span class="921756716374353809" onmouseenter="enter('921756716374353809');" onmouseout="out('921756716374353809');" style="">1510              boolean isViewCollectionItem = ModalHeaderType.VIEW_COLLECTION_ITEM.getType().equals(modalHeaderType);</span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1511              if (entityForm == null) {                                                                             </span>
<span class="-8902040329002931298" onmouseenter="enter('-8902040329002931298');" onmouseout="out('-8902040329002931298');" style=""><abbr title="1512                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, sectionCrumbs, false);">1512                  entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem,ðŸ”µ</abbr></span>
<span class="-4655192855930300298" onmouseenter="enter('-4655192855930300298');" onmouseout="out('-4655192855930300298');" style="">1513                  entityForm.removeAction(DefaultAdornedEntityFormActions.Add);                                     </span>
<span class="1109271490036416226" onmouseenter="enter('1109271490036416226');" onmouseout="out('1109271490036416226');" style="">1514                  entityForm.addAction(DefaultAdornedEntityFormActions.Save);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1515              } else {                                                                                              </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1516                  entityForm.clearFieldsMap();                                                                      </span>
<span class="2583214667713512490" onmouseenter="enter('2583214667713512490');" onmouseout="out('2583214667713512490');" style="">1517                  String entityType = entityForm.getEntityType();                                                   </span>
<span class="-6584758178229470245" onmouseenter="enter('-6584758178229470245');" onmouseout="out('-6584758178229470245');" style=""><abbr title="1518                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, sectionCrumbs, false);">1518                  formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, isViewCollectionItem, entityForm, ðŸ”µ</abbr></span>
<span class="2514188310084553719" onmouseenter="enter('2514188310084553719');" onmouseout="out('2514188310084553719');" style="">1519                  entityForm.setEntityType(entityType);                                                             </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1520                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521              }                                                                                                     </span>
<span  style="">1522                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1523              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="4854206459128421670" onmouseenter="enter('4854206459128421670');" onmouseout="out('4854206459128421670');" style=""><abbr title="1524              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassName, id,">1524              adornedTargetAutoPopulateExtensionManager.getProxy().autoSetAdornedTargetManagedFields(md, mainClassNaðŸ”µ</abbr></span>
<span class="8256760534167228532" onmouseenter="enter('8256760534167228532');" onmouseout="out('8256760534167228532');" style="">1525                      collectionField,                                                                              </span>
<span class="7203370545455450378" onmouseenter="enter('7203370545455450378');" onmouseout="out('7203370545455450378');" style="">1526                      collectionItemId, responseMap);                                                               </span>
<span  style="">1527                                                                                                                    </span>
<span class="-3972135447881278836" onmouseenter="enter('-3972135447881278836');" onmouseout="out('-3972135447881278836');" style=""><abbr title="1528              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is used.">1528              //For AdornedTargetCollections, we need to be specific on what translation ceilingEntity and Id is useðŸ”µ</abbr></span>
<span class="-8007896595560301001" onmouseenter="enter('-8007896595560301001');" onmouseout="out('-8007896595560301001');" style="">1529              //It should be the entity and referenced Id of the adorned entity (not the target entity and Id).     </span>
<span class="316997016312344867" onmouseenter="enter('316997016312344867');" onmouseout="out('316997016312344867');" style="">1530              entityForm.setTranslationCeilingEntity(entityForm.getEntityType());                                   </span>
<span class="-4512360180775881719" onmouseenter="enter('-4512360180775881719');" onmouseout="out('-4512360180775881719');" style="">1531              entityForm.setTranslationId(alternateId);                                                             </span>
<span  style="">1532                                                                                                                    </span>
<span class="5324287805739012771" onmouseenter="enter('5324287805739012771');" onmouseout="out('5324287805739012771');" style="">1533              ClassMetadata cmd = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();           </span>
<span class="-1465905251928147670" onmouseenter="enter('-1465905251928147670');" onmouseout="out('-1465905251928147670');" style="">1534              for (String field : fmd.getMaintainedAdornedTargetFields()) {                                         </span>
<span class="-2821179418575098708" onmouseenter="enter('-2821179418575098708');" onmouseout="out('-2821179418575098708');" style="">1535                  if (responseMap.containsKey(field) &amp;&amp; responseMap.containsKey(&quot;autoSubmit&quot;)) {                    </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style="">1536                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1537                  }                                                                                                 </span>
<span class="-3390991397790942785" onmouseenter="enter('-3390991397790942785');" onmouseout="out('-3390991397790942785');" style="">1538                  Property p = cmd.getPMap().get(field);                                                            </span>
<span class="3110636146594998978" onmouseenter="enter('3110636146594998978');" onmouseout="out('3110636146594998978');" style="">1539                  if (p != null &amp;&amp; p.getMetadata() instanceof AdornedTargetCollectionMetadata) {                    </span>
<span class="-1526293730221303684" onmouseenter="enter('-1526293730221303684');" onmouseout="out('-1526293730221303684');" style=""><abbr title="1540                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request must act">1540                      // Because we&#x27;re dealing with a nested adorned target collection, this particular request mustðŸ”µ</abbr></span>
<span class="5008429970050276114" onmouseenter="enter('5008429970050276114');" onmouseout="out('5008429970050276114');" style=""><abbr title="1541                      // directly on the first adorned target collection. Because of this, we need the actual id property">1541                      // directly on the first adorned target collection. Because of this, we need the actual id proðŸ”µ</abbr></span>
<span class="-7713892716328274330" onmouseenter="enter('-7713892716328274330');" onmouseout="out('-7713892716328274330');" style=""><abbr title="1542                      // from the entity that models the adorned target relationship, and not the id of the target object.">1542                      // from the entity that models the adorned target relationship, and not the id of the target oðŸ”µ</abbr></span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1543                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1543                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1544                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1545                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1546                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1547                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1547                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6504403122086949696" onmouseenter="enter('-6504403122086949696');" onmouseout="out('-6504403122086949696');" style="">1548                              ppr.getAdornedList().getAdornedTargetEntityClassname(), sectionCrumbs);               </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1549                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1550                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1551                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1552                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1552                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1553                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1554                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1554                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555                      }                                                                                             </span>
<span class="2712626054905490038" onmouseenter="enter('2712626054905490038');" onmouseout="out('2712626054905490038');" style="">1556                  } else if (p != null &amp;&amp; p.getMetadata() instanceof MapMetadata) {                                 </span>
<span class="-388196981394792667" onmouseenter="enter('-388196981394792667');" onmouseout="out('-388196981394792667');" style="">1557                      // See above comment for AdornedTargetCollectionMetadata                                      </span>
<span class="-9194902891343883685" onmouseenter="enter('-9194902891343883685');" onmouseout="out('-9194902891343883685');" style="">1558                      MapMetadata mmd = (MapMetadata) p.getMetadata();                                              </span>
<span  style="">1559                                                                                                                    </span>
<span class="-1545323212479782948" onmouseenter="enter('-1545323212479782948');" onmouseout="out('-1545323212479782948');" style=""><abbr title="1560                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERTY);">1560                      Property alternateIdProperty = entity.getPMap().get(BasicPersistenceModule.ALTERNATE_ID_PROPERðŸ”µ</abbr></span>
<span class="-2604548800815530907" onmouseenter="enter('-2604548800815530907');" onmouseout="out('-2604548800815530907');" style="">1561                      DynamicResultSet drs = service.getRecordsForCollection(cmd, entity, p, null, null, null,      </span>
<span class="6998312672677631430" onmouseenter="enter('6998312672677631430');" onmouseout="out('6998312672677631430');" style="">1562                              alternateIdProperty.getValue(), sectionCrumbs).getDynamicResultSet();                 </span>
<span  style="">1563                                                                                                                    </span>
<span class="7745189830620413203" onmouseenter="enter('7745189830620413203');" onmouseout="out('7745189830620413203');" style=""><abbr title="1564                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, p,">1564                      ListGrid listGrid = formService.buildCollectionListGrid(alternateIdProperty.getValue(), drs, pðŸ”µ</abbr></span>
<span class="-6515044965274807025" onmouseenter="enter('-6515044965274807025');" onmouseout="out('-6515044965274807025');" style="">1565                              mmd.getTargetClass(), sectionCrumbs);                                                 </span>
<span class="2479481499951886238" onmouseenter="enter('2479481499951886238');" onmouseout="out('2479481499951886238');" style="">1566                      listGrid.getToolbarActions().add(DefaultListGridActions.ADD);                                 </span>
<span  style="">1567                                                                                                                    </span>
<span class="2161161253789479317" onmouseenter="enter('2161161253789479317');" onmouseout="out('2161161253789479317');" style="">1568                      if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {                </span>
<span class="-878833693208744660" onmouseenter="enter('-878833693208744660');" onmouseout="out('-878833693208744660');" style=""><abbr title="1569                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);">1569                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1570                      } else {                                                                                      </span>
<span class="1709831237852781159" onmouseenter="enter('1709831237852781159');" onmouseout="out('1709831237852781159');" style=""><abbr title="1571                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);">1571                          entityForm.addListGrid(cmd, listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1572                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574              }                                                                                                     </span>
<span  style="">1575                                                                                                                    </span>
<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1576              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1577              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">1578                                                                                                                    </span>
<span class="7046829326366784672" onmouseenter="enter('7046829326366784672');" onmouseout="out('7046829326366784672');" style="">1579              boolean atLeastOneBasicField = false;                                                                 </span>
<span class="-1983225226345189396" onmouseenter="enter('-1983225226345189396');" onmouseout="out('-1983225226345189396');" style="">1580              for (Entry&lt;String, Field&gt; entry : entityForm.getFields().entrySet()) {                                </span>
<span class="-3942382004211496115" onmouseenter="enter('-3942382004211496115');" onmouseout="out('-3942382004211496115');" style=""><abbr title="1581                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !responseMap.containsKey(&quot;autoSubmit&quot;)) {">1581                  if (entry.getValue().getIsVisible() &amp;&amp; !responseMap.containsKey(entry.getValue().getName()) &amp;&amp; !reðŸ”µ</abbr></span>
<span class="3115307772764059490" onmouseenter="enter('3115307772764059490');" onmouseout="out('3115307772764059490');" style="">1582                      atLeastOneBasicField = true;                                                                  </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style="">1583                      break;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585              }                                                                                                     </span>
<span class="4813170790944841786" onmouseenter="enter('4813170790944841786');" onmouseout="out('4813170790944841786');" style="">1586              if (!atLeastOneBasicField) {                                                                          </span>
<span class="3364274495995556597" onmouseenter="enter('3364274495995556597');" onmouseout="out('3364274495995556597');" style="">1587                  entityForm.removeAction(DefaultEntityFormActions.SAVE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1588              }                                                                                                     </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1589              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1590              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="3009851293217081678" onmouseenter="enter('3009851293217081678');" onmouseout="out('3009851293217081678');" style="">1591              model.addAttribute(&quot;viewType&quot;, &quot;modal/adornedEditEntity&quot;);                                            </span>
<span class="-5178510075759343040" onmouseenter="enter('-5178510075759343040');" onmouseout="out('-5178510075759343040');" style="">1592          } else if (md instanceof MapMetadata) {                                                                   </span>
<span class="-2093939551741714312" onmouseenter="enter('-2093939551741714312');" onmouseout="out('-2093939551741714312');" style="">1593              MapMetadata fmd = (MapMetadata) md;                                                                   </span>
<span  style="">1594                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1595              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1595              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="6617779912342853710" onmouseenter="enter('6617779912342853710');" onmouseout="out('6617779912342853710');" style="">1596              if (entity == null) {                                                                                 </span>
<span class="-4540135717015451176" onmouseenter="enter('-4540135717015451176');" onmouseout="out('-4540135717015451176');" style="">1597                  entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,      </span>
<span class="-2813813427236819301" onmouseenter="enter('-2813813427236819301');" onmouseout="out('-2813813427236819301');" style="">1598                      collectionItemId, sectionCrumbs, null).getEntity();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599              }                                                                                                     </span>
<span  style="">1600                                                                                                                    </span>
<span class="6497914953434077233" onmouseenter="enter('6497914953434077233');" onmouseout="out('6497914953434077233');" style="">1601              boolean populateTypeAndId = true;                                                                     </span>
<span class="7617750196757619382" onmouseenter="enter('7617750196757619382');" onmouseout="out('7617750196757619382');" style="">1602              if (entityForm == null) {                                                                             </span>
<span class="-8329410661113991951" onmouseenter="enter('-8329410661113991951');" onmouseout="out('-8329410661113991951');" style="">1603                  entityForm = formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1604              } else {                                                                                              </span>
<span class="-2965751497501930249" onmouseenter="enter('-2965751497501930249');" onmouseout="out('-2965751497501930249');" style="">1605                  //save off the prior key before clearing out the fields map as it will not appear                 </span>
<span class="-4459883460939835415" onmouseenter="enter('-4459883460939835415');" onmouseout="out('-4459883460939835415');" style="">1606                  //back on the saved entity                                                                        </span>
<span class="-8617997777962995342" onmouseenter="enter('-8617997777962995342');" onmouseout="out('-8617997777962995342');" style="">1607                  String priorKey = entityForm.findField(&quot;priorKey&quot;).getValue();                                    </span>
<span class="8295048026622439317" onmouseenter="enter('8295048026622439317');" onmouseout="out('8295048026622439317');" style="">1608                  entityForm.clearFieldsMap();                                                                      </span>
<span class="1316382661564166860" onmouseenter="enter('1316382661564166860');" onmouseout="out('1316382661564166860');" style="">1609                  formService.buildMapForm(fmd, ppr.getMapStructure(), collectionMetadata, id, entityForm);         </span>
<span class="-5674534809018144237" onmouseenter="enter('-5674534809018144237');" onmouseout="out('-5674534809018144237');" style="">1610                  entityForm.findField(&quot;priorKey&quot;).setValue(priorKey);                                              </span>
<span class="3771843644088136874" onmouseenter="enter('3771843644088136874');" onmouseout="out('3771843644088136874');" style="">1611                  populateTypeAndId = false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1612              }                                                                                                     </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1613 -                                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1614 +            try {                                                                                                 </span>
<span class="-5619455120098479761" onmouseenter="enter('-5619455120098479761');" onmouseout="out('-5619455120098479761');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1615 +                entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmd.getToOneTargetProperty()).getType().getName());">1615 +                entityForm.setTranslationCeilingEntity(Class.forName(fmd.getValueClassName()).getDeclaredField(fmdðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1616 +            } catch (Exception e) {                                                                               </span>
<span class="4149062910666573697" onmouseenter="enter('4149062910666573697');" onmouseout="out('4149062910666573697');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1617 +                LOG.error(e);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1618 +            }                                                                                                     </span>
<span class="-3626447344774920212" onmouseenter="enter('-3626447344774920212');" onmouseout="out('-3626447344774920212');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1619 +            entityForm.setTranslationId(entity.getPMap().get(fmd.getToOneTargetProperty()+&quot;.id&quot;).getValue());     </span>

<span class="-4115659644617305625" onmouseenter="enter('-4115659644617305625');" onmouseout="out('-4115659644617305625');" style="">1620              formService.populateEntityFormFields(entityForm, entity, populateTypeAndId, populateTypeAndId);       </span>
<span class="-7934209705949108459" onmouseenter="enter('-7934209705949108459');" onmouseout="out('-7934209705949108459');" style="">1621              formService.populateMapEntityFormFields(entityForm, entity);                                          </span>
<span class="3005107501467199781" onmouseenter="enter('3005107501467199781');" onmouseout="out('3005107501467199781');" style="">1622              addAuditableDisplayFields(entityForm);                                                                </span>
<span class="-8091154852481792239" onmouseenter="enter('-8091154852481792239');" onmouseout="out('-8091154852481792239');" style="">1623              model.addAttribute(&quot;entityForm&quot;, entityForm);                                                         </span>
<span class="5184741693677662709" onmouseenter="enter('5184741693677662709');" onmouseout="out('5184741693677662709');" style="">1624              model.addAttribute(&quot;viewType&quot;, &quot;modal/mapEditEntity&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1625          }                                                                                                         </span>
<span  style="">1626                                                                                                                    </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1627          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="5715532112666019496" onmouseenter="enter('5715532112666019496');" onmouseout="out('5715532112666019496');" style="">1628          model.addAttribute(&quot;modalHeaderType&quot;, modalHeaderType);                                                   </span>
<span class="-1083818386659623083" onmouseenter="enter('-1083818386659623083');" onmouseout="out('-1083818386659623083');" style="">1629          model.addAttribute(&quot;collectionProperty&quot;, collectionProperty);                                             </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1630          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="1764453142051682246" onmouseenter="enter('1764453142051682246');" onmouseout="out('1764453142051682246');" style="">1631          return &quot;modules/modalContainer&quot;;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1632      }                                                                                                             </span>
<span  style="">1633                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1634      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1635       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1636       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1637       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1638       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1639       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1640       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1641       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1642       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1643       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1643       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1644       * @param entityForm                                                                                          </span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1645       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1646       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1647       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1648       */                                                                                                           </span>
<span class="1690395709289479208" onmouseenter="enter('1690395709289479208');" onmouseout="out('1690395709289479208');" style="">1649      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}&quot;, method = RequestMethod.POST)         </span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1650      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1651              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1652              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1653              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1654              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1655              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1656              BindingResult result) throws Exception {                                                              </span>
<span class="454845068344591329" onmouseenter="enter('454845068344591329');" onmouseout="out('454845068344591329');" style=""><abbr title="1657          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entityForm, null, result);">1657          return updateCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, entðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658      }                                                                                                             </span>
<span  style="">1659                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1660      /**                                                                                                           </span>
<span class="-1844574720116286815" onmouseenter="enter('-1844574720116286815');" onmouseout="out('-1844574720116286815');" style="">1661       * Updates the specified collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1662       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1663       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1664       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1665       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1666       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1667       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1668       * @param collectionField                                                                                     </span>
<span class="665997280574374899" onmouseenter="enter('665997280574374899');" onmouseout="out('665997280574374899');" style=""><abbr title="1669       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this is the primary key value of the target entity)">1669       * @param collectionItemId the collection primary key value (in the case of adorned target collection, this isðŸ”µ</abbr></span>
<span class="-4758509257574949373" onmouseenter="enter('-4758509257574949373');" onmouseout="out('-4758509257574949373');" style="">1670       * @param entityForm                                                                                          </span>
<span class="4031667150854181086" onmouseenter="enter('4031667150854181086');" onmouseout="out('4031667150854181086');" style=""><abbr title="1671       * @param alternateId in the case of adorned target collections, this is the primary key value of the collection member">1671       * @param alternateId in the case of adorned target collections, this is the primary key value of the collectiðŸ”µ</abbr></span>
<span class="471163069337744535" onmouseenter="enter('471163069337744535');" onmouseout="out('471163069337744535');" style="">1672       * @param result                                                                                              </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1673       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1674       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1675       */                                                                                                           </span>
<span class="6716233350399381715" onmouseenter="enter('6716233350399381715');" onmouseout="out('6716233350399381715');" style=""><abbr title="1676      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.POST)">1676      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}&quot;, method = RequestMethod.ðŸ”µ</abbr></span>
<span class="-1457248957582848154" onmouseenter="enter('-1457248957582848154');" onmouseout="out('-1457248957582848154');" style="">1677      public String updateCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1678              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1679              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1680              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1681              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4505141283599003626" onmouseenter="enter('4505141283599003626');" onmouseout="out('4505141283599003626');" style="">1682              @ModelAttribute(value=&quot;entityForm&quot;) EntityForm entityForm,                                            </span>
<span class="-5366992345424767315" onmouseenter="enter('-5366992345424767315');" onmouseout="out('-5366992345424767315');" style="">1683              @PathVariable(value=&quot;alternateId&quot;) String alternateId,                                                </span>
<span class="5356568511809013810" onmouseenter="enter('5356568511809013810');" onmouseout="out('5356568511809013810');" style="">1684              BindingResult result) throws Exception {                                                              </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1685          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1686          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1687          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1688          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1688          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1689          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1690                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1691          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1691          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1692          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1693          service.clearEntityManager();                                                                             </span>
<span class="-371048815825413194" onmouseenter="enter('-371048815825413194');" onmouseout="out('-371048815825413194');" style="">1694          // First, we must save the collection entity                                                              </span>
<span class="3262117580653454816" onmouseenter="enter('3262117580653454816');" onmouseout="out('3262117580653454816');" style=""><abbr title="1695          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, entity, collectionItemId, alternateId, sectionCrumbs);">1695          PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collðŸ”µ</abbr></span>
<span class="1865635597530960613" onmouseenter="enter('1865635597530960613');" onmouseout="out('1865635597530960613');" style="">1696          Entity savedEntity = persistenceResponse.getEntity();                                                     </span>
<span class="7962243372282781310" onmouseenter="enter('7962243372282781310');" onmouseout="out('7962243372282781310');" style="">1697          entityFormValidator.validate(entityForm, savedEntity, result);                                            </span>
<span  style="">1698                                                                                                                    </span>
<span class="4556169223967360348" onmouseenter="enter('4556169223967360348');" onmouseout="out('4556169223967360348');" style="">1699          if (result.hasErrors()) {                                                                                 </span>
<span class="7889587439615503999" onmouseenter="enter('7889587439615503999');" onmouseout="out('7889587439615503999');" style=""><abbr title="1700              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alternateId,">1700              return showViewUpdateCollection(request, model, pathVars, id, collectionField, collectionItemId, alterðŸ”µ</abbr></span>
<span class="-1009973048758571460" onmouseenter="enter('-1009973048758571460');" onmouseout="out('-1009973048758571460');" style="">1701                      ModalHeaderType.UPDATE_COLLECTION_ITEM.getType(), entityForm, savedEntity);                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1702          }                                                                                                         </span>
<span  style="">1703                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1704          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1705          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1706          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1706          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">1707                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1708          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1709          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1710          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1711          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1712      }                                                                                                             </span>
<span  style="">1713                                                                                                                    </span>
<span class="-2715204734461845190" onmouseenter="enter('-2715204734461845190');" onmouseout="out('-2715204734461845190');" style="">1714      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/sequence&quot;, method = RequestMethod.POST)</span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1715      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1716              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1717              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1718              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1719              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1720              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6458961487045284345" onmouseenter="enter('6458961487045284345');" onmouseout="out('6458961487045284345');" style="">1721              @RequestParam(value=&quot;newSequence&quot;) String newSequence) throws Exception {                             </span>
<span class="-6477101312884008952" onmouseenter="enter('-6477101312884008952');" onmouseout="out('-6477101312884008952');" style=""><abbr title="1722          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionItemId, newSequence, null);">1722          return updateCollectionItemSequence(request, response, model, pathVars, id, collectionField, collectionIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1723      }                                                                                                             </span>
<span  style="">1724                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1725      /**                                                                                                           </span>
<span class="-7447609122613552365" onmouseenter="enter('-7447609122613552365');" onmouseout="out('-7447609122613552365');" style="">1726       * Updates the given collection item&#x27;s sequence. This should only be triggered for adorned target collections </span>
<span class="5163972519999742424" onmouseenter="enter('5163972519999742424');" onmouseout="out('5163972519999742424');" style="">1727       * where a sort field is specified -- any other invocation is incorrect and will result in an exception.      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1728       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1729       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1730       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1731       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1732       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1733       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1734       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1735       * @param collectionItemId                                                                                    </span>
<span class="8542418631474543845" onmouseenter="enter('8542418631474543845');" onmouseout="out('8542418631474543845');" style="">1736       * @return an object explaining the state of the operation                                                    </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1737       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1738       */                                                                                                           </span>
<span class="1279723180837283801" onmouseenter="enter('1279723180837283801');" onmouseout="out('1279723180837283801');" style=""><abbr title="1739      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequestMethod.POST)">1739      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence&quot;, method = RequeðŸ”µ</abbr></span>
<span class="-5848116267348459565" onmouseenter="enter('-5848116267348459565');" onmouseout="out('-5848116267348459565');" style="">1740      public @ResponseBody Map&lt;String, Object&gt; updateCollectionItemSequence(HttpServletRequest request,             </span>
<span class="3008840524978762228" onmouseenter="enter('3008840524978762228');" onmouseout="out('3008840524978762228');" style="">1741              HttpServletResponse response, Model model,                                                            </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1742              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1743              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1744              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1745              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="6744719432735700494" onmouseenter="enter('6744719432735700494');" onmouseout="out('6744719432735700494');" style="">1746              @RequestParam(value=&quot;newSequence&quot;) String newSequence,                                                </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1747              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1748          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1749          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1750          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1751          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1751          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1752          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span class="8267317305911636660" onmouseenter="enter('8267317305911636660');" onmouseout="out('8267317305911636660');" style="">1753          FieldMetadata md = collectionProperty.getMetadata();                                                      </span>
<span  style="">1754                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1755          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1755          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="6971869165316675737" onmouseenter="enter('6971869165316675737');" onmouseout="out('6971869165316675737');" style="">1756          ppr.addCustomCriteria(&quot;reorderParentEntityFetch&quot;);                                                        </span>
<span  style="">1757                                                                                                                    </span>
<span class="-3265158847012683001" onmouseenter="enter('-3265158847012683001');" onmouseout="out('-3265158847012683001');" style=""><abbr title="1758          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1758          Entity parentEntity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0ðŸ”µ</abbr></span>
<span  style="">1759                                                                                                                    </span>
<span class="-6925496807616680895" onmouseenter="enter('-6925496807616680895');" onmouseout="out('-6925496807616680895');" style="">1760          ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);                                          </span>
<span  style="">1761                                                                                                                    </span>
<span class="-5961537470500127604" onmouseenter="enter('-5961537470500127604');" onmouseout="out('-5961537470500127604');" style="">1762          if (md instanceof AdornedTargetCollectionMetadata) {                                                      </span>
<span class="-3118550417067613592" onmouseenter="enter('-3118550417067613592');" onmouseout="out('-3118550417067613592');" style="">1763              AdornedTargetCollectionMetadata fmd = (AdornedTargetCollectionMetadata) md;                           </span>
<span class="-895931586936599512" onmouseenter="enter('-895931586936599512');" onmouseout="out('-895931586936599512');" style="">1764              AdornedTargetList atl = ppr.getAdornedList();                                                         </span>
<span  style="">1765                                                                                                                    </span>
<span class="4013888246220668443" onmouseenter="enter('4013888246220668443');" onmouseout="out('4013888246220668443');" style="">1766              // Get an entity form for the entity                                                                  </span>
<span class="4144133685169635892" onmouseenter="enter('4144133685169635892');" onmouseout="out('4144133685169635892');" style=""><abbr title="1767              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionCrumbs, false);">1767              EntityForm entityForm = formService.buildAdornedListForm(fmd, ppr.getAdornedList(), id, false, sectionðŸ”µ</abbr></span>
<span class="985151044669117950" onmouseenter="enter('985151044669117950');" onmouseout="out('985151044669117950');" style="">1768              Entity entity = service.getAdvancedCollectionRecord(mainMetadata, parentEntity, collectionProperty,   </span>
<span class="-4422231398086337832" onmouseenter="enter('-4422231398086337832');" onmouseout="out('-4422231398086337832');" style="">1769                      collectionItemId, sectionCrumbs, alternateId, new String[]{&quot;reorderChildEntityFetch&quot;})        </span>
<span class="-7850695853310911802" onmouseenter="enter('-7850695853310911802');" onmouseout="out('-7850695853310911802');" style="">1770                      .getDynamicResultSet().getRecords()[0];                                                       </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1771              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span class="-1847884471983028057" onmouseenter="enter('-1847884471983028057');" onmouseout="out('-1847884471983028057');" style="">1772              formService.populateAdornedEntityFormFields(entityForm, entity, ppr.getAdornedList());                </span>
<span  style="">1773                                                                                                                    </span>
<span class="-3124065187694573478" onmouseenter="enter('-3124065187694573478');" onmouseout="out('-3124065187694573478');" style=""><abbr title="1774              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indexed)">1774              // Set the new sequence (note that it will come in 0-indexed but the persistence module expects 1-indeðŸ”µ</abbr></span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1775              int sequenceValue = Integer.parseInt(newSequence) + 1;                                                </span>
<span class="2556919505341751863" onmouseenter="enter('2556919505341751863');" onmouseout="out('2556919505341751863');" style="">1776              Field field = entityForm.findField(atl.getSortField());                                               </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1777              field.setValue(String.valueOf(sequenceValue));                                                        </span>
<span  style="">1778                                                                                                                    </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1779              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-5669538829732150992" onmouseenter="enter('-5669538829732150992');" onmouseout="out('-5669538829732150992');" style=""><abbr title="1780              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, alternateId, sectionCrumbs);">1780              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-6209319883391535282" onmouseenter="enter('-6209319883391535282');" onmouseout="out('-6209319883391535282');" style="">1781              Property displayOrder = persistenceResponse.getEntity().findProperty(atl.getSortField());             </span>
<span  style="">1782                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1783              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1784              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1785              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1786              return responseMap;                                                                                   </span>
<span class="-3117865694677500361" onmouseenter="enter('-3117865694677500361');" onmouseout="out('-3117865694677500361');" style="">1787          } else if (md instanceof BasicCollectionMetadata) {                                                       </span>
<span class="-8492572584837651214" onmouseenter="enter('-8492572584837651214');" onmouseout="out('-8492572584837651214');" style="">1788              BasicCollectionMetadata cd = (BasicCollectionMetadata) md;                                            </span>
<span class="-8895891660821831826" onmouseenter="enter('-8895891660821831826');" onmouseout="out('-8895891660821831826');" style="">1789              Map&lt;String, Object&gt; responseMap = new HashMap&lt;&gt;();                                                    </span>
<span class="-2546552603594507996" onmouseenter="enter('-2546552603594507996');" onmouseout="out('-2546552603594507996');" style=""><abbr title="1790              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().getRecords()[0];">1790              Entity entity = service.getRecord(ppr, collectionItemId, mainMetadata, false).getDynamicResultSet().geðŸ”µ</abbr></span>
<span  style="">1791                                                                                                                    </span>
<span class="-1667086083424072384" onmouseenter="enter('-1667086083424072384');" onmouseout="out('-1667086083424072384');" style=""><abbr title="1792              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();">1792              ClassMetadata collectionMetadata = service.getClassMetadata(ppr).getDynamicResultSet().getClassMetaDatðŸ”µ</abbr></span>
<span class="-2818097934143266938" onmouseenter="enter('-2818097934143266938');" onmouseout="out('-2818097934143266938');" style="">1793              EntityForm entityForm = formService.createEntityForm(collectionMetadata, sectionCrumbs);              </span>




<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1794              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="-6303462610985739492" onmouseenter="enter('-6303462610985739492');" onmouseout="out('-6303462610985739492');" style="">1795                  Field f = new Field()                                                                             </span>
<span class="-2538063021289876061" onmouseenter="enter('-2538063021289876061');" onmouseout="out('-2538063021289876061');" style="">1796                          .withName(cd.getSortProperty())                                                           </span>
<span class="-2458072313875538806" onmouseenter="enter('-2458072313875538806');" onmouseout="out('-2458072313875538806');" style="">1797                          .withFieldType(SupportedFieldType.HIDDEN.toString());                                     </span>
<span class="5054103958554301667" onmouseenter="enter('5054103958554301667');" onmouseout="out('5054103958554301667');" style="">1798                  entityForm.addHiddenField(mainMetadata, f);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1799              }                                                                                                     </span>
<span class="-731933207069741460" onmouseenter="enter('-731933207069741460');" onmouseout="out('-731933207069741460');" style="">1800              formService.populateEntityFormFields(entityForm, entity);                                             </span>
<span  style="">1801                                                                                                                    </span>
<span class="8453688484620698371" onmouseenter="enter('8453688484620698371');" onmouseout="out('8453688484620698371');" style="">1802              if (!StringUtils.isEmpty(cd.getSortProperty())) {                                                     </span>
<span class="625882899310766208" onmouseenter="enter('625882899310766208');" onmouseout="out('625882899310766208');" style="">1803                  int sequenceValue = Integer.parseInt(newSequence) + 1;                                            </span>
<span class="-3733495482183042291" onmouseenter="enter('-3733495482183042291');" onmouseout="out('-3733495482183042291');" style="">1804                  Field field = entityForm.findField(cd.getSortProperty());                                         </span>
<span class="3974469841945299276" onmouseenter="enter('3974469841945299276');" onmouseout="out('3974469841945299276');" style="">1805                  field.setValue(String.valueOf(sequenceValue));                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806              }                                                                                                     </span>
<span  style="">1807                                                                                                                    </span>
<span class="3923458830762383909" onmouseenter="enter('3923458830762383909');" onmouseout="out('3923458830762383909');" style=""><abbr title="1808              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, collectionProperty, parentEntity, collectionItemId, sectionCrumbs);">1808              PersistenceResponse persistenceResponse = service.updateSubCollectionEntity(entityForm, mainMetadata, ðŸ”µ</abbr></span>
<span class="-792608105002716351" onmouseenter="enter('-792608105002716351');" onmouseout="out('-792608105002716351');" style="">1809              Property displayOrder = persistenceResponse.getEntity().findProperty(cd.getSortProperty());           </span>
<span  style="">1810                                                                                                                    </span>
<span class="970505058101105571" onmouseenter="enter('970505058101105571');" onmouseout="out('970505058101105571');" style="">1811              responseMap.put(&quot;status&quot;, &quot;ok&quot;);                                                                      </span>
<span class="-875386757038139000" onmouseenter="enter('-875386757038139000');" onmouseout="out('-875386757038139000');" style="">1812              responseMap.put(&quot;field&quot;, collectionField);                                                            </span>
<span class="5750364143877710698" onmouseenter="enter('5750364143877710698');" onmouseout="out('5750364143877710698');" style="">1813              responseMap.put(&quot;newDisplayOrder&quot;, displayOrder == null ? null : displayOrder.getValue());            </span>
<span class="-7443798818164322631" onmouseenter="enter('-7443798818164322631');" onmouseout="out('-7443798818164322631');" style="">1814              return responseMap;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1815          } else {                                                                                                  </span>
<span class="7542199431919878786" onmouseenter="enter('7542199431919878786');" onmouseout="out('7542199431919878786');" style=""><abbr title="1816              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fields.&quot;);">1816              throw new UnsupportedOperationException(&quot;Cannot handle sequencing for non adorned target collection fiðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1817          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1818      }                                                                                                             </span>
<span  style="">1819                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1820      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1821       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1822       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1823       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1823       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1824       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1825       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1826       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1827       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1828       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1829       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1830       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1831       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1832       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1833       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1834       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1835       */                                                                                                           </span>
<span class="6340503715634976611" onmouseenter="enter('6340503715634976611');" onmouseout="out('6340503715634976611');" style="">1836      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/delete&quot;, method = RequestMethod.POST)  </span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">1837      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1838              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1839              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1840              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="-8628957632607227534" onmouseenter="enter('-8628957632607227534');" onmouseout="out('-8628957632607227534');" style="">1841              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId) throws Exception {                   </span>
<span class="6845453766150325497" onmouseenter="enter('6845453766150325497');" onmouseout="out('6845453766150325497');" style=""><abbr title="1842          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, null);">1842          return removeCollectionItem(request, response, model, pathVars, id, collectionField, collectionItemId, nulðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843      }                                                                                                             </span>
<span  style="">1844                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1845      /**                                                                                                           </span>
<span class="8990706001139491465" onmouseenter="enter('8990706001139491465');" onmouseout="out('8990706001139491465');" style="">1846       * Removes the requested collection item                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1847       *                                                                                                            </span>
<span class="-933426963836656590" onmouseenter="enter('-933426963836656590');" onmouseout="out('-933426963836656590');" style=""><abbr title="1848       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item from a">1848       * Note that the request must contain a parameter called &quot;key&quot; when attempting to remove a collection item froðŸ”µ</abbr></span>
<span class="9215599325185788819" onmouseenter="enter('9215599325185788819');" onmouseout="out('9215599325185788819');" style="">1849       * map collection.                                                                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1850       *                                                                                                            </span>
<span class="2683834429188260963" onmouseenter="enter('2683834429188260963');" onmouseout="out('2683834429188260963');" style="">1851       * @param request                                                                                             </span>
<span class="592482809986819432" onmouseenter="enter('592482809986819432');" onmouseout="out('592482809986819432');" style="">1852       * @param response                                                                                            </span>
<span class="-7822492205708441341" onmouseenter="enter('-7822492205708441341');" onmouseout="out('-7822492205708441341');" style="">1853       * @param model                                                                                               </span>
<span class="8612671783291279915" onmouseenter="enter('8612671783291279915');" onmouseout="out('8612671783291279915');" style="">1854       * @param pathVars                                                                                            </span>
<span class="-8430734829547091754" onmouseenter="enter('-8430734829547091754');" onmouseout="out('-8430734829547091754');" style="">1855       * @param id                                                                                                  </span>
<span class="8889160159320276397" onmouseenter="enter('8889160159320276397');" onmouseout="out('8889160159320276397');" style="">1856       * @param collectionField                                                                                     </span>
<span class="2892671224809423282" onmouseenter="enter('2892671224809423282');" onmouseout="out('2892671224809423282');" style="">1857       * @param collectionItemId                                                                                    </span>
<span class="-9006212091433374761" onmouseenter="enter('-9006212091433374761');" onmouseout="out('-9006212091433374761');" style="">1858       * @return the return view path                                                                               </span>
<span class="3682579759887248937" onmouseenter="enter('3682579759887248937');" onmouseout="out('3682579759887248937');" style="">1859       * @throws Exception                                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1860       */                                                                                                           </span>
<span class="-4053134536146029119" onmouseenter="enter('-4053134536146029119');" onmouseout="out('-4053134536146029119');" style=""><abbr title="1861      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestMethod.POST)">1861      @RequestMapping(value = &quot;/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete&quot;, method = RequestðŸ”µ</abbr></span>
<span class="-7837390842785437488" onmouseenter="enter('-7837390842785437488');" onmouseout="out('-7837390842785437488');" style="">1862      public String removeCollectionItem(HttpServletRequest request, HttpServletResponse response, Model model,     </span>
<span class="-7861712661849570358" onmouseenter="enter('-7861712661849570358');" onmouseout="out('-7861712661849570358');" style="">1863              @PathVariable  Map&lt;String, String&gt; pathVars,                                                          </span>
<span class="3987103068863415796" onmouseenter="enter('3987103068863415796');" onmouseout="out('3987103068863415796');" style="">1864              @PathVariable(value=&quot;id&quot;) String id,                                                                  </span>
<span class="8509136642392968035" onmouseenter="enter('8509136642392968035');" onmouseout="out('8509136642392968035');" style="">1865              @PathVariable(value=&quot;collectionField&quot;) String collectionField,                                        </span>
<span class="5049469427624471282" onmouseenter="enter('5049469427624471282');" onmouseout="out('5049469427624471282');" style="">1866              @PathVariable(value=&quot;collectionItemId&quot;) String collectionItemId,                                      </span>
<span class="4582279248224591120" onmouseenter="enter('4582279248224591120');" onmouseout="out('4582279248224591120');" style="">1867              @PathVariable(value=&quot;alternateId&quot;) String alternateId) throws Exception {                             </span>
<span class="-4501012331914419749" onmouseenter="enter('-4501012331914419749');" onmouseout="out('-4501012331914419749');" style="">1868          String sectionKey = getSectionKey(pathVars);                                                              </span>
<span class="-895861717242257733" onmouseenter="enter('-895861717242257733');" onmouseout="out('-895861717242257733');" style="">1869          String mainClassName = getClassNameForSection(sectionKey);                                                </span>
<span class="-7934414612876458390" onmouseenter="enter('-7934414612876458390');" onmouseout="out('-7934414612876458390');" style="">1870          List&lt;SectionCrumb&gt; sectionCrumbs = getSectionCrumbs(request, sectionKey, id);                             </span>
<span class="-7833137323132411092" onmouseenter="enter('-7833137323132411092');" onmouseout="out('-7833137323132411092');" style=""><abbr title="1871          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars)).getDynamicResultSet().getClassMetaData();">1871          ClassMetadata mainMetadata = service.getClassMetadata(getSectionPersistencePackageRequest(mainClassName, sðŸ”µ</abbr></span>
<span class="-2830221416952234994" onmouseenter="enter('-2830221416952234994');" onmouseout="out('-2830221416952234994');" style="">1872          Property collectionProperty = mainMetadata.getPMap().get(collectionField);                                </span>
<span  style="">1873                                                                                                                    </span>
<span class="-6408221600487262974" onmouseenter="enter('-6408221600487262974');" onmouseout="out('-6408221600487262974');" style="">1874          String priorKey = request.getParameter(&quot;key&quot;);                                                            </span>
<span  style="">1875                                                                                                                    </span>
<span class="6010077750459927585" onmouseenter="enter('6010077750459927585');" onmouseout="out('6010077750459927585');" style=""><abbr title="1876          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVars);">1876          PersistencePackageRequest ppr = getSectionPersistencePackageRequest(mainClassName, sectionCrumbs, pathVarsðŸ”µ</abbr></span>
<span class="-1139848007146299768" onmouseenter="enter('-1139848007146299768');" onmouseout="out('-1139848007146299768');" style="">1877          declareShouldIgnoreAdditionStatusFilter();                                                                </span>
<span class="5092066553659633012" onmouseenter="enter('5092066553659633012');" onmouseout="out('5092066553659633012');" style="">1878          Entity entity = service.getRecord(ppr, id, mainMetadata, false).getDynamicResultSet().getRecords()[0];    </span>
<span class="-430156629508176613" onmouseenter="enter('-430156629508176613');" onmouseout="out('-430156629508176613');" style="">1879          service.clearEntityManager();                                                                             </span>
<span class="8107528363762278945" onmouseenter="enter('8107528363762278945');" onmouseout="out('8107528363762278945');" style="">1880          // First, we must remove the collection entity                                                            </span>
<span class="-8185015406879465962" onmouseenter="enter('-8185015406879465962');" onmouseout="out('-8185015406879465962');" style=""><abbr title="1881          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperty, entity, collectionItemId, alternateId, priorKey, sectionCrumbs);">1881          PersistenceResponse persistenceResponse = service.removeSubCollectionEntity(mainMetadata, collectionProperðŸ”µ</abbr></span>
<span class="4740780245520344929" onmouseenter="enter('4740780245520344929');" onmouseout="out('4740780245520344929');" style="">1882          if (persistenceResponse.getEntity() != null &amp;&amp; persistenceResponse.getEntity().isValidationFailure()) {   </span>
<span class="-1907173364280213129" onmouseenter="enter('-1907173364280213129');" onmouseout="out('-1907173364280213129');" style="">1883              String error = &quot;There was an error removing the whatever&quot;;                                            </span>
<span class="6694909055776458558" onmouseenter="enter('6694909055776458558');" onmouseout="out('6694909055776458558');" style="">1884              if (MapUtils.isNotEmpty(persistenceResponse.getEntity().getPropertyValidationErrors())) {             </span>
<span class="2653002805011151778" onmouseenter="enter('2653002805011151778');" onmouseout="out('2653002805011151778');" style="">1885                  // If we failed, we&#x27;ll return some JSON with the first error                                      </span>
<span class="6101527636004026445" onmouseenter="enter('6101527636004026445');" onmouseout="out('6101527636004026445');" style=""><abbr title="1886                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().get(0);">1886                  error = persistenceResponse.getEntity().getPropertyValidationErrors().values().iterator().next().gðŸ”µ</abbr></span>
<span class="3589903040125146199" onmouseenter="enter('3589903040125146199');" onmouseout="out('3589903040125146199');" style="">1887              } else if (CollectionUtils.isNotEmpty(persistenceResponse.getEntity().getGlobalValidationErrors())) { </span>
<span class="-8002349788440125315" onmouseenter="enter('-8002349788440125315');" onmouseout="out('-8002349788440125315');" style="">1888                  error = persistenceResponse.getEntity().getGlobalValidationErrors().get(0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1889              }                                                                                                     </span>
<span class="-5992560194076697230" onmouseenter="enter('-5992560194076697230');" onmouseout="out('-5992560194076697230');" style="">1890              return new JsonResponse(response)                                                                     </span>
<span class="4764127484129551096" onmouseenter="enter('4764127484129551096');" onmouseout="out('4764127484129551096');" style="">1891                  .with(&quot;status&quot;, &quot;error&quot;)                                                                          </span>
<span class="-4778619806303294332" onmouseenter="enter('-4778619806303294332');" onmouseout="out('-4778619806303294332');" style="">1892                  .with(&quot;message&quot;, BLCMessageUtils.getMessage(error))                                               </span>
<span class="-7022340256072404218" onmouseenter="enter('-7022340256072404218');" onmouseout="out('-7022340256072404218');" style="">1893                  .done();                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1894          }                                                                                                         </span>
<span  style="">1895                                                                                                                    </span>
<span class="6847553206794399102" onmouseenter="enter('6847553206794399102');" onmouseout="out('6847553206794399102');" style="">1896          // Next, we must get the new list grid that represents this collection                                    </span>
<span class="2783295710544667282" onmouseenter="enter('2783295710544667282');" onmouseout="out('2783295710544667282');" style="">1897          // We return the new list grid so that it can replace the currently visible one                           </span>
<span class="-540928088313216925" onmouseenter="enter('-540928088313216925');" onmouseout="out('-540928088313216925');" style=""><abbr title="1898          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persistenceResponse, sectionCrumbs);">1898          ListGrid listGrid = getCollectionListGrid(mainMetadata, entity, collectionProperty, null, sectionKey, persðŸ”µ</abbr></span>
<span  style="">1899                                                                                                                    </span>
<span class="1367311393823085969" onmouseenter="enter('1367311393823085969');" onmouseout="out('1367311393823085969');" style="">1900          model.addAttribute(&quot;listGrid&quot;, listGrid);                                                                 </span>
<span class="-8967653170262042052" onmouseenter="enter('-8967653170262042052');" onmouseout="out('-8967653170262042052');" style="">1901          model.addAttribute(&quot;currentUrl&quot;, request.getRequestURL().toString());                                     </span>
<span class="4821340166815723604" onmouseenter="enter('4821340166815723604');" onmouseout="out('4821340166815723604');" style="">1902          setModelAttributes(model, sectionKey);                                                                    </span>
<span class="-1608657499772052292" onmouseenter="enter('-1608657499772052292');" onmouseout="out('-1608657499772052292');" style="">1903          return &quot;views/standaloneListGrid&quot;;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1904      }                                                                                                             </span>
<span  style="">1905                                                                                                                    </span>
<span class="-1722269672251008380" onmouseenter="enter('-1722269672251008380');" onmouseout="out('-1722269672251008380');" style="">1906      public void addAuditableDisplayFields(EntityForm entityForm) {                                                </span>
<span class="2220665039639111541" onmouseenter="enter('2220665039639111541');" onmouseout="out('2220665039639111541');" style="">1907          Field createdBy = entityForm.findField(&quot;auditable.createdBy&quot;);                                            </span>
<span class="-1310269621989930827" onmouseenter="enter('-1310269621989930827');" onmouseout="out('-1310269621989930827');" style="">1908          if (createdBy != null &amp;&amp; createdBy.getValue() != null) {                                                  </span>
<span class="3065344382927201496" onmouseenter="enter('3065344382927201496');" onmouseout="out('3065344382927201496');" style="">1909              addAuditableDisplayField(entityForm, createdBy);                                                      </span>
<span  style="">1910                                                                                                                    </span>
<span class="-8232178899610643805" onmouseenter="enter('-8232178899610643805');" onmouseout="out('-8232178899610643805');" style="">1911              createdBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1912          }                                                                                                         </span>
<span class="1393544913931451876" onmouseenter="enter('1393544913931451876');" onmouseout="out('1393544913931451876');" style="">1913          Field updatedBy = entityForm.findField(&quot;auditable.updatedBy&quot;);                                            </span>
<span class="362865388069983596" onmouseenter="enter('362865388069983596');" onmouseout="out('362865388069983596');" style="">1914          if (updatedBy != null &amp;&amp; updatedBy.getValue() != null) {                                                  </span>
<span class="-892302887107162271" onmouseenter="enter('-892302887107162271');" onmouseout="out('-892302887107162271');" style="">1915              addAuditableDisplayField(entityForm, updatedBy);                                                      </span>
<span  style="">1916                                                                                                                    </span>
<span class="6398063041947851488" onmouseenter="enter('6398063041947851488');" onmouseout="out('6398063041947851488');" style="">1917              updatedBy.setIsVisible(false);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1918          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1919      }                                                                                                             </span>
<span  style="">1920                                                                                                                    </span>
<span class="4984267825623541739" onmouseenter="enter('4984267825623541739');" onmouseout="out('4984267825623541739');" style="">1921      private void addAuditableDisplayField(EntityForm entityForm, Field userField) {                               </span>
<span class="-4635466229336929139" onmouseenter="enter('-4635466229336929139');" onmouseout="out('-4635466229336929139');" style="">1922          Field displayField = buildAuditableDisplayField(userField);                                               </span>
<span  style="">1923                                                                                                                    </span>
<span class="-3510960703864117903" onmouseenter="enter('-3510960703864117903');" onmouseout="out('-3510960703864117903');" style="">1924          AdminUser user = adminUserDao.readAdminUserById(Long.parseLong(userField.getValue()));                    </span>
<span class="-2749914300638269457" onmouseenter="enter('-2749914300638269457');" onmouseout="out('-2749914300638269457');" style="">1925          String userName = user == null ? null : user.getName();                                                   </span>
<span class="-519467923242361473" onmouseenter="enter('-519467923242361473');" onmouseout="out('-519467923242361473');" style="">1926          displayField.setValue(userName);                                                                          </span>
<span  style="">1927                                                                                                                    </span>
<span class="2796866146572271884" onmouseenter="enter('2796866146572271884');" onmouseout="out('2796866146572271884');" style="">1928          FieldGroup auditGroup = entityForm.findGroup(&quot;AdminAuditable_Audit&quot;);                                     </span>
<span class="442119087406556402" onmouseenter="enter('442119087406556402');" onmouseout="out('442119087406556402');" style="">1929          if (auditGroup != null) {                                                                                 </span>
<span class="2790071812155889083" onmouseenter="enter('2790071812155889083');" onmouseout="out('2790071812155889083');" style="">1930              auditGroup.addField(displayField);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1931          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1932      }                                                                                                             </span>
<span  style="">1933                                                                                                                    </span>
<span class="-898012728924165157" onmouseenter="enter('-898012728924165157');" onmouseout="out('-898012728924165157');" style="">1934      private Field buildAuditableDisplayField(Field auditableField) {                                              </span>
<span class="7586031541837577475" onmouseenter="enter('7586031541837577475');" onmouseout="out('7586031541837577475');" style="">1935          return new Field().withFieldType(SupportedFieldType.STRING.toString())                                    </span>
<span class="-5983163062967947616" onmouseenter="enter('-5983163062967947616');" onmouseout="out('-5983163062967947616');" style="">1936                  .withName(auditableField.getName() + &quot;Display&quot;)                                                   </span>
<span class="-3810520855500417343" onmouseenter="enter('-3810520855500417343');" onmouseout="out('-3810520855500417343');" style="">1937                  .withFriendlyName(auditableField.getFriendlyName())                                               </span>
<span class="-2087540063707551713" onmouseenter="enter('-2087540063707551713');" onmouseout="out('-2087540063707551713');" style="">1938                  .withOrder(auditableField.getOrder())                                                             </span>
<span class="3252055162848788175" onmouseenter="enter('3252055162848788175');" onmouseout="out('3252055162848788175');" style="">1939                  .withOwningEntityClass(auditableField.getOwningEntityClass())                                     </span>
<span class="8052491048417023702" onmouseenter="enter('8052491048417023702');" onmouseout="out('8052491048417023702');" style="">1940                  .withReadOnly(true);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1941      }                                                                                                             </span>
<span  style="">1942                                                                                                                    </span>
<span class="2512746595428590302" onmouseenter="enter('2512746595428590302');" onmouseout="out('2512746595428590302');" style="">1943      protected String getCurrentTabName(Map&lt;String, String&gt; pathVars, ClassMetadata cmd) {                         </span>
<span class="-1960421544259469215" onmouseenter="enter('-1960421544259469215');" onmouseout="out('-1960421544259469215');" style="">1944          String tabName = pathVars.get(&quot;tabName&quot;);                                                                 </span>
<span class="620358619967646231" onmouseenter="enter('620358619967646231');" onmouseout="out('620358619967646231');" style="">1945          if (StringUtils.isBlank(tabName)) {                                                                       </span>
<span class="-8386812650765964886" onmouseenter="enter('-8386812650765964886');" onmouseout="out('-8386812650765964886');" style="">1946              TabMetadata firstTab = cmd.getFirstTab();                                                             </span>
<span class="5997097813726693180" onmouseenter="enter('5997097813726693180');" onmouseout="out('5997097813726693180');" style="">1947              return firstTab != null ? firstTab.getTabName() : &quot;General&quot;;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1948          }                                                                                                         </span>
<span class="-6789109484485831180" onmouseenter="enter('-6789109484485831180');" onmouseout="out('-6789109484485831180');" style="">1949          return tabName;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1950      }                                                                                                             </span>
<span  style="">1951                                                                                                                    </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1952      // *****************************************                                                                  </span>
<span class="2492884656402841956" onmouseenter="enter('2492884656402841956');" onmouseout="out('2492884656402841956');" style="">1953      // Typed Entity Helper Methods                                                                                </span>
<span class="7635428391280151313" onmouseenter="enter('7635428391280151313');" onmouseout="out('7635428391280151313');" style="">1954      // *****************************************                                                                  </span>
<span  style="">1955                                                                                                                    </span>
<span class="709722161552159597" onmouseenter="enter('709722161552159597');" onmouseout="out('709722161552159597');" style="">1956      protected void setTypedEntityModelAttributes(HttpServletRequest request, Model model) {                       </span>
<span class="2572860224956804545" onmouseenter="enter('2572860224956804545');" onmouseout="out('2572860224956804545');" style="">1957          // Check if this is a typed entity                                                                        </span>
<span class="-601784761218487618" onmouseenter="enter('-601784761218487618');" onmouseout="out('-601784761218487618');" style="">1958          AdminSection typedEntitySection = (AdminSection) request.getAttribute(&quot;typedEntitySection&quot;);              </span>
<span class="2356861889771822774" onmouseenter="enter('2356861889771822774');" onmouseout="out('2356861889771822774');" style="">1959          if (typedEntitySection != null) {                                                                         </span>
<span class="-7054855399164801351" onmouseenter="enter('-7054855399164801351');" onmouseout="out('-7054855399164801351');" style="">1960              // Update the friendly name for this Entity Type                                                      </span>
<span class="-8436584596314077038" onmouseenter="enter('-8436584596314077038');" onmouseout="out('-8436584596314077038');" style="">1961              model.addAttribute(&quot;entityFriendlyName&quot;, typedEntitySection.getName());                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1962          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1963      }                                                                                                             </span>
<span  style="">1964                                                                                                                    </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1965      // *********************************                                                                          </span>
<span class="5570644305110686760" onmouseenter="enter('5570644305110686760');" onmouseout="out('5570644305110686760');" style="">1966      // ADDITIONAL SPRING-BOUND METHODS *                                                                          </span>
<span class="6759941537805838467" onmouseenter="enter('6759941537805838467');" onmouseout="out('6759941537805838467');" style="">1967      // *********************************                                                                          </span>
<span  style="">1968                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1969      /**                                                                                                           </span>
<span class="-6771709729688841784" onmouseenter="enter('-6771709729688841784');" onmouseout="out('-6771709729688841784');" style="">1970       * Invoked on every request to provide the ability to register specific binders for Spring&#x27;s binding process. </span>
<span class="2498077318751920180" onmouseenter="enter('2498077318751920180');" onmouseout="out('2498077318751920180');" style=""><abbr title="1971       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports either true">1971       * By default, we register a binder that treats empty Strings as null and a Boolean editor that supports eitheðŸ”µ</abbr></span>
<span class="4465303089468973962" onmouseenter="enter('4465303089468973962');" onmouseout="out('4465303089468973962');" style="">1972       * or false. If the value is passed in as null, it will treat it as false.                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1973       *                                                                                                            </span>
<span class="-3898462538136412996" onmouseenter="enter('-3898462538136412996');" onmouseout="out('-3898462538136412996');" style="">1974       * @param binder                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1975       */                                                                                                           </span>
<span class="2978104519843175555" onmouseenter="enter('2978104519843175555');" onmouseout="out('2978104519843175555');" style="">1976      @InitBinder                                                                                                   </span>
<span class="4179572271848089300" onmouseenter="enter('4179572271848089300');" onmouseout="out('4179572271848089300');" style="">1977      public void initBinder(WebDataBinder binder) {                                                                </span>
<span class="3888201586857511470" onmouseenter="enter('3888201586857511470');" onmouseout="out('3888201586857511470');" style="">1978          binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));                                 </span>
<span class="-4458929942740752488" onmouseenter="enter('-4458929942740752488');" onmouseout="out('-4458929942740752488');" style="">1979          binder.registerCustomEditor(Boolean.class, new NonNullBooleanEditor());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1980      }                                                                                                             </span>
<span  style="">1981                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1982  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            