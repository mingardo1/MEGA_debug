<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>61</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    61
                    <a href="60.html">prev</a>
                    <a href="62.html">next</a>
                    <a href="61_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_37826f373652ce82466012d4d60a2e81bd4d0feb_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;37826f373652ce82466012d4d60a2e81bd4d0feb:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;37826f373652ce82466012d4d60a2e81bd4d0feb^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;37826f373652ce82466012d4d60a2e81bd4d0feb^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;33d6f073222f84b537dac4c128bca96cbd16118f:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="2310015860452416546" onmouseenter="enter('2310015860452416546');" onmouseout="out('2310015860452416546');" style="">  30 import android.view.ViewStub;                                                                            </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  31 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  32 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  33 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  34 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  35 import android.webkit.WebViewClient;                                                                     </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  36 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  37 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  38 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40 import android.widget.Toast;                                                                             </span>
<span  style="">  41                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  42 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  43 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  44 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  45 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50 import androidx.preference.PreferenceManager;                                                            </span>
<span  style="">  51                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  55 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  56 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  57 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  58 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  59 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  60 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  61 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  62 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  63 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  64 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  65 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  66 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  67 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  68 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  69 import com.automattic.simplenote.utils.TagUtils;                                                         </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  70 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  71 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  72 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  73 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  74 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  75 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  76 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  77 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  78 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  79 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  80 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  81 import com.simperium.client.Query;                                                                       </span>
<span  style="">  82                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  83 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  84 import java.util.Calendar;                                                                               </span>
<span  style="">  85                                                                                                          </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  88 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  89 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  90 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  91 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  92 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  93 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  94 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  95 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  96                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  97 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  98         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  99         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style=""> 100         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 101         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 102         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 104     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 105     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 106     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 107     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 108     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 109     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span  style=""> 110                                                                                                          </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 111     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 112     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 113     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 114     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 115     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 116     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 117     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 119         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 120             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 122     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 123     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 124     private View mRootView;                                                                              </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 125     private View mTagPadding;                                                                            </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 126     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 127     private ChipGroup mTagChips;                                                                         </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 128     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 129     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 130     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 131     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 132     private LinearLayout mPlaceholderView;                                                               </span>
<span class="6468836442965828651" onmouseenter="enter('6468836442965828651');" onmouseout="out('6468836442965828651');" style=""> 133     private CursorAdapter mLinkAutocompleteAdapter;                                                      </span>
<span class="-1742340169214255459" onmouseenter="enter('-1742340169214255459');" onmouseout="out('-1742340169214255459');" style=""> 134     private CursorAdapter mTagAutocompleteAdapter;                                                       </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 135     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 136     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 137     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 138     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 139     private ActionMode mActionMode;                                                                      </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 140     private MenuItem mChecklistMenuItem;                                                                 </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 141     private MenuItem mCopyMenuItem;                                                                      </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 142     private MenuItem mInformationMenuItem;                                                               </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 143     private MenuItem mShareMenuItem;                                                                     </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 144     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 145     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 146     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 147     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 148     private Drawable mBrowserIcon;                                                                       </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 149     private Drawable mCallIcon;                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 150     private Drawable mCopyIcon;                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 151     private Drawable mEmailIcon;                                                                         </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 152     private Drawable mLinkIcon;                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 153     private Drawable mMapIcon;                                                                           </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 154     private Drawable mShareIcon;                                                                         </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 155     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 156     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 157     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 158     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="6183483689682550304" onmouseenter="enter('6183483689682550304');" onmouseout="out('6183483689682550304');" style=""> 159     private LinearLayout mError;                                                                         </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 160     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 161     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 162     private WebView mMarkdown;                                                                           </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 163     private boolean mIsPaused;                                                                           </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 164     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 165                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 166     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 167     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 168         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 169         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 170             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 171                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span  style=""> 173                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 174             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 175                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 176                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 177                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 177                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 178                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 179                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 182             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 184     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 185     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 186     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 187     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 188     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 189         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 191         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 192             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 193             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 194                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 195             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 196                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 197                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 198                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 199                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 200                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 201                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 202                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 203                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204             }                                                                                            </span>
<span  style=""> 205                                                                                                          </span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style=""><abbr title=" 206             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 206             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireConteðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 207             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208         }                                                                                                </span>
<span  style=""> 209                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 210         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 211         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 213         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 214             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215         }                                                                                                </span>
<span  style=""> 216                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 217         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 218         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 219         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 220             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 221                 case R.id.menu_view_link:                                                                </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 222                     if (mLinkText != null) {                                                             </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 223                         if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                              </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 224                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 224                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LIðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 225                         } else {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 226                             try {                                                                        </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 227                                 BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 228                             } catch (Exception e) {                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 229                                 e.printStackTrace();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231                         }                                                                                </span>
<span  style=""> 232                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 233                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234                     }                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 236                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 237                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 238                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 239                         if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 240                             Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 241                         } else {                                                                         </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""><abbr title=" 242                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();"> 242                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243                         }                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 245                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246                     }                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 248                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 249                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 250                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 251                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 252                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253                     }                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 255                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 256                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 257                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span  style=""> 260                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 261         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 263         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 264             if (mActionMode != null) {                                                                   </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 265                 mActionMode.setSubtitle(&quot;&quot;);                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 266                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267             }                                                                                            </span>
<span  style=""> 268                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 269             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 270                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 271                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 272                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 273                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 273                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 275                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 276                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 277             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 279     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 280     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 281     private boolean mHideActionOnSuccess;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 282     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 283     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 284         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 285         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 286             if (!isAdded()) return;                                                                      </span>
<span  style=""> 287                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 288             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 290                 public void run() {                                                                      </span>
<span  style=""> 291                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 292                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 293                     mNote.save();                                                                        </span>
<span  style=""> 294                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 295                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 297             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 299     };                                                                                                   </span>
<span  style=""> 300                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 301     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 302      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 303      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 304      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 305     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span  style=""> 307                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 308     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 309     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 310         super.onCreate(savedInstanceState);                                                              </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 311         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 312         AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                         </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 313         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 314         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 315         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 316                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 317         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 318         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 319                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 320         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 320         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 321         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 321         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.aðŸ”µ</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 322         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 322         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 323         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 323         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.ðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 324         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 324         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,ðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 325         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 325         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 326         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 326         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.aðŸ”µ</abbr></span>
<span  style=""> 327                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 328         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 329         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 330         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 331                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 332         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 333                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 333                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-4933477915356212091" onmouseenter="enter('-4933477915356212091');" onmouseout="out('-4933477915356212091');" style=""> 334         mTagAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 335             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 336             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 337                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 338                 if (activity == null) return null;                                                       </span>
<span class="3059784599882537005" onmouseenter="enter('3059784599882537005');" onmouseout="out('3059784599882537005');" style=""> 339                 return activity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340             }                                                                                            </span>
<span  style=""> 341                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 342             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 343             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 344                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 345                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346             }                                                                                            </span>
<span  style=""> 347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 348             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 349             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 350                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351             }                                                                                            </span>
<span  style=""> 352                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 354             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 355                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 356                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 357                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 358                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 359                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 360                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 361                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 362                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 363                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 364                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 365                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 365                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 366                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 368         };                                                                                               </span>
<span  style=""> 369                                                                                                          </span>
<span class="-5778622668812359275" onmouseenter="enter('-5778622668812359275');" onmouseout="out('-5778622668812359275');" style=""> 370         mLinkAutocompleteAdapter = new CursorAdapter(getContext(), null, 0x0) {                          </span>
<span class="4420913156406314587" onmouseenter="enter('4420913156406314587');" onmouseout="out('4420913156406314587');" style=""> 371             private Activity mActivity = requireActivity();                                              </span>
<span  style=""> 372                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 373             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 374             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="9137674912136175390" onmouseenter="enter('9137674912136175390');" onmouseout="out('9137674912136175390');" style=""> 375                 ((TextView) view).setText(convertToString(cursor));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376             }                                                                                            </span>
<span  style=""> 377                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 379             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-6315376739504212293" onmouseenter="enter('-6315376739504212293');" onmouseout="out('-6315376739504212293');" style=""> 380                 return cursor.getString(cursor.getColumnIndex(Note.TITLE_INDEX_NAME));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381             }                                                                                            </span>
<span  style=""> 382                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 383             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 384             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="9209398663457461143" onmouseenter="enter('9209398663457461143');" onmouseout="out('9209398663457461143');" style=""> 385                 return mActivity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386             }                                                                                            </span>
<span  style=""> 387                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 388             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 389             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-2694701201332649685" onmouseenter="enter('-2694701201332649685');" onmouseout="out('-2694701201332649685');" style=""> 390                 if (filter == null) {                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 391                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                 }                                                                                        </span>
<span  style=""> 393                                                                                                          </span>
<span class="-5476224035795218003" onmouseenter="enter('-5476224035795218003');" onmouseout="out('-5476224035795218003');" style=""> 394                 Simplenote application = (Simplenote) mActivity.getApplication();                        </span>
<span class="5284816788544144261" onmouseenter="enter('5284816788544144261');" onmouseout="out('5284816788544144261');" style=""> 395                 Query&lt;Note&gt; query = application.getNotesBucket().query();                                </span>
<span class="-5887342273099451545" onmouseenter="enter('-5887342273099451545');" onmouseout="out('-5887342273099451545');" style=""> 396                 query.include(Note.PINNED_INDEX_NAME);                                                   </span>
<span class="8903361953614418852" onmouseenter="enter('8903361953614418852');" onmouseout="out('8903361953614418852');" style=""> 397                 query.include(Note.TITLE_INDEX_NAME);                                                    </span>
<span class="3677160110009294333" onmouseenter="enter('3677160110009294333');" onmouseout="out('3677160110009294333');" style=""><abbr title=" 398                 query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filter));"> 398                 query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filðŸ”µ</abbr></span>
<span class="2636422943772736086" onmouseenter="enter('2636422943772736086');" onmouseout="out('2636422943772736086');" style=""> 399                 PrefUtils.sortNoteQuery(query, requireContext(), true);                                  </span>
<span class="2003026878785809505" onmouseenter="enter('2003026878785809505');" onmouseout="out('2003026878785809505');" style=""> 400                 Cursor cursor = query.execute();                                                         </span>
<span  style=""> 401                                                                                                          </span>
<span class="-3406397928756442195" onmouseenter="enter('-3406397928756442195');" onmouseout="out('-3406397928756442195');" style=""><abbr title=" 402                 final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * 48);"> 402                 final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * ðŸ”µ</abbr></span>
<span class="2053250669508349335" onmouseenter="enter('2053250669508349335');" onmouseout="out('2053250669508349335');" style=""> 403                 final int heightDisplay = DisplayUtils.getDisplayPixelSize(requireContext()).y;          </span>
<span class="-5884104961680708619" onmouseenter="enter('-5884104961680708619');" onmouseout="out('-5884104961680708619');" style=""> 404                 final int heightDropdown = Math.min(heightDisplay / 4, heightAutocomplete);              </span>
<span  style=""> 405                                                                                                          </span>
<span class="6747443584027813293" onmouseenter="enter('6747443584027813293');" onmouseout="out('6747443584027813293');" style=""> 406                 mActivity.runOnUiThread(                                                                 </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 407                     new Runnable() {                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 408                         @Override                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 409                         public void run() {                                                              </span>
<span class="-6383818153518880076" onmouseenter="enter('-6383818153518880076');" onmouseout="out('-6383818153518880076');" style=""> 410                             mContentEditText.setDropDownHeight(heightDropdown);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412                     }                                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 413                 );                                                                                       </span>
<span class="-6729379386015983029" onmouseenter="enter('-6729379386015983029');" onmouseout="out('-6729379386015983029');" style=""> 414                 return cursor;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 416         };                                                                                               </span>
<span  style=""> 417                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 418         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 422     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 422     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 423         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 424         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 425         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 426         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 427         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 428         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 429         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 429         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()))ðŸ”µ</abbr></span>
<span class="-6866322642818059816" onmouseenter="enter('-6866322642818059816');" onmouseout="out('-6866322642818059816');" style=""> 430         mContentEditText.setDropDownBackgroundResource(R.drawable.bg_list_popup);                        </span>
<span class="8857723377205297003" onmouseenter="enter('8857723377205297003');" onmouseout="out('8857723377205297003');" style=""> 431         mContentEditText.setAdapter(mLinkAutocompleteAdapter);                                           </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 432         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 433         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 434         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="-5626031287620429456" onmouseenter="enter('-5626031287620429456');" onmouseout="out('-5626031287620429456');" style=""> 435         mTagInput.setAdapter(mTagAutocompleteAdapter);                                                   </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 436         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 437         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 438         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 439         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 440         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 441                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 442         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 443             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 444             requireActivity().invalidateOptionsMenu();                                                   </span>
<span  style=""> 445                                                                                                          </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style=""> 446             if (BrowserUtils.isWebViewInstalled(requireContext())) {                                     </span>
<span class="-3967743337838243188" onmouseenter="enter('-3967743337838243188');" onmouseout="out('-3967743337838243188');" style=""> 447                 ((ViewStub) mRootView.findViewById(R.id.stub_webview)).inflate();                        </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 448                 mMarkdown = mRootView.findViewById(R.id.markdown);                                       </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style=""> 449                 mMarkdown.setWebViewClient(                                                              </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style=""> 450                     new WebViewClient() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451                         @Override                                                                        </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style=""><abbr title=" 452                         public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){"> 452                         public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request)ðŸ”µ</abbr></span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 453                             String url = request.getUrl().toString();                                    </span>
<span  style=""> 454                                                                                                          </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style=""> 455                             if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){               </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 456                                 SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 456                                 SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINKðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 457                             } else {                                                                     </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 458                                 BrowserUtils.launchBrowserOrShowError(requireContext(), url);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                             }                                                                            </span>
<span  style=""> 460                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 461                             return true;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463                     }                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 464 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 465                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 466             );                                                                                           </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 467             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 467             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()ðŸ”µ</abbr></span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 468 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 469                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 470                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 471             );                                                                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 472             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 473                 ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 474                 : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 475         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 476                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 477         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 478                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 479         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 480             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 481             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 482                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 483             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 484                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 485             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 486                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 487             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 488                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 489             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 490                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 491             } else {                                                                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 492 =======                                                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 493                 );                                                                                       </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 494                 mCss = ThemeUtils.isLightTheme(requireContext())                                         </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 495                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 496                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 497             } else {                                                                                     </span>
<span class="4441162317505613606" onmouseenter="enter('4441162317505613606');" onmouseout="out('4441162317505613606');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 498                 ((ViewStub) mRootView.findViewById(R.id.stub_error)).inflate();                          </span>
<span class="-4966458499899083722" onmouseenter="enter('-4966458499899083722');" onmouseout="out('-4966458499899083722');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 499                 mError = mRootView.findViewById(R.id.error);                                             </span>
<span class="-6521037657957389482" onmouseenter="enter('-6521037657957389482');" onmouseout="out('-6521037657957389482');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 500                 mRootView.findViewById(R.id.button).setOnClickListener(                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 501                     new View.OnClickListener() {                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 502                         @Override                                                                        </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 503                         public void onClick(View view) {                                                 </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 504                             BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);"> 504                             BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 505                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 506                     }                                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 507                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 508             }                                                                                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 509 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 510         }                                                                                                </span>
<span  style=""> 511                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 512         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 513                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 514         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 515             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 516             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 517                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 518             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 519                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520             }                                                                                            </span>
<span  style=""> 521                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 522             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style=""> 523                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 524             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 525                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 526             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 527                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528             }                                                                                            </span>
<span  style=""> 529                                                                                                          </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 530             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 531         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 532             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 533             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 534                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 535             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 536                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538         }                                                                                                </span>
<span  style=""> 539                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 540         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 541         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 542             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 543             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 544                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 545                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 546                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 547                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548                     }                                                                                    </span>
<span  style=""> 549                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 550                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 551                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 552                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 553                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 554                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 555                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 556                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557                     }                                                                                    </span>
<span  style=""> 558                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 559                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 560                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 561                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 562                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 563                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 566         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 567         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 568         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569     }                                                                                                    </span>
<span  style=""> 570                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 571     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 572         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 573             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 574             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 575             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 576             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578     }                                                                                                    </span>
<span  style=""> 579                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 580     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 581     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 582         super.onResume();                                                                                </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style=""> 583         checkWebView();                                                                                  </span>
<span class="-9085345560964209172" onmouseenter="enter('-9085345560964209172');" onmouseout="out('-9085345560964209172');" style=""> 584         mIsPaused = false;                                                                               </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 585         mNotesBucket.addListener(this);                                                                  </span>
<span class="3922278034329768441" onmouseenter="enter('3922278034329768441');" onmouseout="out('3922278034329768441');" style=""> 586         AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteEditorFragment)&quot;);                        </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 587         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 588                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 589         if (mContentEditText != null) {                                                                  </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 590             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 590             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContextðŸ”µ</abbr></span>
<span  style=""> 591                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 592             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 593                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596     }                                                                                                    </span>
<span  style=""> 597                                                                                                          </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style=""> 598     private void checkWebView() {                                                                        </span>
<span class="8284401614074834784" onmouseenter="enter('8284401614074834784');" onmouseout="out('8284401614074834784');" style=""> 599         // When a WebView is installed and mMarkdown is null on a large landscape device, a WebView      </span>
<span class="6699306601959225492" onmouseenter="enter('6699306601959225492');" onmouseout="out('6699306601959225492');" style=""> 600         // was not installed when the fragment was created.  So, recreate the activity to refresh        </span>
<span class="-5414175386362694134" onmouseenter="enter('-5414175386362694134');" onmouseout="out('-5414175386362694134');" style=""> 601         // the editor view.                                                                              </span>
<span class="7373089442478701267" onmouseenter="enter('7373089442478701267');" onmouseout="out('7373089442478701267');" style=""> 602         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null &amp;&amp;                    </span>
<span class="-7028697565563617109" onmouseenter="enter('-7028697565563617109');" onmouseout="out('-7028697565563617109');" style=""> 603             DisplayUtils.isLargeScreenLandscape(requireContext())) {                                     </span>
<span class="6438271402930862354" onmouseenter="enter('6438271402930862354');" onmouseout="out('6438271402930862354');" style=""> 604             requireActivity().recreate();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606     }                                                                                                    </span>
<span  style=""> 607                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 608     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 609         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 610             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 611             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 612                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 613                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614                 }                                                                                        </span>
<span  style=""> 615                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 616                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 616                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 617                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 618                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 620             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 621         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622     }                                                                                                    </span>
<span  style=""> 623                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 624     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 625     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 626         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 627         mIsPaused = true;                                                                                </span>
<span  style=""> 628                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 629         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 630         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 631                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 632         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 633                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 634         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 635             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 636             mAutoSaveHandler.post(mAutoSaveRunnable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 637         }                                                                                                </span>
<span  style=""> 638                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 639         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 640             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641         }                                                                                                </span>
<span  style=""> 642                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 643         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 644             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645         }                                                                                                </span>
<span  style=""> 646                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 647         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 648         saveNote();                                                                                      </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 649         AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 652     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 653     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 654         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 655         mNotesBucket.removeListener(this);                                                               </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style=""> 656         AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                      </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 657         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658     }                                                                                                    </span>
<span  style=""> 659                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 660     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 661     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 662         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 663                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 664         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 665             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 669     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 670     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 671         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 672                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 673         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 673         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 674             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675         }                                                                                                </span>
<span  style=""> 676                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 677         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 678         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679     }                                                                                                    </span>
<span  style=""> 680                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 681     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 682     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 683         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 684             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 685                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 686                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 687             case R.id.menu_copy:                                                                         </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 688                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 689                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 690                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 691                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692                 }                                                                                        </span>
<span  style=""> 693                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 694                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 695             case R.id.menu_copy_internal:                                                                </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 696                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 696                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitleðŸ”µ</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 697                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 698                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 699                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700                 }                                                                                        </span>
<span  style=""> 701                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 702                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 703             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 704                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 705                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 706             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 707                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 708                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 709             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 710                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 711                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 712             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 713                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 714                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 715                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 716             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 717                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 718                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 719                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 720                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 721                 }                                                                                        </span>
<span  style=""> 722                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 723                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 724             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 725                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 726                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 727             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 728                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 729                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730                 }                                                                                        </span>
<span  style=""> 731                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 732                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 733                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 734             case android.R.id.home:                                                                      </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 735                 AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);            </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 736                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 737                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738                 }                                                                                        </span>
<span  style=""> 739                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 740                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 741                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 742             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 743                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 744         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745     }                                                                                                    </span>
<span  style=""> 746                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 747     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 748     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 749         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 750             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 751             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 752             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 753             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 754             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 755             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 756             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 757             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 758             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 759                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 760             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 761             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 762             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 763                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 764             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 765             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 766                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 767                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 768                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 769                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 770                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 771                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 772                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 773                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 774             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 775                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 776                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 777                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 778                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 779                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 780                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 781                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 782                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783             }                                                                                            </span>
<span  style=""> 784                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 785             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 786                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 787             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 788                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790         }                                                                                                </span>
<span  style=""> 791                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 792         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 793         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794     }                                                                                                    </span>
<span  style=""> 795                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 796     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 797         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 798                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 799         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 800             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 801         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 802             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 803             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804         }                                                                                                </span>
<span  style=""> 805                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 806         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 807             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 808             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 809             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 810         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811     }                                                                                                    </span>
<span  style=""> 812                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 813     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 814     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 815         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 816         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 817             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 818             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820     }                                                                                                    </span>
<span  style=""> 821                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 822     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 823         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 824         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825     }                                                                                                    </span>
<span  style=""> 826                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 827     protected void clearMarkdown() {                                                                     </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 828         if (mMarkdown != null) {                                                                         </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""><abbr title=" 829             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 829             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, nullðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831     }                                                                                                    </span>
<span  style=""> 832                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 833     protected void hideMarkdown() {                                                                      </span>
<span class="5972103689141576990" onmouseenter="enter('5972103689141576990');" onmouseout="out('5972103689141576990');" style=""> 834         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown != null) {                    </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 835             mMarkdown.setVisibility(View.INVISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 836         } else {                                                                                         </span>
<span class="-7415720252441553161" onmouseenter="enter('-7415720252441553161');" onmouseout="out('-7415720252441553161');" style=""> 837             mError.setVisibility(View.INVISIBLE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 841     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 842         loadMarkdownData();                                                                              </span>
<span  style=""> 843                                                                                                          </span>
<span class="5972103689141576990" onmouseenter="enter('5972103689141576990');" onmouseout="out('5972103689141576990');" style=""> 844         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown != null) {                    </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 845             mMarkdown.setVisibility(View.VISIBLE);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 846         } else {                                                                                         </span>
<span class="8471850600291055773" onmouseenter="enter('8471850600291055773');" onmouseout="out('8471850600291055773');" style=""> 847             mError.setVisibility(View.VISIBLE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848         }                                                                                                </span>
<span  style=""> 849                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 850         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 851             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 852                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 853                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 854                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 856             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 857             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 858         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 859     }                                                                                                    </span>
<span  style=""> 860                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 861     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 862         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 863             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 864             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 865             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 866                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 867                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 868                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 869             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871     }                                                                                                    </span>
<span  style=""> 872                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 873     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 874         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 875             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 876             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 877             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 878         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 879             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 883     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 884         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 885                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 886         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 887             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 888             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 889             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891     }                                                                                                    </span>
<span  style=""> 892                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 893     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 894         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 895         showMarkdownActionOrTabs();                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 896         saveNote();                                                                                      </span>
<span  style=""> 897                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 898         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 899         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 900         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 901         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 902         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903     }                                                                                                    </span>
<span  style=""> 904                                                                                                          </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 905     private void setMarkdownEnabled(boolean enabled) {                                                   </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 906         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 907                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 908         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 909             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911     }                                                                                                    </span>
<span  style=""> 912                                                                                                          </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 913     private void showMarkdownActionOrTabs() {                                                            </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 914         Activity activity = getActivity();                                                               </span>
<span  style=""> 915                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 916         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 917             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 918                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 919             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 920                 editorActivity.showTabs();                                                               </span>
<span  style=""> 921                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 922                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 923                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 924                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 925                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 927             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 928                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 929             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 930         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 931             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 932             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934     }                                                                                                    </span>
<span  style=""> 935                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 936     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 937         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 938             mCss,                                                                                        </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 939             mContentEditText.getPreviewTextContent()                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 940         );                                                                                               </span>
<span  style=""> 941                                                                                                          </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 942         if (mMarkdown != null) {                                                                         </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 943             mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 945     }                                                                                                    </span>
<span  style=""> 946                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 947     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 948         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 949             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 950         }                                                                                                </span>
<span  style=""> 951                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 952         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 953         mMatchOffsets = matchOffsets;                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 954         saveNote();                                                                                      </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 955         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956     }                                                                                                    </span>
<span  style=""> 957                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 958     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 959         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 960         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 961         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962     }                                                                                                    </span>
<span  style=""> 963                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 964     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 965         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 966             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 967             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 967             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 968             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 969                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 970             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 971                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 972                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 973                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 974                                                                                                          </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 975                 // Show/Hide action/tabs based on markdown flag.                                         </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 976                 showMarkdownActionOrTabs();                                                              </span>
<span  style=""> 977                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 978                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 979                 mNote.save();                                                                            </span>
<span  style=""> 980                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 981                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 982                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 983                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984                 }                                                                                        </span>
<span  style=""> 985                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 986                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 987                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 988                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 989                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 990                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 991                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 992                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 993                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 994             }                                                                                            </span>
<span  style=""> 995                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 996             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 997             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 998             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 999         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1000     }                                                                                                    </span>
<span  style="">1001                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style="">1002     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style="">1003         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style="">1004         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005     }                                                                                                    </span>
<span  style="">1006                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style="">1007     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style="">1008         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style="">1009         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style="">1010         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style="">1011         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style="">1012         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style="">1013         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style="">1014         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style="">1015         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style="">1016                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style="">1017         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style="">1018                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style="">1019         int newCursorLocation = cursorLocation;                                                          </span>
<span  style="">1020                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style="">1021         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style="">1022                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style="">1023         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style="">1024         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style="">1025             return newText.length();                                                                     </span>
<span  style="">1026                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style="">1027         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style="">1028         boolean afterCursorMatches = false;                                                              </span>
<span  style="">1029                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1030         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title="1031             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));">1031             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title="1032             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));">1032             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1033         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1034             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035         }                                                                                                </span>
<span  style="">1036                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style="">1037         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style="">1038         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style="">1039             newCursorLocation += deltaLength;                                                            </span>
<span  style="">1040                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style="">1041         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style="">1042         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1043     }                                                                                                    </span>
<span  style="">1044                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1045     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style="">1046     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style="">1047         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1048             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1049         }                                                                                                </span>
<span  style="">1050                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style="">1051         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1052             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style="">1053                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1054                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style="">1055                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1056             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1057         }                                                                                                </span>
<span  style="">1058                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style="">1059         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1060         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1061         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1062         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063     }                                                                                                    </span>
<span  style="">1064                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1065     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style="">1066     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style="">1067         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068     }                                                                                                    </span>
<span  style="">1069                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1070     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style="">1071     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="">1072         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="">1073         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style="">1074         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075     }                                                                                                    </span>
<span  style="">1076                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1077     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style="">1078     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style="">1079         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="">1080         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style="">1081             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style="">1082             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1083         }                                                                                                </span>
<span  style="">1084                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style="">1085         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1086         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="">1087             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style="">1088             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089         }                                                                                                </span>
<span  style="">1090                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1091         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1092             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1093         }                                                                                                </span>
<span  style="">1094                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1095         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1096         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1097         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1098         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099     }                                                                                                    </span>
<span  style="">1100                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1101     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1102      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1103      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1104      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1105      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1106      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1107      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1108     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title="1109         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {">1109         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.classðŸ”µ</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1110             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1111                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1113         }                                                                                                </span>
<span  style="">1114                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1115         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style="">1116                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1117         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1118             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119         }                                                                                                </span>
<span  style="">1120                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1121         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title="1122         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1122         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVðŸ”µ</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title="1123         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1123         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124     }                                                                                                    </span>
<span  style="">1125                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1126     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1127         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1128         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1129         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1130         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131     }                                                                                                    </span>
<span  style="">1132                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1133     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1134         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1135             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136         }                                                                                                </span>
<span  style="">1137                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1138         AppLog.add(                                                                                      </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1139             Type.ACTION,                                                                                 </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1140             &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                              </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1141                 &quot; / Title: &quot; + mNote.getTitle() +                                                        </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1142                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                   </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1143                 &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1144         );                                                                                               </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1145         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146     }                                                                                                    </span>
<span  style="">1147                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1148     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1149         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1150             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1151         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1152             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1154     }                                                                                                    </span>
<span  style="">1155                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1156     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1157         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1158             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1159             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160         }                                                                                                </span>
<span  style="">1161                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1162         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1163             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165     }                                                                                                    </span>
<span  style="">1166                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1167     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1168     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1169         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1170             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1171                                                                                                          </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1172             if (mTagInput.getText().toString().trim().length() &gt; 0                                       </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1173                 &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                       </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1174                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1175             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1176                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1178         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179     }                                                                                                    </span>
<span  style="">1180                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1181     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1182         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183     }                                                                                                    </span>
<span  style="">1184                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1185     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1186         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187     }                                                                                                    </span>
<span  style="">1188                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1189     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1190         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1191             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1192         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1193             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195     }                                                                                                    </span>
<span  style="">1196                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1197     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1198         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1199                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1200         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1201             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202         }                                                                                                </span>
<span  style="">1203                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1204         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1205     }                                                                                                    </span>
<span  style="">1206                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1207     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1208      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1209      */                                                                                                  </span>
<span  style="">1210                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1211     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1212     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1213         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1214         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1215             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217     }                                                                                                    </span>
<span  style="">1218                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1219     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1220     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1221         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1222         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1223             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225     }                                                                                                    </span>
<span  style="">1226                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1227     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1228     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1229         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1230             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231         }                                                                                                </span>
<span  style="">1232                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1233         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1234             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235         }                                                                                                </span>
<span  style="">1236                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1237         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1238         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1239         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1240             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1242         ft.addToBackStack(null);                                                                         </span>
<span  style="">1243                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1244         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1245         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1246         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1247         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248     }                                                                                                    </span>
<span  style="">1249                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1250     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1251     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1252         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253     }                                                                                                    </span>
<span  style="">1254                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1255     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1256     public void onShareDismissed() {                                                                     </span>
<span  style="">1257                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1258     }                                                                                                    </span>
<span  style="">1259                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1260     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1261      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1262      */                                                                                                  </span>
<span  style="">1263                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1264     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1265     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1266         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1267         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1268             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270     }                                                                                                    </span>
<span  style="">1271                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1272     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1273     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1274         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1275             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1276         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1277         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278     }                                                                                                    </span>
<span  style="">1279                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1280     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1281     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1282         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1283             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1284         }                                                                                                </span>
<span  style="">1285                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1286         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1287             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289     }                                                                                                    </span>
<span  style="">1290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1291     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1292     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1293         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1294     }                                                                                                    </span>
<span  style="">1295                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1296     private void saveNote() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1297         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1298             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1299                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1299                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1300                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1301             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1302                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1303                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304             }                                                                                            </span>
<span  style="">1305                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1306             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1307             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1308                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1309             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1309             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1310                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1311                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1312                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1313                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1314                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1315                 mNote.save();                                                                            </span>
<span  style="">1316                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1317                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1318                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1319                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1320                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1321                 );                                                                                       </span>
<span  style="">1322                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1323                 AppLog.add(                                                                              </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1324                     Type.SYNC,                                                                           </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1325                     &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +         </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1326                         &quot; / Title: &quot; + mNote.getTitle() +                                                </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1327                         &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                      </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1328                         &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1329                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1331         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1332             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1333         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1334     }                                                                                                    </span>
<span  style="">1335                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1336     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1337     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1338     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1339     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1340         mCurrentCursorPosition = selEnd;                                                                 </span>
<span  style="">1341                                                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1342         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1343             Editable noteContent = mContentEditText.getText();                                           </span>
<span  style="">1344                                                                                                          </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1345             if (noteContent == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1346                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1347             }                                                                                            </span>
<span  style="">1348                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1349             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span  style="">1350                                                                                                          </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1351             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1352                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1353                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1354                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1354                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span  style="">1355                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1356                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1357                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1358                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1359                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360                 }                                                                                        </span>
<span  style="">1361                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1362                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1363                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1364                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1364                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span  style="">1365                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1366                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1367                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368                     }                                                                                    </span>
<span  style="">1369                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1370                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1372             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1373                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1374                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1375             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1376         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1377             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1378             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380     }                                                                                                    </span>
<span  style="">1381                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1382     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1383         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1384         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1385                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1386         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1387             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1388                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1389                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1390             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1391                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1392                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1393             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1394                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1395                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1396             } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                    </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1397                 mViewLinkMenuItem.setIcon(mLinkIcon);                                                    </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1398                 mViewLinkMenuItem.setTitle(getString(R.string.open_note));                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1399             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1400                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1401                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404     }                                                                                                    </span>
<span  style="">1405                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1406     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1407         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1408             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1409             mNote.save();                                                                                </span>
<span  style="">1410                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1411             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1412             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1413                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1414             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1415                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1416                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1417                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1418             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420     }                                                                                                    </span>
<span  style="">1421                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1422     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1423         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1424             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425         }                                                                                                </span>
<span  style="">1426                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1427         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1428         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1429                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1430         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1431             if (mNote.isPublished()) {                                                                   </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1432                 if (mHideActionOnSuccess) {                                                              </span>
<span class="7497833686297233990" onmouseenter="enter('7497833686297233990');" onmouseout="out('7497833686297233990');" style="">1433                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).show();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1434                 } else {                                                                                 </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1435                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1436                         .setAction(                                                                      </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1437                             R.string.undo,                                                               </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1438                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1439                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1440                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1441                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1442                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1444                             }                                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1445                         )                                                                                </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1446                         .show();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1447                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1448             } else {                                                                                     </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1449                 if (mHideActionOnSuccess) {                                                              </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1450                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1451                 } else {                                                                                 </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1452                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1453                         .setAction(                                                                      </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1454                             R.string.undo,                                                               </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1455                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1456                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1457                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1458                                     mHideActionOnSuccess = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1459                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1460                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1461                             }                                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1462                         )                                                                                </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1463                         .show();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1464                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1465             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1466         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1467             if (mNote.isPublished()) {                                                                   </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1468                 Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1469                     .setAction(                                                                          </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1470                         R.string.retry,                                                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1471                         new View.OnClickListener() {                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1472                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1473                             public void onClick(View v) {                                                </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1474                                 mHideActionOnSuccess = true;                                             </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1475                                 unpublishNote();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477                         }                                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1478                     )                                                                                    </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1479                     .show();                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1480             } else {                                                                                     </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1481                 Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1482                     .setAction(                                                                          </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1483                         R.string.retry,                                                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1484                         new View.OnClickListener() {                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1485                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1486                             public void onClick(View v) {                                                </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1487                                 mHideActionOnSuccess = true;                                             </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1488                                 publishNote();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1490                         }                                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1491                     )                                                                                    </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1492                     .show();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1494         }                                                                                                </span>
<span  style="">1495                                                                                                          </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1496         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1497         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498     }                                                                                                    </span>
<span  style="">1499                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1500     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1501         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1502             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1503             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504         }                                                                                                </span>
<span  style="">1505                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1506         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1507             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1507             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1508             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1509         }                                                                                                </span>
<span  style="">1510                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1511         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1512     }                                                                                                    </span>
<span  style="">1513                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1514     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1515         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1516             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1517             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1518         }                                                                                                </span>
<span  style="">1519                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1520         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1521             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1521             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1522             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1523         }                                                                                                </span>
<span  style="">1524                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1525         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526     }                                                                                                    </span>
<span  style="">1527                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1528     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1529         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1530             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1531                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1532                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1533                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1534         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535     }                                                                                                    </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1536     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1537         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1538             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1540     }                                                                                                    </span>
<span  style="">1541                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1542     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1543         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1544             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1546     }                                                                                                    </span>
<span  style="">1547                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1548     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1549         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1550             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1551             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1551             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1552             saveNote();                                                                                  </span>
<span  style="">1553                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1554             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1555         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1556     }                                                                                                    </span>
<span  style="">1557                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1558     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1559     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1560     }                                                                                                    </span>
<span  style="">1561                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1562     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1563     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1563     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1564         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1565             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1566                 try {                                                                                    </span>
<span class="4372796228007650956" onmouseenter="enter('4372796228007650956');" onmouseout="out('4372796228007650956');" style="">1567                     final Note updatedNote = noteBucket.get(key);                                        </span>
<span  style="">1568                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1569                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1570                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1571                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1572                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1573                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1574                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575                                 }                                                                        </span>
<span  style="">1576                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1577                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1578                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1580                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1582                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1583                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1584                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1585             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1586         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587     }                                                                                                    </span>
<span  style="">1588                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1589     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1590     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1591         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1592             mNotesBucket.removeListener(this);                                                           </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style="">1593             AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1594         }                                                                                                </span>
<span  style="">1595                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1596         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1597             Type.SYNC,                                                                                   </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1598             &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                 </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1599                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1600                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1601                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1602         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1603     }                                                                                                    </span>
<span  style="">1604                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1605     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1606     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1607         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1608         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1609             return;                                                                                      </span>
<span  style="">1610                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1611         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1612         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1613             return;                                                                                      </span>
<span  style="">1614                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1615         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616     }                                                                                                    </span>
<span  style="">1617                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1618     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1619         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1620                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1621         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1622             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1623         }                                                                                                </span>
<span  style="">1624                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1625         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1626         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1627             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1628                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1629             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1630                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1631                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1632             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1633         }                                                                                                </span>
<span  style="">1634                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1635         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1636         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1637             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1638                                                                                                          </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1639             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1640                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1641             }                                                                                            </span>
<span  style="">1642                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1643             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1644             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1645             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1646                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1647             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1648                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span  style="">1649                                                                                                          </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1650                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1651                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1652                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1653                 }                                                                                        </span>
<span  style="">1654                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1655                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1656                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1657                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1658                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1659                     AppLog.add(                                                                          </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1660                         Type.SYNC,                                                                       </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1661                         &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                         </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1662                             &quot; / Title: &quot; + fragment.mNote.getTitle() +                                   </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style=""><abbr title="1663                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +">1663                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent())ðŸ”µ</abbr></span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1664                             &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1665                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1666                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1667             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1668                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1669                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span  style="">1670                                                                                                          </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1671                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1672                     Note currentNote = notesCursor.getObject();                                          </span>
<span  style="">1673                                                                                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1674                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1675                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1676                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1677                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1679             }                                                                                            </span>
<span  style="">1680                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1681             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682         }                                                                                                </span>
<span  style="">1683                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1684         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1685         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1686             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style=""><abbr title="1687             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {">1687             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing(ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1688                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689             }                                                                                            </span>
<span  style="">1690                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1691             fragment.refreshContent(false);                                                              </span>
<span  style="">1692                                                                                                          </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1693             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1694                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1694                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1695                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1696                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1697             }                                                                                            </span>
<span  style="">1698                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1699             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1700                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1701             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1702                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1703                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1704                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1705                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1706                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1707                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1708                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1709                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710                         }                                                                                </span>
<span  style="">1711                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1712                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1712                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivityðŸ”µ</abbr></span>
<span  style="">1713                                                                                                          </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1714                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1715                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1716                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1717                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1718                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1719             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1720                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1721                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722             }                                                                                            </span>
<span  style="">1723                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1724             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1725             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1726             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1727             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1728         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729     }                                                                                                    </span>
<span  style="">1730                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1731     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1732         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1733                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1734         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1735             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1736         }                                                                                                </span>
<span  style="">1737                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1738         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1739         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1740             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1741                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1742             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1743                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744             }                                                                                            </span>
<span  style="">1745                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1746             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747         }                                                                                                </span>
<span  style="">1748                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1749         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1750         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1751             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1752                                                                                                          </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1753             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1753             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishingðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1754                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1755                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1756                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1758         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1759     }                                                                                                    </span>
<span  style="">1760                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1761     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1762         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1763             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1764         }                                                                                                </span>
<span  style="">1765                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1766         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1767             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1768         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1769     }                                                                                                    </span>
<span  style="">1770                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1771     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1772     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1773         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1774             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1775         }                                                                                                </span>
<span  style="">1776                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1777         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1778         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1779             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1780             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1781         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1782             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1783             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1784                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1785                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1786                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1787             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1788             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1789             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1790         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1791     }                                                                                                    </span>
<span  style="">1792                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1793     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1794         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1795             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1796             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1797         };                                                                                               </span>
<span  style="">1798                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1799         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1800             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1801             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1802         };                                                                                               </span>
<span  style="">1803                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1804         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1805     }                                                                                                    </span>
<span  style="">1806                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1807     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1808         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1809         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1810         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1811         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1812         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1813         tags.setString(text.toString());                                                                 </span>
<span  style="">1814                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1815         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1816             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1817             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1818             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1819             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1820             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1821             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1822             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1823             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1824                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1825                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1826                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1827                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1828             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1829             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1830                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1831                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1832                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1833                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1834                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1835                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1836                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1837                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1838                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1839                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1840             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1841             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1842         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843     }                                                                                                    </span>
<span  style="">1844                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1845     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1846         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1847             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1848         }                                                                                                </span>
<span  style="">1849                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1850         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1851         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1852         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1853         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1854     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1855 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="2310015860452416546" onmouseenter="enter('2310015860452416546');" onmouseout="out('2310015860452416546');" style="">  30 import android.view.ViewStub;                                                                            </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  31 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  32 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  33 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  34 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  35 import android.webkit.WebViewClient;                                                                     </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  36 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  37 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  38 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40 import android.widget.Toast;                                                                             </span>
<span  style="">  41                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  42 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  43 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  44 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  45 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50 import androidx.preference.PreferenceManager;                                                            </span>
<span  style="">  51                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  55 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  56 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  57 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  58 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  59 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  60 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  61 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  62 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  63 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  64 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  65 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  66 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  67 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  68 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  69 import com.automattic.simplenote.utils.TagUtils;                                                         </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  70 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  71 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  72 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  73 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  74 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  75 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  76 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  77 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  78 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  79 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  80 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  81 import com.simperium.client.Query;                                                                       </span>
<span  style="">  82                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  83 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  84 import java.util.Calendar;                                                                               </span>
<span  style="">  85                                                                                                          </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  88 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  89 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  90 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  91 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  92 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  93 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  94 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  95 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  96                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  97 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  98         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  99         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style=""> 100         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 101         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 102         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style=""> 103                                                                                                          </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 104     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 105     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 106     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 107     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 108     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 109     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span  style=""> 110                                                                                                          </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 111     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 112     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 113     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 114     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 115     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 116     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 117     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 119         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 120             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 122     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 123     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 124     private View mRootView;                                                                              </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 125     private View mTagPadding;                                                                            </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 126     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 127     private ChipGroup mTagChips;                                                                         </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 128     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 129     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 130     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 131     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 132     private LinearLayout mPlaceholderView;                                                               </span>
<span class="6468836442965828651" onmouseenter="enter('6468836442965828651');" onmouseout="out('6468836442965828651');" style=""> 133     private CursorAdapter mLinkAutocompleteAdapter;                                                      </span>
<span class="-1742340169214255459" onmouseenter="enter('-1742340169214255459');" onmouseout="out('-1742340169214255459');" style=""> 134     private CursorAdapter mTagAutocompleteAdapter;                                                       </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 135     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 136     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 137     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 138     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 139     private ActionMode mActionMode;                                                                      </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 140     private MenuItem mChecklistMenuItem;                                                                 </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 141     private MenuItem mCopyMenuItem;                                                                      </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 142     private MenuItem mInformationMenuItem;                                                               </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 143     private MenuItem mShareMenuItem;                                                                     </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 144     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 145     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 146     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 147     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 148     private Drawable mBrowserIcon;                                                                       </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 149     private Drawable mCallIcon;                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 150     private Drawable mCopyIcon;                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 151     private Drawable mEmailIcon;                                                                         </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 152     private Drawable mLinkIcon;                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 153     private Drawable mMapIcon;                                                                           </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 154     private Drawable mShareIcon;                                                                         </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 155     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 156     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 157     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 158     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="6183483689682550304" onmouseenter="enter('6183483689682550304');" onmouseout="out('6183483689682550304');" style=""> 159     private LinearLayout mError;                                                                         </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 160     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 161     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 162     private WebView mMarkdown;                                                                           </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 163     private boolean mIsPaused;                                                                           </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 164     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 165                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 166     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 167     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 168         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 169         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 170             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 171                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span  style=""> 173                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 174             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 175                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 176                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 177                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 177                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 178                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 179                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 182             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 184     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 185     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 186     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 187     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 188     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 189         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 191         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 192             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 193             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 194                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 195             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 196                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 197                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 198                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 199                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 200                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 201                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 202                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 203                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204             }                                                                                            </span>
<span  style=""> 205                                                                                                          </span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style=""><abbr title=" 206             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 206             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireConteðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 207             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208         }                                                                                                </span>
<span  style=""> 209                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 210         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 211         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 212         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 213         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 214             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215         }                                                                                                </span>
<span  style=""> 216                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 217         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 218         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 219         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 220             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 221                 case R.id.menu_view_link:                                                                </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 222                     if (mLinkText != null) {                                                             </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 223                         if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                              </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 224                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 224                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LIðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 225                         } else {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 226                             try {                                                                        </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 227                                 BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 228                             } catch (Exception e) {                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 229                                 e.printStackTrace();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231                         }                                                                                </span>
<span  style=""> 232                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 233                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234                     }                                                                                    </span>
<span  style=""> 235                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 236                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 237                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 238                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 239                         if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 240                             Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 241                         } else {                                                                         </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""><abbr title=" 242                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();"> 242                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243                         }                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 245                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246                     }                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 248                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 249                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 250                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 251                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 252                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253                     }                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 255                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 256                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 257                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span  style=""> 260                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 261         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 262         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 263         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 264             if (mActionMode != null) {                                                                   </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 265                 mActionMode.setSubtitle(&quot;&quot;);                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 266                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267             }                                                                                            </span>
<span  style=""> 268                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 269             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 270                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 271                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 272                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 273                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 273                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 275                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 276                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 277             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 279     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 280     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 281     private boolean mHideActionOnSuccess;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 282     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 283     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 284         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 285         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 286             if (!isAdded()) return;                                                                      </span>
<span  style=""> 287                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 288             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 289                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 290                 public void run() {                                                                      </span>
<span  style=""> 291                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 292                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 293                     mNote.save();                                                                        </span>
<span  style=""> 294                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 295                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 297             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 299     };                                                                                                   </span>
<span  style=""> 300                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 301     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 302      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 303      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 304      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 305     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306     }                                                                                                    </span>
<span  style=""> 307                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 308     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 309     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 310         super.onCreate(savedInstanceState);                                                              </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 311         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 312         AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                         </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 313         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 314         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 315         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 316                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 317         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 318         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 319                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 320         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 320         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 321         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 321         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.aðŸ”µ</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 322         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 322         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 323         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 323         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.ðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 324         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 324         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,ðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 325         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 325         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 326         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 326         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.aðŸ”µ</abbr></span>
<span  style=""> 327                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 328         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 329         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 330         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 331                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 332         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 333                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 333                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-4933477915356212091" onmouseenter="enter('-4933477915356212091');" onmouseout="out('-4933477915356212091');" style=""> 334         mTagAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 335             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 336             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 337                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 338                 if (activity == null) return null;                                                       </span>
<span class="3059784599882537005" onmouseenter="enter('3059784599882537005');" onmouseout="out('3059784599882537005');" style=""> 339                 return activity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340             }                                                                                            </span>
<span  style=""> 341                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 342             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 343             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 344                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 345                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346             }                                                                                            </span>
<span  style=""> 347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 348             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 349             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 350                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351             }                                                                                            </span>
<span  style=""> 352                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 354             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 355                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 356                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 357                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 358                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 359                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 360                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 361                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 362                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 363                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 364                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 365                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 365                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 366                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 368         };                                                                                               </span>
<span  style=""> 369                                                                                                          </span>
<span class="-5778622668812359275" onmouseenter="enter('-5778622668812359275');" onmouseout="out('-5778622668812359275');" style=""> 370         mLinkAutocompleteAdapter = new CursorAdapter(getContext(), null, 0x0) {                          </span>
<span class="4420913156406314587" onmouseenter="enter('4420913156406314587');" onmouseout="out('4420913156406314587');" style=""> 371             private Activity mActivity = requireActivity();                                              </span>
<span  style=""> 372                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 373             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 374             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="9137674912136175390" onmouseenter="enter('9137674912136175390');" onmouseout="out('9137674912136175390');" style=""> 375                 ((TextView) view).setText(convertToString(cursor));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376             }                                                                                            </span>
<span  style=""> 377                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 379             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-6315376739504212293" onmouseenter="enter('-6315376739504212293');" onmouseout="out('-6315376739504212293');" style=""> 380                 return cursor.getString(cursor.getColumnIndex(Note.TITLE_INDEX_NAME));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381             }                                                                                            </span>
<span  style=""> 382                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 383             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 384             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="9209398663457461143" onmouseenter="enter('9209398663457461143');" onmouseout="out('9209398663457461143');" style=""> 385                 return mActivity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386             }                                                                                            </span>
<span  style=""> 387                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 388             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 389             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-2694701201332649685" onmouseenter="enter('-2694701201332649685');" onmouseout="out('-2694701201332649685');" style=""> 390                 if (filter == null) {                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 391                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                 }                                                                                        </span>
<span  style=""> 393                                                                                                          </span>
<span class="-5476224035795218003" onmouseenter="enter('-5476224035795218003');" onmouseout="out('-5476224035795218003');" style=""> 394                 Simplenote application = (Simplenote) mActivity.getApplication();                        </span>
<span class="5284816788544144261" onmouseenter="enter('5284816788544144261');" onmouseout="out('5284816788544144261');" style=""> 395                 Query&lt;Note&gt; query = application.getNotesBucket().query();                                </span>
<span class="-5887342273099451545" onmouseenter="enter('-5887342273099451545');" onmouseout="out('-5887342273099451545');" style=""> 396                 query.include(Note.PINNED_INDEX_NAME);                                                   </span>
<span class="8903361953614418852" onmouseenter="enter('8903361953614418852');" onmouseout="out('8903361953614418852');" style=""> 397                 query.include(Note.TITLE_INDEX_NAME);                                                    </span>
<span class="3677160110009294333" onmouseenter="enter('3677160110009294333');" onmouseout="out('3677160110009294333');" style=""><abbr title=" 398                 query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filter));"> 398                 query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filðŸ”µ</abbr></span>
<span class="2636422943772736086" onmouseenter="enter('2636422943772736086');" onmouseout="out('2636422943772736086');" style=""> 399                 PrefUtils.sortNoteQuery(query, requireContext(), true);                                  </span>
<span class="2003026878785809505" onmouseenter="enter('2003026878785809505');" onmouseout="out('2003026878785809505');" style=""> 400                 Cursor cursor = query.execute();                                                         </span>
<span  style=""> 401                                                                                                          </span>
<span class="-3406397928756442195" onmouseenter="enter('-3406397928756442195');" onmouseout="out('-3406397928756442195');" style=""><abbr title=" 402                 final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * 48);"> 402                 final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * ðŸ”µ</abbr></span>
<span class="2053250669508349335" onmouseenter="enter('2053250669508349335');" onmouseout="out('2053250669508349335');" style=""> 403                 final int heightDisplay = DisplayUtils.getDisplayPixelSize(requireContext()).y;          </span>
<span class="-5884104961680708619" onmouseenter="enter('-5884104961680708619');" onmouseout="out('-5884104961680708619');" style=""> 404                 final int heightDropdown = Math.min(heightDisplay / 4, heightAutocomplete);              </span>
<span  style=""> 405                                                                                                          </span>
<span class="6747443584027813293" onmouseenter="enter('6747443584027813293');" onmouseout="out('6747443584027813293');" style=""> 406                 mActivity.runOnUiThread(                                                                 </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 407                     new Runnable() {                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 408                         @Override                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 409                         public void run() {                                                              </span>
<span class="-6383818153518880076" onmouseenter="enter('-6383818153518880076');" onmouseout="out('-6383818153518880076');" style=""> 410                             mContentEditText.setDropDownHeight(heightDropdown);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412                     }                                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 413                 );                                                                                       </span>
<span class="-6729379386015983029" onmouseenter="enter('-6729379386015983029');" onmouseout="out('-6729379386015983029');" style=""> 414                 return cursor;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 416         };                                                                                               </span>
<span  style=""> 417                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 418         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 422     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 422     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 423         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 424         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 425         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 426         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 427         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 428         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 429         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 429         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()))ðŸ”µ</abbr></span>
<span class="-6866322642818059816" onmouseenter="enter('-6866322642818059816');" onmouseout="out('-6866322642818059816');" style=""> 430         mContentEditText.setDropDownBackgroundResource(R.drawable.bg_list_popup);                        </span>
<span class="8857723377205297003" onmouseenter="enter('8857723377205297003');" onmouseout="out('8857723377205297003');" style=""> 431         mContentEditText.setAdapter(mLinkAutocompleteAdapter);                                           </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 432         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 433         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 434         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="-5626031287620429456" onmouseenter="enter('-5626031287620429456');" onmouseout="out('-5626031287620429456');" style=""> 435         mTagInput.setAdapter(mTagAutocompleteAdapter);                                                   </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 436         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 437         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 438         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 439         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 440         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span  style=""> 441                                                                                                          </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 442         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 443             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 444             requireActivity().invalidateOptionsMenu();                                                   </span>
<span  style=""> 445                                                                                                          </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style=""> 446             if (BrowserUtils.isWebViewInstalled(requireContext())) {                                     </span>
<span class="-3967743337838243188" onmouseenter="enter('-3967743337838243188');" onmouseout="out('-3967743337838243188');" style=""> 447                 ((ViewStub) mRootView.findViewById(R.id.stub_webview)).inflate();                        </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 448             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style=""> 449             mMarkdown.setWebViewClient(                                                                  </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style=""> 450                 new WebViewClient() {                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451                     @Override                                                                            </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style=""> 452                     public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){   </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 453                         String url = request.getUrl().toString();                                        </span>
<span  style=""> 454                                                                                                          </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style=""> 455                         if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                   </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 456                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 456                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 457                         } else {                                                                         </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 458                             BrowserUtils.launchBrowserOrShowError(requireContext(), url);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                         }                                                                                </span>
<span  style=""> 460                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 461                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463                 }                                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 464             );                                                                                           </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 465 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 466             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 466             mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()ðŸ”µ</abbr></span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 467 ||||||| BASE                                                                                             </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 468             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 469                 ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 470                 : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 471         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 472                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 473         Bundle arguments = getArguments();                                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 474                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 475         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 476             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 477             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 478                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 479             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 480                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 481             }                                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 482                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 483             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 484                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 485             if (mIsFromWidget) {                                                                         </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 486 =======                                                                                                  </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 487                 mCss = ThemeUtils.isLightTheme(requireContext())                                         </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 488                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 489                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 490             } else {                                                                                     </span>
<span class="4441162317505613606" onmouseenter="enter('4441162317505613606');" onmouseout="out('4441162317505613606');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 491                 ((ViewStub) mRootView.findViewById(R.id.stub_error)).inflate();                          </span>
<span class="-4966458499899083722" onmouseenter="enter('-4966458499899083722');" onmouseout="out('-4966458499899083722');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 492                 mError = mRootView.findViewById(R.id.error);                                             </span>
<span class="-6521037657957389482" onmouseenter="enter('-6521037657957389482');" onmouseout="out('-6521037657957389482');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 493                 mRootView.findViewById(R.id.button).setOnClickListener(                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 494                     new View.OnClickListener() {                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 495                         @Override                                                                        </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 496                         public void onClick(View view) {                                                 </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 497                             BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);"> 497                             BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 498                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 499                     }                                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 500                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 501             }                                                                                            </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 502 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503         }                                                                                                </span>
<span  style=""> 504                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 505         Bundle arguments = getArguments();                                                               </span>
<span  style=""> 506                                                                                                          </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 507         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 508             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 509             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span  style=""> 510                                                                                                          </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 511             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 512                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513             }                                                                                            </span>
<span  style=""> 514                                                                                                          </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 515             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span  style=""> 516                                                                                                          </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 517             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 518                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 519             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 520                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521             }                                                                                            </span>
<span  style=""> 522                                                                                                          </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 523             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 524         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {   </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 525             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 526             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span  style=""> 527                                                                                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 528             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 529                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531         }                                                                                                </span>
<span  style=""> 532                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 533         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 534         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 535             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 536             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 537                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 538                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 539                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 540                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541                     }                                                                                    </span>
<span  style=""> 542                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 543                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 544                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 545                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 546                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 547                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 548                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 549                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550                     }                                                                                    </span>
<span  style=""> 551                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 552                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 553                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 554                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 555                     ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                           </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 556                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 559         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 560         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 561         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562     }                                                                                                    </span>
<span  style=""> 563                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 564     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 565         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 566             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 567             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 568             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 569             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571     }                                                                                                    </span>
<span  style=""> 572                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 573     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 574     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 575         super.onResume();                                                                                </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style=""> 576         checkWebView();                                                                                  </span>
<span class="-9085345560964209172" onmouseenter="enter('-9085345560964209172');" onmouseout="out('-9085345560964209172');" style=""> 577         mIsPaused = false;                                                                               </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 578         mNotesBucket.addListener(this);                                                                  </span>
<span class="3922278034329768441" onmouseenter="enter('3922278034329768441');" onmouseout="out('3922278034329768441');" style=""> 579         AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteEditorFragment)&quot;);                        </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 580         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span  style=""> 581                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 582         if (mContentEditText != null) {                                                                  </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 583             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 583             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContextðŸ”µ</abbr></span>
<span  style=""> 584                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 585             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 586                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589     }                                                                                                    </span>
<span  style=""> 590                                                                                                          </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style=""> 591     private void checkWebView() {                                                                        </span>
<span class="8284401614074834784" onmouseenter="enter('8284401614074834784');" onmouseout="out('8284401614074834784');" style=""> 592         // When a WebView is installed and mMarkdown is null on a large landscape device, a WebView      </span>
<span class="6699306601959225492" onmouseenter="enter('6699306601959225492');" onmouseout="out('6699306601959225492');" style=""> 593         // was not installed when the fragment was created.  So, recreate the activity to refresh        </span>
<span class="-5414175386362694134" onmouseenter="enter('-5414175386362694134');" onmouseout="out('-5414175386362694134');" style=""> 594         // the editor view.                                                                              </span>
<span class="7373089442478701267" onmouseenter="enter('7373089442478701267');" onmouseout="out('7373089442478701267');" style=""> 595         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null &amp;&amp;                    </span>
<span class="-7028697565563617109" onmouseenter="enter('-7028697565563617109');" onmouseout="out('-7028697565563617109');" style=""> 596             DisplayUtils.isLargeScreenLandscape(requireContext())) {                                     </span>
<span class="6438271402930862354" onmouseenter="enter('6438271402930862354');" onmouseout="out('6438271402930862354');" style=""> 597             requireActivity().recreate();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599     }                                                                                                    </span>
<span  style=""> 600                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 601     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 602         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 603             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 604             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 605                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 606                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607                 }                                                                                        </span>
<span  style=""> 608                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 609                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 609                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 610                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 611                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 612                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 614         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615     }                                                                                                    </span>
<span  style=""> 616                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 617     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 618     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 619         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 620         mIsPaused = true;                                                                                </span>
<span  style=""> 621                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 622         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 623         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 624                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 625         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 626                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 627         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 628             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 629             mAutoSaveHandler.post(mAutoSaveRunnable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630         }                                                                                                </span>
<span  style=""> 631                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 632         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 633             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634         }                                                                                                </span>
<span  style=""> 635                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 636         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 637             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 638         }                                                                                                </span>
<span  style=""> 639                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 640         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 641         saveNote();                                                                                      </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 642         AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643     }                                                                                                    </span>
<span  style=""> 644                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 645     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 646     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 647         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 648         mNotesBucket.removeListener(this);                                                               </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style=""> 649         AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                      </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 650         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 651     }                                                                                                    </span>
<span  style=""> 652                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 653     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 654     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 655         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 656                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 657         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 658             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660     }                                                                                                    </span>
<span  style=""> 661                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 662     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 663     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 664         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 665                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 666         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 666         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 667             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668         }                                                                                                </span>
<span  style=""> 669                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 670         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 671         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 672     }                                                                                                    </span>
<span  style=""> 673                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 674     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 675     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 676         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 677             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 678                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 679                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 680             case R.id.menu_copy:                                                                         </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 681                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 682                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 683                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 684                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685                 }                                                                                        </span>
<span  style=""> 686                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 687                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 688             case R.id.menu_copy_internal:                                                                </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 689                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 689                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitleðŸ”µ</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 690                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 691                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 692                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693                 }                                                                                        </span>
<span  style=""> 694                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 695                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 696             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 697                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 698                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 699             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 700                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 701                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 702             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 703                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 704                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 705             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 706                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 707                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 708                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 709             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 710                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 711                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 712                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 713                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714                 }                                                                                        </span>
<span  style=""> 715                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 716                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 717             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 718                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 719                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 720             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 721                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 722                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723                 }                                                                                        </span>
<span  style=""> 724                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 725                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 726                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 727             case android.R.id.home:                                                                      </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 728                 AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);            </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 729                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 730                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 731                 }                                                                                        </span>
<span  style=""> 732                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 733                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 734                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 735             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 736                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738     }                                                                                                    </span>
<span  style=""> 739                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 740     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 741     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 742         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 743             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 744             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 745             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 746             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 747             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 748             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 749             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 750             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 751             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 752                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 753             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 754             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 755             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 756                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 757             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 758             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 759                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 760                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 761                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 762                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 763                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 764                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 765                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 766                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 767             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 768                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 769                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 770                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 771                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 772                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 773                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 774                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 775                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776             }                                                                                            </span>
<span  style=""> 777                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 778             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 779                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 780             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 781                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 783         }                                                                                                </span>
<span  style=""> 784                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 785         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 786         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787     }                                                                                                    </span>
<span  style=""> 788                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 789     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 790         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 791                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 792         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 793             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 794         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 795             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 796             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797         }                                                                                                </span>
<span  style=""> 798                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 799         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 800             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 801             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 802             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 803         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804     }                                                                                                    </span>
<span  style=""> 805                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 806     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 807     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 808         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 809         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 810             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 811             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813     }                                                                                                    </span>
<span  style=""> 814                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 815     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 816         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 817         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818     }                                                                                                    </span>
<span  style=""> 819                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 820     protected void clearMarkdown() {                                                                     </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 821         if (mMarkdown != null) {                                                                         </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 822         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824     }                                                                                                    </span>
<span  style=""> 825                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 826     protected void hideMarkdown() {                                                                      </span>
<span class="5972103689141576990" onmouseenter="enter('5972103689141576990');" onmouseout="out('5972103689141576990');" style=""> 827         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown != null) {                    </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 828         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 829         } else {                                                                                         </span>
<span class="-7415720252441553161" onmouseenter="enter('-7415720252441553161');" onmouseout="out('-7415720252441553161');" style=""> 830             mError.setVisibility(View.INVISIBLE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832     }                                                                                                    </span>
<span  style=""> 833                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 834     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 835         loadMarkdownData();                                                                              </span>
<span  style=""> 836                                                                                                          </span>
<span class="5972103689141576990" onmouseenter="enter('5972103689141576990');" onmouseout="out('5972103689141576990');" style=""> 837         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown != null) {                    </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 838         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 839         } else {                                                                                         </span>
<span class="8471850600291055773" onmouseenter="enter('8471850600291055773');" onmouseout="out('8471850600291055773');" style=""> 840             mError.setVisibility(View.VISIBLE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 841         }                                                                                                </span>
<span  style=""> 842                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 843         new Handler().postDelayed(                                                                       </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 844             new Runnable() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 845                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 846                 public void run() {                                                                      </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 847                     requireActivity().invalidateOptionsMenu();                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 848                 }                                                                                        </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 849             },                                                                                           </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 850             getResources().getInteger(R.integer.time_animation)                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 851         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852     }                                                                                                    </span>
<span  style=""> 853                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 854     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 855         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 856             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 857             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 858             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 859                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 860                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 861                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 862             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 864     }                                                                                                    </span>
<span  style=""> 865                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 866     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 867         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 868             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 869             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 870             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 871         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 872             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 873         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 874     }                                                                                                    </span>
<span  style=""> 875                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 876     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 877         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 878                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 879         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 880             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 881             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 882             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 883         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 884     }                                                                                                    </span>
<span  style=""> 885                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 886     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 887         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 888         showMarkdownActionOrTabs();                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 889         saveNote();                                                                                      </span>
<span  style=""> 890                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 891         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 892         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 893         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 894         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 895         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896     }                                                                                                    </span>
<span  style=""> 897                                                                                                          </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 898     private void setMarkdownEnabled(boolean enabled) {                                                   </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 899         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 900                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 901         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 902             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 904     }                                                                                                    </span>
<span  style=""> 905                                                                                                          </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 906     private void showMarkdownActionOrTabs() {                                                            </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 907         Activity activity = getActivity();                                                               </span>
<span  style=""> 908                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 909         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 910             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 911                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 912             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 913                 editorActivity.showTabs();                                                               </span>
<span  style=""> 914                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 915                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 916                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 917                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 918                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 920             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 921                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 922             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 923         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 924             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 925             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 926         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 927     }                                                                                                    </span>
<span  style=""> 928                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 929     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 930         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 931                 mCss,                                                                                    </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 932                 mContentEditText.getPreviewTextContent()                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 933         );                                                                                               </span>
<span  style=""> 934                                                                                                          </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 935         if (mMarkdown != null) {                                                                         </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 936         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 937     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 938     }                                                                                                    </span>
<span  style=""> 939                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 940     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 941         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 942             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943         }                                                                                                </span>
<span  style=""> 944                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 945         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 946         mMatchOffsets = matchOffsets;                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 947         saveNote();                                                                                      </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 948         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949     }                                                                                                    </span>
<span  style=""> 950                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 951     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 952         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 953         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 954         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955     }                                                                                                    </span>
<span  style=""> 956                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 957     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 958         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 959             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 960             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 960             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 961             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 962                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 963             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 964                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 965                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 966                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 967                                                                                                          </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 968                 // Show/Hide action/tabs based on markdown flag.                                         </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 969                 showMarkdownActionOrTabs();                                                              </span>
<span  style=""> 970                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 971                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 972                 mNote.save();                                                                            </span>
<span  style=""> 973                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 974                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 975                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 976                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 977                 }                                                                                        </span>
<span  style=""> 978                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 979                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 980                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 981                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 982                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 983                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 984                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 985                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 987             }                                                                                            </span>
<span  style=""> 988                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 989             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 990             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 991             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 992         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 993     }                                                                                                    </span>
<span  style=""> 994                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 995     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 996         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 997         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998     }                                                                                                    </span>
<span  style=""> 999                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style="">1000     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style="">1001         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style="">1002         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style="">1003         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style="">1004         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style="">1005         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style="">1006         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style="">1007         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style="">1008         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style="">1009                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style="">1010         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style="">1011                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style="">1012         int newCursorLocation = cursorLocation;                                                          </span>
<span  style="">1013                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style="">1014         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style="">1015                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style="">1016         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style="">1017         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style="">1018             return newText.length();                                                                     </span>
<span  style="">1019                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style="">1020         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style="">1021         boolean afterCursorMatches = false;                                                              </span>
<span  style="">1022                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1023         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title="1024             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));">1024             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title="1025             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));">1025             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1026         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1027             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028         }                                                                                                </span>
<span  style="">1029                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style="">1030         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style="">1031         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style="">1032             newCursorLocation += deltaLength;                                                            </span>
<span  style="">1033                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style="">1034         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style="">1035         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1036     }                                                                                                    </span>
<span  style="">1037                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1038     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style="">1039     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style="">1040         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1041             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042         }                                                                                                </span>
<span  style="">1043                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style="">1044         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1045             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style="">1046                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1047                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style="">1048                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1049             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1050         }                                                                                                </span>
<span  style="">1051                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style="">1052         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1053         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1054         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1055         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1056     }                                                                                                    </span>
<span  style="">1057                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1058     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style="">1059     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style="">1060         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061     }                                                                                                    </span>
<span  style="">1062                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1063     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style="">1064     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="">1065         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="">1066         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style="">1067         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068     }                                                                                                    </span>
<span  style="">1069                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1070     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style="">1071     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style="">1072         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="">1073         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style="">1074             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style="">1075             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076         }                                                                                                </span>
<span  style="">1077                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style="">1078         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1079         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="">1080             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style="">1081             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1082         }                                                                                                </span>
<span  style="">1083                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1084         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1085             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1086         }                                                                                                </span>
<span  style="">1087                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1088         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1089         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1090         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1091         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1092     }                                                                                                    </span>
<span  style="">1093                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1094     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1095      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1096      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1097      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1098      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1099      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1100      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1101     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title="1102         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {">1102         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.classðŸ”µ</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1103             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1104                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106         }                                                                                                </span>
<span  style="">1107                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1108         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style="">1109                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1110         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1111             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112         }                                                                                                </span>
<span  style="">1113                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1114         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title="1115         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1115         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVðŸ”µ</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title="1116         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1116         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1117     }                                                                                                    </span>
<span  style="">1118                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1119     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1120         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1121         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1122         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1123         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124     }                                                                                                    </span>
<span  style="">1125                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1126     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1127         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1128             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1129         }                                                                                                </span>
<span  style="">1130                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1131         AppLog.add(                                                                                      </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1132             Type.ACTION,                                                                                 </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1133             &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                              </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1134                 &quot; / Title: &quot; + mNote.getTitle() +                                                        </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1135                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                   </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1136                 &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1137         );                                                                                               </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1138         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139     }                                                                                                    </span>
<span  style="">1140                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1141     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1142         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1143             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1144         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1145             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147     }                                                                                                    </span>
<span  style="">1148                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1149     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1150         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1151             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1152             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153         }                                                                                                </span>
<span  style="">1154                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1155         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1156             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158     }                                                                                                    </span>
<span  style="">1159                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1160     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1161     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1162         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1163             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1164                                                                                                          </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1165             if (mTagInput.getText().toString().trim().length() &gt; 0                                       </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1166                 &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                       </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1167                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1168             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1169                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172     }                                                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1174     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1175         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176     }                                                                                                    </span>
<span  style="">1177                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1178     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1179         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180     }                                                                                                    </span>
<span  style="">1181                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1182     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1183         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1184             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1185         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1186             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1188     }                                                                                                    </span>
<span  style="">1189                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1190     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1191         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1192                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1193         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1194             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195         }                                                                                                </span>
<span  style="">1196                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1197         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1198     }                                                                                                    </span>
<span  style="">1199                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1200     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1201      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1202      */                                                                                                  </span>
<span  style="">1203                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1204     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1205     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1206         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1207         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1208             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1212     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1213     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1214         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1215         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1216             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1218     }                                                                                                    </span>
<span  style="">1219                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1220     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1221     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1222         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1223             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1224         }                                                                                                </span>
<span  style="">1225                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1226         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1227             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228         }                                                                                                </span>
<span  style="">1229                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1230         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1231         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1232         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1233             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1235         ft.addToBackStack(null);                                                                         </span>
<span  style="">1236                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1237         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1238         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1239         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1240         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241     }                                                                                                    </span>
<span  style="">1242                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1243     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1244     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1245         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246     }                                                                                                    </span>
<span  style="">1247                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1248     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1249     public void onShareDismissed() {                                                                     </span>
<span  style="">1250                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1251     }                                                                                                    </span>
<span  style="">1252                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1253     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1254      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1255      */                                                                                                  </span>
<span  style="">1256                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1257     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1258     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1259         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1260         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1261             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263     }                                                                                                    </span>
<span  style="">1264                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1265     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1266     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1267         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1268             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1269         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1270         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271     }                                                                                                    </span>
<span  style="">1272                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1273     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1274     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1275         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1276             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1277         }                                                                                                </span>
<span  style="">1278                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1279         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1280             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282     }                                                                                                    </span>
<span  style="">1283                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1284     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1285     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1286         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287     }                                                                                                    </span>
<span  style="">1288                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1289     private void saveNote() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1290         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1291             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1292                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1292                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1293                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1294             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1295                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1296                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297             }                                                                                            </span>
<span  style="">1298                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1299             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1300             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1301                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1302             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1302             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1303                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1304                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1305                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1306                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1307                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1308                 mNote.save();                                                                            </span>
<span  style="">1309                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1310                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1311                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1312                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1313                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1314                 );                                                                                       </span>
<span  style="">1315                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1316                 AppLog.add(                                                                              </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1317                     Type.SYNC,                                                                           </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1318                     &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +         </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1319                         &quot; / Title: &quot; + mNote.getTitle() +                                                </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1320                         &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                      </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1321                         &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1322                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1324         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1325             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1327     }                                                                                                    </span>
<span  style="">1328                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1329     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1330     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1331     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1332     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1333         mCurrentCursorPosition = selEnd;                                                                 </span>
<span  style="">1334                                                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1335         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1336             Editable noteContent = mContentEditText.getText();                                           </span>
<span  style="">1337                                                                                                          </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1338             if (noteContent == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1339                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1340             }                                                                                            </span>
<span  style="">1341                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1342             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span  style="">1343                                                                                                          </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1344             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1345                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1346                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1347                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1347                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span  style="">1348                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1349                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1350                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1351                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1352                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1353                 }                                                                                        </span>
<span  style="">1354                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1355                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1356                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1357                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1357                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span  style="">1358                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1359                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1360                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361                     }                                                                                    </span>
<span  style="">1362                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1363                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1365             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1366                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1367                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1369         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1370             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1371             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1373     }                                                                                                    </span>
<span  style="">1374                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1375     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1376         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1377         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1378                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1379         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1380             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1381                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1382                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1383             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1384                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1385                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1386             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1387                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1388                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1389             } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                    </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1390                 mViewLinkMenuItem.setIcon(mLinkIcon);                                                    </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1391                 mViewLinkMenuItem.setTitle(getString(R.string.open_note));                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1392             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1393                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1394                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397     }                                                                                                    </span>
<span  style="">1398                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1399     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1400         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1401             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1402             mNote.save();                                                                                </span>
<span  style="">1403                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1404             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1405             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1406                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1407             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1408                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1409                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1410                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1411             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1413     }                                                                                                    </span>
<span  style="">1414                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1415     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1416         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1417             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418         }                                                                                                </span>
<span  style="">1419                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1420         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1421         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1422                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1423         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1424             if (mNote.isPublished()) {                                                                   </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1425                 if (mHideActionOnSuccess) {                                                              </span>
<span class="7497833686297233990" onmouseenter="enter('7497833686297233990');" onmouseout="out('7497833686297233990');" style="">1426                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).show();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1427                 } else {                                                                                 </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1428                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1429                         .setAction(                                                                      </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1430                             R.string.undo,                                                               </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1431                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1432                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1433                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1434                                     mHideActionOnSuccess = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1435                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437                             }                                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1438                         )                                                                                </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1439                         .show();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1440                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1441             } else {                                                                                     </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1442                 if (mHideActionOnSuccess) {                                                              </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1443                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1444                 } else {                                                                                 </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1445                     Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)        </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1446                         .setAction(                                                                      </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1447                             R.string.undo,                                                               </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1448                             new View.OnClickListener() {                                                 </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1449                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1450                                 public void onClick(View v) {                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1451                                     mHideActionOnSuccess = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1452                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453                                 }                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1454                             }                                                                            </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1455                         )                                                                                </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1456                         .show();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1457                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1458             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1459         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1460             if (mNote.isPublished()) {                                                                   </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1461                 Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1462                     .setAction(                                                                          </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1463                         R.string.retry,                                                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1464                         new View.OnClickListener() {                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1465                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1466                             public void onClick(View v) {                                                </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1467                                 mHideActionOnSuccess = true;                                             </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1468                                 unpublishNote();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1469                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470                         }                                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1471                     )                                                                                    </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1472                     .show();                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1473             } else {                                                                                     </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1474                 Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1475                     .setAction(                                                                          </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1476                         R.string.retry,                                                                  </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1477                         new View.OnClickListener() {                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1478                             @Override                                                                    </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1479                             public void onClick(View v) {                                                </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1480                                 mHideActionOnSuccess = true;                                             </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1481                                 publishNote();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1482                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1483                         }                                                                                </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1484                     )                                                                                    </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1485                     .show();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487         }                                                                                                </span>
<span  style="">1488                                                                                                          </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1489         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1490         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1491     }                                                                                                    </span>
<span  style="">1492                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1493     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1494         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1495             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1496             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497         }                                                                                                </span>
<span  style="">1498                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1499         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1500             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1500             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1501             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1502         }                                                                                                </span>
<span  style="">1503                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1504         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505     }                                                                                                    </span>
<span  style="">1506                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1507     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1508         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1509             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1510             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1511         }                                                                                                </span>
<span  style="">1512                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1513         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1514             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1514             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1515             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516         }                                                                                                </span>
<span  style="">1517                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1518         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519     }                                                                                                    </span>
<span  style="">1520                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1521     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1522         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1523             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1524                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1525                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1526                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1527         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528     }                                                                                                    </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1529     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1530         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1531             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1532         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533     }                                                                                                    </span>
<span  style="">1534                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1535     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1536         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1537             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1539     }                                                                                                    </span>
<span  style="">1540                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1541     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1542         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1543             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1544             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1544             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1545             saveNote();                                                                                  </span>
<span  style="">1546                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1547             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1548         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1549     }                                                                                                    </span>
<span  style="">1550                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1551     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1552     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553     }                                                                                                    </span>
<span  style="">1554                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1555     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1556     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1556     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1557         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1558             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1559                 try {                                                                                    </span>
<span class="4372796228007650956" onmouseenter="enter('4372796228007650956');" onmouseout="out('4372796228007650956');" style="">1560                     final Note updatedNote = noteBucket.get(key);                                        </span>
<span  style="">1561                                                                                                          </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1562                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1563                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1564                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1565                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1566                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1567                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568                                 }                                                                        </span>
<span  style="">1569                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1570                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1571                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1572                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1573                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1575                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1576                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1577                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1578             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1579         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1580     }                                                                                                    </span>
<span  style="">1581                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1582     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1583     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1584         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1585             mNotesBucket.removeListener(this);                                                           </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style="">1586             AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1587         }                                                                                                </span>
<span  style="">1588                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1589         AppLog.add(                                                                                      </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1590             Type.SYNC,                                                                                   </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1591             &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                 </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1592                 &quot; / Title: &quot; + note.getTitle() +                                                         </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1593                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                    </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1594                 &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1595         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1596     }                                                                                                    </span>
<span  style="">1597                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1598     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1599     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1600         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1601         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1602             return;                                                                                      </span>
<span  style="">1603                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1604         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1605         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1606             return;                                                                                      </span>
<span  style="">1607                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1608         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1609     }                                                                                                    </span>
<span  style="">1610                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1611     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1612         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1613                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1614         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1615             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1616         }                                                                                                </span>
<span  style="">1617                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1618         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1619         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1620             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1621                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1622             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1623                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1624                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1625             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1626         }                                                                                                </span>
<span  style="">1627                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1628         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1629         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1630             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1631                                                                                                          </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1632             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1633                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1634             }                                                                                            </span>
<span  style="">1635                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1636             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1637             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1638             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1639                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1640             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1641                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span  style="">1642                                                                                                          </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1643                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1644                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1645                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1646                 }                                                                                        </span>
<span  style="">1647                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1648                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1649                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1650                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1651                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1652                     AppLog.add(                                                                          </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1653                         Type.SYNC,                                                                       </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1654                         &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                         </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1655                             &quot; / Title: &quot; + fragment.mNote.getTitle() +                                   </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style=""><abbr title="1656                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +">1656                             &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent())ðŸ”µ</abbr></span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1657                             &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1658                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1660             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1661                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1662                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span  style="">1663                                                                                                          </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1664                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1665                     Note currentNote = notesCursor.getObject();                                          </span>
<span  style="">1666                                                                                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1667                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1668                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1669                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1672             }                                                                                            </span>
<span  style="">1673                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1674             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1675         }                                                                                                </span>
<span  style="">1676                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1677         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1678         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1679             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style=""><abbr title="1680             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {">1680             if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing(ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1681                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682             }                                                                                            </span>
<span  style="">1683                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1684             fragment.refreshContent(false);                                                              </span>
<span  style="">1685                                                                                                          </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1686             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1687                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1687                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1688                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1689                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1690             }                                                                                            </span>
<span  style="">1691                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1692             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1693                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1694             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1695                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1696                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1697                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1698                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1699                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1700                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1701                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1702                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1703                         }                                                                                </span>
<span  style="">1704                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1705                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1705                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivityðŸ”µ</abbr></span>
<span  style="">1706                                                                                                          </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1707                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1708                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1709                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1711                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1712             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1713                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1714                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715             }                                                                                            </span>
<span  style="">1716                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1717             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1718             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1719             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1720             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1721         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1722     }                                                                                                    </span>
<span  style="">1723                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1724     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1725         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1726                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1727         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1728             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729         }                                                                                                </span>
<span  style="">1730                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1731         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1732         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1733             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1734                                                                                                          </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1735             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1736                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1737             }                                                                                            </span>
<span  style="">1738                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1739             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1740         }                                                                                                </span>
<span  style="">1741                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1742         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1743         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1744             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span  style="">1745                                                                                                          </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1746             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1746             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishingðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1747                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1748                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1749                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1750             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1751         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752     }                                                                                                    </span>
<span  style="">1753                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1754     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1755         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1756             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1757         }                                                                                                </span>
<span  style="">1758                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1759         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1760             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1761         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1762     }                                                                                                    </span>
<span  style="">1763                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1764     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1765     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1766         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1767             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1768         }                                                                                                </span>
<span  style="">1769                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1770         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1771         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1772             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1773             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1774         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1775             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1776             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1777                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1778                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1779                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1781             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1782             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1783         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784     }                                                                                                    </span>
<span  style="">1785                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1786     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1787         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1788             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1789             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1790         };                                                                                               </span>
<span  style="">1791                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1792         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1793             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1794             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1795         };                                                                                               </span>
<span  style="">1796                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1797         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1798     }                                                                                                    </span>
<span  style="">1799                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1800     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1801         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1802         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1803         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1804         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1805         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1806         tags.setString(text.toString());                                                                 </span>
<span  style="">1807                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1808         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1809             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1810             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1811             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1812             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1813             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1814             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1815             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1816             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1817                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1818                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1819                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1820                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1821             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1822             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1823                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1824                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1825                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1826                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1827                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1828                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1829                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1830                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1831                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1832                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1833             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1834             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1835         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1836     }                                                                                                    </span>
<span  style="">1837                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1838     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1839         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1840             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1841         }                                                                                                </span>
<span  style="">1842                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1843         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1844         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1845         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1846         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1847     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1848 }                                                                                                        </span>





</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4 import android.content.Context;                                                                          </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5 import android.content.SharedPreferences;                                                                </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6 import android.content.res.ColorStateList;                                                               </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7 import android.database.Cursor;                                                                          </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8 import android.graphics.Typeface;                                                                        </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15 import android.text.Spanned;                                                                             </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16 import android.text.TextUtils.SimpleStringSplitter;                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18 import android.text.style.MetricAffectingSpan;                                                           </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20 import android.text.style.StyleSpan;                                                                     </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29 import android.view.ViewGroup;                                                                           </span>
<span class="2310015860452416546" onmouseenter="enter('2310015860452416546');" onmouseout="out('2310015860452416546');" style="">  30 import android.view.ViewStub;                                                                            </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  31 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  32 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  33 import android.webkit.WebResourceRequest;                                                                </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  34 import android.webkit.WebView;                                                                           </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  35 import android.webkit.WebViewClient;                                                                     </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  36 import android.widget.CompoundButton;                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  37 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  38 import android.widget.LinearLayout;                                                                      </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40 import android.widget.Toast;                                                                             </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  41 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  42 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  43 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  44 import androidx.core.app.ShareCompat;                                                                    </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  45 import androidx.core.view.MenuCompat;                                                                    </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  46 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  47 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  48 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  49 import androidx.preference.PreferenceManager;                                                            </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  50 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  51 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  52 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  53 import com.automattic.simplenote.utils.AppLog.Type;                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  54 import com.automattic.simplenote.utils.AppLog;                                                           </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  55 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  56 import com.automattic.simplenote.utils.BrowserUtils;                                                     </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  57 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  58 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  59 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  60 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  61 import com.automattic.simplenote.utils.NetworkUtils;                                                     </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  62 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  63 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  64 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  65 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  66 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  67 import com.automattic.simplenote.utils.TagUtils;                                                         </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  68 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  69 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  70 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  71 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  72 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  73 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  74 import com.google.android.material.chip.Chip;                                                            </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  75 import com.google.android.material.chip.ChipGroup;                                                       </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  76 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  77 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  78 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  79 import com.simperium.client.Query;                                                                       </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  80 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  81 import java.util.Calendar;                                                                               </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  82 import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                        </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  83 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;       </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  84 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;      </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  85 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;              </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  86 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;           </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  87 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;         </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  88 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  89 import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;              </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  90 import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                     </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  91 import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                  </span>
<span  style="">  92                                                                                                          </span>
<span  style="">  93                                                                                                          </span>
<span class="-7776761414948279806" onmouseenter="enter('-7776761414948279806');" onmouseout="out('-7776761414948279806');" style=""><abbr title="  94 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAddedListener , View.OnFocusChangeListener , SimplenoteEditText.OnSelectionChangedListener , ShareBottomSheetDialog.ShareSheetListener , HistoryBottomSheetDialog.HistorySheetListener , SimplenoteEditText.OnCheckboxToggledListener {">  94 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAdðŸ”µ</abbr></span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style="">  95     public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                    </span>
<span  style="">  96                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  97     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  98                                                                                                          </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  99     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span  style=""> 100                                                                                                          </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 101     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span  style=""> 102                                                                                                          </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 103     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span  style=""> 104                                                                                                          </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 105     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span  style=""> 106                                                                                                          </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 107     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span  style=""> 108                                                                                                          </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 109     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style=""> 110                                                                                                          </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 111     private static final int MAX_REVISIONS = 30;                                                         </span>
<span  style=""> 112                                                                                                          </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 113     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 115     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span  style=""> 116                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 117     private Note mNote;                                                                                  </span>
<span  style=""> 118                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 119     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 120         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 121         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 122             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 124     };                                                                                                   </span>
<span  style=""> 125                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 126     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style=""> 127                                                                                                          </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 128     private View mRootView;                                                                              </span>
<span  style=""> 129                                                                                                          </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 130     private View mTagPadding;                                                                            </span>
<span  style=""> 131                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 132     private SimplenoteEditText mContentEditText;                                                         </span>
<span  style=""> 133                                                                                                          </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 134     private ChipGroup mTagChips;                                                                         </span>
<span  style=""> 135                                                                                                          </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 136     private TagsMultiAutoCompleteTextView mTagInput;                                                     </span>
<span  style=""> 137                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 138     private Handler mAutoSaveHandler;                                                                    </span>
<span  style=""> 139                                                                                                          </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 140     private Handler mPublishTimeoutHandler;                                                              </span>
<span  style=""> 141                                                                                                          </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 142     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style=""> 143                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 144     private LinearLayout mPlaceholderView;                                                               </span>
<span  style=""> 145                                                                                                          </span>
<span class="6468836442965828651" onmouseenter="enter('6468836442965828651');" onmouseout="out('6468836442965828651');" style=""> 146     private CursorAdapter mLinkAutocompleteAdapter;                                                      </span>
<span  style=""> 147                                                                                                          </span>
<span class="-1742340169214255459" onmouseenter="enter('-1742340169214255459');" onmouseout="out('-1742340169214255459');" style=""> 148     private CursorAdapter mTagAutocompleteAdapter;                                                       </span>
<span  style=""> 149                                                                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 150     private boolean mIsLoadingNote;                                                                      </span>
<span  style=""> 151                                                                                                          </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 152     private boolean mIsMarkdownEnabled;                                                                  </span>
<span  style=""> 153                                                                                                          </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 154     private boolean mIsPreviewEnabled;                                                                   </span>
<span  style=""> 155                                                                                                          </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 156     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span  style=""> 157                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 158     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 159                                                                                                          </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 160     private MenuItem mChecklistMenuItem;                                                                 </span>
<span  style=""> 161                                                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 162     private MenuItem mCopyMenuItem;                                                                      </span>
<span  style=""> 163                                                                                                          </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 164     private MenuItem mInformationMenuItem;                                                               </span>
<span  style=""> 165                                                                                                          </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 166     private MenuItem mShareMenuItem;                                                                     </span>
<span  style=""> 167                                                                                                          </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 168     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span  style=""> 169                                                                                                          </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 170     private String mLinkUrl;                                                                             </span>
<span  style=""> 171                                                                                                          </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 172     private String mLinkText;                                                                            </span>
<span  style=""> 173                                                                                                          </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 174     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span  style=""> 175                                                                                                          </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 176     private Drawable mBrowserIcon;                                                                       </span>
<span  style=""> 177                                                                                                          </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 178     private Drawable mCallIcon;                                                                          </span>
<span  style=""> 179                                                                                                          </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 180     private Drawable mCopyIcon;                                                                          </span>
<span  style=""> 181                                                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 182     private Drawable mEmailIcon;                                                                         </span>
<span  style=""> 183                                                                                                          </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 184     private Drawable mLinkIcon;                                                                          </span>
<span  style=""> 185                                                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 186     private Drawable mMapIcon;                                                                           </span>
<span  style=""> 187                                                                                                          </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 188     private Drawable mShareIcon;                                                                         </span>
<span  style=""> 189                                                                                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 190     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span  style=""> 191                                                                                                          </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 192     private String mMatchOffsets;                                                                        </span>
<span  style=""> 193                                                                                                          </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 194     private int mCurrentCursorPosition;                                                                  </span>
<span  style=""> 195                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 196     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span  style=""> 197                                                                                                          </span>
<span class="6183483689682550304" onmouseenter="enter('6183483689682550304');" onmouseout="out('6183483689682550304');" style=""> 198     private LinearLayout mError;                                                                         </span>
<span  style=""> 199                                                                                                          </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 200     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span  style=""> 201                                                                                                          </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 202     private String mCss;                                                                                 </span>
<span  style=""> 203                                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 204     private WebView mMarkdown;                                                                           </span>
<span  style=""> 205                                                                                                          </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 206     private boolean mIsPaused;                                                                           </span>
<span  style=""> 207                                                                                                          </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 208     private boolean mIsFromWidget;                                                                       </span>
<span  style=""> 209                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 210     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 211     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 212     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 213         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 214         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 215             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 216                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217             }                                                                                            </span>
<span  style=""> 218                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 219             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 220                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 221                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 222                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 222                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 223                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 224                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 227             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 229     };                                                                                                   </span>
<span  style=""> 230                                                                                                          </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 231     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span  style=""> 232                                                                                                          </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 233     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style=""> 234                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 235     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 236     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 237         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 238         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 239         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 240             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 241             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 242             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 243                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 244                 mCopyMenuItem = menu.findItem(R.id.menu_copy);                                           </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 245                 mShareMenuItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 246                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 247                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 248                 mode.setTitleOptionalHint(false);                                                        </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 249                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250             }                                                                                            </span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style=""><abbr title=" 251             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 251             requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireConteðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 252             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span  style=""> 254                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 255         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 256         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 257         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 258         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 259             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260         }                                                                                                </span>
<span  style=""> 261                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 262         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 264         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 265             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 266                 case R.id.menu_view_link:                                                                </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 267                     if (mLinkText != null) {                                                             </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 268                         if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                              </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 269                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 269                             SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LIðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 270                         } else {                                                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 271                             try {                                                                        </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 272                                 BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);      </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 273                             } catch (Exception e) {                                                      </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 274                                 e.printStackTrace();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275                             }                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276                         }                                                                                </span>
<span  style=""> 277                                                                                                          </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 278                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                     }                                                                                    </span>
<span  style=""> 280                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 281                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 282                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 283                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 284                         if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                 </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 285                             Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();</span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 286                         } else {                                                                         </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""><abbr title=" 287                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();"> 287                             Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288                         }                                                                                </span>
<span  style=""> 289                                                                                                          </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 290                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291                     }                                                                                    </span>
<span  style=""> 292                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 293                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 294                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 295                     if (mLinkText != null) {                                                             </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 296                         showShare(mLinkText);                                                            </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 297                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298                     }                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 300                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 301                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 302                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304         }                                                                                                </span>
<span  style=""> 305                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 306         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 307         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 308         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 309             if (mActionMode != null) {                                                                   </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 310                 mActionMode.setSubtitle(&quot;&quot;);                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 311                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312             }                                                                                            </span>
<span  style=""> 313                                                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 314             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 315                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 316                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 317                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 318                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 318                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 320                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 321                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 322             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 324     };                                                                                                   </span>
<span  style=""> 325                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 326     private Snackbar mPublishingSnackbar;                                                                </span>
<span  style=""> 327                                                                                                          </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 328     private boolean mHideActionOnSuccess;                                                                </span>
<span  style=""> 329                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 330     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 331     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 332     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 333         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 334         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 335             if (!isAdded()) return;                                                                      </span>
<span  style=""> 336                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 337             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 338                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 339                 public void run() {                                                                      </span>
<span  style=""> 340                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 341                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 342                     mNote.save();                                                                        </span>
<span  style=""> 343                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 344                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 346             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 348     };                                                                                                   </span>
<span  style=""> 349                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 350     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 351      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 352      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 353      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 354     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355     }                                                                                                    </span>
<span  style=""> 356                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 357     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 358     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 359         super.onCreate(savedInstanceState);                                                              </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 360         AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                         </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 361         AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                         </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 362         mInfoBottomSheet = new InfoBottomSheetDialog(this);                                              </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 363         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 364         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 365                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 366         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 367         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 368                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 369         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 369         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 370         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 370         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.aðŸ”µ</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 371         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 371         mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 372         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 372         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.ðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 373         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 373         mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp,ðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 374         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 374         mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 375         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 375         mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.aðŸ”µ</abbr></span>
<span  style=""> 376                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 377         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 378         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 379         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 380                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 381         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 382                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 382                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-4933477915356212091" onmouseenter="enter('-4933477915356212091');" onmouseout="out('-4933477915356212091');" style=""> 383         mTagAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 384             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 385             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 386                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 387                 if (activity == null) return null;                                                       </span>
<span class="3059784599882537005" onmouseenter="enter('3059784599882537005');" onmouseout="out('3059784599882537005');" style=""> 388                 return activity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389             }                                                                                            </span>
<span  style=""> 390                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 391             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 392             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 393                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 394                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395             }                                                                                            </span>
<span  style=""> 396                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 397             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 398             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 399                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400             }                                                                                            </span>
<span  style=""> 401                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 402             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 403             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 404                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 405                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 406                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 407                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 408                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 409                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 410                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 411                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 412                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 413                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 414                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 414                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 415                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 417         };                                                                                               </span>
<span  style=""> 418                                                                                                          </span>
<span class="-5778622668812359275" onmouseenter="enter('-5778622668812359275');" onmouseout="out('-5778622668812359275');" style=""> 419         mLinkAutocompleteAdapter = new CursorAdapter(getContext(), null, 0x0) {                          </span>
<span class="4420913156406314587" onmouseenter="enter('4420913156406314587');" onmouseout="out('4420913156406314587');" style=""> 420             private Activity mActivity = requireActivity();                                              </span>
<span  style=""> 421                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 422             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 423             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="9137674912136175390" onmouseenter="enter('9137674912136175390');" onmouseout="out('9137674912136175390');" style=""> 424                 ((TextView) view).setText(convertToString(cursor));                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span  style=""> 426                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 428             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-6315376739504212293" onmouseenter="enter('-6315376739504212293');" onmouseout="out('-6315376739504212293');" style=""> 429                 return cursor.getString(cursor.getColumnIndex(Note.TITLE_INDEX_NAME));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430             }                                                                                            </span>
<span  style=""> 431                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 432             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 433             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="9209398663457461143" onmouseenter="enter('9209398663457461143');" onmouseout="out('9209398663457461143');" style=""> 434                 return mActivity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435             }                                                                                            </span>
<span  style=""> 436                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 437             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 438             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-2694701201332649685" onmouseenter="enter('-2694701201332649685');" onmouseout="out('-2694701201332649685');" style=""> 439                 if (filter == null) {                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 440                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441                 }                                                                                        </span>
<span  style=""> 442                                                                                                          </span>
<span class="-5476224035795218003" onmouseenter="enter('-5476224035795218003');" onmouseout="out('-5476224035795218003');" style=""> 443                 Simplenote application = (Simplenote) mActivity.getApplication();                        </span>
<span class="5284816788544144261" onmouseenter="enter('5284816788544144261');" onmouseout="out('5284816788544144261');" style=""> 444                 Query&lt;Note&gt; query = application.getNotesBucket().query();                                </span>
<span class="-5887342273099451545" onmouseenter="enter('-5887342273099451545');" onmouseout="out('-5887342273099451545');" style=""> 445                 query.include(Note.PINNED_INDEX_NAME);                                                   </span>
<span class="8903361953614418852" onmouseenter="enter('8903361953614418852');" onmouseout="out('8903361953614418852');" style=""> 446                 query.include(Note.TITLE_INDEX_NAME);                                                    </span>
<span class="3677160110009294333" onmouseenter="enter('3677160110009294333');" onmouseout="out('3677160110009294333');" style=""><abbr title=" 447                 query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filter));"> 447                 query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filðŸ”µ</abbr></span>
<span class="2636422943772736086" onmouseenter="enter('2636422943772736086');" onmouseout="out('2636422943772736086');" style=""> 448                 PrefUtils.sortNoteQuery(query, requireContext(), true);                                  </span>
<span class="2003026878785809505" onmouseenter="enter('2003026878785809505');" onmouseout="out('2003026878785809505');" style=""> 449                 Cursor cursor = query.execute();                                                         </span>
<span  style=""> 450                                                                                                          </span>
<span class="-3406397928756442195" onmouseenter="enter('-3406397928756442195');" onmouseout="out('-3406397928756442195');" style=""><abbr title=" 451                 final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * 48);"> 451                 final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * ðŸ”µ</abbr></span>
<span class="2053250669508349335" onmouseenter="enter('2053250669508349335');" onmouseout="out('2053250669508349335');" style=""> 452                 final int heightDisplay = DisplayUtils.getDisplayPixelSize(requireContext()).y;          </span>
<span class="-5884104961680708619" onmouseenter="enter('-5884104961680708619');" onmouseout="out('-5884104961680708619');" style=""> 453                 final int heightDropdown = Math.min(heightDisplay / 4, heightAutocomplete);              </span>
<span  style=""> 454                                                                                                          </span>
<span class="6747443584027813293" onmouseenter="enter('6747443584027813293');" onmouseout="out('6747443584027813293');" style=""> 455                 mActivity.runOnUiThread(                                                                 </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 456                     new Runnable() {                                                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 457                         @Override                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 458                         public void run() {                                                              </span>
<span class="-6383818153518880076" onmouseenter="enter('-6383818153518880076');" onmouseout="out('-6383818153518880076');" style=""> 459                             mContentEditText.setDropDownHeight(heightDropdown);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461                     }                                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 462                 );                                                                                       </span>
<span class="-6729379386015983029" onmouseenter="enter('-6729379386015983029');" onmouseout="out('-6729379386015983029');" style=""> 463                 return cursor;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 465         };                                                                                               </span>
<span  style=""> 466                                                                                                          </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 467         WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468     }                                                                                                    </span>
<span  style=""> 469                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 470     @Override                                                                                            </span>
<span class="-5467678769290806465" onmouseenter="enter('-5467678769290806465');" onmouseout="out('-5467678769290806465');" style=""> 471     public View onCreateView(@NonNull                                                                    </span>
<span class="-2940382649904418396" onmouseenter="enter('-2940382649904418396');" onmouseout="out('-2940382649904418396');" style=""> 472     LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {                           </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 473         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 474         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 475         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 476         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 477         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 478         mContentEditText.setOnFocusChangeListener(this);                                                 </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 479         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 479         mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()))ðŸ”µ</abbr></span>
<span class="-6866322642818059816" onmouseenter="enter('-6866322642818059816');" onmouseout="out('-6866322642818059816');" style=""> 480         mContentEditText.setDropDownBackgroundResource(R.drawable.bg_list_popup);                        </span>
<span class="8857723377205297003" onmouseenter="enter('8857723377205297003');" onmouseout="out('8857723377205297003');" style=""> 481         mContentEditText.setAdapter(mLinkAutocompleteAdapter);                                           </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 482         mTagInput = mRootView.findViewById(R.id.tag_input);                                              </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 483         mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                               </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 484         mTagInput.setTokenizer(new SpaceTokenizer());                                                    </span>
<span class="-5626031287620429456" onmouseenter="enter('-5626031287620429456');" onmouseout="out('-5626031287620429456');" style=""> 485         mTagInput.setAdapter(mTagAutocompleteAdapter);                                                   </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 486         mTagInput.setOnFocusChangeListener(this);                                                        </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 487         mTagChips = mRootView.findViewById(R.id.tag_chips);                                              </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 488         mTagPadding = mRootView.findViewById(R.id.tag_padding);                                          </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 489         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 490         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span class="-892880346674209254" onmouseenter="enter('-892880346674209254');" onmouseout="out('-892880346674209254');" style=""> 491         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; (mNote == null)) {                     </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 492             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 493             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style=""> 494             if (BrowserUtils.isWebViewInstalled(requireContext())) {                                     </span>
<span class="-7700978299746199081" onmouseenter="enter('-7700978299746199081');" onmouseout="out('-7700978299746199081');" style=""> 495                 ((ViewStub) (mRootView.findViewById(R.id.stub_webview))).inflate();                      </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 496                 mMarkdown = mRootView.findViewById(R.id.markdown);                                       </span>
<span class="1363245066851978300" onmouseenter="enter('1363245066851978300');" onmouseout="out('1363245066851978300');" style=""> 497                 mMarkdown.setWebViewClient(new WebViewClient() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 498                     @Override                                                                            </span>
<span class="-7741512549281860073" onmouseenter="enter('-7741512549281860073');" onmouseout="out('-7741512549281860073');" style=""> 499                     public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {  </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 500                         String url = request.getUrl().toString();                                        </span>
<span class="-2285634234159712436" onmouseenter="enter('-2285634234159712436');" onmouseout="out('-2285634234159712436');" style=""> 501                         if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)) {                  </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 502                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 502                             SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 503                         } else {                                                                         </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 504                             BrowserUtils.launchBrowserOrShowError(requireContext(), url);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505                         }                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 506                         return true;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 508                 });                                                                                      </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style=""><abbr title=" 509                 mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));"> 509                 mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireConteðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 510             } else {                                                                                     </span>
<span class="7837924701853662830" onmouseenter="enter('7837924701853662830');" onmouseout="out('7837924701853662830');" style=""> 511                 ((ViewStub) (mRootView.findViewById(R.id.stub_error))).inflate();                        </span>
<span class="-4966458499899083722" onmouseenter="enter('-4966458499899083722');" onmouseout="out('-4966458499899083722');" style=""> 512                 mError = mRootView.findViewById(R.id.error);                                             </span>
<span class="1249794149046362106" onmouseenter="enter('1249794149046362106');" onmouseout="out('1249794149046362106');" style=""> 513                 mRootView.findViewById(R.id.button).setOnClickListener(new View.OnClickListener() {      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 514                     @Override                                                                            </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style=""> 515                     public void onClick(View view) {                                                     </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style=""><abbr title=" 516                         BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);"> 516                         BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEWðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517                     }                                                                                    </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 518                 });                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520         }                                                                                                </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 521         Bundle arguments = getArguments();                                                               </span>
<span class="4011393863908935220" onmouseenter="enter('4011393863908935220');" onmouseout="out('4011393863908935220');" style=""> 522         if ((arguments != null) &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                 </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 523             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 524             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 525             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 526                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527             }                                                                                            </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 528             mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                    </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 529             if (mIsFromWidget) {                                                                         </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 530                 AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 531             } else {                                                                                     </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 532                 AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533             }                                                                                            </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 534             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1543887229946404071" onmouseenter="enter('-1543887229946404071');" onmouseout="out('-1543887229946404071');" style=""> 535         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; (savedInstanceState != null)) { </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 536             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 537             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 538             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 539                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541         }                                                                                                </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 542         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 543         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 544             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 545             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 546                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="3238390833870160843" onmouseenter="enter('3238390833870160843');" onmouseout="out('3238390833870160843');" style=""> 547                 if (mShouldScrollToSearchMatch &amp;&amp; (mMatchOffsets != null)) {                             </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 548                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 549                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550                     }                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 551                     // Get the character location of the first search match                              </span>
<span class="-5203029704561705542" onmouseenter="enter('-5203029704561705542');" onmouseout="out('-5203029704561705542');" style=""><abbr title=" 552                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(mContentEditText.getText(), mMatchOffsets);"> 552                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(mContentEditText.getðŸ”µ</abbr></span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 553                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 554                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555                     }                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 556                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 557                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 558                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span class="-5430599965701064414" onmouseenter="enter('-5430599965701064414');" onmouseout="out('-5430599965701064414');" style=""> 559                     ((NestedScrollView) (mRootView)).smoothScrollTo(0, lineTop);                         </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 560                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 563         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 564         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 565         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566     }                                                                                                    </span>
<span  style=""> 567                                                                                                          </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 568     public void scrollToMatch(int location) {                                                            </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 569         if (isAdded()) {                                                                                 </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 570             // Calculate how far to scroll to bring the match into view                                  </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 571             Layout layout = mContentEditText.getLayout();                                                </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 572             int lineTop = layout.getLineTop(layout.getLineForOffset(location));                          </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 573             ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575     }                                                                                                    </span>
<span  style=""> 576                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 577     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 578     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 579         super.onResume();                                                                                </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style=""> 580         checkWebView();                                                                                  </span>
<span class="-9085345560964209172" onmouseenter="enter('-9085345560964209172');" onmouseout="out('-9085345560964209172');" style=""> 581         mIsPaused = false;                                                                               </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 582         mNotesBucket.addListener(this);                                                                  </span>
<span class="3922278034329768441" onmouseenter="enter('3922278034329768441');" onmouseout="out('3922278034329768441');" style=""> 583         AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteEditorFragment)&quot;);                        </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 584         mTagInput.setOnTagAddedListener(this);                                                           </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 585         if (mContentEditText != null) {                                                                  </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""><abbr title=" 586             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));"> 586             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContextðŸ”µ</abbr></span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 587             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 588                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591     }                                                                                                    </span>
<span  style=""> 592                                                                                                          </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style=""> 593     private void checkWebView() {                                                                        </span>
<span class="8284401614074834784" onmouseenter="enter('8284401614074834784');" onmouseout="out('8284401614074834784');" style=""> 594         // When a WebView is installed and mMarkdown is null on a large landscape device, a WebView      </span>
<span class="6699306601959225492" onmouseenter="enter('6699306601959225492');" onmouseout="out('6699306601959225492');" style=""> 595         // was not installed when the fragment was created.  So, recreate the activity to refresh        </span>
<span class="-5414175386362694134" onmouseenter="enter('-5414175386362694134');" onmouseout="out('-5414175386362694134');" style=""> 596         // the editor view.                                                                              </span>
<span class="7373089442478701267" onmouseenter="enter('7373089442478701267');" onmouseout="out('7373089442478701267');" style=""> 597         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null &amp;&amp;                    </span>
<span class="-7028697565563617109" onmouseenter="enter('-7028697565563617109');" onmouseout="out('-7028697565563617109');" style=""> 598             DisplayUtils.isLargeScreenLandscape(requireContext())) {                                     </span>
<span class="6438271402930862354" onmouseenter="enter('6438271402930862354');" onmouseout="out('6438271402930862354');" style=""> 599             requireActivity().recreate();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span  style=""> 602                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 603     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 604         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 605             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 606             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 607                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 608                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609                 }                                                                                        </span>
<span  style=""> 610                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 611                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 611                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 612                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 613                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 616         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617     }                                                                                                    </span>
<span  style=""> 618                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 619     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 620     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 621         super.onPause();  // Always call the superclass method first                                     </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 622         mIsPaused = true;                                                                                </span>
<span  style=""> 623                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 624         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 625         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 626                                                                                                          </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 627         mTagInput.setOnTagAddedListener(null);                                                           </span>
<span  style=""> 628                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 629         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 630             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 631             mAutoSaveHandler.post(mAutoSaveRunnable);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632         }                                                                                                </span>
<span  style=""> 633                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 634         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 635             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636         }                                                                                                </span>
<span  style=""> 637                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 638         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 639             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640         }                                                                                                </span>
<span  style=""> 641                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 642         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 643         saveNote();                                                                                      </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 644         AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645     }                                                                                                    </span>
<span  style=""> 646                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 647     @Override                                                                                            </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 648     public void onDestroy() {                                                                            </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 649         super.onDestroy();                                                                               </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 650         mNotesBucket.removeListener(this);                                                               </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style=""> 651         AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                      </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 652         AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653     }                                                                                                    </span>
<span  style=""> 654                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 655     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 656     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 657         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 658                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 659         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 660             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662     }                                                                                                    </span>
<span  style=""> 663                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 664     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 665     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 666         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span  style=""> 667                                                                                                          </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 668         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 668         if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 669             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 670         }                                                                                                </span>
<span  style=""> 671                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 672         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 673         MenuCompat.setGroupDividerEnabled(menu, true);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 674     }                                                                                                    </span>
<span  style=""> 675                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 676     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 677     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 678         switch (item.getItemId()) {                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 679             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 680                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 681                 return true;                                                                             </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 682             case R.id.menu_copy:                                                                         </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 683                 if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {           </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 684                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 685                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 686                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687                 }                                                                                        </span>
<span  style=""> 688                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 689                 return true;                                                                             </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 690             case R.id.menu_copy_internal:                                                                </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 691                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 691                 if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitleðŸ”µ</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 692                     Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 693                 } else {                                                                                 </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 694                     Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695                 }                                                                                        </span>
<span  style=""> 696                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 697                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 698             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 699                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 700                 return true;                                                                             </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 701             case R.id.menu_info:                                                                         </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 702                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 703                 return true;                                                                             </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 704             case R.id.menu_markdown:                                                                     </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 705                 setMarkdown(!item.isChecked());                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 706                 return true;                                                                             </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 707             case R.id.menu_pin:                                                                          </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 708                 NoteUtils.setNotePin(mNote, !item.isChecked());                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 709                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 710                 return true;                                                                             </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 711             case R.id.menu_publish:                                                                      </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 712                 if (item.isChecked()) {                                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 713                     unpublishNote();                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 714                 } else {                                                                                 </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 715                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716                 }                                                                                        </span>
<span  style=""> 717                                                                                                          </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 718                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 719             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 720                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 721                 return true;                                                                             </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 722             case R.id.menu_trash:                                                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 723                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 724                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725                 }                                                                                        </span>
<span  style=""> 726                                                                                                          </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 727                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 728                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 729             case android.R.id.home:                                                                      </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 730                 AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);            </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 731                 if (!isAdded()) {                                                                        </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 732                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733                 }                                                                                        </span>
<span  style=""> 734                                                                                                          </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 735                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 736                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 737             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 738                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 739         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740     }                                                                                                    </span>
<span  style=""> 741                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 742     @Override                                                                                            </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 743     public void onPrepareOptionsMenu(@NonNull Menu menu) {                                               </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 744         if (mNote != null) {                                                                             </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 745             MenuItem pinItem = menu.findItem(R.id.menu_pin);                                             </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 746             MenuItem shareItem = menu.findItem(R.id.menu_share);                                         </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 747             MenuItem historyItem = menu.findItem(R.id.menu_history);                                     </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 748             MenuItem publishItem = menu.findItem(R.id.menu_publish);                                     </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 749             MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                       </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 750             MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                   </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 751             MenuItem trashItem = menu.findItem(R.id.menu_trash);                                         </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 752             mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                     </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 753             mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                       </span>
<span  style=""> 754                                                                                                          </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 755             pinItem.setChecked(mNote.isPinned());                                                        </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 756             publishItem.setChecked(mNote.isPublished());                                                 </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 757             markdownItem.setChecked(mNote.isMarkdownEnabled());                                          </span>
<span  style=""> 758                                                                                                          </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 759             // Disable actions when note is in Trash or markdown view is shown on large device.          </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 760             if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) { </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 761                 pinItem.setEnabled(false);                                                               </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 762                 shareItem.setEnabled(false);                                                             </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 763                 historyItem.setEnabled(false);                                                           </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 764                 publishItem.setEnabled(false);                                                           </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 765                 copyLinkItem.setEnabled(false);                                                          </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 766                 markdownItem.setEnabled(false);                                                          </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 767                 mChecklistMenuItem.setEnabled(false);                                                    </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 768                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 769             } else {                                                                                     </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 770                 pinItem.setEnabled(true);                                                                </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 771                 shareItem.setEnabled(true);                                                              </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 772                 historyItem.setEnabled(true);                                                            </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 773                 publishItem.setEnabled(true);                                                            </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 774                 copyLinkItem.setEnabled(mNote.isPublished());                                            </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 775                 markdownItem.setEnabled(true);                                                           </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 776                 mChecklistMenuItem.setEnabled(true);                                                     </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 777                 DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 778             }                                                                                            </span>
<span  style=""> 779                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 780             if (mNote.isDeleted()) {                                                                     </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 781                 trashItem.setTitle(R.string.restore);                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 782             } else {                                                                                     </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 783                 trashItem.setTitle(R.string.trash);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785         }                                                                                                </span>
<span  style=""> 786                                                                                                          </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 787         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);               </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 788         super.onPrepareOptionsMenu(menu);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789     }                                                                                                    </span>
<span  style=""> 790                                                                                                          </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 791     public void insertChecklist() {                                                                      </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 792         DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                         </span>
<span  style=""> 793                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 794         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 795             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 796         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 797             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 798             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799         }                                                                                                </span>
<span  style=""> 800                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 801         AnalyticsTracker.track(                                                                          </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 802             EDITOR_CHECKLIST_INSERTED,                                                                   </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 803             CATEGORY_NOTE,                                                                               </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 804             &quot;toolbar_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 805         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806     }                                                                                                    </span>
<span  style=""> 807                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 808     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 809     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 810         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 811         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 812             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 813             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815     }                                                                                                    </span>
<span  style=""> 816                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 817     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 818         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 819         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820     }                                                                                                    </span>
<span  style=""> 821                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 822     protected void clearMarkdown() {                                                                     </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 823         if (mMarkdown != null) {                                                                         </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""><abbr title=" 824             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);"> 824             mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, nullðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826     }                                                                                                    </span>
<span  style=""> 827                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 828     protected void hideMarkdown() {                                                                      </span>
<span class="4215012694014637017" onmouseenter="enter('4215012694014637017');" onmouseout="out('4215012694014637017');" style=""> 829         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; (mMarkdown != null)) {                  </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 830             mMarkdown.setVisibility(View.INVISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 831         } else {                                                                                         </span>
<span class="-7415720252441553161" onmouseenter="enter('-7415720252441553161');" onmouseout="out('-7415720252441553161');" style=""> 832             mError.setVisibility(View.INVISIBLE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 833         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834     }                                                                                                    </span>
<span  style=""> 835                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 836     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 837         loadMarkdownData();                                                                              </span>
<span class="4215012694014637017" onmouseenter="enter('4215012694014637017');" onmouseout="out('4215012694014637017');" style=""> 838         if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; (mMarkdown != null)) {                  </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 839             mMarkdown.setVisibility(View.VISIBLE);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 840         } else {                                                                                         </span>
<span class="8471850600291055773" onmouseenter="enter('8471850600291055773');" onmouseout="out('8471850600291055773');" style=""> 841             mError.setVisibility(View.VISIBLE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842         }                                                                                                </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 843         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 844             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 845             public void run() {                                                                          </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 846                 requireActivity().invalidateOptionsMenu();                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847             }                                                                                            </span>
<span class="5647484186572459053" onmouseenter="enter('5647484186572459053');" onmouseout="out('5647484186572459053');" style=""> 848         }, getResources().getInteger(R.integer.time_animation));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 849     }                                                                                                    </span>
<span  style=""> 850                                                                                                          </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 851     public void shareNote() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 852         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 853             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 854             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 855             AnalyticsTracker.track(                                                                      </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 856                 EDITOR_NOTE_CONTENT_SHARED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 857                 CATEGORY_NOTE,                                                                           </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 858                 &quot;action_bar_share_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 859             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861     }                                                                                                    </span>
<span  style=""> 862                                                                                                          </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 863     public void showHistory() {                                                                          </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 864         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 865             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 866             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 867             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 868         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 869             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 871     }                                                                                                    </span>
<span  style=""> 872                                                                                                          </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 873     public void showInfo() {                                                                             </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 874         DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                       </span>
<span  style=""> 875                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 876         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 877             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 878             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 879             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 883     private void setMarkdown(boolean isChecked) {                                                        </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 884         mIsMarkdownEnabled = isChecked;                                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 885         showMarkdownActionOrTabs();                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 886         saveNote();                                                                                      </span>
<span  style=""> 887                                                                                                          </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 888         // Set preference so that next new note will have markdown enabled.                              </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 889         SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());       </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 890         SharedPreferences.Editor editor = prefs.edit();                                                  </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 891         editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                   </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 892         editor.apply();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 893     }                                                                                                    </span>
<span  style=""> 894                                                                                                          </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 895     private void setMarkdownEnabled(boolean enabled) {                                                   </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 896         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 897                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 898         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 899             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 901     }                                                                                                    </span>
<span  style=""> 902                                                                                                          </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 903     private void showMarkdownActionOrTabs() {                                                            </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 904         Activity activity = getActivity();                                                               </span>
<span  style=""> 905                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 906         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 907             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span  style=""> 908                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 909             if (mIsMarkdownEnabled) {                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 910                 editorActivity.showTabs();                                                               </span>
<span  style=""> 911                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 912                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 913                     // Get markdown fragment and update content                                          </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 914                     mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                    </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 915                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 917             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 918                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 919             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 920         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 921             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 922             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 923         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924     }                                                                                                    </span>
<span  style=""> 925                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 926     private void loadMarkdownData() {                                                                    </span>
<span class="-7682454803640224224" onmouseenter="enter('-7682454803640224224');" onmouseout="out('-7682454803640224224');" style=""><abbr title=" 927         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(mCss, mContentEditText.getPreviewTextContent());"> 927         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(mCss, mContentEditTextðŸ”µ</abbr></span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style=""> 928         if (mMarkdown != null) {                                                                         </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 929             mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931     }                                                                                                    </span>
<span  style=""> 932                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 933     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 934         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 935             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 936         }                                                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 937         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 938         mMatchOffsets = matchOffsets;                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 939         saveNote();                                                                                      </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 940         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941     }                                                                                                    </span>
<span  style=""> 942                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 943     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 944         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 945         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 946         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947     }                                                                                                    </span>
<span  style=""> 948                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 949     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 950         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 951             // Restore the cursor position if possible.                                                  </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 952             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 952             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 953             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 954                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 955             if (isNoteUpdate) {                                                                          </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 956                 // Update markdown and preview flags from updated note.                                  </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 957                 mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                          </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 958                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span  style=""> 959                                                                                                          </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 960                 // Show/Hide action/tabs based on markdown flag.                                         </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 961                 showMarkdownActionOrTabs();                                                              </span>
<span  style=""> 962                                                                                                          </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 963                 // Save note so any local changes get synced.                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 964                 mNote.save();                                                                            </span>
<span  style=""> 965                                                                                                          </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 966                 // Update current note object on large screen devices in landscape orientation.          </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 967                 if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                             </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 968                     ((NotesActivity) requireActivity()).setCurrentNote(mNote);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969                 }                                                                                        </span>
<span  style=""> 970                                                                                                          </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 971                 // Update overflow popup menu.                                                           </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 972                 requireActivity().invalidateOptionsMenu();                                               </span>
<span  style=""> 973                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 974                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 975                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 976                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 977                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 978                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979             }                                                                                            </span>
<span  style=""> 980                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 981             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 982             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 983             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 985     }                                                                                                    </span>
<span  style=""> 986                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 987     private void updateTagList() {                                                                       </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 988         setChips(mNote.getTagString());                                                                  </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 989         mTagInput.setText(&quot;&quot;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 990     }                                                                                                    </span>
<span  style=""> 991                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 992     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 993         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 994         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 995         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 996         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 997         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 998         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 999         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style="">1000         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style="">1001                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style="">1002         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style="">1003                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style="">1004         int newCursorLocation = cursorLocation;                                                          </span>
<span  style="">1005                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style="">1006         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style="">1007                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style="">1008         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style="">1009         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style="">1010             return newText.length();                                                                     </span>
<span  style="">1011                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style="">1012         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style="">1013         boolean afterCursorMatches = false;                                                              </span>
<span  style="">1014                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1015         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title="1016             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));">1016             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title="1017             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));">1017             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1018         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1019             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020         }                                                                                                </span>
<span  style="">1021                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style="">1022         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style="">1023         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style="">1024             newCursorLocation += deltaLength;                                                            </span>
<span  style="">1025                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style="">1026         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style="">1027         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028     }                                                                                                    </span>
<span  style="">1029                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1030     @Override                                                                                            </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style="">1031     public void onTagAdded(String tag) {                                                                 </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style="">1032         if (mNote == null || !isAdded()) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1033             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034         }                                                                                                </span>
<span  style="">1035                                                                                                          </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style="">1036         if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {              </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1037             AnalyticsTracker.track(                                                                      </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style="">1038                 EDITOR_TAG_ADDED,                                                                        </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1039                 CATEGORY_NOTE,                                                                           </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style="">1040                 &quot;tag_added_to_note&quot;                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1041             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042         }                                                                                                </span>
<span  style="">1043                                                                                                          </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style="">1044         mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                          </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1045         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1046         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1047         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048     }                                                                                                    </span>
<span  style="">1049                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1050     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style="">1051     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style="">1052         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053     }                                                                                                    </span>
<span  style="">1054                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1055     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style="">1056     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="">1057         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="">1058         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style="">1059         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060     }                                                                                                    </span>
<span  style="">1061                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1062     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style="">1063     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style="">1064         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="">1065         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style="">1066             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style="">1067             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1068         }                                                                                                </span>
<span  style="">1069                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style="">1070         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1071         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="">1072             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style="">1073             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1074         }                                                                                                </span>
<span  style="">1075                                                                                                          </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1076         if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                    </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1077             ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078         }                                                                                                </span>
<span  style="">1079                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1080         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1081         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1082         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1083         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1084     }                                                                                                    </span>
<span  style="">1085                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1086     /**                                                                                                  </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1087      * Set the note title to be a larger size and bold style.                                            </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1088      *                                                                                                   </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1089      * Remove all existing spans before applying spans or performance issues will occur.  Since both     </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1090      * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all      </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1091      * spans are removed when {@link MetricAffectingSpan} is removed.                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1092      */                                                                                                  </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1093     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style=""><abbr title="1094         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {">1094         for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.classðŸ”µ</abbr></span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1095             if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                         </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1096                 editable.removeSpan(span);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098         }                                                                                                </span>
<span  style="">1099                                                                                                          </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1100         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span  style="">1101                                                                                                          </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1102         if (newLinePosition == 0) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1103             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1104         }                                                                                                </span>
<span  style="">1105                                                                                                          </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1106         int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();              </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style=""><abbr title="1107         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1107         editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVðŸ”µ</abbr></span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style=""><abbr title="1108         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);">1108         editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1109     }                                                                                                    </span>
<span  style="">1110                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1111     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1112         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1113         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1114         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1115         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1118     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1119         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1120             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121         }                                                                                                </span>
<span  style="">1122                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1123         AppLog.add(                                                                                      </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1124             Type.ACTION,                                                                                 </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1125             &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                              </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1126                 &quot; / Title: &quot; + mNote.getTitle() +                                                        </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1127                 &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                   </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1128                 &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1129         );                                                                                               </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1130         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131     }                                                                                                    </span>
<span  style="">1132                                                                                                          </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1133     public boolean isPlaceholderVisible() {                                                              </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1134         if (mPlaceholderView != null) {                                                                  </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1135             return mPlaceholderView.getVisibility() == View.VISIBLE;                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1136         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1137             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1139     }                                                                                                    </span>
<span  style="">1140                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1141     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1142         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1143             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1144             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1145         }                                                                                                </span>
<span  style="">1146                                                                                                          </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1147         if (mPlaceholderView != null) {                                                                  </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1148             mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150     }                                                                                                    </span>
<span  style="">1151                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1152     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1153     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1154         if (!hasFocus) {                                                                                 </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1155             String tags = getNoteTagsString().trim();                                                    </span>
<span  style="">1156                                                                                                          </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1157             if (mTagInput.getText().toString().trim().length() &gt; 0                                       </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1158                 &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                       </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1159                 onTagAdded(mTagInput.getText().toString());                                              </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1160             } else if (tags.length() &gt; 0) {                                                              </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1161                 setChips(tags);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1163         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164     }                                                                                                    </span>
<span  style="">1165                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1166     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1167         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1168     }                                                                                                    </span>
<span  style="">1169                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1170     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1171         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172     }                                                                                                    </span>
<span  style="">1173                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1174     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1175         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1176             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1177         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1178             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180     }                                                                                                    </span>
<span  style="">1181                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1182     private String getNoteTagsString() {                                                                 </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1183         StringBuilder tags = new StringBuilder();                                                        </span>
<span  style="">1184                                                                                                          </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1185         for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                             </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1186             tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1187         }                                                                                                </span>
<span  style="">1188                                                                                                          </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1189         return tags.toString();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190     }                                                                                                    </span>
<span  style="">1191                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1192     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1193      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1194      */                                                                                                  </span>
<span  style="">1195                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1196     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1197     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1198         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1199         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1200             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202     }                                                                                                    </span>
<span  style="">1203                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1204     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1205     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1206         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1207         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1208             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1209         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210     }                                                                                                    </span>
<span  style="">1211                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1212     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1213     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1214         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1215             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1216         }                                                                                                </span>
<span  style="">1217                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1218         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1219             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1220         }                                                                                                </span>
<span  style="">1221                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1222         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1223         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1224         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1225             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1227         ft.addToBackStack(null);                                                                         </span>
<span  style="">1228                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1229         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1230         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1231         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1232         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1233     }                                                                                                    </span>
<span  style="">1234                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1235     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1236     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1237         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1238     }                                                                                                    </span>
<span  style="">1239                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1240     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1241     public void onShareDismissed() {                                                                     </span>
<span  style="">1242                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243     }                                                                                                    </span>
<span  style="">1244                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1245     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1246      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1247      */                                                                                                  </span>
<span  style="">1248                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1249     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1250     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1251         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1252         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1253             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255     }                                                                                                    </span>
<span  style="">1256                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1257     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1258     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1259         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1260             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1261         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1262         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263     }                                                                                                    </span>
<span  style="">1264                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1265     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1266     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1267         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1268             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1269         }                                                                                                </span>
<span  style="">1270                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1271         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1272             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1273         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274     }                                                                                                    </span>
<span  style="">1275                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1276     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1277     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1278         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1279     }                                                                                                    </span>
<span  style="">1280                                                                                                          </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1281     private void saveNote() {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1282         try {                                                                                            </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1283             if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||   </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1284                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1284                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1285                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1286             } else {                                                                                     </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1287                 mNote = mNotesBucket.get(mNote.getSimperiumKey());                                       </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1288                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289             }                                                                                            </span>
<span  style="">1290                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1291             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1292             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1293                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1294             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1294             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1295                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1296                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1297                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1298                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1299                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1300                 mNote.save();                                                                            </span>
<span  style="">1301                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1302                 AnalyticsTracker.track(                                                                  </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1303                     EDITOR_NOTE_EDITED,                                                                  </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1304                     CATEGORY_NOTE,                                                                       </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1305                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1306                 );                                                                                       </span>
<span  style="">1307                                                                                                          </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1308                 AppLog.add(                                                                              </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1309                     Type.SYNC,                                                                           </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1310                     &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +         </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1311                         &quot; / Title: &quot; + mNote.getTitle() +                                                </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1312                         &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                      </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1313                         &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1314                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1315             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1316         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1317             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1319     }                                                                                                    </span>
<span  style="">1320                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1321     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1322     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1323     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1324     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1325         mCurrentCursorPosition = selEnd;                                                                 </span>
<span  style="">1326                                                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1327         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1328             Editable noteContent = mContentEditText.getText();                                           </span>
<span  style="">1329                                                                                                          </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1330             if (noteContent == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1331                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332             }                                                                                            </span>
<span  style="">1333                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1334             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span  style="">1335                                                                                                          </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1336             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1337                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1338                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1339                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1339                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span  style="">1340                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1341                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1342                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1343                     updateMenuItems();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1344                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345                 }                                                                                        </span>
<span  style="">1346                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1347                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1348                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1349                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1349                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span  style="">1350                                                                                                          </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1351                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1352                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1353                     }                                                                                    </span>
<span  style="">1354                                                                                                          </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1355                     updateMenuItems();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1357             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1358                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1359                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1361         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1362             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1363             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1365     }                                                                                                    </span>
<span  style="">1366                                                                                                          </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1367     private void updateMenuItems() {                                                                     </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1368         mCopyMenuItem.setIcon(mCopyIcon);                                                                </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1369         mShareMenuItem.setIcon(mShareIcon);                                                              </span>
<span  style="">1370                                                                                                          </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1371         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1372             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1373                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1374                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1375             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1376                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1377                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1378             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1379                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1380                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1381             } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                    </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1382                 mViewLinkMenuItem.setIcon(mLinkIcon);                                                    </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1383                 mViewLinkMenuItem.setTitle(getString(R.string.open_note));                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1384             } else {                                                                                     </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1385                 mViewLinkMenuItem.setIcon(mBrowserIcon);                                                 </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1386                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389     }                                                                                                    </span>
<span  style="">1390                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1391     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1392         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1393             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1394             mNote.save();                                                                                </span>
<span  style="">1395                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1396             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1397             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1398                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1399             AnalyticsTracker.track(                                                                      </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1400                 isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1401                 CATEGORY_NOTE,                                                                           </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1402                 &quot;publish_note_button&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1403             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405     }                                                                                                    </span>
<span  style="">1406                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1407     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1408         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1409             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410         }                                                                                                </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1411         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1412         mPublishingSnackbar = null;                                                                      </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1413         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1414             if (mNote.isPublished()) {                                                                   </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1415                 if (mHideActionOnSuccess) {                                                              </span>
<span class="7497833686297233990" onmouseenter="enter('7497833686297233990');" onmouseout="out('7497833686297233990');" style="">1416                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).show();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1417                 } else {                                                                                 </span>
<span class="-2702020555845865915" onmouseenter="enter('-2702020555845865915');" onmouseout="out('-2702020555845865915');" style=""><abbr title="1418                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).setAction(R.string.undo, new View.OnClickListener() {">1418                     Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).setActionðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1419                         @Override                                                                        </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1420                         public void onClick(View v) {                                                    </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1421                             mHideActionOnSuccess = true;                                                 </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1422                             unpublishNote();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423                         }                                                                                </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1424                     }).show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1425                 }                                                                                        </span>
<span class="-3790430051689614068" onmouseenter="enter('-3790430051689614068');" onmouseout="out('-3790430051689614068');" style="">1426             } else if (mHideActionOnSuccess) {                                                           </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1427                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1428             } else {                                                                                     </span>
<span class="7601439931758089790" onmouseenter="enter('7601439931758089790');" onmouseout="out('7601439931758089790');" style=""><abbr title="1429                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).setAction(R.string.undo, new View.OnClickListener() {">1429                 Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).setAction(RðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1430                     @Override                                                                            </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1431                     public void onClick(View v) {                                                        </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1432                         mHideActionOnSuccess = true;                                                     </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1433                         publishNote();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434                     }                                                                                    </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1435                 }).show();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1436             }                                                                                            </span>
<span class="4765506669760455758" onmouseenter="enter('4765506669760455758');" onmouseout="out('4765506669760455758');" style="">1437         } else if (mNote.isPublished()) {                                                                </span>
<span class="1560587261098083611" onmouseenter="enter('1560587261098083611');" onmouseout="out('1560587261098083611');" style=""><abbr title="1438             Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG).setAction(R.string.retry, new View.OnClickListener() {">1438             Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG).setAction(R.string.rðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1439                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1440                 public void onClick(View v) {                                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1441                     mHideActionOnSuccess = true;                                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1442                     unpublishNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1443                 }                                                                                        </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1444             }).show();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1445         } else {                                                                                         </span>
<span class="-3203060346162978224" onmouseenter="enter('-3203060346162978224');" onmouseout="out('-3203060346162978224');" style=""><abbr title="1446             Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG).setAction(R.string.retry, new View.OnClickListener() {">1446             Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG).setAction(R.string.retðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1447                 @Override                                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1448                 public void onClick(View v) {                                                            </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1449                     mHideActionOnSuccess = true;                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1450                     publishNote();                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1451                 }                                                                                        </span>
<span class="-4345860548322303041" onmouseenter="enter('-4345860548322303041');" onmouseout="out('-4345860548322303041');" style="">1452             }).show();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453         }                                                                                                </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1454         mHideActionOnSuccess = false;                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1455         requireActivity().invalidateOptionsMenu();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456     }                                                                                                    </span>
<span  style="">1457                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1458     private void publishNote() {                                                                         </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1459         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1460             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1461             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1462         }                                                                                                </span>
<span  style="">1463                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1464         if (isAdded()) {                                                                                 </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style=""><abbr title="1465             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);">1465             mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1466             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1467         }                                                                                                </span>
<span  style="">1468                                                                                                          </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1469         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1470     }                                                                                                    </span>
<span  style="">1471                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1472     private void unpublishNote() {                                                                       </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1473         if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                        </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1474             Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show(); </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1475             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476         }                                                                                                </span>
<span  style="">1477                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1478         if (isAdded()) {                                                                                 </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style=""><abbr title="1479             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);">1479             mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINðŸ”µ</abbr></span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1480             mPublishingSnackbar.show();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1481         }                                                                                                </span>
<span  style="">1482                                                                                                          </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1483         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1484     }                                                                                                    </span>
<span  style="">1485                                                                                                          </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1486     private void showShare(String text) {                                                                </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1487         startActivity(                                                                                   </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1488             ShareCompat.IntentBuilder.from(requireActivity())                                            </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1489                 .setText(text)                                                                           </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1490                 .setType(&quot;text/plain&quot;)                                                                   </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1491                 .createChooserIntent()                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1492         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1493     }                                                                                                    </span>
<span  style="">1494                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1495     private void showShareSheet() {                                                                      </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1496         if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                    </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1497             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1498         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1499     }                                                                                                    </span>
<span  style="">1500                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1501     private void showInfoSheet() {                                                                       </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1502         if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                      </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1503             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1504         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505     }                                                                                                    </span>
<span  style="">1506                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1507     private void showHistorySheet() {                                                                    </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1508         if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1509             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1510             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1510             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1511             saveNote();                                                                                  </span>
<span  style="">1512                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1513             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1514         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1515     }                                                                                                    </span>
<span  style="">1516                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1517     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1518     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1519     }                                                                                                    </span>
<span  style="">1520                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1521     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1522     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1522     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1523         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="6009154871566676955" onmouseenter="enter('6009154871566676955');" onmouseout="out('6009154871566676955');" style="">1524             if ((getNote() != null) &amp;&amp; getNote().getSimperiumKey().equals(key)) {                        </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1525                 try {                                                                                    </span>
<span class="4372796228007650956" onmouseenter="enter('4372796228007650956');" onmouseout="out('4372796228007650956');" style="">1526                     final Note updatedNote = noteBucket.get(key);                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1527                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1528                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1529                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1530                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1531                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1532                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1533                                 }                                                                        </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1534                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1535                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1537                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1539                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1540                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1541                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1542             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1543         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1544     }                                                                                                    </span>
<span  style="">1545                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1546     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1547     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1548         if (mIsPaused) {                                                                                 </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1549             mNotesBucket.removeListener(this);                                                           </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style="">1550             AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551         }                                                                                                </span>
<span class="310399230223548219" onmouseenter="enter('310399230223548219');" onmouseout="out('310399230223548219');" style=""><abbr title="1552         AppLog.add(Type.SYNC, (((((((&quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey()) + &quot; / Title: &quot;) + note.getTitle()) + &quot; / Characters: &quot;) + NoteUtils.getCharactersCount(note.getContent())) + &quot; / Words: &quot;) + NoteUtils.getWordCount(note.getContent())) + &quot;)&quot;);">1552         AppLog.add(Type.SYNC, (((((((&quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiuðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1553     }                                                                                                    </span>
<span  style="">1554                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1555     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1556     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1557         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1558         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1559             return;                                                                                      </span>
<span  style="">1560                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1561         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1562         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1563             return;                                                                                      </span>
<span  style="">1564                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1565         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1566     }                                                                                                    </span>
<span  style="">1567                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1568     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1569         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1570                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1571         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1572             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1573         }                                                                                                </span>
<span  style="">1574                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1575         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1576         protected void onPreExecute() {                                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1577             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1578             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1579                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1580                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1581             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1582         }                                                                                                </span>
<span  style="">1583                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1584         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1585         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1586             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="4349500834754523537" onmouseenter="enter('4349500834754523537');" onmouseout="out('4349500834754523537');" style="">1587             if ((fragment == null) || (fragment.getActivity() == null)) {                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1588                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589             }                                                                                            </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1590             String noteID = args[0];                                                                     </span>
<span class="2152357253618292092" onmouseenter="enter('2152357253618292092');" onmouseout="out('2152357253618292092');" style="">1591             Simplenote application = ((Simplenote) (fragment.getActivity().getApplication()));           </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1592             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1593             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1594                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1595                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1596                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="8585053155468161660" onmouseenter="enter('8585053155468161660');" onmouseout="out('8585053155468161660');" style="">1597                     ((NotesActivity) (fragment.getActivity())).setCurrentNote(fragment.mNote);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598                 }                                                                                        </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1599                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1600                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1601                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1602                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-7926751375494125320" onmouseenter="enter('-7926751375494125320');" onmouseout="out('-7926751375494125320');" style=""><abbr title="1603                     AppLog.add(Type.SYNC, (((((((&quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey()) + &quot; / Title: &quot;) + fragment.mNote.getTitle()) + &quot; / Characters: &quot;) + NoteUtils.getCharactersCount(fragment.mNote.getContent())) + &quot; / Words: &quot;) + NoteUtils.getWordCount(fragment.mNote.getContent())) + &quot;)&quot;);">1603                     AppLog.add(Type.SYNC, (((((((&quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey()) ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1604                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1605             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1606                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1607                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1608                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1609                     Note currentNote = notesCursor.getObject();                                          </span>
<span class="8264360518691996978" onmouseenter="enter('8264360518691996978');" onmouseout="out('8264360518691996978');" style="">1610                     if ((currentNote != null) &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {         </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1611                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1612                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1613                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1614                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1615             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1616             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1617         }                                                                                                </span>
<span  style="">1618                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1619         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1620         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1621             final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                      </span>
<span class="-9214324735517901283" onmouseenter="enter('-9214324735517901283');" onmouseout="out('-9214324735517901283');" style=""><abbr title="1622             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFinishing()) {">1622             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFiniðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1623                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624             }                                                                                            </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1625             fragment.refreshContent(false);                                                              </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1626             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1627                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1627                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1628                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1629                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1630             }                                                                                            </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1631             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span class="-4686922819076112275" onmouseenter="enter('-4686922819076112275');" onmouseout="out('-4686922819076112275');" style="">1632             if ((fragment.mNote != null) &amp;&amp; fragment.mNote.getContent().isEmpty()) {                     </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1633                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1634                 fragment.mContentEditText.requestFocus();                                                </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1635                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1636                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1637                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1638                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1639                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1640                         }                                                                                </span>
<span class="-6396953671275869188" onmouseenter="enter('-6396953671275869188');" onmouseout="out('-6396953671275869188');" style=""><abbr title="1641                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));">1641                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActiviðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1642                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1643                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1644                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1645                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1646                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1647             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1648                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1649                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1650             }                                                                                            </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1651             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1652             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1653             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1654             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1655         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1656     }                                                                                                    </span>
<span  style="">1657                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1658     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1659         WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                  </span>
<span  style="">1660                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1661         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1662             mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1663         }                                                                                                </span>
<span  style="">1664                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1665         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1666         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1667             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1668             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1669                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1671             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1672         }                                                                                                </span>
<span  style="">1673                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1674         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1675         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1676             NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                            </span>
<span class="4331800031661631828" onmouseenter="enter('4331800031661631828');" onmouseout="out('4331800031661631828');" style=""><abbr title="1677             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFinishing())) {">1677             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFiðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1678                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1679                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1680                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1681             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1683     }                                                                                                    </span>
<span  style="">1684                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1685     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1686         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1687             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1688         }                                                                                                </span>
<span  style="">1689                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1690         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1691             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1692         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693     }                                                                                                    </span>
<span  style="">1694                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1695     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1696     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1697         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1698             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699         }                                                                                                </span>
<span  style="">1700                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1701         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1702         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1703             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1704             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1705         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1706             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1707             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1708                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1709                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1710                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1712             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1713             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1714         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1715     }                                                                                                    </span>
<span  style="">1716                                                                                                          </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1717     private ColorStateList getChipBackgroundColor() {                                                    </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1718         int[][] states = new int[][] {                                                                   </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1719             new int[] { android.R.attr.state_checked}, // checked                                        </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1720             new int[] {-android.R.attr.state_checked}  // unchecked                                      </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1721         };                                                                                               </span>
<span  style="">1722                                                                                                          </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1723         int[] colors = new int[] {                                                                       </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1724             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),     </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1725             ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1726         };                                                                                               </span>
<span  style="">1727                                                                                                          </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1728         return new ColorStateList(states, colors);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729     }                                                                                                    </span>
<span  style="">1730                                                                                                          </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1731     private void setChips(CharSequence text) {                                                           </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1732         mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                         </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1733         mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                           </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1734         mTagChips.setSingleSelection(true);                                                              </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1735         mTagChips.removeAllViews();                                                                      </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1736         SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                     </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1737         tags.setString(text.toString());                                                                 </span>
<span  style="">1738                                                                                                          </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1739         for (String tag : tags) {                                                                        </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1740             final Chip chip = new Chip(requireContext());                                                </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1741             chip.setText(tag);                                                                           </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1742             chip.setCheckable(true);                                                                     </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1743             chip.setCheckedIcon(null);                                                                   </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1744             chip.setChipBackgroundColor(getChipBackgroundColor());                                       </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1745             chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor)); </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1746             chip.setStateListAnimator(null);                                                             </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1747             chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1748                 @Override                                                                                </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1749                 public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {             </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1750                     chip.setCloseIconVisible(isChecked);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1751                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1752             });                                                                                          </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1753             chip.setOnCloseIconClickListener(new View.OnClickListener() {                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1754                 @Override                                                                                </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1755                 public void onClick(View view) {                                                         </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1756                     mTagChips.removeView(view);                                                          </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1757                     updateTags();                                                                        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1758                     AnalyticsTracker.track(                                                              </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1759                         EDITOR_TAG_REMOVED,                                                              </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1760                         CATEGORY_NOTE,                                                                   </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1761                         &quot;tag_removed_from_note&quot;                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1762                     );                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1763                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1764             });                                                                                          </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1765             mTagChips.addView(chip);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1766         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1767     }                                                                                                    </span>
<span  style="">1768                                                                                                          </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1769     private void updateTags() {                                                                          </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1770         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1771             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1772         }                                                                                                </span>
<span  style="">1773                                                                                                          </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1774         mNote.setTagString(getNoteTagsString());                                                         </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1775         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1776         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1777         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1778     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1779 }                                                                                                        </span>










































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5  import android.content.SharedPreferences;                                                                         </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6  import android.content.res.ColorStateList;                                                                        </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7  import android.database.Cursor;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8  import android.graphics.Typeface;                                                                                 </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15  import android.text.Spanned;                                                                                      </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16  import android.text.TextUtils.SimpleStringSplitter;                                                               </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17  import android.text.TextWatcher;                                                                                  </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18  import android.text.style.MetricAffectingSpan;                                                                    </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20  import android.text.style.StyleSpan;                                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29  import android.view.ViewGroup;                                                                                    </span>

<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  30  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  31  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  32  import android.webkit.WebResourceRequest;                                                                         </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  33  import android.webkit.WebView;                                                                                    </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  34  import android.webkit.WebViewClient;                                                                              </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  35  import android.widget.CompoundButton;                                                                             </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  36  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  37  import android.widget.LinearLayout;                                                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  38  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  39  import android.widget.Toast;                                                                                      </span>
<span  style="">  40                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  41  import androidx.annotation.NonNull;                                                                               </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  42  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  43  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  44  import androidx.core.app.ShareCompat;                                                                             </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  45  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  46  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  47  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  48  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  49  import androidx.preference.PreferenceManager;                                                                     </span>
<span  style="">  50                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  51  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  52  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  53  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  54  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  55  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  56  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  57  import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  58  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  59  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  60  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  61  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  62  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  63  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  64  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  65  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  66  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  67  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  68  import com.automattic.simplenote.utils.TagUtils;                                                                  </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  69  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  70  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  71  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  72  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  73  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  74  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  75  import com.google.android.material.chip.Chip;                                                                     </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  76  import com.google.android.material.chip.ChipGroup;                                                                </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  77  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  78  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  79  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  80  import com.simperium.client.Query;                                                                                </span>
<span  style="">  81                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  82  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  83  import java.util.Calendar;                                                                                        </span>
<span  style="">  84                                                                                                                    </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  85  import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                                 </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  86  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;                </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  87  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;               </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  88  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;                       </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  89  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;                    </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  90  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;                  </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  91  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                         </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  92  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;                       </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  93  import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                              </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  94  import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                           </span>
<span  style="">  95                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  96  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  97          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  98          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  99          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 100          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 101          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style=""> 102                                                                                                                    </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 103      public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 104      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 105      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 106      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 107      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 108      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span  style=""> 109                                                                                                                    </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 110      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 111      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 112      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 113      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 114      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 115      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 116      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 117          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 118          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 119              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 121      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 122      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 123      private View mRootView;                                                                                       </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 124      private View mTagPadding;                                                                                     </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 125      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 126      private ChipGroup mTagChips;                                                                                  </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 127      private TagsMultiAutoCompleteTextView mTagInput;                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 128      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 129      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 130      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 131      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="6468836442965828651" onmouseenter="enter('6468836442965828651');" onmouseout="out('6468836442965828651');" style=""> 132      private CursorAdapter mLinkAutocompleteAdapter;                                                               </span>
<span class="-1742340169214255459" onmouseenter="enter('-1742340169214255459');" onmouseout="out('-1742340169214255459');" style=""> 133      private CursorAdapter mTagAutocompleteAdapter;                                                                </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 134      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 135      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 136      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 137      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 138      private ActionMode mActionMode;                                                                               </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 139      private MenuItem mChecklistMenuItem;                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 140      private MenuItem mCopyMenuItem;                                                                               </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 141      private MenuItem mInformationMenuItem;                                                                        </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 142      private MenuItem mShareMenuItem;                                                                              </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 143      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 144      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 145      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 146      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 147      private Drawable mBrowserIcon;                                                                                </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 148      private Drawable mCallIcon;                                                                                   </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 149      private Drawable mCopyIcon;                                                                                   </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 150      private Drawable mEmailIcon;                                                                                  </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 151      private Drawable mLinkIcon;                                                                                   </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 152      private Drawable mMapIcon;                                                                                    </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 153      private Drawable mShareIcon;                                                                                  </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 154      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 155      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 156      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 157      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>




<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 158      private boolean mIsPaused;                                                                                    </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 159      private boolean mIsFromWidget;                                                                                </span>
<span  style=""> 160                                                                                                                    </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 161      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 162      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 163          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 164          public void run() {                                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 165              if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 166                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167              }                                                                                                     </span>
<span  style=""> 168                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 169              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 171                  public void run() {                                                                               </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 172                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 172                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; ðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 173                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 174                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 177              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 179      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 180      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 181      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 182      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 183      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 184          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 185          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 186          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 187              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 188              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style=""> 189                                                                                                                    </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 190              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 191                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 192                  mCopyMenuItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 193                  mShareMenuItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 194                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 195                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 196                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 197                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 198                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199              }                                                                                                     </span>
<span  style=""> 200                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 201 -            int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 201 -            int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgrðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 202 -            requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 202 -            requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().ðŸ”µ</abbr></span>
<span class="2269582470475983092" onmouseenter="enter('2269582470475983092');" onmouseout="out('2269582470475983092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 203 +            requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.mainBackgroundColor));"> 203 +            requireActivity().getWindow().setStatusBarColor(ThemeUtils.getColorFromAttribute(requireContext(), R.aðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 204              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205          }                                                                                                         </span>
<span  style=""> 206                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 207          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 208          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 209          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 210          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 211              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212          }                                                                                                         </span>
<span  style=""> 213                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 214          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 215          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 216          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 217              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 218                  case R.id.menu_view_link:                                                                         </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 219                      if (mLinkText != null) {                                                                      </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 220                          if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                       </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 221                              SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 221                              SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIXðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 222                          } else {                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 223                              try {                                                                                 </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 224                                  BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 225                              } catch (Exception e) {                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 226                                  e.printStackTrace();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228                          }                                                                                         </span>
<span  style=""> 229                                                                                                                    </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 230                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231                      }                                                                                             </span>
<span  style=""> 232                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 233                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 234                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 235                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 236                          if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                          </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 237                              Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 238                          } else {                                                                                  </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 239                              Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240                          }                                                                                         </span>
<span  style=""> 241                                                                                                                    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 242                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243                      }                                                                                             </span>
<span  style=""> 244                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 245                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 246                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 247                      if (mLinkText != null) {                                                                      </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 248                          showShare(mLinkText);                                                                     </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 249                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250                      }                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 252                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 253                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 254                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span  style=""> 257                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 258          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 259          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 260          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 261              if (mActionMode != null) {                                                                            </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 262                  mActionMode.setSubtitle(&quot;&quot;);                                                                      </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 263                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264              }                                                                                                     </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 266              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 267                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 268                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 269                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 270                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 270                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.trðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 272                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 273                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 274              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 276      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 277      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 278      private boolean mHideActionOnSuccess;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 279      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 280      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 281          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 282          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 283              if (!isAdded()) return;                                                                               </span>
<span  style=""> 284                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 285              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 287                  public void run() {                                                                               </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 289                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 290                      mNote.save();                                                                                 </span>
<span  style=""> 291                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 292                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 294              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 296      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 297      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 298      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 299      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 300                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 301      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 302       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 303       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 304       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 305      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306      }                                                                                                             </span>
<span  style=""> 307                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 308      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 309      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 310          super.onCreate(savedInstanceState);                                                                       </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 311          AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                                  </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 312          AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                                  </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 313          mInfoBottomSheet = new InfoBottomSheetDialog(this);                                                       </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 314          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 315          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 316                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 317          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 318          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 319                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 320          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 320          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 321          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 321          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actioðŸ”µ</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 322          mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 322          mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionMðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 323          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 323          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 324          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 324          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 325          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 325          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionMðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 326          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 326          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actioðŸ”µ</abbr></span>
<span  style=""> 327                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 328          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 329          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 330          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 331                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 332          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 333                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-4933477915356212091" onmouseenter="enter('-4933477915356212091');" onmouseout="out('-4933477915356212091');" style=""> 334          mTagAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 335              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 336              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 337                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 338                  if (activity == null) return null;                                                                </span>
<span class="3059784599882537005" onmouseenter="enter('3059784599882537005');" onmouseout="out('3059784599882537005');" style=""> 339                  return activity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340              }                                                                                                     </span>
<span  style=""> 341                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 342              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 343              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 344                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 345                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346              }                                                                                                     </span>
<span  style=""> 347                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 348              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 349              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 350                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351              }                                                                                                     </span>
<span  style=""> 352                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 354              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 355                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 356                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 357                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 358                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 359                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 360                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 361                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 362                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 363                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 364                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 365                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 366                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 368          };                                                                                                        </span>
<span  style=""> 369                                                                                                                    </span>
<span class="-5778622668812359275" onmouseenter="enter('-5778622668812359275');" onmouseout="out('-5778622668812359275');" style=""> 370          mLinkAutocompleteAdapter = new CursorAdapter(getContext(), null, 0x0) {                                   </span>
<span class="4420913156406314587" onmouseenter="enter('4420913156406314587');" onmouseout="out('4420913156406314587');" style=""> 371              private Activity mActivity = requireActivity();                                                       </span>
<span  style=""> 372                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 373              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 374              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="9137674912136175390" onmouseenter="enter('9137674912136175390');" onmouseout="out('9137674912136175390');" style=""> 375                  ((TextView) view).setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376              }                                                                                                     </span>
<span  style=""> 377                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 379              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-6315376739504212293" onmouseenter="enter('-6315376739504212293');" onmouseout="out('-6315376739504212293');" style=""> 380                  return cursor.getString(cursor.getColumnIndex(Note.TITLE_INDEX_NAME));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381              }                                                                                                     </span>
<span  style=""> 382                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 383              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 384              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="9209398663457461143" onmouseenter="enter('9209398663457461143');" onmouseout="out('9209398663457461143');" style=""> 385                  return mActivity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386              }                                                                                                     </span>
<span  style=""> 387                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 388              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 389              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-2694701201332649685" onmouseenter="enter('-2694701201332649685');" onmouseout="out('-2694701201332649685');" style=""> 390                  if (filter == null) {                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 391                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                  }                                                                                                 </span>
<span  style=""> 393                                                                                                                    </span>
<span class="-5476224035795218003" onmouseenter="enter('-5476224035795218003');" onmouseout="out('-5476224035795218003');" style=""> 394                  Simplenote application = (Simplenote) mActivity.getApplication();                                 </span>
<span class="5284816788544144261" onmouseenter="enter('5284816788544144261');" onmouseout="out('5284816788544144261');" style=""> 395                  Query&lt;Note&gt; query = application.getNotesBucket().query();                                         </span>
<span class="-5887342273099451545" onmouseenter="enter('-5887342273099451545');" onmouseout="out('-5887342273099451545');" style=""> 396                  query.include(Note.PINNED_INDEX_NAME);                                                            </span>
<span class="8903361953614418852" onmouseenter="enter('8903361953614418852');" onmouseout="out('8903361953614418852');" style=""> 397                  query.include(Note.TITLE_INDEX_NAME);                                                             </span>
<span class="3677160110009294333" onmouseenter="enter('3677160110009294333');" onmouseout="out('3677160110009294333');" style=""> 398                  query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filter));   </span>
<span class="2636422943772736086" onmouseenter="enter('2636422943772736086');" onmouseout="out('2636422943772736086');" style=""> 399                  PrefUtils.sortNoteQuery(query, requireContext(), true);                                           </span>
<span class="2003026878785809505" onmouseenter="enter('2003026878785809505');" onmouseout="out('2003026878785809505');" style=""> 400                  Cursor cursor = query.execute();                                                                  </span>
<span  style=""> 401                                                                                                                    </span>
<span class="-3406397928756442195" onmouseenter="enter('-3406397928756442195');" onmouseout="out('-3406397928756442195');" style=""> 402                  final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * 48);     </span>
<span class="2053250669508349335" onmouseenter="enter('2053250669508349335');" onmouseout="out('2053250669508349335');" style=""> 403                  final int heightDisplay = DisplayUtils.getDisplayPixelSize(requireContext()).y;                   </span>
<span class="-5884104961680708619" onmouseenter="enter('-5884104961680708619');" onmouseout="out('-5884104961680708619');" style=""> 404                  final int heightDropdown = Math.min(heightDisplay / 4, heightAutocomplete);                       </span>
<span  style=""> 405                                                                                                                    </span>
<span class="6747443584027813293" onmouseenter="enter('6747443584027813293');" onmouseout="out('6747443584027813293');" style=""> 406                  mActivity.runOnUiThread(                                                                          </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 407                      new Runnable() {                                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 408                          @Override                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 409                          public void run() {                                                                       </span>
<span class="-6383818153518880076" onmouseenter="enter('-6383818153518880076');" onmouseout="out('-6383818153518880076');" style=""> 410                              mContentEditText.setDropDownHeight(heightDropdown);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412                      }                                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 413                  );                                                                                                </span>
<span class="-6729379386015983029" onmouseenter="enter('-6729379386015983029');" onmouseout="out('-6729379386015983029');" style=""> 414                  return cursor;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 416          };                                                                                                        </span>
<span  style=""> 417                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 418          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419      }                                                                                                             </span>
<span  style=""> 420                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 422      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 423          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 424          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 425          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 426          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 427          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 428          mContentEditText.setOnFocusChangeListener(this);                                                          </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 429          mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));        </span>
<span class="-6866322642818059816" onmouseenter="enter('-6866322642818059816');" onmouseout="out('-6866322642818059816');" style=""> 430          mContentEditText.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                 </span>
<span class="8857723377205297003" onmouseenter="enter('8857723377205297003');" onmouseout="out('8857723377205297003');" style=""> 431          mContentEditText.setAdapter(mLinkAutocompleteAdapter);                                                    </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 432          mTagInput = mRootView.findViewById(R.id.tag_input);                                                       </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 433          mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                        </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 434          mTagInput.setTokenizer(new SpaceTokenizer());                                                             </span>
<span class="-5626031287620429456" onmouseenter="enter('-5626031287620429456');" onmouseout="out('-5626031287620429456');" style=""> 435          mTagInput.setAdapter(mTagAutocompleteAdapter);                                                            </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 436          mTagInput.setOnFocusChangeListener(this);                                                                 </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 437          mTagChips = mRootView.findViewById(R.id.tag_chips);                                                       </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 438          mTagPadding = mRootView.findViewById(R.id.tag_padding);                                                   </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 439          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 440          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span  style=""> 441                                                                                                                    </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 442          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 443              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 444              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 445              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style=""> 446              mMarkdown.setWebViewClient(                                                                           </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style=""> 447                  new WebViewClient() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 448                      @Override                                                                                     </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style=""> 449                      public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){            </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style=""> 450                          String url = request.getUrl().toString();                                                 </span>
<span  style=""> 451                                                                                                                    </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style=""> 452                          if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                            </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style=""><abbr title=" 453                              SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 453                              SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;))ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 454                          } else {                                                                                  </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style=""> 455                              BrowserUtils.launchBrowserOrShowError(requireContext(), url);                         </span>

















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                          }                                                                                         </span>
<span  style=""> 457                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 458                          return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                  }                                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 461              );                                                                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 462 -            mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 463 -                ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                         </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 464 -                : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                         </span>
<span class="-5122207664605231942" onmouseenter="enter('-5122207664605231942');" onmouseout="out('-5122207664605231942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 465 +            mCss = ContextUtils.readCssFile(requireContext(), ThemeUtils.getCssFromStyle(requireContext()));      </span>















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466          }                                                                                                         </span>
<span  style=""> 467                                                                                                                    </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 468          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 469                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 470          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 471              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 472              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span  style=""> 473                                                                                                                    </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 474              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 475                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476              }                                                                                                     </span>
<span  style=""> 477                                                                                                                    </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 478              mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                             </span>
<span  style=""> 479                                                                                                                    </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 480              if (mIsFromWidget) {                                                                                  </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 481                  AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 482              } else {                                                                                              </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 483                  AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484              }                                                                                                     </span>
<span  style=""> 485                                                                                                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 486              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 487          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {            </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 488              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 489              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span  style=""> 490                                                                                                                    </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 491              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 492                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494          }                                                                                                         </span>
<span  style=""> 495                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 496          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 497          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 498              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 499              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 500                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 501                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 502                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 503                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                      }                                                                                             </span>
<span  style=""> 505                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 506                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 507                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 508                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 509                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 510                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 511                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 512                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513                      }                                                                                             </span>
<span  style=""> 514                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 515                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 516                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 517                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 518                      ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 519                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 521              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 522          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 523          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 524          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525      }                                                                                                             </span>
<span  style=""> 526                                                                                                                    </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 527      public void scrollToMatch(int location) {                                                                     </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 528          if (isAdded()) {                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 529              // Calculate how far to scroll to bring the match into view                                           </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 530              Layout layout = mContentEditText.getLayout();                                                         </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 531              int lineTop = layout.getLineTop(layout.getLineForOffset(location));                                   </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 532              ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534      }                                                                                                             </span>
<span  style=""> 535                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 536      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 537      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 538          super.onResume();                                                                                         </span>

<span class="-9085345560964209172" onmouseenter="enter('-9085345560964209172');" onmouseout="out('-9085345560964209172');" style=""> 539          mIsPaused = false;                                                                                        </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 540          mNotesBucket.start();                                                                                     </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style=""> 541          AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 542          mNotesBucket.addListener(this);                                                                           </span>

<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 543          mTagInput.setOnTagAddedListener(this);                                                                    </span>
<span  style=""> 544                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 545          if (mContentEditText != null) {                                                                           </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 546              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));    </span>
<span  style=""> 547                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 548              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 549                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550              }                                                                                                     </span>










<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552      }                                                                                                             </span>
<span  style=""> 553                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 554      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 555          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 556              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 557              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 558                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 559                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 560                  }                                                                                                 </span>
<span  style=""> 561                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 562                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 562                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(ContexðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 563                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 564                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 567          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 568      }                                                                                                             </span>
<span  style=""> 569                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 570      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 571      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 572          super.onPause();  // Always call the superclass method first                                              </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 573          mIsPaused = true;                                                                                         </span>
<span  style=""> 574                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 575          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 576          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 577                                                                                                                    </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 578          mTagInput.setOnTagAddedListener(null);                                                                    </span>
<span  style=""> 579                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 580          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 581              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 582              mAutoSaveHandler.post(mAutoSaveRunnable);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583          }                                                                                                         </span>
<span  style=""> 584                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 585          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 586              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587          }                                                                                                         </span>
<span  style=""> 588                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 589          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 590              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591          }                                                                                                         </span>
<span  style=""> 592                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 593          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 594          saveNote();                                                                                               </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 595          AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596      }                                                                                                             </span>
<span  style=""> 597                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 598      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 599      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 600          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 601          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 602          mNotesBucket.stop();                                                                                      </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style=""> 603          AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                        </span>

<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 604          AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 605      }                                                                                                             </span>
<span  style=""> 606                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 607      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 608      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 609          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 610                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 611          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 612              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614      }                                                                                                             </span>
<span  style=""> 615                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 616      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 617      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 618          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span  style=""> 619                                                                                                                    </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 620          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 620          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFrðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 621              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622          }                                                                                                         </span>
<span  style=""> 623                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 624          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 625          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626      }                                                                                                             </span>
<span  style=""> 627                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 628      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 629      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 630          switch (item.getItemId()) {                                                                               </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 631              case R.id.menu_checklist:                                                                             </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 632                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 633                  return true;                                                                                      </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 634              case R.id.menu_copy:                                                                                  </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 635                  if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {                    </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 636                      Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 637                  } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 638                      Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639                  }                                                                                                 </span>
<span  style=""> 640                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 641                  return true;                                                                                      </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 642              case R.id.menu_copy_internal:                                                                         </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 643                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 643                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.geðŸ”µ</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 644                      Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 645                  } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 646                      Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647                  }                                                                                                 </span>
<span  style=""> 648                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 649                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 650              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 651                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 652                  return true;                                                                                      </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 653              case R.id.menu_info:                                                                                  </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 654                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 655                  return true;                                                                                      </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 656              case R.id.menu_markdown:                                                                              </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 657                  setMarkdown(!item.isChecked());                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 658                  return true;                                                                                      </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 659              case R.id.menu_pin:                                                                                   </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 660                  NoteUtils.setNotePin(mNote, !item.isChecked());                                                   </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 661                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 662                  return true;                                                                                      </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 663              case R.id.menu_publish:                                                                               </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 664                  if (item.isChecked()) {                                                                           </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 665                      unpublishNote();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 666                  } else {                                                                                          </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 667                      publishNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668                  }                                                                                                 </span>
<span  style=""> 669                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 670                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 671              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 672                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 673                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 674              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 675                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 676                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677                  }                                                                                                 </span>
<span  style=""> 678                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 679                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 680                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 681              case android.R.id.home:                                                                               </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 682                  AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);                     </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 683                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 684                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685                  }                                                                                                 </span>
<span  style=""> 686                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 687                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 688                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 689              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 690                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692      }                                                                                                             </span>
<span  style=""> 693                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 694      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 695      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 696          if (mNote != null) {                                                                                      </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 697              MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                      </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 698              MenuItem shareItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 699              MenuItem historyItem = menu.findItem(R.id.menu_history);                                              </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 700              MenuItem publishItem = menu.findItem(R.id.menu_publish);                                              </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 701              MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 702              MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                            </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 703              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 704              mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                              </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 705              mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                                </span>
<span  style=""> 706                                                                                                                    </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 707              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 708              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 709              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span  style=""> 710                                                                                                                    </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 711              // Disable actions when note is in Trash or markdown view is shown on large device.                   </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 712              if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) {          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 713                  pinItem.setEnabled(false);                                                                        </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 714                  shareItem.setEnabled(false);                                                                      </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 715                  historyItem.setEnabled(false);                                                                    </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 716                  publishItem.setEnabled(false);                                                                    </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 717                  copyLinkItem.setEnabled(false);                                                                   </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 718                  markdownItem.setEnabled(false);                                                                   </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 719                  mChecklistMenuItem.setEnabled(false);                                                             </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 720                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 721              } else {                                                                                              </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 722                  pinItem.setEnabled(true);                                                                         </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 723                  shareItem.setEnabled(true);                                                                       </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 724                  historyItem.setEnabled(true);                                                                     </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 725                  publishItem.setEnabled(true);                                                                     </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 726                  copyLinkItem.setEnabled(mNote.isPublished());                                                     </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 727                  markdownItem.setEnabled(true);                                                                    </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 728                  mChecklistMenuItem.setEnabled(true);                                                              </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 729                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730              }                                                                                                     </span>
<span  style=""> 731                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 732              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 733                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 734              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 735                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 736              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737          }                                                                                                         </span>
<span  style=""> 738                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 739          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                        </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 740          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741      }                                                                                                             </span>
<span  style=""> 742                                                                                                                    </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 743      public void insertChecklist() {                                                                               </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 744          DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                                  </span>
<span  style=""> 745                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 746          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 747              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 748          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 749              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 750              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751          }                                                                                                         </span>
<span  style=""> 752                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 753          AnalyticsTracker.track(                                                                                   </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 754              EDITOR_CHECKLIST_INSERTED,                                                                            </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 755              CATEGORY_NOTE,                                                                                        </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 756              &quot;toolbar_button&quot;                                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 757          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758      }                                                                                                             </span>
<span  style=""> 759                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 760      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 761      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 762          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 763          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 764              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 765              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 766          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767      }                                                                                                             </span>
<span  style=""> 768                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 769      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 770          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 771          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772      }                                                                                                             </span>
<span  style=""> 773                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 774      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 775          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>



<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776      }                                                                                                             </span>
<span  style=""> 777                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 778      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 779          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>





<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780      }                                                                                                             </span>
<span  style=""> 781                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 782      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 783          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 784          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>






<span  style=""> 785                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 786          new Handler().postDelayed(                                                                                </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 787              new Runnable() {                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 788                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 789                  public void run() {                                                                               </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 790                      requireActivity().invalidateOptionsMenu();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 791                  }                                                                                                 </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 792              },                                                                                                    </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 793              getResources().getInteger(R.integer.time_animation)                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 794          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795      }                                                                                                             </span>
<span  style=""> 796                                                                                                                    </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 797      public void shareNote() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 798          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 799              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 800              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 801              AnalyticsTracker.track(                                                                               </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 802                  EDITOR_NOTE_CONTENT_SHARED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 803                  CATEGORY_NOTE,                                                                                    </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 804                  &quot;action_bar_share_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 805              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807      }                                                                                                             </span>
<span  style=""> 808                                                                                                                    </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 809      public void showHistory() {                                                                                   </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 810          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 811              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 812              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 813              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 814          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 815              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 817      }                                                                                                             </span>
<span  style=""> 818                                                                                                                    </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 819      public void showInfo() {                                                                                      </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 820          DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                                </span>
<span  style=""> 821                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 822          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 823              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 824              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 825              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827      }                                                                                                             </span>
<span  style=""> 828                                                                                                                    </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 829      private void setMarkdown(boolean isChecked) {                                                                 </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 830          mIsMarkdownEnabled = isChecked;                                                                           </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 831          showMarkdownActionOrTabs();                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 832          saveNote();                                                                                               </span>
<span  style=""> 833                                                                                                                    </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 834          // Set preference so that next new note will have markdown enabled.                                       </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 835          SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());                </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 836          SharedPreferences.Editor editor = prefs.edit();                                                           </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 837          editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 838          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839      }                                                                                                             </span>
<span  style=""> 840                                                                                                                    </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 841      private void setMarkdownEnabled(boolean enabled) {                                                            </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 842          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 843                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 844          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 845              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847      }                                                                                                             </span>
<span  style=""> 848                                                                                                                    </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 849      private void showMarkdownActionOrTabs() {                                                                     </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 850          Activity activity = getActivity();                                                                        </span>
<span  style=""> 851                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 852          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 853              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span  style=""> 854                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 855              if (mIsMarkdownEnabled) {                                                                             </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 856                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 857                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 858                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 859                      // Get markdown fragment and update content                                                   </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 860                      mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                             </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 861                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 863              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 864                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 865              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 866          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 867              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 868              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870      }                                                                                                             </span>
<span  style=""> 871                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 872      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 873          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 874                  mCss,                                                                                             </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style=""> 875                  mContentEditText.getPreviewTextContent()                                                          </span>


<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 876          );                                                                                                        </span>
<span  style=""> 877                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 878          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>



<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879      }                                                                                                             </span>
<span  style=""> 880                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 881      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 882          if (mAutoSaveHandler != null)                                                                             </span>

<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 883              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>

<span  style=""> 884                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 885          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 886                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 887          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 888              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 889          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 890              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891          }                                                                                                         </span>
<span  style=""> 892                                                                                                                    </span>
<span  style=""> 893                                                                                                                    </span>

<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 894          saveNote();                                                                                               </span>
<span  style=""> 895                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 896          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897      }                                                                                                             </span>
<span  style=""> 898                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 899      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 900          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 901          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 902          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903      }                                                                                                             </span>
<span  style=""> 904                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 905      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 906          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 907              // Restore the cursor position if possible.                                                           </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 908              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 908              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 909              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 910                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 911              if (isNoteUpdate) {                                                                                   </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 912                  // Update markdown and preview flags from updated note.                                           </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 913                  mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                                   </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 914                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span  style=""> 915                                                                                                                    </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 916                  // Show/Hide action/tabs based on markdown flag.                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 917                  showMarkdownActionOrTabs();                                                                       </span>
<span  style=""> 918                                                                                                                    </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 919                  // Save note so any local changes get synced.                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 920                  mNote.save();                                                                                     </span>
<span  style=""> 921                                                                                                                    </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 922                  // Update current note object on large screen devices in landscape orientation.                   </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 923                  if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                                      </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 924                      ((NotesActivity) requireActivity()).setCurrentNote(mNote);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925                  }                                                                                                 </span>
<span  style=""> 926                                                                                                                    </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 927                  // Update overflow popup menu.                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 928                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span  style=""> 929                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 930                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 931                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 932                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 933                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 935              }                                                                                                     </span>
<span  style=""> 936                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 937              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 938              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 939              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941      }                                                                                                             </span>
<span  style=""> 942                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 943      private void updateTagList() {                                                                                </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style=""> 944          setChips(mNote.getTagString());                                                                           </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style=""> 945          mTagInput.setText(&quot;&quot;);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 946      }                                                                                                             </span>
<span  style=""> 947                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 948      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 949          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 950          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 951          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 952          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 953          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 954          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 955          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 956          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 957                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 958          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 959                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 960          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 961                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 962          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 963                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 964          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 965          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 966              return newText.length();                                                                              </span>
<span  style=""> 967                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 968          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 969          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 970                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 971          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 972              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 972              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 973              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 973              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 974          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 975              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 976          }                                                                                                         </span>
<span  style=""> 977                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 978          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 979          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 980              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 981                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 982          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 983          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 984      }                                                                                                             </span>
<span  style=""> 985                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 986      @Override                                                                                                     </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style=""> 987      public void onTagAdded(String tag) {                                                                          </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style=""> 988          if (mNote == null || !isAdded()) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 989              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 990          }                                                                                                         </span>
<span  style=""> 991                                                                                                                    </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style=""> 992          if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 993              AnalyticsTracker.track(                                                                               </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style=""> 994                  EDITOR_TAG_ADDED,                                                                                 </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 995                  CATEGORY_NOTE,                                                                                    </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 996                  &quot;tag_added_to_note&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 997              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998          }                                                                                                         </span>
<span  style=""> 999                                                                                                                    </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style="">1000          mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1001          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1002          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1003          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1004      }                                                                                                             </span>
<span  style="">1005                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1006      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style="">1007      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style="">1008          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1009      }                                                                                                             </span>
<span  style="">1010                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1011      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style="">1012      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="">1013          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="">1014          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style="">1015          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016      }                                                                                                             </span>
<span  style="">1017                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1018      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style="">1019      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style="">1020          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="">1021          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style="">1022              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style="">1023              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1024          }                                                                                                         </span>
<span  style="">1025                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style="">1026          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1027          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="">1028              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style="">1029              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030          }                                                                                                         </span>
<span  style="">1031                                                                                                                    </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1032          if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                             </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1033              ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1034          }                                                                                                         </span>
<span  style="">1035                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1036          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1037          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1038          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1039          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040      }                                                                                                             </span>
<span  style="">1041                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1042      /**                                                                                                           </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1043       * Set the note title to be a larger size and bold style.                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1044       *                                                                                                            </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1045       * Remove all existing spans before applying spans or performance issues will occur.  Since both              </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1046       * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all               </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1047       * spans are removed when {@link MetricAffectingSpan} is removed.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1048       */                                                                                                           </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1049      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style="">1050          for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {     </span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1051              if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                                  </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1052                  editable.removeSpan(span);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1053              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1054          }                                                                                                         </span>
<span  style="">1055                                                                                                                    </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1056          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span  style="">1057                                                                                                                    </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1058          if (newLinePosition == 0) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1059              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060          }                                                                                                         </span>
<span  style="">1061                                                                                                                    </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1062          int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();                       </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style="">1063          editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);      </span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style="">1064          editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065      }                                                                                                             </span>
<span  style="">1066                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1067      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1068          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1069          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1070          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1071          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072      }                                                                                                             </span>
<span  style="">1073                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1074      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1075          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1076              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077          }                                                                                                         </span>
<span  style="">1078                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1079          AppLog.add(                                                                                               </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1080              Type.ACTION,                                                                                          </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1081              &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                                       </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1082                  &quot; / Title: &quot; + mNote.getTitle() +                                                                 </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1083                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                            </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1084                  &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1085          );                                                                                                        </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1086          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087      }                                                                                                             </span>
<span  style="">1088                                                                                                                    </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1089      public boolean isPlaceholderVisible() {                                                                       </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1090          if (mPlaceholderView != null) {                                                                           </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1091              return mPlaceholderView.getVisibility() == View.VISIBLE;                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1092          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1093              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095      }                                                                                                             </span>
<span  style="">1096                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1097      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1098          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1099              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1100              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101          }                                                                                                         </span>
<span  style="">1102                                                                                                                    </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1103          if (mPlaceholderView != null) {                                                                           </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1104              mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106      }                                                                                                             </span>
<span  style="">1107                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1108      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1109      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1110          if (!hasFocus) {                                                                                          </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1111              String tags = getNoteTagsString().trim();                                                             </span>
<span  style="">1112                                                                                                                    </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1113              if (mTagInput.getText().toString().trim().length() &gt; 0                                                </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1114                  &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                                </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1115                  onTagAdded(mTagInput.getText().toString());                                                       </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1116              } else if (tags.length() &gt; 0) {                                                                       </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1117                  setChips(tags);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1118              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1119          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1120      }                                                                                                             </span>
<span  style="">1121                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1122      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1123          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124      }                                                                                                             </span>
<span  style="">1125                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1126      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1127          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128      }                                                                                                             </span>
<span  style="">1129                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1130      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1131          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1132              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1133          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1134              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1135          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136      }                                                                                                             </span>
<span  style="">1137                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1138      private String getNoteTagsString() {                                                                          </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1139          StringBuilder tags = new StringBuilder();                                                                 </span>
<span  style="">1140                                                                                                                    </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1141          for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                                      </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1142              tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143          }                                                                                                         </span>
<span  style="">1144                                                                                                                    </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1145          return tags.toString();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1146      }                                                                                                             </span>
<span  style="">1147                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1148      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1149       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1150       */                                                                                                           </span>
<span  style="">1151                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1152      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1153      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1154          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1155          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1156              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1157          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158      }                                                                                                             </span>
<span  style="">1159                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1160      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1161      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1162          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1163          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1164              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166      }                                                                                                             </span>
<span  style="">1167                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1168      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1169      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1170          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1171              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172          }                                                                                                         </span>
<span  style="">1173                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1174          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1175              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176          }                                                                                                         </span>
<span  style="">1177                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1178          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1179          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1180          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1181              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1182          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1183          ft.addToBackStack(null);                                                                                  </span>
<span  style="">1184                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1185          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1186          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1187          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1188          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189      }                                                                                                             </span>
<span  style="">1190                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1191      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1192      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1193          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194      }                                                                                                             </span>
<span  style="">1195                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1196      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1197      public void onShareDismissed() {                                                                              </span>
<span  style="">1198                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1199      }                                                                                                             </span>
<span  style="">1200                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1201      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1202       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1203       */                                                                                                           </span>
<span  style="">1204                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1205      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1206      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1207          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1208          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1209              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1210          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211      }                                                                                                             </span>
<span  style="">1212                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1213      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1214      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1215          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1216              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1218          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1219      }                                                                                                             </span>
<span  style="">1220                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1221      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1222      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1223          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1224              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225          }                                                                                                         </span>
<span  style="">1226                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1227          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1228              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1230      }                                                                                                             </span>
<span  style="">1231                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1232      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1233      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1234          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235      }                                                                                                             </span>
<span  style="">1236                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1237      private void saveNote() {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1238          try {                                                                                                     </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1239              if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||            </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1240                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1240                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1241                  return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1242              } else {                                                                                              </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1243                  mNote = mNotesBucket.get(mNote.getSimperiumKey());                                                </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1244                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245              }                                                                                                     </span>
<span  style="">1246                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1247              String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1248              String tagString = getNoteTagsString();                                                               </span>
<span  style="">1249                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1250              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1250              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnableðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1251                  mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1252                  mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1253                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1254                  mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1255                  mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1256                  mNote.save();                                                                                     </span>
<span  style="">1257                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1258                  AnalyticsTracker.track(                                                                           </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1259                      EDITOR_NOTE_EDITED,                                                                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1260                      CATEGORY_NOTE,                                                                                </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1261                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1262                  );                                                                                                </span>
<span  style="">1263                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1264                  AppLog.add(                                                                                       </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1265                      Type.SYNC,                                                                                    </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1266                      &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +                  </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1267                          &quot; / Title: &quot; + mNote.getTitle() +                                                         </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1268                          &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                               </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1269                          &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1270                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271              }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1272          } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1273              exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1275      }                                                                                                             </span>
<span  style="">1276                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1277      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1278      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1279      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1280      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1281          mCurrentCursorPosition = selEnd;                                                                          </span>
<span  style="">1282                                                                                                                    </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1283          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1284              Editable noteContent = mContentEditText.getText();                                                    </span>
<span  style="">1285                                                                                                                    </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1286              if (noteContent == null) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1287                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288              }                                                                                                     </span>
<span  style="">1289                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1290              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span  style="">1291                                                                                                                    </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1292              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1293                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1294                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1295                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1295                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span  style="">1296                                                                                                                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1297                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1298                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1299                      updateMenuItems();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1300                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301                  }                                                                                                 </span>
<span  style="">1302                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1303                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1304                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1305                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span  style="">1306                                                                                                                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1307                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1308                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309                      }                                                                                             </span>
<span  style="">1310                                                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1311                      updateMenuItems();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1313              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1314                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1315                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1317          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1318              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1319              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1320          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321      }                                                                                                             </span>
<span  style="">1322                                                                                                                    </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1323      private void updateMenuItems() {                                                                              </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1324          mCopyMenuItem.setIcon(mCopyIcon);                                                                         </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1325          mShareMenuItem.setIcon(mShareIcon);                                                                       </span>
<span  style="">1326                                                                                                                    </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1327          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1328              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1329                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1330                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1331              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1332                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1333                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1334              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1335                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1336                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1337              } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                             </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1338                  mViewLinkMenuItem.setIcon(mLinkIcon);                                                             </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1339                  mViewLinkMenuItem.setTitle(getString(R.string.open_note));                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1340              } else {                                                                                              </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1341                  mViewLinkMenuItem.setIcon(mBrowserIcon);                                                          </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1342                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345      }                                                                                                             </span>
<span  style="">1346                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1347      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1348          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1349              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1350              mNote.save();                                                                                         </span>
<span  style="">1351                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1352              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1353              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1354                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1355              AnalyticsTracker.track(                                                                               </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1356                  isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                                    </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1357                  CATEGORY_NOTE,                                                                                    </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1358                  &quot;publish_note_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1359              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1361      }                                                                                                             </span>
<span  style="">1362                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1363      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1364          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1365              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366          }                                                                                                         </span>
<span  style="">1367                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1368          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1369          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1370                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1371          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1372              if (mNote.isPublished()) {                                                                            </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1373                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="7497833686297233990" onmouseenter="enter('7497833686297233990');" onmouseout="out('7497833686297233990');" style="">1374                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).show();           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1375                  } else {                                                                                          </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1376                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1377                          .setAction(                                                                               </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1378                              R.string.undo,                                                                        </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1379                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1380                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1381                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1382                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1383                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385                              }                                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1386                          )                                                                                         </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1387                          .show();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1389              } else {                                                                                              </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1390                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1391                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1392                  } else {                                                                                          </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1393                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1394                          .setAction(                                                                               </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1395                              R.string.undo,                                                                        </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1396                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1397                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1398                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1399                                      mHideActionOnSuccess = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1400                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1402                              }                                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1403                          )                                                                                         </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1404                          .show();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1405                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1406              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1407          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1408              if (mNote.isPublished()) {                                                                            </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1409                  Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1410                      .setAction(                                                                                   </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1411                          R.string.retry,                                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1412                          new View.OnClickListener() {                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1413                              @Override                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1414                              public void onClick(View v) {                                                         </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1415                                  mHideActionOnSuccess = true;                                                      </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1416                                  unpublishNote();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1417                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418                          }                                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1419                      )                                                                                             </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1420                      .show();                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1421              } else {                                                                                              </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1422                  Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                            </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1423                      .setAction(                                                                                   </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1424                          R.string.retry,                                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1425                          new View.OnClickListener() {                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1426                              @Override                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1427                              public void onClick(View v) {                                                         </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1428                                  mHideActionOnSuccess = true;                                                      </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1429                                  publishNote();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431                          }                                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1432                      )                                                                                             </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1433                      .show();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1434              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1435          }                                                                                                         </span>
<span  style="">1436                                                                                                                    </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1437          mHideActionOnSuccess = false;                                                                             </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1438          requireActivity().invalidateOptionsMenu();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1439      }                                                                                                             </span>
<span  style="">1440                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1441      private void publishNote() {                                                                                  </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1442          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1443              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1444              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1445          }                                                                                                         </span>
<span  style="">1446                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1447          if (isAdded()) {                                                                                          </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style="">1448              mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);      </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1449              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1450          }                                                                                                         </span>
<span  style="">1451                                                                                                                    </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1452          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1453      }                                                                                                             </span>
<span  style="">1454                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1455      private void unpublishNote() {                                                                                </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1456          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1457              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1458              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459          }                                                                                                         </span>
<span  style="">1460                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1461          if (isAdded()) {                                                                                          </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style="">1462              mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);    </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1463              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1464          }                                                                                                         </span>
<span  style="">1465                                                                                                                    </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1466          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1467      }                                                                                                             </span>
<span  style="">1468                                                                                                                    </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1469      private void showShare(String text) {                                                                         </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1470          startActivity(                                                                                            </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1471              ShareCompat.IntentBuilder.from(requireActivity())                                                     </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1472                  .setText(text)                                                                                    </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1473                  .setType(&quot;text/plain&quot;)                                                                            </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1474                  .createChooserIntent()                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1475          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476      }                                                                                                             </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1477      private void showShareSheet() {                                                                               </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1478          if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                             </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1479              mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1480          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1481      }                                                                                                             </span>
<span  style="">1482                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1483      private void showInfoSheet() {                                                                                </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1484          if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                               </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1485              mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1486          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1487      }                                                                                                             </span>
<span  style="">1488                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1489      private void showHistorySheet() {                                                                             </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1490          if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                         </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1491              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1492              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1493              saveNote();                                                                                           </span>
<span  style="">1494                                                                                                                    </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1495              mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1496          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1497      }                                                                                                             </span>
<span  style="">1498                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1499      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1500      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501      }                                                                                                             </span>
<span  style="">1502                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1503      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1504      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1505          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1506              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1507                  try {                                                                                             </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="">1508                      mNotesBucket = noteBucket;                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1509                      final Note updatedNote = mNotesBucket.get(key);                                               </span>


<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1510                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1511                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1512                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1513                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1514                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1515                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516                                  }                                                                                 </span>
<span  style="">1517                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1518                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1519                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1520                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1521                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1522                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1523                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1524                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1525                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1526              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1527          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1528      }                                                                                                             </span>
<span  style="">1529                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1530      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1531      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1532          if (mIsPaused) {                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1533              mNotesBucket.removeListener(this);                                                                    </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="">1534              mNotesBucket.stop();                                                                                  </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="">1535              AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                    </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1536          }                                                                                                         </span>
<span  style="">1537                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1538          AppLog.add(                                                                                               </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1539              Type.SYNC,                                                                                            </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1540              &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                          </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1541                  &quot; / Title: &quot; + note.getTitle() +                                                                  </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1542                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                             </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1543                  &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1544          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1545      }                                                                                                             </span>
<span  style="">1546                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1547      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1548      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1549          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1550          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1551              return;                                                                                               </span>
<span  style="">1552                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1553          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1554          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1555              return;                                                                                               </span>
<span  style="">1556                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1557          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558      }                                                                                                             </span>
<span  style="">1559                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1560      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1561          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1562                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1563          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1564              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1565          }                                                                                                         </span>
<span  style="">1566                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1567          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1568          protected void onPreExecute() {                                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1569              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1570                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1571              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1572                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1573                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1574              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1575          }                                                                                                         </span>
<span  style="">1576                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1577          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1578          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1579              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1580                                                                                                                    </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1581              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1582                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1583              }                                                                                                     </span>
<span  style="">1584                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1585              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1586              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1587              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1588                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1589              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1590                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span  style="">1591                                                                                                                    </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1592                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1593                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1594                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595                  }                                                                                                 </span>
<span  style="">1596                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1597                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1598                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1599                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1600                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1601                      AppLog.add(                                                                                   </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1602                          Type.SYNC,                                                                                </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1603                          &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                                  </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1604                              &quot; / Title: &quot; + fragment.mNote.getTitle() +                                            </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style="">1605                              &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +       </span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1606                              &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1607                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1608                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1609              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1610                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1611                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span  style="">1612                                                                                                                    </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1613                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1614                      Note currentNote = notesCursor.getObject();                                                   </span>
<span  style="">1615                                                                                                                    </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1616                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1617                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1618                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1620                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1621              }                                                                                                     </span>
<span  style="">1622                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1623              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1624          }                                                                                                         </span>
<span  style="">1625                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1626          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1627          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1628              final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                               </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style="">1629              if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1630                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1631              }                                                                                                     </span>
<span  style="">1632                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1633              fragment.refreshContent(false);                                                                       </span>
<span  style="">1634                                                                                                                    </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1635              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1636                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1636                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1637                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1638                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639              }                                                                                                     </span>
<span  style="">1640                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1641              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1642                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1643              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1644                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1645                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1646                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1647                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1648                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1649                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1650                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1651                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1652                          }                                                                                         </span>
<span  style="">1653                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1654                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1654                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSysðŸ”µ</abbr></span>
<span  style="">1655                                                                                                                    </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1656                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1657                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1658                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1659                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1660                  }, 100);                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1661              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1662                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1663                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1664              }                                                                                                     </span>
<span  style="">1665                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1666              fragment.updateMarkdownView();                                                                        </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1667              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1668              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1669              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1670          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1671      }                                                                                                             </span>
<span  style="">1672                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1673      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1674          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1675                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1676          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1677              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1678          }                                                                                                         </span>
<span  style="">1679                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1680          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1681          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1682              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1683                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1684              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1685                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1686              }                                                                                                     </span>
<span  style="">1687                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1688              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1689          }                                                                                                         </span>
<span  style="">1690                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1691          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1692          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1693              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1694                                                                                                                    </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1695              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1696                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1697                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1698                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1699              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1700          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1701      }                                                                                                             </span>
<span  style="">1702                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1703      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1704          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1705              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1706          }                                                                                                         </span>
<span  style="">1707                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1708          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1709              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1710          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1711      }                                                                                                             </span>
<span  style="">1712                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1713      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1714      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1715          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1716              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1717          }                                                                                                         </span>
<span  style="">1718                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1719          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1720          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1721              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1722              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1723          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1724              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1725              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1726                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1727                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1728                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1729              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1730              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1731              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1733      }                                                                                                             </span>
<span  style="">1734                                                                                                                    </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1735      private ColorStateList getChipBackgroundColor() {                                                             </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1736          int[][] states = new int[][] {                                                                            </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1737              new int[] { android.R.attr.state_checked}, // checked                                                 </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1738              new int[] {-android.R.attr.state_checked}  // unchecked                                               </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1739          };                                                                                                        </span>
<span  style="">1740                                                                                                                    </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1741          int[] colors = new int[] {                                                                                </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1742              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),              </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1743              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)              </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1744          };                                                                                                        </span>
<span  style="">1745                                                                                                                    </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1746          return new ColorStateList(states, colors);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1747      }                                                                                                             </span>
<span  style="">1748                                                                                                                    </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1749      private void setChips(CharSequence text) {                                                                    </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1750          mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                  </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1751          mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                    </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1752          mTagChips.setSingleSelection(true);                                                                       </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1753          mTagChips.removeAllViews();                                                                               </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1754          SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                              </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1755          tags.setString(text.toString());                                                                          </span>
<span  style="">1756                                                                                                                    </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1757          for (String tag : tags) {                                                                                 </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1758              final Chip chip = new Chip(requireContext());                                                         </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1759              chip.setText(tag);                                                                                    </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1760              chip.setCheckable(true);                                                                              </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1761              chip.setCheckedIcon(null);                                                                            </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1762              chip.setChipBackgroundColor(getChipBackgroundColor());                                                </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1763              chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor));          </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1764              chip.setStateListAnimator(null);                                                                      </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1765              chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1766                  @Override                                                                                         </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1767                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                      </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1768                      chip.setCloseIconVisible(isChecked);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1769                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1770              });                                                                                                   </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1771              chip.setOnCloseIconClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1772                  @Override                                                                                         </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1773                  public void onClick(View view) {                                                                  </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1774                      mTagChips.removeView(view);                                                                   </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1775                      updateTags();                                                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1776                      AnalyticsTracker.track(                                                                       </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1777                          EDITOR_TAG_REMOVED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1778                          CATEGORY_NOTE,                                                                            </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1779                          &quot;tag_removed_from_note&quot;                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1780                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1781                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1782              });                                                                                                   </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1783              mTagChips.addView(chip);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1785      }                                                                                                             </span>
<span  style="">1786                                                                                                                    </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1787      private void updateTags() {                                                                                   </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1788          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1789              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1790          }                                                                                                         </span>
<span  style="">1791                                                                                                                    </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1792          mNote.setTagString(getNoteTagsString());                                                                  </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1793          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1794          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1795          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1796      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1797  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   4  import android.content.Context;                                                                                   </span>
<span class="4122587240602557356" onmouseenter="enter('4122587240602557356');" onmouseout="out('4122587240602557356');" style="">   5  import android.content.SharedPreferences;                                                                         </span>
<span class="437349496656716435" onmouseenter="enter('437349496656716435');" onmouseout="out('437349496656716435');" style="">   6  import android.content.res.ColorStateList;                                                                        </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   7  import android.database.Cursor;                                                                                   </span>
<span class="-5606798514618908790" onmouseenter="enter('-5606798514618908790');" onmouseout="out('-5606798514618908790');" style="">   8  import android.graphics.Typeface;                                                                                 </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  10  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  11  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  12  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  13  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  14  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  15  import android.text.Spanned;                                                                                      </span>
<span class="-3299261040401335998" onmouseenter="enter('-3299261040401335998');" onmouseout="out('-3299261040401335998');" style="">  16  import android.text.TextUtils.SimpleStringSplitter;                                                               </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17  import android.text.TextWatcher;                                                                                  </span>
<span class="-654170262772204786" onmouseenter="enter('-654170262772204786');" onmouseout="out('-654170262772204786');" style="">  18  import android.text.style.MetricAffectingSpan;                                                                    </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  19  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-6813443535687611228" onmouseenter="enter('-6813443535687611228');" onmouseout="out('-6813443535687611228');" style="">  20  import android.text.style.StyleSpan;                                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  21  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  22  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  23  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  24  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  25  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  26  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  27  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  28  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  29  import android.view.ViewGroup;                                                                                    </span>
<span class="2310015860452416546" onmouseenter="enter('2310015860452416546');" onmouseout="out('2310015860452416546');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +import android.view.ViewStub;                                                                                     </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  31  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  32  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="1348319594514771408" onmouseenter="enter('1348319594514771408');" onmouseout="out('1348319594514771408');" style="">  33  import android.webkit.WebResourceRequest;                                                                         </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  34  import android.webkit.WebView;                                                                                    </span>
<span class="-3167847991483127041" onmouseenter="enter('-3167847991483127041');" onmouseout="out('-3167847991483127041');" style="">  35  import android.webkit.WebViewClient;                                                                              </span>
<span class="2736968318319789680" onmouseenter="enter('2736968318319789680');" onmouseout="out('2736968318319789680');" style="">  36  import android.widget.CompoundButton;                                                                             </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  37  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  38  import android.widget.LinearLayout;                                                                               </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  39  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  40  import android.widget.Toast;                                                                                      </span>
<span  style="">  41                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  42  import androidx.annotation.NonNull;                                                                               </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  43  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  44  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-6344652174315873597" onmouseenter="enter('-6344652174315873597');" onmouseout="out('-6344652174315873597');" style="">  45  import androidx.core.app.ShareCompat;                                                                             </span>
<span class="-362404946986079023" onmouseenter="enter('-362404946986079023');" onmouseout="out('-362404946986079023');" style="">  46  import androidx.core.view.MenuCompat;                                                                             </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  47  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  48  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  49  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span class="-7272383226560052741" onmouseenter="enter('-7272383226560052741');" onmouseout="out('-7272383226560052741');" style="">  50  import androidx.preference.PreferenceManager;                                                                     </span>
<span  style="">  51                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  52  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  53  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  54  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="160698548927534529" onmouseenter="enter('160698548927534529');" onmouseout="out('160698548927534529');" style="">  55  import com.automattic.simplenote.utils.AppLog;                                                                    </span>
<span class="7580776162261256599" onmouseenter="enter('7580776162261256599');" onmouseout="out('7580776162261256599');" style="">  56  import com.automattic.simplenote.utils.AppLog.Type;                                                               </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  57  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="1593315676680608324" onmouseenter="enter('1593315676680608324');" onmouseout="out('1593315676680608324');" style="">  58  import com.automattic.simplenote.utils.BrowserUtils;                                                              </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  59  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  60  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  61  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  62  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="6713747859106964949" onmouseenter="enter('6713747859106964949');" onmouseout="out('6713747859106964949');" style="">  63  import com.automattic.simplenote.utils.NetworkUtils;                                                              </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  64  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  65  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  66  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  67  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  68  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-643769428942460504" onmouseenter="enter('-643769428942460504');" onmouseout="out('-643769428942460504');" style="">  69  import com.automattic.simplenote.utils.TagUtils;                                                                  </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  70  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  71  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  72  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  73  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  74  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  75  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="4924672443805777373" onmouseenter="enter('4924672443805777373');" onmouseout="out('4924672443805777373');" style="">  76  import com.google.android.material.chip.Chip;                                                                     </span>
<span class="6530176725815500896" onmouseenter="enter('6530176725815500896');" onmouseout="out('6530176725815500896');" style="">  77  import com.google.android.material.chip.ChipGroup;                                                                </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  78  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  79  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  80  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  81  import com.simperium.client.Query;                                                                                </span>
<span  style="">  82                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  83  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  84  import java.util.Calendar;                                                                                        </span>
<span  style="">  85                                                                                                                    </span>
<span class="-3102294303099779792" onmouseenter="enter('-3102294303099779792');" onmouseout="out('-3102294303099779792');" style="">  86  import static com.automattic.simplenote.analytics.AnalyticsTracker.CATEGORY_NOTE;                                 </span>
<span class="5242531748460347937" onmouseenter="enter('5242531748460347937');" onmouseout="out('5242531748460347937');" style="">  87  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED;                </span>
<span class="-3490868053375355616" onmouseenter="enter('-3490868053375355616');" onmouseout="out('-3490868053375355616');" style="">  88  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED;               </span>
<span class="-2121854313245668982" onmouseenter="enter('-2121854313245668982');" onmouseout="out('-2121854313245668982');" style="">  89  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_EDITED;                       </span>
<span class="-6581780444010205945" onmouseenter="enter('-6581780444010205945');" onmouseout="out('-6581780444010205945');" style="">  90  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED;                    </span>
<span class="-9109271177878770606" onmouseenter="enter('-9109271177878770606');" onmouseout="out('-9109271177878770606');" style="">  91  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED;                  </span>
<span class="1895845895606351499" onmouseenter="enter('1895845895606351499');" onmouseout="out('1895845895606351499');" style="">  92  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_ADDED;                         </span>
<span class="-7938671928844888956" onmouseenter="enter('-7938671928844888956');" onmouseout="out('-7938671928844888956');" style="">  93  import static com.automattic.simplenote.analytics.AnalyticsTracker.Stat.EDITOR_TAG_REMOVED;                       </span>
<span class="8057784740076816561" onmouseenter="enter('8057784740076816561');" onmouseout="out('8057784740076816561');" style="">  94  import static com.automattic.simplenote.utils.SearchTokenizer.SPACE;                                              </span>
<span class="-4405840676582391526" onmouseenter="enter('-4405840676582391526');" onmouseout="out('-4405840676582391526');" style="">  95  import static com.automattic.simplenote.utils.SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX;                           </span>
<span  style="">  96                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  97  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  98          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  99          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style=""> 100          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style=""> 101          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style=""> 102          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style=""> 103                                                                                                                    </span>
<span class="7313308760576274084" onmouseenter="enter('7313308760576274084');" onmouseout="out('7313308760576274084');" style=""> 104      public static final String ARG_IS_FROM_WIDGET = &quot;is_from_widget&quot;;                                             </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style=""> 105      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style=""> 106      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style=""> 107      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style=""> 108      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style=""> 109      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span  style=""> 110                                                                                                                    </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style=""> 111      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style=""> 112      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style=""> 113      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style=""> 114      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style=""> 115      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style=""> 116      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style=""> 117      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 118          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 119          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 120              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 122      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 123      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 124      private View mRootView;                                                                                       </span>
<span class="8292114391111638673" onmouseenter="enter('8292114391111638673');" onmouseout="out('8292114391111638673');" style=""> 125      private View mTagPadding;                                                                                     </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 126      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-1116191624704212145" onmouseenter="enter('-1116191624704212145');" onmouseout="out('-1116191624704212145');" style=""> 127      private ChipGroup mTagChips;                                                                                  </span>
<span class="7794609246836871312" onmouseenter="enter('7794609246836871312');" onmouseout="out('7794609246836871312');" style=""> 128      private TagsMultiAutoCompleteTextView mTagInput;                                                              </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 129      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 130      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 131      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 132      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="6468836442965828651" onmouseenter="enter('6468836442965828651');" onmouseout="out('6468836442965828651');" style=""> 133      private CursorAdapter mLinkAutocompleteAdapter;                                                               </span>
<span class="-1742340169214255459" onmouseenter="enter('-1742340169214255459');" onmouseout="out('-1742340169214255459');" style=""> 134      private CursorAdapter mTagAutocompleteAdapter;                                                                </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 135      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 136      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 137      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 138      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 139      private ActionMode mActionMode;                                                                               </span>
<span class="6272698018239268533" onmouseenter="enter('6272698018239268533');" onmouseout="out('6272698018239268533');" style=""> 140      private MenuItem mChecklistMenuItem;                                                                          </span>
<span class="-801211553419280849" onmouseenter="enter('-801211553419280849');" onmouseout="out('-801211553419280849');" style=""> 141      private MenuItem mCopyMenuItem;                                                                               </span>
<span class="-8722853698202618925" onmouseenter="enter('-8722853698202618925');" onmouseout="out('-8722853698202618925');" style=""> 142      private MenuItem mInformationMenuItem;                                                                        </span>
<span class="6754990951372191595" onmouseenter="enter('6754990951372191595');" onmouseout="out('6754990951372191595');" style=""> 143      private MenuItem mShareMenuItem;                                                                              </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 144      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 145      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 146      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 147      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-3046310933001836521" onmouseenter="enter('-3046310933001836521');" onmouseout="out('-3046310933001836521');" style=""> 148      private Drawable mBrowserIcon;                                                                                </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 149      private Drawable mCallIcon;                                                                                   </span>
<span class="-4798548703316944753" onmouseenter="enter('-4798548703316944753');" onmouseout="out('-4798548703316944753');" style=""> 150      private Drawable mCopyIcon;                                                                                   </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 151      private Drawable mEmailIcon;                                                                                  </span>
<span class="-3265647716576371737" onmouseenter="enter('-3265647716576371737');" onmouseout="out('-3265647716576371737');" style=""> 152      private Drawable mLinkIcon;                                                                                   </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 153      private Drawable mMapIcon;                                                                                    </span>
<span class="-8263922286266999556" onmouseenter="enter('-8263922286266999556');" onmouseout="out('-8263922286266999556');" style=""> 154      private Drawable mShareIcon;                                                                                  </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 155      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 156      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 157      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 158      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="6183483689682550304" onmouseenter="enter('6183483689682550304');" onmouseout="out('6183483689682550304');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +    private LinearLayout mError;                                                                                  </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +    private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +    private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +    private WebView mMarkdown;                                                                                    </span>
<span class="-2764923775971952187" onmouseenter="enter('-2764923775971952187');" onmouseout="out('-2764923775971952187');" style=""> 163      private boolean mIsPaused;                                                                                    </span>
<span class="-4741322818714001783" onmouseenter="enter('-4741322818714001783');" onmouseout="out('-4741322818714001783');" style=""> 164      private boolean mIsFromWidget;                                                                                </span>
<span  style=""> 165                                                                                                                    </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 166      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 167      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 168          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 169          public void run() {                                                                                       </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 170              if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 171                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172              }                                                                                                     </span>
<span  style=""> 173                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 174              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 175                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 176                  public void run() {                                                                               </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 177                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 177                      if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; ðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 178                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 179                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 182              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 184      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 185      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 186      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 187      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 188      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 189          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 190          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 191          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 192              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 193              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style=""> 194                                                                                                                    </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 195              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 196                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="1687703529546627770" onmouseenter="enter('1687703529546627770');" onmouseout="out('1687703529546627770');" style=""> 197                  mCopyMenuItem = menu.findItem(R.id.menu_copy);                                                    </span>
<span class="-7121630790551700692" onmouseenter="enter('-7121630790551700692');" onmouseout="out('-7121630790551700692');" style=""> 198                  mShareMenuItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 199                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 200                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 201                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 202                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 203                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204              }                                                                                                     </span>
<span  style=""> 205                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 206              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 206              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgrðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 207              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 207              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().ðŸ”µ</abbr></span>

<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 208              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209          }                                                                                                         </span>
<span  style=""> 210                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 211          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 212          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 213          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 214          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 215              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216          }                                                                                                         </span>
<span  style=""> 217                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 218          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 219          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 220          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 221              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 222                  case R.id.menu_view_link:                                                                         </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 223                      if (mLinkText != null) {                                                                      </span>
<span class="-3849773635172233058" onmouseenter="enter('-3849773635172233058');" onmouseout="out('-3849773635172233058');" style=""> 224                          if (mLinkText.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                       </span>
<span class="3123112009632250348" onmouseenter="enter('3123112009632250348');" onmouseout="out('3123112009632250348');" style=""><abbr title=" 225                              SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 225                              SimplenoteLinkify.openNote(requireActivity(), mLinkText.replace(SIMPLENOTE_LINK_PREFIXðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 226                          } else {                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 227                              try {                                                                                 </span>
<span class="5138461002499295767" onmouseenter="enter('5138461002499295767');" onmouseout="out('5138461002499295767');" style=""> 228                                  BrowserUtils.launchBrowserOrShowError(requireContext(), mLinkText);               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 229                              } catch (Exception e) {                                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 230                                  e.printStackTrace();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232                          }                                                                                         </span>
<span  style=""> 233                                                                                                                    </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 234                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235                      }                                                                                             </span>
<span  style=""> 236                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 237                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 238                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 239                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-3995442483487827848" onmouseenter="enter('-3995442483487827848');" onmouseout="out('-3995442483487827848');" style=""> 240                          if (BrowserUtils.copyToClipboard(requireContext(), mLinkText)) {                          </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 241                              Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 242                          } else {                                                                                  </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 243                              Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244                          }                                                                                         </span>
<span  style=""> 245                                                                                                                    </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 246                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247                      }                                                                                             </span>
<span  style=""> 248                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 249                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 250                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 251                      if (mLinkText != null) {                                                                      </span>
<span class="8185075650085964623" onmouseenter="enter('8185075650085964623');" onmouseout="out('8185075650085964623');" style=""> 252                          showShare(mLinkText);                                                                     </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 253                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                      }                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 256                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 257                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 258                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260          }                                                                                                         </span>
<span  style=""> 261                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 262          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 264          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style=""> 265              if (mActionMode != null) {                                                                            </span>
<span class="-4156109494689565575" onmouseenter="enter('-4156109494689565575');" onmouseout="out('-4156109494689565575');" style=""> 266                  mActionMode.setSubtitle(&quot;&quot;);                                                                      </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 267                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268              }                                                                                                     </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 270              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 271                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 272                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 273                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 274                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 274                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.trðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 276                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 277                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 278              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 280      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 281      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="3063974407169104073" onmouseenter="enter('3063974407169104073');" onmouseout="out('3063974407169104073');" style=""> 282      private boolean mHideActionOnSuccess;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 283      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 284      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 285          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 286          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 287              if (!isAdded()) return;                                                                               </span>
<span  style=""> 288                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 289              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 290                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 291                  public void run() {                                                                               </span>
<span  style=""> 292                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 293                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 294                      mNote.save();                                                                                 </span>
<span  style=""> 295                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 296                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 298              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 300      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 301 -    private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 302 -    private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 303 -    private WebView mMarkdown;                                                                                    </span>
<span  style=""> 304                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 305      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 306       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 307       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 308       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 309      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310      }                                                                                                             </span>
<span  style=""> 311                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 312      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 313      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 314          super.onCreate(savedInstanceState);                                                                       </span>
<span class="-8622194682109655372" onmouseenter="enter('-8622194682109655372');" onmouseout="out('-8622194682109655372');" style=""> 315          AppLog.add(Type.NETWORK, NetworkUtils.getNetworkInfo(requireContext()));                                  </span>
<span class="4067704072097909993" onmouseenter="enter('4067704072097909993');" onmouseout="out('4067704072097909993');" style=""> 316          AppLog.add(Type.SCREEN, &quot;Created (NoteEditorFragment)&quot;);                                                  </span>
<span class="-7986434609852753971" onmouseenter="enter('-7986434609852753971');" onmouseout="out('-7986434609852753971');" style=""> 317          mInfoBottomSheet = new InfoBottomSheetDialog(this);                                                       </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 318          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 319          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 320                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 321          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 322          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 323                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 324          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 324          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-6467507895043748101" onmouseenter="enter('-6467507895043748101');" onmouseout="out('-6467507895043748101');" style=""><abbr title=" 325          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actionModeTextColor);"> 325          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_24dp, R.attr.actioðŸ”µ</abbr></span>
<span class="467194819286006014" onmouseenter="enter('467194819286006014');" onmouseout="out('467194819286006014');" style=""><abbr title=" 326          mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionModeTextColor);"> 326          mLinkIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_note_24dp, R.attr.actionMðŸ”µ</abbr></span>
<span class="439472828334727129" onmouseenter="enter('439472828334727129');" onmouseout="out('439472828334727129');" style=""><abbr title=" 327          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModeTextColor);"> 327          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_24dp, R.attr.actionModðŸ”µ</abbr></span>
<span class="6692132481762191849" onmouseenter="enter('6692132481762191849');" onmouseout="out('6692132481762191849');" style=""><abbr title=" 328          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.actionModeTextColor);"> 328          mBrowserIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_browser_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-1469196158673197606" onmouseenter="enter('-1469196158673197606');" onmouseout="out('-1469196158673197606');" style=""><abbr title=" 329          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionModeTextColor);"> 329          mCopyIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_copy_24dp, R.attr.actionMðŸ”µ</abbr></span>
<span class="2974983401105131042" onmouseenter="enter('2974983401105131042');" onmouseout="out('2974983401105131042');" style=""><abbr title=" 330          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actionModeTextColor);"> 330          mShareIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_share_24dp, R.attr.actioðŸ”µ</abbr></span>
<span  style=""> 331                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 332          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 333          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 334          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 335                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 336          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 337                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-4933477915356212091" onmouseenter="enter('-4933477915356212091');" onmouseout="out('-4933477915356212091');" style=""> 338          mTagAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 339              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 340              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 341                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 342                  if (activity == null) return null;                                                                </span>
<span class="3059784599882537005" onmouseenter="enter('3059784599882537005');" onmouseout="out('3059784599882537005');" style=""> 343                  return activity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344              }                                                                                                     </span>
<span  style=""> 345                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 346              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 347              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 348                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 349                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350              }                                                                                                     </span>
<span  style=""> 351                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 352              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 353              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 354                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355              }                                                                                                     </span>
<span  style=""> 356                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 357              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 358              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 359                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 360                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 361                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 362                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 363                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 364                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 365                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 366                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 367                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 368                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 369                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 370                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 372          };                                                                                                        </span>
<span  style=""> 373                                                                                                                    </span>
<span class="-5778622668812359275" onmouseenter="enter('-5778622668812359275');" onmouseout="out('-5778622668812359275');" style=""> 374          mLinkAutocompleteAdapter = new CursorAdapter(getContext(), null, 0x0) {                                   </span>
<span class="4420913156406314587" onmouseenter="enter('4420913156406314587');" onmouseout="out('4420913156406314587');" style=""> 375              private Activity mActivity = requireActivity();                                                       </span>
<span  style=""> 376                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 377              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 378              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="9137674912136175390" onmouseenter="enter('9137674912136175390');" onmouseout="out('9137674912136175390');" style=""> 379                  ((TextView) view).setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380              }                                                                                                     </span>
<span  style=""> 381                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 382              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 383              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-6315376739504212293" onmouseenter="enter('-6315376739504212293');" onmouseout="out('-6315376739504212293');" style=""> 384                  return cursor.getString(cursor.getColumnIndex(Note.TITLE_INDEX_NAME));                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385              }                                                                                                     </span>
<span  style=""> 386                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 387              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 388              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="9209398663457461143" onmouseenter="enter('9209398663457461143');" onmouseout="out('9209398663457461143');" style=""> 389                  return mActivity.getLayoutInflater().inflate(R.layout.autocomplete_list_item, null);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390              }                                                                                                     </span>
<span  style=""> 391                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 392              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 393              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-2694701201332649685" onmouseenter="enter('-2694701201332649685');" onmouseout="out('-2694701201332649685');" style=""> 394                  if (filter == null) {                                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 395                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396                  }                                                                                                 </span>
<span  style=""> 397                                                                                                                    </span>
<span class="-5476224035795218003" onmouseenter="enter('-5476224035795218003');" onmouseout="out('-5476224035795218003');" style=""> 398                  Simplenote application = (Simplenote) mActivity.getApplication();                                 </span>
<span class="5284816788544144261" onmouseenter="enter('5284816788544144261');" onmouseout="out('5284816788544144261');" style=""> 399                  Query&lt;Note&gt; query = application.getNotesBucket().query();                                         </span>
<span class="-5887342273099451545" onmouseenter="enter('-5887342273099451545');" onmouseout="out('-5887342273099451545');" style=""> 400                  query.include(Note.PINNED_INDEX_NAME);                                                            </span>
<span class="8903361953614418852" onmouseenter="enter('8903361953614418852');" onmouseout="out('8903361953614418852');" style=""> 401                  query.include(Note.TITLE_INDEX_NAME);                                                             </span>
<span class="3677160110009294333" onmouseenter="enter('3677160110009294333');" onmouseout="out('3677160110009294333');" style=""> 402                  query.where(Note.TITLE_INDEX_NAME, Query.ComparisonType.LIKE, String.format(&quot;%%%s%%&quot;, filter));   </span>
<span class="2636422943772736086" onmouseenter="enter('2636422943772736086');" onmouseout="out('2636422943772736086');" style=""> 403                  PrefUtils.sortNoteQuery(query, requireContext(), true);                                           </span>
<span class="2003026878785809505" onmouseenter="enter('2003026878785809505');" onmouseout="out('2003026878785809505');" style=""> 404                  Cursor cursor = query.execute();                                                                  </span>
<span  style=""> 405                                                                                                                    </span>
<span class="-3406397928756442195" onmouseenter="enter('-3406397928756442195');" onmouseout="out('-3406397928756442195');" style=""> 406                  final int heightAutocomplete = DisplayUtils.dpToPx(requireContext(), cursor.getCount() * 48);     </span>
<span class="2053250669508349335" onmouseenter="enter('2053250669508349335');" onmouseout="out('2053250669508349335');" style=""> 407                  final int heightDisplay = DisplayUtils.getDisplayPixelSize(requireContext()).y;                   </span>
<span class="-5884104961680708619" onmouseenter="enter('-5884104961680708619');" onmouseout="out('-5884104961680708619');" style=""> 408                  final int heightDropdown = Math.min(heightDisplay / 4, heightAutocomplete);                       </span>
<span  style=""> 409                                                                                                                    </span>
<span class="6747443584027813293" onmouseenter="enter('6747443584027813293');" onmouseout="out('6747443584027813293');" style=""> 410                  mActivity.runOnUiThread(                                                                          </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 411                      new Runnable() {                                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 412                          @Override                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 413                          public void run() {                                                                       </span>
<span class="-6383818153518880076" onmouseenter="enter('-6383818153518880076');" onmouseout="out('-6383818153518880076');" style=""> 414                              mContentEditText.setDropDownHeight(heightDropdown);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416                      }                                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 417                  );                                                                                                </span>
<span class="-6729379386015983029" onmouseenter="enter('-6729379386015983029');" onmouseout="out('-6729379386015983029');" style=""> 418                  return cursor;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 420          };                                                                                                        </span>
<span  style=""> 421                                                                                                                    </span>
<span class="-2915955960672646870" onmouseenter="enter('-2915955960672646870');" onmouseout="out('-2915955960672646870');" style=""> 422          WidgetUtils.updateNoteWidgets(requireActivity().getApplicationContext());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423      }                                                                                                             </span>
<span  style=""> 424                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 425      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 426      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 427          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 428          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 429          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 430          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 431          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="-7684087958922635100" onmouseenter="enter('-7684087958922635100');" onmouseout="out('-7684087958922635100');" style=""> 432          mContentEditText.setOnFocusChangeListener(this);                                                          </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 433          mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));        </span>
<span class="-6866322642818059816" onmouseenter="enter('-6866322642818059816');" onmouseout="out('-6866322642818059816');" style=""> 434          mContentEditText.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                 </span>
<span class="8857723377205297003" onmouseenter="enter('8857723377205297003');" onmouseout="out('8857723377205297003');" style=""> 435          mContentEditText.setAdapter(mLinkAutocompleteAdapter);                                                    </span>
<span class="-8410945612023549246" onmouseenter="enter('-8410945612023549246');" onmouseout="out('-8410945612023549246');" style=""> 436          mTagInput = mRootView.findViewById(R.id.tag_input);                                                       </span>
<span class="-8520636764026895045" onmouseenter="enter('-8520636764026895045');" onmouseout="out('-8520636764026895045');" style=""> 437          mTagInput.setDropDownBackgroundResource(R.drawable.bg_list_popup);                                        </span>
<span class="-8046888072996277100" onmouseenter="enter('-8046888072996277100');" onmouseout="out('-8046888072996277100');" style=""> 438          mTagInput.setTokenizer(new SpaceTokenizer());                                                             </span>
<span class="-5626031287620429456" onmouseenter="enter('-5626031287620429456');" onmouseout="out('-5626031287620429456');" style=""> 439          mTagInput.setAdapter(mTagAutocompleteAdapter);                                                            </span>
<span class="8277910060096767493" onmouseenter="enter('8277910060096767493');" onmouseout="out('8277910060096767493');" style=""> 440          mTagInput.setOnFocusChangeListener(this);                                                                 </span>
<span class="9064951361673299699" onmouseenter="enter('9064951361673299699');" onmouseout="out('9064951361673299699');" style=""> 441          mTagChips = mRootView.findViewById(R.id.tag_chips);                                                       </span>
<span class="-8852013276583646600" onmouseenter="enter('-8852013276583646600');" onmouseout="out('-8852013276583646600');" style=""> 442          mTagPadding = mRootView.findViewById(R.id.tag_padding);                                                   </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 443          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 444          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span  style=""> 445                                                                                                                    </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 446          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 447              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 448              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 449 -            mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 450 -            mMarkdown.setWebViewClient(                                                                           </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 451 -                new WebViewClient() {                                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 452 -                    @Override                                                                                     </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 453 -                    public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){            </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 454 -                        String url = request.getUrl().toString();                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 455 -                                                                                                                  </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 456 -                        if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                            </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 457 -                            SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 457 -                            SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;))ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 458 -                        } else {                                                                                  </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 459 -                            BrowserUtils.launchBrowserOrShowError(requireContext(), url);                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 460 +                                                                                                                  </span>
<span class="-1005326724349715830" onmouseenter="enter('-1005326724349715830');" onmouseout="out('-1005326724349715830');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 461 +            if (BrowserUtils.isWebViewInstalled(requireContext())) {                                              </span>
<span class="-3967743337838243188" onmouseenter="enter('-3967743337838243188');" onmouseout="out('-3967743337838243188');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 462 +                ((ViewStub) mRootView.findViewById(R.id.stub_webview)).inflate();                                 </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 463 +                mMarkdown = mRootView.findViewById(R.id.markdown);                                                </span>
<span class="2573488642866082316" onmouseenter="enter('2573488642866082316');" onmouseout="out('2573488642866082316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 464 +                mMarkdown.setWebViewClient(                                                                       </span>
<span class="6636825780888069899" onmouseenter="enter('6636825780888069899');" onmouseout="out('6636825780888069899');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 465 +                    new WebViewClient() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 466 +                        @Override                                                                                 </span>
<span class="-9087834862940521077" onmouseenter="enter('-9087834862940521077');" onmouseout="out('-9087834862940521077');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 467 +                        public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request){        </span>
<span class="-5381905371386971985" onmouseenter="enter('-5381905371386971985');" onmouseout="out('-5381905371386971985');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 468 +                            String url = request.getUrl().toString();                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 469 +                                                                                                                  </span>
<span class="-4642998270142287952" onmouseenter="enter('-4642998270142287952');" onmouseout="out('-4642998270142287952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 470 +                            if (url.startsWith(SimplenoteLinkify.SIMPLENOTE_LINK_PREFIX)){                        </span>
<span class="1249235461949968343" onmouseenter="enter('1249235461949968343');" onmouseout="out('1249235461949968343');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 471 +                                SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, &quot;&quot;));"> 471 +                                SimplenoteLinkify.openNote(requireActivity(), url.replace(SIMPLENOTE_LINK_PREFIX, ðŸ”µ</abbr></span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 472 +                            } else {                                                                              </span>
<span class="4407241748321738249" onmouseenter="enter('4407241748321738249');" onmouseout="out('4407241748321738249');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 473 +                                BrowserUtils.launchBrowserOrShowError(requireContext(), url);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 474 +                            }                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 475 +                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 476 +                            return true;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477                          }                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 478 -                                                                                                                  </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 479 -                        return true;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 481 -                }                                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 482 -            );                                                                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 483 -            mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 484 -                ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                         </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 485 -                : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 486 +                );                                                                                                </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 487 +                mCss = ThemeUtils.isLightTheme(requireContext())                                                  </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 488 +                    ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 489 +                    : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 490 +            } else {                                                                                              </span>
<span class="4441162317505613606" onmouseenter="enter('4441162317505613606');" onmouseout="out('4441162317505613606');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 491 +                ((ViewStub) mRootView.findViewById(R.id.stub_error)).inflate();                                   </span>
<span class="-4966458499899083722" onmouseenter="enter('-4966458499899083722');" onmouseout="out('-4966458499899083722');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 492 +                mError = mRootView.findViewById(R.id.error);                                                      </span>
<span class="-6521037657957389482" onmouseenter="enter('-6521037657957389482');" onmouseout="out('-6521037657957389482');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 493 +                mRootView.findViewById(R.id.button).setOnClickListener(                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 494 +                    new View.OnClickListener() {                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 495 +                        @Override                                                                                 </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 496 +                        public void onClick(View view) {                                                          </span>
<span class="-6437015632434493624" onmouseenter="enter('-6437015632434493624');" onmouseout="out('-6437015632434493624');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 497 +                            BrowserUtils.launchBrowserOrShowError(requireContext(), BrowserUtils.URL_WEB_VIEW);   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 498 +                        }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 499 +                    }                                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 500 +                );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 501 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502          }                                                                                                         </span>
<span  style=""> 503                                                                                                                    </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 504          Bundle arguments = getArguments();                                                                        </span>
<span  style=""> 505                                                                                                                    </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 506          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 507              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 508              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span  style=""> 509                                                                                                                    </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 510              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 511                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512              }                                                                                                     </span>
<span  style=""> 513                                                                                                                    </span>
<span class="-5471626349746072894" onmouseenter="enter('-5471626349746072894');" onmouseout="out('-5471626349746072894');" style=""> 514              mIsFromWidget = arguments.getBoolean(ARG_IS_FROM_WIDGET);                                             </span>
<span  style=""> 515                                                                                                                    </span>
<span class="7955966257819193736" onmouseenter="enter('7955966257819193736');" onmouseout="out('7955966257819193736');" style=""> 516              if (mIsFromWidget) {                                                                                  </span>
<span class="-5617995102329158939" onmouseenter="enter('-5617995102329158939');" onmouseout="out('-5617995102329158939');" style=""> 517                  AppLog.add(Type.ACTION, &quot;Opened from widget (NoteEditorFragment)&quot;);                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 518              } else {                                                                                              </span>
<span class="8953265153297736425" onmouseenter="enter('8953265153297736425');" onmouseout="out('8953265153297736425');" style=""> 519                  AppLog.add(Type.ACTION, &quot;Opened from list (NoteEditorFragment)&quot;);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520              }                                                                                                     </span>
<span  style=""> 521                                                                                                                    </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 522              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-7018322201047939593" onmouseenter="enter('-7018322201047939593');" onmouseout="out('-7018322201047939593');" style=""> 523          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null) {            </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 524              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 525              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span  style=""> 526                                                                                                                    </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 527              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 528                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530          }                                                                                                         </span>
<span  style=""> 531                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 532          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 533          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 534              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 535              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 536                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 537                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 538                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 539                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540                      }                                                                                             </span>
<span  style=""> 541                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 542                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 543                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 544                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 545                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 546                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 547                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 548                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549                      }                                                                                             </span>
<span  style=""> 550                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 551                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 552                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 553                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 554                      ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 555                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 557              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 558          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 559          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 560          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 561      }                                                                                                             </span>
<span  style=""> 562                                                                                                                    </span>
<span class="4710528937935082296" onmouseenter="enter('4710528937935082296');" onmouseout="out('4710528937935082296');" style=""> 563      public void scrollToMatch(int location) {                                                                     </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style=""> 564          if (isAdded()) {                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 565              // Calculate how far to scroll to bring the match into view                                           </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 566              Layout layout = mContentEditText.getLayout();                                                         </span>
<span class="7976110079331789160" onmouseenter="enter('7976110079331789160');" onmouseout="out('7976110079331789160');" style=""> 567              int lineTop = layout.getLineTop(layout.getLineForOffset(location));                                   </span>
<span class="1129057737754431865" onmouseenter="enter('1129057737754431865');" onmouseout="out('1129057737754431865');" style=""> 568              ((NestedScrollView) mRootView).smoothScrollTo(0, lineTop);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570      }                                                                                                             </span>
<span  style=""> 571                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 572      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 573      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 574          super.onResume();                                                                                         </span>
<span class="6569679696158291720" onmouseenter="enter('6569679696158291720');" onmouseout="out('6569679696158291720');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 575 +        checkWebView();                                                                                           </span>
<span class="-9085345560964209172" onmouseenter="enter('-9085345560964209172');" onmouseout="out('-9085345560964209172');" style=""> 576          mIsPaused = false;                                                                                        </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 577 -        mNotesBucket.start();                                                                                     </span>
<span class="-2614582349717816655" onmouseenter="enter('-2614582349717816655');" onmouseout="out('-2614582349717816655');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 578 -        AppLog.add(Type.SYNC, &quot;Started note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 579          mNotesBucket.addListener(this);                                                                           </span>
<span class="3922278034329768441" onmouseenter="enter('3922278034329768441');" onmouseout="out('3922278034329768441');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +        AppLog.add(Type.SYNC, &quot;Added note bucket listener (NoteEditorFragment)&quot;);                                 </span>
<span class="5183219019881866175" onmouseenter="enter('5183219019881866175');" onmouseout="out('5183219019881866175');" style=""> 581          mTagInput.setOnTagAddedListener(this);                                                                    </span>
<span  style=""> 582                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 583          if (mContentEditText != null) {                                                                           </span>
<span class="7906960005192148215" onmouseenter="enter('7906960005192148215');" onmouseout="out('7906960005192148215');" style=""> 584              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(requireContext()));    </span>
<span  style=""> 585                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 586              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 587                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 589 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 590 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 591 +                                                                                                                  </span>
<span class="-3335709862144116823" onmouseenter="enter('-3335709862144116823');" onmouseout="out('-3335709862144116823');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 592 +    private void checkWebView() {                                                                                 </span>
<span class="8284401614074834784" onmouseenter="enter('8284401614074834784');" onmouseout="out('8284401614074834784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 593 +        // When a WebView is installed and mMarkdown is null on a large landscape device, a WebView               </span>
<span class="6699306601959225492" onmouseenter="enter('6699306601959225492');" onmouseout="out('6699306601959225492');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 594 +        // was not installed when the fragment was created.  So, recreate the activity to refresh                 </span>
<span class="-5414175386362694134" onmouseenter="enter('-5414175386362694134');" onmouseout="out('-5414175386362694134');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 595 +        // the editor view.                                                                                       </span>
<span class="7373089442478701267" onmouseenter="enter('7373089442478701267');" onmouseout="out('7373089442478701267');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 596 +        if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown == null &amp;&amp;                             </span>
<span class="-7028697565563617109" onmouseenter="enter('-7028697565563617109');" onmouseout="out('-7028697565563617109');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 597 +            DisplayUtils.isLargeScreenLandscape(requireContext())) {                                              </span>
<span class="6438271402930862354" onmouseenter="enter('6438271402930862354');" onmouseout="out('6438271402930862354');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 598 +            requireActivity().recreate();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600      }                                                                                                             </span>
<span  style=""> 601                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 602      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 603          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 604              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 605              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 606                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 607                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608                  }                                                                                                 </span>
<span  style=""> 609                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 610                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 610                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(ContexðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 611                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 612                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 615          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616      }                                                                                                             </span>
<span  style=""> 617                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 618      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 619      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 620          super.onPause();  // Always call the superclass method first                                              </span>
<span class="-5493396254025166032" onmouseenter="enter('-5493396254025166032');" onmouseout="out('-5493396254025166032');" style=""> 621          mIsPaused = true;                                                                                         </span>
<span  style=""> 622                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 623          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 624          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 625                                                                                                                    </span>
<span class="6353289516119274314" onmouseenter="enter('6353289516119274314');" onmouseout="out('6353289516119274314');" style=""> 626          mTagInput.setOnTagAddedListener(null);                                                                    </span>
<span  style=""> 627                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 628          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 629              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-837723219443324586" onmouseenter="enter('-837723219443324586');" onmouseout="out('-837723219443324586');" style=""> 630              mAutoSaveHandler.post(mAutoSaveRunnable);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631          }                                                                                                         </span>
<span  style=""> 632                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 633          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 634              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635          }                                                                                                         </span>
<span  style=""> 636                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 637          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 638              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 639          }                                                                                                         </span>
<span  style=""> 640                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 641          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 642          saveNote();                                                                                               </span>
<span class="-5110134461042230019" onmouseenter="enter('-5110134461042230019');" onmouseout="out('-5110134461042230019');" style=""> 643          AppLog.add(Type.SCREEN, &quot;Paused (NoteEditorFragment)&quot;);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644      }                                                                                                             </span>
<span  style=""> 645                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 646      @Override                                                                                                     </span>
<span class="658855826062432633" onmouseenter="enter('658855826062432633');" onmouseout="out('658855826062432633');" style=""> 647      public void onDestroy() {                                                                                     </span>
<span class="7275190530034972367" onmouseenter="enter('7275190530034972367');" onmouseout="out('7275190530034972367');" style=""> 648          super.onDestroy();                                                                                        </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 649          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 650 -        mNotesBucket.stop();                                                                                      </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 651 -        AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                        </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 652 +        AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                               </span>
<span class="284986690041099701" onmouseenter="enter('284986690041099701');" onmouseout="out('284986690041099701');" style=""> 653          AppLog.add(Type.SCREEN, &quot;Destroyed (NoteEditorFragment)&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654      }                                                                                                             </span>
<span  style=""> 655                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 656      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 657      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 658          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 659                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 660          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 661              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 662          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663      }                                                                                                             </span>
<span  style=""> 664                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 665      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 666      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 667          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span  style=""> 668                                                                                                                    </span>
<span class="-4568224188607879240" onmouseenter="enter('-4568224188607879240');" onmouseout="out('-4568224188607879240');" style=""><abbr title=" 669          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null)) {"> 669          if (!isAdded() || (!mIsFromWidget &amp;&amp; DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFrðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 670              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671          }                                                                                                         </span>
<span  style=""> 672                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 673          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span class="5385664906661306149" onmouseenter="enter('5385664906661306149');" onmouseout="out('5385664906661306149');" style=""> 674          MenuCompat.setGroupDividerEnabled(menu, true);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 675      }                                                                                                             </span>
<span  style=""> 676                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 677      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 678      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 679          switch (item.getItemId()) {                                                                               </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 680              case R.id.menu_checklist:                                                                             </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 681                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 682                  return true;                                                                                      </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 683              case R.id.menu_copy:                                                                                  </span>
<span class="8518441705934796822" onmouseenter="enter('8518441705934796822');" onmouseout="out('8518441705934796822');" style=""> 684                  if (BrowserUtils.copyToClipboard(requireContext(), mNote.getPublishedUrl())) {                    </span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 685                      Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 686                  } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 687                      Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688                  }                                                                                                 </span>
<span  style=""> 689                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 690                  return true;                                                                                      </span>
<span class="5654474204908123045" onmouseenter="enter('5654474204908123045');" onmouseout="out('5654474204908123045');" style=""> 691              case R.id.menu_copy_internal:                                                                         </span>
<span class="-3103212045473028348" onmouseenter="enter('-3103212045473028348');" onmouseout="out('-3103212045473028348');" style=""><abbr title=" 692                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.getTitle(), mNote.getSimperiumKey()))) {"> 692                  if (BrowserUtils.copyToClipboard(requireContext(), SimplenoteLinkify.getNoteLinkWithTitle(mNote.geðŸ”µ</abbr></span>
<span class="3795490233575843146" onmouseenter="enter('3795490233575843146');" onmouseout="out('3795490233575843146');" style=""> 693                      Snackbar.make(mRootView, R.string.link_copied, Snackbar.LENGTH_SHORT).show();                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 694                  } else {                                                                                          </span>
<span class="8359220226685626421" onmouseenter="enter('8359220226685626421');" onmouseout="out('8359220226685626421');" style=""> 695                      Snackbar.make(mRootView, R.string.link_copied_failure, Snackbar.LENGTH_SHORT).show();         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696                  }                                                                                                 </span>
<span  style=""> 697                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 698                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 699              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 700                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 701                  return true;                                                                                      </span>
<span class="-7455228569432134304" onmouseenter="enter('-7455228569432134304');" onmouseout="out('-7455228569432134304');" style=""> 702              case R.id.menu_info:                                                                                  </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 703                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 704                  return true;                                                                                      </span>
<span class="1690518520070570963" onmouseenter="enter('1690518520070570963');" onmouseout="out('1690518520070570963');" style=""> 705              case R.id.menu_markdown:                                                                              </span>
<span class="-3926545672787324985" onmouseenter="enter('-3926545672787324985');" onmouseout="out('-3926545672787324985');" style=""> 706                  setMarkdown(!item.isChecked());                                                                   </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 707                  return true;                                                                                      </span>
<span class="2584816759865872098" onmouseenter="enter('2584816759865872098');" onmouseout="out('2584816759865872098');" style=""> 708              case R.id.menu_pin:                                                                                   </span>
<span class="846429991982879471" onmouseenter="enter('846429991982879471');" onmouseout="out('846429991982879471');" style=""> 709                  NoteUtils.setNotePin(mNote, !item.isChecked());                                                   </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 710                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 711                  return true;                                                                                      </span>
<span class="-1377067082739801221" onmouseenter="enter('-1377067082739801221');" onmouseout="out('-1377067082739801221');" style=""> 712              case R.id.menu_publish:                                                                               </span>
<span class="-3060727947180574444" onmouseenter="enter('-3060727947180574444');" onmouseout="out('-3060727947180574444');" style=""> 713                  if (item.isChecked()) {                                                                           </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 714                      unpublishNote();                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 715                  } else {                                                                                          </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 716                      publishNote();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 717                  }                                                                                                 </span>
<span  style=""> 718                                                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 719                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 720              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 721                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 722                  return true;                                                                                      </span>
<span class="-7045228079815744059" onmouseenter="enter('-7045228079815744059');" onmouseout="out('-7045228079815744059');" style=""> 723              case R.id.menu_trash:                                                                                 </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 724                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 725                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726                  }                                                                                                 </span>
<span  style=""> 727                                                                                                                    </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 728                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 729                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 730              case android.R.id.home:                                                                               </span>
<span class="-5022390127132774156" onmouseenter="enter('-5022390127132774156');" onmouseout="out('-5022390127132774156');" style=""> 731                  AppLog.add(Type.ACTION, &quot;Tapped back arrow in app bar (NoteEditorFragment)&quot;);                     </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 732                  if (!isAdded()) {                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 733                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 734                  }                                                                                                 </span>
<span  style=""> 735                                                                                                                    </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 736                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 737                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 738              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 739                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 741      }                                                                                                             </span>
<span  style=""> 742                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 743      @Override                                                                                                     </span>
<span class="976560802893770483" onmouseenter="enter('976560802893770483');" onmouseout="out('976560802893770483');" style=""> 744      public void onPrepareOptionsMenu(@NonNull Menu menu) {                                                        </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 745          if (mNote != null) {                                                                                      </span>
<span class="4103252492326247538" onmouseenter="enter('4103252492326247538');" onmouseout="out('4103252492326247538');" style=""> 746              MenuItem pinItem = menu.findItem(R.id.menu_pin);                                                      </span>
<span class="-1901297934576221502" onmouseenter="enter('-1901297934576221502');" onmouseout="out('-1901297934576221502');" style=""> 747              MenuItem shareItem = menu.findItem(R.id.menu_share);                                                  </span>
<span class="-1024200395334062210" onmouseenter="enter('-1024200395334062210');" onmouseout="out('-1024200395334062210');" style=""> 748              MenuItem historyItem = menu.findItem(R.id.menu_history);                                              </span>
<span class="8524821600195318381" onmouseenter="enter('8524821600195318381');" onmouseout="out('8524821600195318381');" style=""> 749              MenuItem publishItem = menu.findItem(R.id.menu_publish);                                              </span>
<span class="-2596587708374310136" onmouseenter="enter('-2596587708374310136');" onmouseout="out('-2596587708374310136');" style=""> 750              MenuItem copyLinkItem = menu.findItem(R.id.menu_copy);                                                </span>
<span class="3256712546982954826" onmouseenter="enter('3256712546982954826');" onmouseout="out('3256712546982954826');" style=""> 751              MenuItem markdownItem = menu.findItem(R.id.menu_markdown);                                            </span>
<span class="7126556138263523964" onmouseenter="enter('7126556138263523964');" onmouseout="out('7126556138263523964');" style=""> 752              MenuItem trashItem = menu.findItem(R.id.menu_trash);                                                  </span>
<span class="-481966053977064278" onmouseenter="enter('-481966053977064278');" onmouseout="out('-481966053977064278');" style=""> 753              mChecklistMenuItem = menu.findItem(R.id.menu_checklist);                                              </span>
<span class="-41110414926085356" onmouseenter="enter('-41110414926085356');" onmouseout="out('-41110414926085356');" style=""> 754              mInformationMenuItem = menu.findItem(R.id.menu_info).setVisible(true);                                </span>
<span  style=""> 755                                                                                                                    </span>
<span class="-7678419238898690461" onmouseenter="enter('-7678419238898690461');" onmouseout="out('-7678419238898690461');" style=""> 756              pinItem.setChecked(mNote.isPinned());                                                                 </span>
<span class="5915502490134342688" onmouseenter="enter('5915502490134342688');" onmouseout="out('5915502490134342688');" style=""> 757              publishItem.setChecked(mNote.isPublished());                                                          </span>
<span class="-2454055549809219964" onmouseenter="enter('-2454055549809219964');" onmouseout="out('-2454055549809219964');" style=""> 758              markdownItem.setChecked(mNote.isMarkdownEnabled());                                                   </span>
<span  style=""> 759                                                                                                                    </span>
<span class="8027745968637922893" onmouseenter="enter('8027745968637922893');" onmouseout="out('8027745968637922893');" style=""> 760              // Disable actions when note is in Trash or markdown view is shown on large device.                   </span>
<span class="-431402929828645917" onmouseenter="enter('-431402929828645917');" onmouseout="out('-431402929828645917');" style=""> 761              if (mNote.isDeleted() || (mMarkdown != null &amp;&amp; mMarkdown.getVisibility() == View.VISIBLE)) {          </span>
<span class="-1690132925836641241" onmouseenter="enter('-1690132925836641241');" onmouseout="out('-1690132925836641241');" style=""> 762                  pinItem.setEnabled(false);                                                                        </span>
<span class="-5469494517506321069" onmouseenter="enter('-5469494517506321069');" onmouseout="out('-5469494517506321069');" style=""> 763                  shareItem.setEnabled(false);                                                                      </span>
<span class="9085171889633758452" onmouseenter="enter('9085171889633758452');" onmouseout="out('9085171889633758452');" style=""> 764                  historyItem.setEnabled(false);                                                                    </span>
<span class="6693521395658962624" onmouseenter="enter('6693521395658962624');" onmouseout="out('6693521395658962624');" style=""> 765                  publishItem.setEnabled(false);                                                                    </span>
<span class="9087995724461855803" onmouseenter="enter('9087995724461855803');" onmouseout="out('9087995724461855803');" style=""> 766                  copyLinkItem.setEnabled(false);                                                                   </span>
<span class="-1845358690665350593" onmouseenter="enter('-1845358690665350593');" onmouseout="out('-1845358690665350593');" style=""> 767                  markdownItem.setEnabled(false);                                                                   </span>
<span class="1533489871724235057" onmouseenter="enter('1533489871724235057');" onmouseout="out('1533489871724235057');" style=""> 768                  mChecklistMenuItem.setEnabled(false);                                                             </span>
<span class="5575712097606361646" onmouseenter="enter('5575712097606361646');" onmouseout="out('5575712097606361646');" style=""> 769                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 0.3);  // 0.3 is 30% opacity.                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 770              } else {                                                                                              </span>
<span class="-4176946050939173198" onmouseenter="enter('-4176946050939173198');" onmouseout="out('-4176946050939173198');" style=""> 771                  pinItem.setEnabled(true);                                                                         </span>
<span class="-8607869884042424878" onmouseenter="enter('-8607869884042424878');" onmouseout="out('-8607869884042424878');" style=""> 772                  shareItem.setEnabled(true);                                                                       </span>
<span class="-4314747760650157745" onmouseenter="enter('-4314747760650157745');" onmouseout="out('-4314747760650157745');" style=""> 773                  historyItem.setEnabled(true);                                                                     </span>
<span class="3398211100008798634" onmouseenter="enter('3398211100008798634');" onmouseout="out('3398211100008798634');" style=""> 774                  publishItem.setEnabled(true);                                                                     </span>
<span class="-4773075625324516073" onmouseenter="enter('-4773075625324516073');" onmouseout="out('-4773075625324516073');" style=""> 775                  copyLinkItem.setEnabled(mNote.isPublished());                                                     </span>
<span class="3540588263915729219" onmouseenter="enter('3540588263915729219');" onmouseout="out('3540588263915729219');" style=""> 776                  markdownItem.setEnabled(true);                                                                    </span>
<span class="9157159425417983851" onmouseenter="enter('9157159425417983851');" onmouseout="out('9157159425417983851');" style=""> 777                  mChecklistMenuItem.setEnabled(true);                                                              </span>
<span class="-997998498639683163" onmouseenter="enter('-997998498639683163');" onmouseout="out('-997998498639683163');" style=""> 778                  DrawableUtils.setMenuItemAlpha(mChecklistMenuItem, 1.0);  // 1.0 is 100% opacity.                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 779              }                                                                                                     </span>
<span  style=""> 780                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 781              if (mNote.isDeleted()) {                                                                              </span>
<span class="-3033015909800303171" onmouseenter="enter('-3033015909800303171');" onmouseout="out('-3033015909800303171');" style=""> 782                  trashItem.setTitle(R.string.restore);                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 783              } else {                                                                                              </span>
<span class="-1683477354690990368" onmouseenter="enter('-1683477354690990368');" onmouseout="out('-1683477354690990368');" style=""> 784                  trashItem.setTitle(R.string.trash);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786          }                                                                                                         </span>
<span  style=""> 787                                                                                                                    </span>
<span class="-5146912340244450550" onmouseenter="enter('-5146912340244450550');" onmouseout="out('-5146912340244450550');" style=""> 788          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.toolbarIconColor);                        </span>
<span class="1467059367331108531" onmouseenter="enter('1467059367331108531');" onmouseout="out('1467059367331108531');" style=""> 789          super.onPrepareOptionsMenu(menu);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 790      }                                                                                                             </span>
<span  style=""> 791                                                                                                                    </span>
<span class="-2056093237925143337" onmouseenter="enter('-2056093237925143337');" onmouseout="out('-2056093237925143337');" style=""> 792      public void insertChecklist() {                                                                               </span>
<span class="-2132172590912834546" onmouseenter="enter('-2132172590912834546');" onmouseout="out('-2132172590912834546');" style=""> 793          DrawableUtils.startAnimatedVectorDrawable(mChecklistMenuItem.getIcon());                                  </span>
<span  style=""> 794                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 795          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 796              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 797          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 798              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 799              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800          }                                                                                                         </span>
<span  style=""> 801                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 802          AnalyticsTracker.track(                                                                                   </span>
<span class="2856363448162984839" onmouseenter="enter('2856363448162984839');" onmouseout="out('2856363448162984839');" style=""> 803              EDITOR_CHECKLIST_INSERTED,                                                                            </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 804              CATEGORY_NOTE,                                                                                        </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 805              &quot;toolbar_button&quot;                                                                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 806          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807      }                                                                                                             </span>
<span  style=""> 808                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 809      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 810      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 811          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 812          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 813              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 814              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816      }                                                                                                             </span>
<span  style=""> 817                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 818      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 819          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 820          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 821      }                                                                                                             </span>
<span  style=""> 822                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 823      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 824 -        mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 825 +        if (mMarkdown != null) {                                                                                  </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 826 +            mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 827 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 828      }                                                                                                             </span>
<span  style=""> 829                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 830      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 831 -        mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="5972103689141576990" onmouseenter="enter('5972103689141576990');" onmouseout="out('5972103689141576990');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 832 +        if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown != null) {                             </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 833 +            mMarkdown.setVisibility(View.INVISIBLE);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 834 +        } else {                                                                                                  </span>
<span class="-7415720252441553161" onmouseenter="enter('-7415720252441553161');" onmouseout="out('-7415720252441553161');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 835 +            mError.setVisibility(View.INVISIBLE);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 836 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 837      }                                                                                                             </span>
<span  style=""> 838                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 839      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 840          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 841 -        mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 842 +                                                                                                                  </span>
<span class="5972103689141576990" onmouseenter="enter('5972103689141576990');" onmouseout="out('5972103689141576990');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 843 +        if (BrowserUtils.isWebViewInstalled(requireContext()) &amp;&amp; mMarkdown != null) {                             </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 844 +            mMarkdown.setVisibility(View.VISIBLE);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 845 +        } else {                                                                                                  </span>
<span class="8471850600291055773" onmouseenter="enter('8471850600291055773');" onmouseout="out('8471850600291055773');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 846 +            mError.setVisibility(View.VISIBLE);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 847 +        }                                                                                                         </span>
<span  style=""> 848                                                                                                                    </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 849          new Handler().postDelayed(                                                                                </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 850              new Runnable() {                                                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 851                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 852                  public void run() {                                                                               </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 853                      requireActivity().invalidateOptionsMenu();                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 854                  }                                                                                                 </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 855              },                                                                                                    </span>
<span class="5128296635725421077" onmouseenter="enter('5128296635725421077');" onmouseout="out('5128296635725421077');" style=""> 856              getResources().getInteger(R.integer.time_animation)                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 857          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858      }                                                                                                             </span>
<span  style=""> 859                                                                                                                    </span>
<span class="796341583224604558" onmouseenter="enter('796341583224604558');" onmouseout="out('796341583224604558');" style=""> 860      public void shareNote() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 861          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 862              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 863              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 864              AnalyticsTracker.track(                                                                               </span>
<span class="-5025794315104060878" onmouseenter="enter('-5025794315104060878');" onmouseout="out('-5025794315104060878');" style=""> 865                  EDITOR_NOTE_CONTENT_SHARED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style=""> 866                  CATEGORY_NOTE,                                                                                    </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 867                  &quot;action_bar_share_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 868              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870      }                                                                                                             </span>
<span  style=""> 871                                                                                                                    </span>
<span class="-6549715277076486587" onmouseenter="enter('-6549715277076486587');" onmouseout="out('-6549715277076486587');" style=""> 872      public void showHistory() {                                                                                   </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 873          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 874              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 875              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 876              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 877          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 878              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 879          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880      }                                                                                                             </span>
<span  style=""> 881                                                                                                                    </span>
<span class="7631792944897512467" onmouseenter="enter('7631792944897512467');" onmouseout="out('7631792944897512467');" style=""> 882      public void showInfo() {                                                                                      </span>
<span class="8350219460722128573" onmouseenter="enter('8350219460722128573');" onmouseout="out('8350219460722128573');" style=""> 883          DrawableUtils.startAnimatedVectorDrawable(mInformationMenuItem.getIcon());                                </span>
<span  style=""> 884                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 885          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 886              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 887              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 888              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890      }                                                                                                             </span>
<span  style=""> 891                                                                                                                    </span>
<span class="-352900364532795923" onmouseenter="enter('-352900364532795923');" onmouseout="out('-352900364532795923');" style=""> 892      private void setMarkdown(boolean isChecked) {                                                                 </span>
<span class="-8726857289881922025" onmouseenter="enter('-8726857289881922025');" onmouseout="out('-8726857289881922025');" style=""> 893          mIsMarkdownEnabled = isChecked;                                                                           </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 894          showMarkdownActionOrTabs();                                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 895          saveNote();                                                                                               </span>
<span  style=""> 896                                                                                                                    </span>
<span class="4232333416851338644" onmouseenter="enter('4232333416851338644');" onmouseout="out('4232333416851338644');" style=""> 897          // Set preference so that next new note will have markdown enabled.                                       </span>
<span class="6036884777494374936" onmouseenter="enter('6036884777494374936');" onmouseout="out('6036884777494374936');" style=""> 898          SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(requireContext());                </span>
<span class="-5940133505573131741" onmouseenter="enter('-5940133505573131741');" onmouseout="out('-5940133505573131741');" style=""> 899          SharedPreferences.Editor editor = prefs.edit();                                                           </span>
<span class="5795063328820819160" onmouseenter="enter('5795063328820819160');" onmouseout="out('5795063328820819160');" style=""> 900          editor.putBoolean(PrefUtils.PREF_MARKDOWN_ENABLED, isChecked);                                            </span>
<span class="-5305612453340718340" onmouseenter="enter('-5305612453340718340');" onmouseout="out('-5305612453340718340');" style=""> 901          editor.apply();                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 902      }                                                                                                             </span>
<span  style=""> 903                                                                                                                    </span>
<span class="-8233267360630545179" onmouseenter="enter('-8233267360630545179');" onmouseout="out('-8233267360630545179');" style=""> 904      private void setMarkdownEnabled(boolean enabled) {                                                            </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 905          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 906                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 907          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 908              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 909          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910      }                                                                                                             </span>
<span  style=""> 911                                                                                                                    </span>
<span class="-150225536602277221" onmouseenter="enter('-150225536602277221');" onmouseout="out('-150225536602277221');" style=""> 912      private void showMarkdownActionOrTabs() {                                                                     </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 913          Activity activity = getActivity();                                                                        </span>
<span  style=""> 914                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 915          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 916              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span  style=""> 917                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 918              if (mIsMarkdownEnabled) {                                                                             </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 919                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 920                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 921                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 922                      // Get markdown fragment and update content                                                   </span>
<span class="6541177819216640453" onmouseenter="enter('6541177819216640453');" onmouseout="out('6541177819216640453');" style=""> 923                      mNoteMarkdownFragment = editorActivity.getNoteMarkdownFragment();                             </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style=""> 924                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 926              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 927                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 928              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 929          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 930              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 931              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 932          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933      }                                                                                                             </span>
<span  style=""> 934                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 935      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 936          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 937 -                mCss,                                                                                             </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 938 -                mContentEditText.getPreviewTextContent()                                                          </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 939 +            mCss,                                                                                                 </span>
<span class="8402262730640179324" onmouseenter="enter('8402262730640179324');" onmouseout="out('8402262730640179324');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 940 +            mContentEditText.getPreviewTextContent()                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 941          );                                                                                                        </span>
<span  style=""> 942                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 943 -        mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="7980283569255476784" onmouseenter="enter('7980283569255476784');" onmouseout="out('7980283569255476784');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 944 +        if (mMarkdown != null) {                                                                                  </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 945 +            mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 946 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947      }                                                                                                             </span>
<span  style=""> 948                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 949      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 950 -        if (mAutoSaveHandler != null)                                                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 951 +        if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 952              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 953 +        }                                                                                                         </span>
<span  style=""> 954                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 955          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 956 -                                                                                                                  </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 957 -        if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 958 -            mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 959 -        } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 960 -            mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 961 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 962 -                                                                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 963 -                                                                                                                  </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 964 +        mMatchOffsets = matchOffsets;                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 965          saveNote();                                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 966 -                                                                                                                  </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 967          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968      }                                                                                                             </span>
<span  style=""> 969                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 970      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 971          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 972          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 973          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974      }                                                                                                             </span>
<span  style=""> 975                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 976      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 977          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 978              // Restore the cursor position if possible.                                                           </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 979              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 979              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 980              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 981                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 982              if (isNoteUpdate) {                                                                                   </span>
<span class="-7373810293776319490" onmouseenter="enter('-7373810293776319490');" onmouseout="out('-7373810293776319490');" style=""> 983                  // Update markdown and preview flags from updated note.                                           </span>
<span class="-6548100248772474304" onmouseenter="enter('-6548100248772474304');" onmouseout="out('-6548100248772474304');" style=""> 984                  mIsMarkdownEnabled = mNote.isMarkdownEnabled();                                                   </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 985                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span  style=""> 986                                                                                                                    </span>
<span class="-3172285059116353636" onmouseenter="enter('-3172285059116353636');" onmouseout="out('-3172285059116353636');" style=""> 987                  // Show/Hide action/tabs based on markdown flag.                                                  </span>
<span class="-2583362461360625309" onmouseenter="enter('-2583362461360625309');" onmouseout="out('-2583362461360625309');" style=""> 988                  showMarkdownActionOrTabs();                                                                       </span>
<span  style=""> 989                                                                                                                    </span>
<span class="8277551329937109619" onmouseenter="enter('8277551329937109619');" onmouseout="out('8277551329937109619');" style=""> 990                  // Save note so any local changes get synced.                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 991                  mNote.save();                                                                                     </span>
<span  style=""> 992                                                                                                                    </span>
<span class="-4783156834321463304" onmouseenter="enter('-4783156834321463304');" onmouseout="out('-4783156834321463304');" style=""> 993                  // Update current note object on large screen devices in landscape orientation.                   </span>
<span class="-7225941789318469668" onmouseenter="enter('-7225941789318469668');" onmouseout="out('-7225941789318469668');" style=""> 994                  if (DisplayUtils.isLargeScreenLandscape(requireContext())) {                                      </span>
<span class="9072366327646001644" onmouseenter="enter('9072366327646001644');" onmouseout="out('9072366327646001644');" style=""> 995                      ((NotesActivity) requireActivity()).setCurrentNote(mNote);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 996                  }                                                                                                 </span>
<span  style=""> 997                                                                                                                    </span>
<span class="-510315884444466739" onmouseenter="enter('-510315884444466739');" onmouseout="out('-510315884444466739');" style=""> 998                  // Update overflow popup menu.                                                                    </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 999                  requireActivity().invalidateOptionsMenu();                                                        </span>
<span  style="">1000                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style="">1001                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style="">1002                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style="">1003                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style="">1004                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1005                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006              }                                                                                                     </span>
<span  style="">1007                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style="">1008              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1009              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1010              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1011          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1012      }                                                                                                             </span>
<span  style="">1013                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style="">1014      private void updateTagList() {                                                                                </span>
<span class="-2248190398996855538" onmouseenter="enter('-2248190398996855538');" onmouseout="out('-2248190398996855538');" style="">1015          setChips(mNote.getTagString());                                                                           </span>
<span class="704222064602714746" onmouseenter="enter('704222064602714746');" onmouseout="out('704222064602714746');" style="">1016          mTagInput.setText(&quot;&quot;);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1017      }                                                                                                             </span>
<span  style="">1018                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style="">1019      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style="">1020          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style="">1021          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style="">1022          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style="">1023          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style="">1024          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style="">1025          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style="">1026          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style="">1027          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style="">1028                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style="">1029          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style="">1030                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style="">1031          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style="">1032                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style="">1033          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style="">1034                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style="">1035          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style="">1036          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style="">1037              return newText.length();                                                                              </span>
<span  style="">1038                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style="">1039          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style="">1040          boolean afterCursorMatches = false;                                                                       </span>
<span  style="">1041                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1042          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title="1043              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));">1043              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title="1044              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));">1044              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="">1045          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1046              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047          }                                                                                                         </span>
<span  style="">1048                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style="">1049          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style="">1050          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style="">1051              newCursorLocation += deltaLength;                                                                     </span>
<span  style="">1052                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style="">1053          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style="">1054          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055      }                                                                                                             </span>
<span  style="">1056                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1057      @Override                                                                                                     </span>
<span class="7167548776341584998" onmouseenter="enter('7167548776341584998');" onmouseout="out('7167548776341584998');" style="">1058      public void onTagAdded(String tag) {                                                                          </span>
<span class="-7210480112102928295" onmouseenter="enter('-7210480112102928295');" onmouseout="out('-7210480112102928295');" style="">1059          if (mNote == null || !isAdded()) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1060              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1061          }                                                                                                         </span>
<span  style="">1062                                                                                                                    </span>
<span class="-5238169388612496279" onmouseenter="enter('-5238169388612496279');" onmouseout="out('-5238169388612496279');" style="">1063          if (mNote.getTagString() != null &amp;&amp; tag.length() &gt; mNote.getTagString().length()) {                       </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1064              AnalyticsTracker.track(                                                                               </span>
<span class="-1422381609780470266" onmouseenter="enter('-1422381609780470266');" onmouseout="out('-1422381609780470266');" style="">1065                  EDITOR_TAG_ADDED,                                                                                 </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1066                  CATEGORY_NOTE,                                                                                    </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style="">1067                  &quot;tag_added_to_note&quot;                                                                               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1068              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069          }                                                                                                         </span>
<span  style="">1070                                                                                                                    </span>
<span class="-1987136146652427775" onmouseenter="enter('-1987136146652427775');" onmouseout="out('-1987136146652427775');" style="">1071          mNote.setTagString(mNote.getTagString() + String.valueOf(SPACE) + tag);                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1072          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1073          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1074          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1075      }                                                                                                             </span>
<span  style="">1076                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1077      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style="">1078      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style="">1079          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080      }                                                                                                             </span>
<span  style="">1081                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1082      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style="">1083      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style="">1084          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style="">1085          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style="">1086          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087      }                                                                                                             </span>
<span  style="">1088                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1089      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style="">1090      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style="">1091          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style="">1092          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style="">1093              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style="">1094              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095          }                                                                                                         </span>
<span  style="">1096                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style="">1097          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style="">1098          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style="">1099              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style="">1100              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101          }                                                                                                         </span>
<span  style="">1102                                                                                                                    </span>
<span class="-5025193748599864334" onmouseenter="enter('-5025193748599864334');" onmouseout="out('-5025193748599864334');" style="">1103          if (!DisplayUtils.isLargeScreenLandscape(requireContext())) {                                             </span>
<span class="7215698034791320296" onmouseenter="enter('7215698034791320296');" onmouseout="out('7215698034791320296');" style="">1104              ((NoteEditorActivity) requireActivity()).setSearchMatchBarVisible(false);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105          }                                                                                                         </span>
<span  style="">1106                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style="">1107          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style="">1108          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style="">1109          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style="">1110          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1111      }                                                                                                             </span>
<span  style="">1112                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1113      /**                                                                                                           </span>
<span class="-6594088544842821458" onmouseenter="enter('-6594088544842821458');" onmouseout="out('-6594088544842821458');" style="">1114       * Set the note title to be a larger size and bold style.                                                     </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">1115       *                                                                                                            </span>
<span class="108828526699167208" onmouseenter="enter('108828526699167208');" onmouseout="out('108828526699167208');" style="">1116       * Remove all existing spans before applying spans or performance issues will occur.  Since both              </span>
<span class="-1228016533055730748" onmouseenter="enter('-1228016533055730748');" onmouseout="out('-1228016533055730748');" style="">1117       * {@link RelativeSizeSpan} and {@link StyleSpan} inherit from {@link MetricAffectingSpan}, all               </span>
<span class="7893653129030957545" onmouseenter="enter('7893653129030957545');" onmouseout="out('7893653129030957545');" style="">1118       * spans are removed when {@link MetricAffectingSpan} is removed.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1119       */                                                                                                           </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style="">1120      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-8681644249984288865" onmouseenter="enter('-8681644249984288865');" onmouseout="out('-8681644249984288865');" style="">1121          for (MetricAffectingSpan span : editable.getSpans(0, editable.length(), MetricAffectingSpan.class)) {     </span>
<span class="3876289346053092432" onmouseenter="enter('3876289346053092432');" onmouseout="out('3876289346053092432');" style="">1122              if (span instanceof RelativeSizeSpan || span instanceof StyleSpan) {                                  </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style="">1123                  editable.removeSpan(span);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1124              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125          }                                                                                                         </span>
<span  style="">1126                                                                                                                    </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style="">1127          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span  style="">1128                                                                                                                    </span>
<span class="-3049917029530340718" onmouseenter="enter('-3049917029530340718');" onmouseout="out('-3049917029530340718');" style="">1129          if (newLinePosition == 0) {                                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1130              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1131          }                                                                                                         </span>
<span  style="">1132                                                                                                                    </span>
<span class="2729500347175780141" onmouseenter="enter('2729500347175780141');" onmouseout="out('2729500347175780141');" style="">1133          int titleEndPosition = (newLinePosition &gt; 0) ? newLinePosition : editable.length();                       </span>
<span class="2132700250735486844" onmouseenter="enter('2132700250735486844');" onmouseout="out('2132700250735486844');" style="">1134          editable.setSpan(new RelativeSizeSpan(1.3f), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);      </span>
<span class="2779153330581394975" onmouseenter="enter('2779153330581394975');" onmouseout="out('2779153330581394975');" style="">1135          editable.setSpan(new StyleSpan(Typeface.BOLD), 0, titleEndPosition, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136      }                                                                                                             </span>
<span  style="">1137                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style="">1138      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style="">1139          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1140          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style="">1141          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style="">1142          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1143      }                                                                                                             </span>
<span  style="">1144                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style="">1145      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1146          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1147              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1148          }                                                                                                         </span>
<span  style="">1149                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1150          AppLog.add(                                                                                               </span>
<span class="5578246801297368785" onmouseenter="enter('5578246801297368785');" onmouseout="out('5578246801297368785');" style="">1151              Type.ACTION,                                                                                          </span>
<span class="5428018773251277804" onmouseenter="enter('5428018773251277804');" onmouseout="out('5428018773251277804');" style="">1152              &quot;Edited note (ID: &quot; + mNote.getSimperiumKey() +                                                       </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1153                  &quot; / Title: &quot; + mNote.getTitle() +                                                                 </span>
<span class="8952698626932118067" onmouseenter="enter('8952698626932118067');" onmouseout="out('8952698626932118067');" style="">1154                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(mNote.getContent()) +                            </span>
<span class="638163407399296951" onmouseenter="enter('638163407399296951');" onmouseout="out('638163407399296951');" style="">1155                  &quot; / Words: &quot; + NoteUtils.getWordCount(mNote.getContent()) + &quot;)&quot;                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1156          );                                                                                                        </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style="">1157          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158      }                                                                                                             </span>
<span  style="">1159                                                                                                                    </span>
<span class="-710883025591886987" onmouseenter="enter('-710883025591886987');" onmouseout="out('-710883025591886987');" style="">1160      public boolean isPlaceholderVisible() {                                                                       </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1161          if (mPlaceholderView != null) {                                                                           </span>
<span class="9146837192541101428" onmouseenter="enter('9146837192541101428');" onmouseout="out('9146837192541101428');" style="">1162              return mPlaceholderView.getVisibility() == View.VISIBLE;                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1163          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="">1164              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1165          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166      }                                                                                                             </span>
<span  style="">1167                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style="">1168      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style="">1169          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style="">1170              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style="">1171              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1172          }                                                                                                         </span>
<span  style="">1173                                                                                                                    </span>
<span class="-4989874178895443572" onmouseenter="enter('-4989874178895443572');" onmouseout="out('-4989874178895443572');" style="">1174          if (mPlaceholderView != null) {                                                                           </span>
<span class="-1939399638656140532" onmouseenter="enter('-1939399638656140532');" onmouseout="out('-1939399638656140532');" style="">1175              mPlaceholderView.setVisibility(isVisible ? View.VISIBLE : View.GONE);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1176          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1177      }                                                                                                             </span>
<span  style="">1178                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1179      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style="">1180      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style="">1181          if (!hasFocus) {                                                                                          </span>
<span class="6004881889903239201" onmouseenter="enter('6004881889903239201');" onmouseout="out('6004881889903239201');" style="">1182              String tags = getNoteTagsString().trim();                                                             </span>
<span  style="">1183                                                                                                                    </span>
<span class="-8405816820067798370" onmouseenter="enter('-8405816820067798370');" onmouseout="out('-8405816820067798370');" style="">1184              if (mTagInput.getText().toString().trim().length() &gt; 0                                                </span>
<span class="-3023921947470011218" onmouseenter="enter('-3023921947470011218');" onmouseout="out('-3023921947470011218');" style="">1185                  &amp;&amp; TagUtils.hashTagValid(mTagInput.getText().toString().trim())) {                                </span>
<span class="-8826289385438230332" onmouseenter="enter('-8826289385438230332');" onmouseout="out('-8826289385438230332');" style="">1186                  onTagAdded(mTagInput.getText().toString());                                                       </span>
<span class="-2106738445799932691" onmouseenter="enter('-2106738445799932691');" onmouseout="out('-2106738445799932691');" style="">1187              } else if (tags.length() &gt; 0) {                                                                       </span>
<span class="822236618440501069" onmouseenter="enter('822236618440501069');" onmouseout="out('822236618440501069');" style="">1188                  setChips(tags);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1189              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191      }                                                                                                             </span>
<span  style="">1192                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style="">1193      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style="">1194          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1195      }                                                                                                             </span>
<span  style="">1196                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style="">1197      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style="">1198          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1199      }                                                                                                             </span>
<span  style="">1200                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style="">1201      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style="">1202          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style="">1203              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1204          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style="">1205              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207      }                                                                                                             </span>
<span  style="">1208                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style="">1209      private String getNoteTagsString() {                                                                          </span>
<span class="-6446890674263139592" onmouseenter="enter('-6446890674263139592');" onmouseout="out('-6446890674263139592');" style="">1210          StringBuilder tags = new StringBuilder();                                                                 </span>
<span  style="">1211                                                                                                                    </span>
<span class="-4475001311202686832" onmouseenter="enter('-4475001311202686832');" onmouseout="out('-4475001311202686832');" style="">1212          for (int i= 0; i &lt; mTagChips.getChildCount(); i++) {                                                      </span>
<span class="5232521310381718252" onmouseenter="enter('5232521310381718252');" onmouseout="out('5232521310381718252');" style="">1213              tags.append(((Chip) mTagChips.getChildAt(i)).getText()).append(&quot; &quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214          }                                                                                                         </span>
<span  style="">1215                                                                                                                    </span>
<span class="-8755942361109275249" onmouseenter="enter('-8755942361109275249');" onmouseout="out('-8755942361109275249');" style="">1216          return tags.toString();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217      }                                                                                                             </span>
<span  style="">1218                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1219      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style="">1220       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1221       */                                                                                                           </span>
<span  style="">1222                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1223      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style="">1224      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1225          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1226          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1227              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229      }                                                                                                             </span>
<span  style="">1230                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style="">1232      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1233          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1234          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1235              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237      }                                                                                                             </span>
<span  style="">1238                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1239      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style="">1240      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style="">1241          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style="">1242              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243          }                                                                                                         </span>
<span  style="">1244                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style="">1245          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1246              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247          }                                                                                                         </span>
<span  style="">1248                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style="">1249          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style="">1250          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style="">1251          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style="">1252              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1253          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style="">1254          ft.addToBackStack(null);                                                                                  </span>
<span  style="">1255                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style="">1256          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style="">1257          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style="">1258          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style="">1259          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1260      }                                                                                                             </span>
<span  style="">1261                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1262      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style="">1263      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style="">1264          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1265      }                                                                                                             </span>
<span  style="">1266                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1267      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style="">1268      public void onShareDismissed() {                                                                              </span>
<span  style="">1269                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270      }                                                                                                             </span>
<span  style="">1271                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1272      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style="">1273       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1274       */                                                                                                           </span>
<span  style="">1275                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1276      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style="">1277      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1278          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1279          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1280              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282      }                                                                                                             </span>
<span  style="">1283                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1284      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style="">1285      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style="">1286          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style="">1287              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1288          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">1289          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290      }                                                                                                             </span>
<span  style="">1291                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1292      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style="">1293      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style="">1294          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style="">1295              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296          }                                                                                                         </span>
<span  style="">1297                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style="">1298          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style="">1299              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1300          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301      }                                                                                                             </span>
<span  style="">1302                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1303      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style="">1304      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style="">1305          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306      }                                                                                                             </span>
<span  style="">1307                                                                                                                    </span>
<span class="-2294831155573525866" onmouseenter="enter('-2294831155573525866');" onmouseout="out('-2294831155573525866');" style="">1308      private void saveNote() {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1309          try {                                                                                                     </span>
<span class="1165974910453313736" onmouseenter="enter('1165974910453313736');" onmouseout="out('1165974910453313736');" style="">1310              if (mNote == null || mNotesBucket == null || mContentEditText == null || mIsLoadingNote ||            </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style=""><abbr title="1311                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1311                  (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1312                  return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1313              } else {                                                                                              </span>
<span class="-1125588719504868669" onmouseenter="enter('-1125588719504868669');" onmouseout="out('-1125588719504868669');" style="">1314                  mNote = mNotesBucket.get(mNote.getSimperiumKey());                                                </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1315                  mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316              }                                                                                                     </span>
<span  style="">1317                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1318              String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1319              String tagString = getNoteTagsString();                                                               </span>
<span  style="">1320                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1321              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1321              if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnableðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1322                  mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1323                  mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1324                  mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1325                  mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1326                  mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1327                  mNote.save();                                                                                     </span>
<span  style="">1328                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1329                  AnalyticsTracker.track(                                                                           </span>
<span class="5989088647015258106" onmouseenter="enter('5989088647015258106');" onmouseout="out('5989088647015258106');" style="">1330                      EDITOR_NOTE_EDITED,                                                                           </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1331                      CATEGORY_NOTE,                                                                                </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1332                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1333                  );                                                                                                </span>
<span  style="">1334                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1335                  AppLog.add(                                                                                       </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1336                      Type.SYNC,                                                                                    </span>
<span class="6067618927567422040" onmouseenter="enter('6067618927567422040');" onmouseout="out('6067618927567422040');" style="">1337                      &quot;Saved note locally in NoteEditorFragment (ID: &quot; + mNote.getSimperiumKey() +                  </span>
<span class="7932348859464220053" onmouseenter="enter('7932348859464220053');" onmouseout="out('7932348859464220053');" style="">1338                          &quot; / Title: &quot; + mNote.getTitle() +                                                         </span>
<span class="431319751787505650" onmouseenter="enter('431319751787505650');" onmouseout="out('431319751787505650');" style="">1339                          &quot; / Characters: &quot; + NoteUtils.getCharactersCount(content) +                               </span>
<span class="-6931859245270948040" onmouseenter="enter('-6931859245270948040');" onmouseout="out('-6931859245270948040');" style="">1340                          &quot; / Words: &quot; + NoteUtils.getWordCount(content) + &quot;)&quot;                                      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1341                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1342              }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1343          } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1344              exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1346      }                                                                                                             </span>
<span  style="">1347                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1348      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1349      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1350      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1351      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1352          mCurrentCursorPosition = selEnd;                                                                          </span>
<span  style="">1353                                                                                                                    </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1354          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1355              Editable noteContent = mContentEditText.getText();                                                    </span>
<span  style="">1356                                                                                                                    </span>
<span class="-3728163105261704014" onmouseenter="enter('-3728163105261704014');" onmouseout="out('-3728163105261704014');" style="">1357              if (noteContent == null) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1358                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359              }                                                                                                     </span>
<span  style="">1360                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1361              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span  style="">1362                                                                                                                    </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1363              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1364                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1365                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1366                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1366                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span  style="">1367                                                                                                                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1368                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1369                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1370                      updateMenuItems();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1371                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372                  }                                                                                                 </span>
<span  style="">1373                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1374                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1375                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1376                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span  style="">1377                                                                                                                    </span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1378                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1379                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380                      }                                                                                             </span>
<span  style="">1381                                                                                                                    </span>
<span class="-5782179795728005521" onmouseenter="enter('-5782179795728005521');" onmouseout="out('-5782179795728005521');" style="">1382                      updateMenuItems();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1383                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1384              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1385                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1386                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1388          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1389              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1390              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392      }                                                                                                             </span>
<span  style="">1393                                                                                                                    </span>
<span class="2270277682351720198" onmouseenter="enter('2270277682351720198');" onmouseout="out('2270277682351720198');" style="">1394      private void updateMenuItems() {                                                                              </span>
<span class="-515446486584282912" onmouseenter="enter('-515446486584282912');" onmouseout="out('-515446486584282912');" style="">1395          mCopyMenuItem.setIcon(mCopyIcon);                                                                         </span>
<span class="773177223161240604" onmouseenter="enter('773177223161240604');" onmouseout="out('773177223161240604');" style="">1396          mShareMenuItem.setIcon(mShareIcon);                                                                       </span>
<span  style="">1397                                                                                                                    </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1398          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1399              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1400                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1401                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1402              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1403                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1404                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1405              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1406                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1407                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="217084746454652922" onmouseenter="enter('217084746454652922');" onmouseout="out('217084746454652922');" style="">1408              } else if (mLinkUrl.startsWith(SIMPLENOTE_LINK_PREFIX)) {                                             </span>
<span class="238390611676684376" onmouseenter="enter('238390611676684376');" onmouseout="out('238390611676684376');" style="">1409                  mViewLinkMenuItem.setIcon(mLinkIcon);                                                             </span>
<span class="-8064422576667643895" onmouseenter="enter('-8064422576667643895');" onmouseout="out('-8064422576667643895');" style="">1410                  mViewLinkMenuItem.setTitle(getString(R.string.open_note));                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1411              } else {                                                                                              </span>
<span class="7513617525800990773" onmouseenter="enter('7513617525800990773');" onmouseout="out('7513617525800990773');" style="">1412                  mViewLinkMenuItem.setIcon(mBrowserIcon);                                                          </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1413                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1414              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1416      }                                                                                                             </span>
<span  style="">1417                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1418      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1419          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1420              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1421              mNote.save();                                                                                         </span>
<span  style="">1422                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1423              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1424              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1425                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1426              AnalyticsTracker.track(                                                                               </span>
<span class="1199660928845890452" onmouseenter="enter('1199660928845890452');" onmouseout="out('1199660928845890452');" style="">1427                  isPublished ? EDITOR_NOTE_PUBLISHED : EDITOR_NOTE_UNPUBLISHED,                                    </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1428                  CATEGORY_NOTE,                                                                                    </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1429                  &quot;publish_note_button&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1430              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432      }                                                                                                             </span>
<span  style="">1433                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1434      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1435          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1436              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1437          }                                                                                                         </span>
<span  style="">1438                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1439          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1440          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1441                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1442          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1443              if (mNote.isPublished()) {                                                                            </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1444                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="7497833686297233990" onmouseenter="enter('7497833686297233990');" onmouseout="out('7497833686297233990');" style="">1445                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG).show();           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1446                  } else {                                                                                          </span>
<span class="3788384694509381046" onmouseenter="enter('3788384694509381046');" onmouseout="out('3788384694509381046');" style="">1447                      Snackbar.make(mRootView, R.string.publish_successful, Snackbar.LENGTH_LONG)                   </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1448                          .setAction(                                                                               </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1449                              R.string.undo,                                                                        </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1450                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1451                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1452                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1453                                      mHideActionOnSuccess = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1454                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1455                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1456                              }                                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1457                          )                                                                                         </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1458                          .show();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1459                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1460              } else {                                                                                              </span>
<span class="7461063035263331376" onmouseenter="enter('7461063035263331376');" onmouseout="out('7461063035263331376');" style="">1461                  if (mHideActionOnSuccess) {                                                                       </span>
<span class="-3987684412384152113" onmouseenter="enter('-3987684412384152113');" onmouseout="out('-3987684412384152113');" style="">1462                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG).show();         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1463                  } else {                                                                                          </span>
<span class="525266416384737723" onmouseenter="enter('525266416384737723');" onmouseout="out('525266416384737723');" style="">1464                      Snackbar.make(mRootView, R.string.unpublish_successful, Snackbar.LENGTH_LONG)                 </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1465                          .setAction(                                                                               </span>
<span class="3956744015789713296" onmouseenter="enter('3956744015789713296');" onmouseout="out('3956744015789713296');" style="">1466                              R.string.undo,                                                                        </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1467                              new View.OnClickListener() {                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1468                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1469                                  public void onClick(View v) {                                                     </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1470                                      mHideActionOnSuccess = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1471                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1472                                  }                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1473                              }                                                                                     </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1474                          )                                                                                         </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1475                          .show();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1476                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1477              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1478          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1479              if (mNote.isPublished()) {                                                                            </span>
<span class="-4464833730716871257" onmouseenter="enter('-4464833730716871257');" onmouseout="out('-4464833730716871257');" style="">1480                  Snackbar.make(mRootView, R.string.unpublish_error, Snackbar.LENGTH_LONG)                          </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1481                      .setAction(                                                                                   </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1482                          R.string.retry,                                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1483                          new View.OnClickListener() {                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1484                              @Override                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1485                              public void onClick(View v) {                                                         </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1486                                  mHideActionOnSuccess = true;                                                      </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1487                                  unpublishNote();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1488                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1489                          }                                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1490                      )                                                                                             </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1491                      .show();                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1492              } else {                                                                                              </span>
<span class="-2467718639414539789" onmouseenter="enter('-2467718639414539789');" onmouseout="out('-2467718639414539789');" style="">1493                  Snackbar.make(mRootView, R.string.publish_error, Snackbar.LENGTH_LONG)                            </span>
<span class="1204503404672542585" onmouseenter="enter('1204503404672542585');" onmouseout="out('1204503404672542585');" style="">1494                      .setAction(                                                                                   </span>
<span class="4947887522108728525" onmouseenter="enter('4947887522108728525');" onmouseout="out('4947887522108728525');" style="">1495                          R.string.retry,                                                                           </span>
<span class="6694611070408135822" onmouseenter="enter('6694611070408135822');" onmouseout="out('6694611070408135822');" style="">1496                          new View.OnClickListener() {                                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1497                              @Override                                                                             </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1498                              public void onClick(View v) {                                                         </span>
<span class="-4312757058216662092" onmouseenter="enter('-4312757058216662092');" onmouseout="out('-4312757058216662092');" style="">1499                                  mHideActionOnSuccess = true;                                                      </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1500                                  publishNote();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1501                              }                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1502                          }                                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style="">1503                      )                                                                                             </span>
<span class="-4298987925833899609" onmouseenter="enter('-4298987925833899609');" onmouseout="out('-4298987925833899609');" style="">1504                      .show();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1505              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1506          }                                                                                                         </span>
<span  style="">1507                                                                                                                    </span>
<span class="-6543205336186683580" onmouseenter="enter('-6543205336186683580');" onmouseout="out('-6543205336186683580');" style="">1508          mHideActionOnSuccess = false;                                                                             </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style="">1509          requireActivity().invalidateOptionsMenu();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1510      }                                                                                                             </span>
<span  style="">1511                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1512      private void publishNote() {                                                                                  </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1513          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1514              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1515              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1516          }                                                                                                         </span>
<span  style="">1517                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1518          if (isAdded()) {                                                                                          </span>
<span class="402944241808212646" onmouseenter="enter('402944241808212646');" onmouseout="out('402944241808212646');" style="">1519              mPublishingSnackbar = Snackbar.make(mRootView, R.string.publishing, Snackbar.LENGTH_INDEFINITE);      </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1520              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1521          }                                                                                                         </span>
<span  style="">1522                                                                                                                    </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1523          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1524      }                                                                                                             </span>
<span  style="">1525                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1526      private void unpublishNote() {                                                                                </span>
<span class="939688580551732431" onmouseenter="enter('939688580551732431');" onmouseout="out('939688580551732431');" style="">1527          if (!NetworkUtils.isNetworkAvailable(requireContext())) {                                                 </span>
<span class="8924960461604916754" onmouseenter="enter('8924960461604916754');" onmouseout="out('8924960461604916754');" style="">1528              Toast.makeText(requireContext(), R.string.error_network_required, Toast.LENGTH_LONG).show();          </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1529              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1530          }                                                                                                         </span>
<span  style="">1531                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1532          if (isAdded()) {                                                                                          </span>
<span class="-5849073483621593387" onmouseenter="enter('-5849073483621593387');" onmouseout="out('-5849073483621593387');" style="">1533              mPublishingSnackbar = Snackbar.make(mRootView, R.string.unpublishing, Snackbar.LENGTH_INDEFINITE);    </span>
<span class="-8074649539774450656" onmouseenter="enter('-8074649539774450656');" onmouseout="out('-8074649539774450656');" style="">1534              mPublishingSnackbar.show();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1535          }                                                                                                         </span>
<span  style="">1536                                                                                                                    </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1537          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1538      }                                                                                                             </span>
<span  style="">1539                                                                                                                    </span>
<span class="-2059530202125765167" onmouseenter="enter('-2059530202125765167');" onmouseout="out('-2059530202125765167');" style="">1540      private void showShare(String text) {                                                                         </span>
<span class="-462181345749239892" onmouseenter="enter('-462181345749239892');" onmouseout="out('-462181345749239892');" style="">1541          startActivity(                                                                                            </span>
<span class="-2960409665728397105" onmouseenter="enter('-2960409665728397105');" onmouseout="out('-2960409665728397105');" style="">1542              ShareCompat.IntentBuilder.from(requireActivity())                                                     </span>
<span class="-7167858845932453536" onmouseenter="enter('-7167858845932453536');" onmouseout="out('-7167858845932453536');" style="">1543                  .setText(text)                                                                                    </span>
<span class="8809275298081922415" onmouseenter="enter('8809275298081922415');" onmouseout="out('8809275298081922415');" style="">1544                  .setType(&quot;text/plain&quot;)                                                                            </span>
<span class="-4946837607512363870" onmouseenter="enter('-4946837607512363870');" onmouseout="out('-4946837607512363870');" style="">1545                  .createChooserIntent()                                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1546          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1547      }                                                                                                             </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1548      private void showShareSheet() {                                                                               </span>
<span class="4007819101803880383" onmouseenter="enter('4007819101803880383');" onmouseout="out('4007819101803880383');" style="">1549          if (isAdded() &amp;&amp; mShareBottomSheet != null &amp;&amp; !mShareBottomSheet.isAdded()) {                             </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1550              mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1551          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1552      }                                                                                                             </span>
<span  style="">1553                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1554      private void showInfoSheet() {                                                                                </span>
<span class="2029397660939536329" onmouseenter="enter('2029397660939536329');" onmouseout="out('2029397660939536329');" style="">1555          if (isAdded() &amp;&amp; mInfoBottomSheet != null &amp;&amp; !mInfoBottomSheet.isAdded()) {                               </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1556              mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1557          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1558      }                                                                                                             </span>
<span  style="">1559                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1560      private void showHistorySheet() {                                                                             </span>
<span class="1950176939429748509" onmouseenter="enter('1950176939429748509');" onmouseout="out('1950176939429748509');" style="">1561          if (isAdded() &amp;&amp; mHistoryBottomSheet != null &amp;&amp; !mHistoryBottomSheet.isAdded()) {                         </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1562              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1563              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1564              saveNote();                                                                                           </span>
<span  style="">1565                                                                                                                    </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1566              mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1567          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1568      }                                                                                                             </span>
<span  style="">1569                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1570      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1571      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1572      }                                                                                                             </span>
<span  style="">1573                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1574      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1575      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1576          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1577              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1578                  try {                                                                                             </span>
<span class="-1578175229665237336" onmouseenter="enter('-1578175229665237336');" onmouseout="out('-1578175229665237336');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1579 -                    mNotesBucket = noteBucket;                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1580 -                    final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4372796228007650956" onmouseenter="enter('4372796228007650956');" onmouseout="out('4372796228007650956');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1581 +                    final Note updatedNote = noteBucket.get(key);                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1582 +                                                                                                                  </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1583                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1584                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1585                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1586                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1587                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1588                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1589                                  }                                                                                 </span>
<span  style="">1590                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1591                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1592                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1593                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1594                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1595                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1596                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1597                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1598                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1599              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1600          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1601      }                                                                                                             </span>
<span  style="">1602                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1603      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1604      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-2565337116915540090" onmouseenter="enter('-2565337116915540090');" onmouseout="out('-2565337116915540090');" style="">1605          if (mIsPaused) {                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style="">1606              mNotesBucket.removeListener(this);                                                                    </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1607 -            mNotesBucket.stop();                                                                                  </span>
<span class="-5888247817738062720" onmouseenter="enter('-5888247817738062720');" onmouseout="out('-5888247817738062720');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1608 -            AppLog.add(Type.SYNC, &quot;Stopped note bucket (NoteEditorFragment)&quot;);                                    </span>
<span class="4590354641716414924" onmouseenter="enter('4590354641716414924');" onmouseout="out('4590354641716414924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1609 +            AppLog.add(Type.SYNC, &quot;Removed note bucket listener (NoteEditorFragment)&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1610          }                                                                                                         </span>
<span  style="">1611                                                                                                                    </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1612          AppLog.add(                                                                                               </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1613              Type.SYNC,                                                                                            </span>
<span class="-2467507706164826416" onmouseenter="enter('-2467507706164826416');" onmouseout="out('-2467507706164826416');" style="">1614              &quot;Saved note callback in NoteEditorFragment (ID: &quot; + note.getSimperiumKey() +                          </span>
<span class="8009766076008568533" onmouseenter="enter('8009766076008568533');" onmouseout="out('8009766076008568533');" style="">1615                  &quot; / Title: &quot; + note.getTitle() +                                                                  </span>
<span class="3373129960779075140" onmouseenter="enter('3373129960779075140');" onmouseout="out('3373129960779075140');" style="">1616                  &quot; / Characters: &quot; + NoteUtils.getCharactersCount(note.getContent()) +                             </span>
<span class="-6586905692045925149" onmouseenter="enter('-6586905692045925149');" onmouseout="out('-6586905692045925149');" style="">1617                  &quot; / Words: &quot; + NoteUtils.getWordCount(note.getContent()) + &quot;)&quot;                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1618          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1619      }                                                                                                             </span>
<span  style="">1620                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1621      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1622      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1623          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1624          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1625              return;                                                                                               </span>
<span  style="">1626                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1627          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1628          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1629              return;                                                                                               </span>
<span  style="">1630                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1631          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1632      }                                                                                                             </span>
<span  style="">1633                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1634      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1635          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1636                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1637          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1638              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1639          }                                                                                                         </span>
<span  style="">1640                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1641          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1642          protected void onPreExecute() {                                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1643              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1644                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1645              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1646                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1647                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1648              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1649          }                                                                                                         </span>
<span  style="">1650                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1651          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1652          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1653              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1654                                                                                                                    </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1655              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1656                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1657              }                                                                                                     </span>
<span  style="">1658                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1659              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1660              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1661              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1662                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1663              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1664                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span  style="">1665                                                                                                                    </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1666                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1667                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1668                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1669                  }                                                                                                 </span>
<span  style="">1670                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1671                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1672                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1673                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1674                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="1712554612672119113" onmouseenter="enter('1712554612672119113');" onmouseout="out('1712554612672119113');" style="">1675                      AppLog.add(                                                                                   </span>
<span class="5387827170384214934" onmouseenter="enter('5387827170384214934');" onmouseout="out('5387827170384214934');" style="">1676                          Type.SYNC,                                                                                </span>
<span class="-7392016025425077182" onmouseenter="enter('-7392016025425077182');" onmouseout="out('-7392016025425077182');" style="">1677                          &quot;Loaded note (ID: &quot; + fragment.mNote.getSimperiumKey() +                                  </span>
<span class="-7384197456729805506" onmouseenter="enter('-7384197456729805506');" onmouseout="out('-7384197456729805506');" style="">1678                              &quot; / Title: &quot; + fragment.mNote.getTitle() +                                            </span>
<span class="-9069213288035386789" onmouseenter="enter('-9069213288035386789');" onmouseout="out('-9069213288035386789');" style="">1679                              &quot; / Characters: &quot; + NoteUtils.getCharactersCount(fragment.mNote.getContent()) +       </span>
<span class="-2213550460625477177" onmouseenter="enter('-2213550460625477177');" onmouseout="out('-2213550460625477177');" style="">1680                              &quot; / Words: &quot; + NoteUtils.getWordCount(fragment.mNote.getContent()) + &quot;)&quot;              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1681                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1682                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1683              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1684                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1685                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span  style="">1686                                                                                                                    </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1687                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1688                      Note currentNote = notesCursor.getObject();                                                   </span>
<span  style="">1689                                                                                                                    </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1690                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1691                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1692                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1693                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1694                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1695              }                                                                                                     </span>
<span  style="">1696                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1697              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1698          }                                                                                                         </span>
<span  style="">1699                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1700          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1701          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6221597993462190775" onmouseenter="enter('-6221597993462190775');" onmouseout="out('-6221597993462190775');" style="">1702              final NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                               </span>
<span class="-5025636818911942947" onmouseenter="enter('-5025636818911942947');" onmouseout="out('-5025636818911942947');" style="">1703              if (fragment == null || fragment.getActivity() == null || fragment.getActivity().isFinishing()) {     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1704                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1705              }                                                                                                     </span>
<span  style="">1706                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1707              fragment.refreshContent(false);                                                                       </span>
<span  style="">1708                                                                                                                    </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1709              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1710                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1710                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1711                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1712                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1713              }                                                                                                     </span>
<span  style="">1714                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1715              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1716                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1717              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1718                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1719                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1720                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1721                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1722                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1723                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1724                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1725                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1726                          }                                                                                         </span>
<span  style="">1727                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1728                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1728                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSysðŸ”µ</abbr></span>
<span  style="">1729                                                                                                                    </span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1730                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1731                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1732                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1733                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1734                  }, 100);                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1735              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1736                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1737                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1738              }                                                                                                     </span>
<span  style="">1739                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1740              fragment.updateMarkdownView();                                                                        </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1741              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1742              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1743              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1744          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1745      }                                                                                                             </span>
<span  style="">1746                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1747      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="2470819661574637360" onmouseenter="enter('2470819661574637360');" onmouseout="out('2470819661574637360');" style="">1748          WeakReference&lt;NoteEditorFragment&gt; mNoteEditorFragmentReference;                                           </span>
<span  style="">1749                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1750          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="-729324371914675142" onmouseenter="enter('-729324371914675142');" onmouseout="out('-729324371914675142');" style="">1751              mNoteEditorFragmentReference = new WeakReference&lt;&gt;(fragment);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1752          }                                                                                                         </span>
<span  style="">1753                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1754          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1755          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1756              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1757                                                                                                                    </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1758              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1759                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1760              }                                                                                                     </span>
<span  style="">1761                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1762              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1763          }                                                                                                         </span>
<span  style="">1764                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1765          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1766          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6239297955916786402" onmouseenter="enter('-6239297955916786402');" onmouseout="out('-6239297955916786402');" style="">1767              NoteEditorFragment fragment = mNoteEditorFragmentReference.get();                                     </span>
<span  style="">1768                                                                                                                    </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1769              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1770                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1771                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1772                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1773              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1774          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1775      }                                                                                                             </span>
<span  style="">1776                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1777      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1778          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1779              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1780          }                                                                                                         </span>
<span  style="">1781                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1782          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1783              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1784          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1785      }                                                                                                             </span>
<span  style="">1786                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1787      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1788      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1789          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1790              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1791          }                                                                                                         </span>
<span  style="">1792                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1793          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1794          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1795              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1796              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1797          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1798              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1799              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1800                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1801                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1802                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1803              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1804              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="8234543871026198045" onmouseenter="enter('8234543871026198045');" onmouseout="out('8234543871026198045');" style="">1805              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPreviewTextContent());                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1806          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1807      }                                                                                                             </span>
<span  style="">1808                                                                                                                    </span>
<span class="621072892992557040" onmouseenter="enter('621072892992557040');" onmouseout="out('621072892992557040');" style="">1809      private ColorStateList getChipBackgroundColor() {                                                             </span>
<span class="-2852806967863140186" onmouseenter="enter('-2852806967863140186');" onmouseout="out('-2852806967863140186');" style="">1810          int[][] states = new int[][] {                                                                            </span>
<span class="3138779758285079345" onmouseenter="enter('3138779758285079345');" onmouseout="out('3138779758285079345');" style="">1811              new int[] { android.R.attr.state_checked}, // checked                                                 </span>
<span class="2921033856249437884" onmouseenter="enter('2921033856249437884');" onmouseout="out('2921033856249437884');" style="">1812              new int[] {-android.R.attr.state_checked}  // unchecked                                               </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1813          };                                                                                                        </span>
<span  style="">1814                                                                                                                    </span>
<span class="-5399670070282478940" onmouseenter="enter('-5399670070282478940');" onmouseout="out('-5399670070282478940');" style="">1815          int[] colors = new int[] {                                                                                </span>
<span class="3188530588543322355" onmouseenter="enter('3188530588543322355');" onmouseout="out('3188530588543322355');" style="">1816              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOnBackgroundColor),              </span>
<span class="1811726545786864469" onmouseenter="enter('1811726545786864469');" onmouseout="out('1811726545786864469');" style="">1817              ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipCheckedOffBackgroundColor)              </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">1818          };                                                                                                        </span>
<span  style="">1819                                                                                                                    </span>
<span class="-5773454088160861424" onmouseenter="enter('-5773454088160861424');" onmouseout="out('-5773454088160861424');" style="">1820          return new ColorStateList(states, colors);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1821      }                                                                                                             </span>
<span  style="">1822                                                                                                                    </span>
<span class="7978150615022703967" onmouseenter="enter('7978150615022703967');" onmouseout="out('7978150615022703967');" style="">1823      private void setChips(CharSequence text) {                                                                    </span>
<span class="-6352640607268108974" onmouseenter="enter('-6352640607268108974');" onmouseout="out('-6352640607268108974');" style="">1824          mTagPadding.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                  </span>
<span class="5420418357496709981" onmouseenter="enter('5420418357496709981');" onmouseout="out('5420418357496709981');" style="">1825          mTagChips.setVisibility(text.length() &gt; 0 ? View.VISIBLE : View.GONE);                                    </span>
<span class="6036610741747636495" onmouseenter="enter('6036610741747636495');" onmouseout="out('6036610741747636495');" style="">1826          mTagChips.setSingleSelection(true);                                                                       </span>
<span class="-281158766645647153" onmouseenter="enter('-281158766645647153');" onmouseout="out('-281158766645647153');" style="">1827          mTagChips.removeAllViews();                                                                               </span>
<span class="-2312425264507564639" onmouseenter="enter('-2312425264507564639');" onmouseout="out('-2312425264507564639');" style="">1828          SimpleStringSplitter tags = new SimpleStringSplitter(SPACE);                                              </span>
<span class="-2221549004994088170" onmouseenter="enter('-2221549004994088170');" onmouseout="out('-2221549004994088170');" style="">1829          tags.setString(text.toString());                                                                          </span>
<span  style="">1830                                                                                                                    </span>
<span class="-7185531782033852210" onmouseenter="enter('-7185531782033852210');" onmouseout="out('-7185531782033852210');" style="">1831          for (String tag : tags) {                                                                                 </span>
<span class="-4253336828679787495" onmouseenter="enter('-4253336828679787495');" onmouseout="out('-4253336828679787495');" style="">1832              final Chip chip = new Chip(requireContext());                                                         </span>
<span class="1656135987988335587" onmouseenter="enter('1656135987988335587');" onmouseout="out('1656135987988335587');" style="">1833              chip.setText(tag);                                                                                    </span>
<span class="-8675353638360963179" onmouseenter="enter('-8675353638360963179');" onmouseout="out('-8675353638360963179');" style="">1834              chip.setCheckable(true);                                                                              </span>
<span class="67942289785469509" onmouseenter="enter('67942289785469509');" onmouseout="out('67942289785469509');" style="">1835              chip.setCheckedIcon(null);                                                                            </span>
<span class="4360750963000358582" onmouseenter="enter('4360750963000358582');" onmouseout="out('4360750963000358582');" style="">1836              chip.setChipBackgroundColor(getChipBackgroundColor());                                                </span>
<span class="9213121115800400320" onmouseenter="enter('9213121115800400320');" onmouseout="out('9213121115800400320');" style="">1837              chip.setTextColor(ThemeUtils.getColorFromAttribute(requireContext(), R.attr.chipTextColor));          </span>
<span class="7518117741736260019" onmouseenter="enter('7518117741736260019');" onmouseout="out('7518117741736260019');" style="">1838              chip.setStateListAnimator(null);                                                                      </span>
<span class="-4577029713597050278" onmouseenter="enter('-4577029713597050278');" onmouseout="out('-4577029713597050278');" style="">1839              chip.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1840                  @Override                                                                                         </span>
<span class="3078550550582438549" onmouseenter="enter('3078550550582438549');" onmouseout="out('3078550550582438549');" style="">1841                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                      </span>
<span class="44703121288981283" onmouseenter="enter('44703121288981283');" onmouseout="out('44703121288981283');" style="">1842                      chip.setCloseIconVisible(isChecked);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1843                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1844              });                                                                                                   </span>
<span class="160847713587338016" onmouseenter="enter('160847713587338016');" onmouseout="out('160847713587338016');" style="">1845              chip.setOnCloseIconClickListener(new View.OnClickListener() {                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1846                  @Override                                                                                         </span>
<span class="2630081792579352299" onmouseenter="enter('2630081792579352299');" onmouseout="out('2630081792579352299');" style="">1847                  public void onClick(View view) {                                                                  </span>
<span class="-7509335457070409893" onmouseenter="enter('-7509335457070409893');" onmouseout="out('-7509335457070409893');" style="">1848                      mTagChips.removeView(view);                                                                   </span>
<span class="6057505716411681059" onmouseenter="enter('6057505716411681059');" onmouseout="out('6057505716411681059');" style="">1849                      updateTags();                                                                                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1850                      AnalyticsTracker.track(                                                                       </span>
<span class="6322942827450848506" onmouseenter="enter('6322942827450848506');" onmouseout="out('6322942827450848506');" style="">1851                          EDITOR_TAG_REMOVED,                                                                       </span>
<span class="-2430475172570880083" onmouseenter="enter('-2430475172570880083');" onmouseout="out('-2430475172570880083');" style="">1852                          CATEGORY_NOTE,                                                                            </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style="">1853                          &quot;tag_removed_from_note&quot;                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1854                      );                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1855                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1856              });                                                                                                   </span>
<span class="-535069795448615627" onmouseenter="enter('-535069795448615627');" onmouseout="out('-535069795448615627');" style="">1857              mTagChips.addView(chip);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1858          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1859      }                                                                                                             </span>
<span  style="">1860                                                                                                                    </span>
<span class="2006864524440231174" onmouseenter="enter('2006864524440231174');" onmouseout="out('2006864524440231174');" style="">1861      private void updateTags() {                                                                                   </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style="">1862          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1863              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1864          }                                                                                                         </span>
<span  style="">1865                                                                                                                    </span>
<span class="2510051710836521686" onmouseenter="enter('2510051710836521686');" onmouseout="out('2510051710836521686');" style="">1866          mNote.setTagString(getNoteTagsString());                                                                  </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1867          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style="">1868          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1869          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1870      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1871  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            