<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>119</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    119
                    <a href="118.html">prev</a>
                    <a href="120.html">next</a>
                    <a href="119_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_4c906659b12b21ea55fd99e9e59d22de6a0133ad_core/broadleaf-framework/src/main/java/org/broadleafcommerce/core/order/domain/FulfillmentGroupImpl.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;4c906659b12b21ea55fd99e9e59d22de6a0133ad:core/broadleaf-framework/src/main/java/org/broadleafcommerce/core/order/domain/FulfillmentGroupImpl.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;4c906659b12b21ea55fd99e9e59d22de6a0133ad^1:core/broadleaf-framework/src/main/java/org/broadleafcommerce/core/order/domain/FulfillmentGroupImpl.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;4c906659b12b21ea55fd99e9e59d22de6a0133ad^2:core/broadleaf-framework/src/main/java/org/broadleafcommerce/core/order/domain/FulfillmentGroupImpl.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;45c0b30829d70c32661f9bc4b75c7dcb1a7b56a5:core/broadleaf-framework/src/main/java/org/broadleafcommerce/core/order/domain/FulfillmentGroupImpl.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [b]], subset: [[b], [b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*-
   2  * #%L
   3  * BroadleafCommerce Framework
   4  * %%
   5  * Copyright (C) 2009 - 2023 Broadleaf Commerce
   6  * %%
   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10  * the Broadleaf End User License Agreement (EULA), Version 1.1
  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12  * shall apply.
  13  * 
<abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr>
<abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr>
  16  * #L%
  17  */
  18 package org.broadleafcommerce.core.order.domain;
  19 
  20 import org.broadleafcommerce.common.copy.CreateResponse;
  21 import org.broadleafcommerce.common.copy.MultiTenantCopyContext;
  22 import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;
  23 import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;
  24 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;
  25 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;
  26 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;
  27 import org.broadleafcommerce.common.money.Money;
  28 import org.broadleafcommerce.common.presentation.AdminPresentation;
  29 import org.broadleafcommerce.common.presentation.AdminPresentationClass;
  30 import org.broadleafcommerce.common.presentation.AdminPresentationCollection;
  31 import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;
  32 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;
  33 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;
  34 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;
  35 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;
  36 import org.broadleafcommerce.common.presentation.override.PropertyType;
  37 import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;
  38 import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;
  39 import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;
  40 import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;
  41 import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;
  42 import org.broadleafcommerce.core.order.service.type.FulfillmentType;
  43 import org.broadleafcommerce.profile.core.domain.Address;
  44 import org.broadleafcommerce.profile.core.domain.AddressImpl;
  45 import org.broadleafcommerce.profile.core.domain.Phone;
  46 import org.broadleafcommerce.profile.core.domain.PhoneImpl;
  47 import org.hibernate.annotations.Cache;
  48 import org.hibernate.annotations.CacheConcurrencyStrategy;
  49 import org.hibernate.annotations.GenericGenerator;
  50 import org.hibernate.annotations.Index;
  51 import org.hibernate.annotations.Parameter;
  52 
  53 import java.math.BigDecimal;
  54 import java.util.ArrayList;
  55 import java.util.List;
  56 import java.util.Vector;
  57 
  58 import javax.persistence.CascadeType;
  59 import javax.persistence.Column;
  60 import javax.persistence.Entity;
  61 import javax.persistence.FetchType;
  62 import javax.persistence.GeneratedValue;
  63 import javax.persistence.Id;
  64 import javax.persistence.Inheritance;
  65 import javax.persistence.InheritanceType;
  66 import javax.persistence.JoinColumn;
  67 import javax.persistence.JoinTable;
  68 import javax.persistence.ManyToOne;
  69 import javax.persistence.OneToMany;
  70 import javax.persistence.Table;
  71 
  72 @Entity
  73 @Inheritance(strategy = InheritanceType.JOINED)
  74 @Table(name = &quot;BLC_FULFILLMENT_GROUP&quot;)
  75 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  76 @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
  77 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  78 @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
  79 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  80 @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
  81 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  82 @AdminPresentationMergeOverrides(
  83     {
  84         @AdminPresentationMergeOverride(name = &quot;&quot;, mergeEntries =
  85                     @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,
  86                                                     booleanOverrideValue = true)),
  87         @AdminPresentationMergeOverride(name = &quot;currency&quot;, mergeEntries =
  88             @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,
  89                         booleanOverrideValue = false)),
  90         @AdminPresentationMergeOverride(name = &quot;personalMessage&quot;, mergeEntries = {
  91                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  92                         overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),
  93                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  94                         intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced)
  95         }),
  96         @AdminPresentationMergeOverride(name = &quot;address&quot;, mergeEntries = {
  97                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  98                         overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),
  99                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
 100                         intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address)
 101         }),
 102         @AdminPresentationMergeOverride(name = &quot;address.isDefault&quot;, mergeEntries = {
 103                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 104                         booleanOverrideValue = true)
 105         }),
 106         @AdminPresentationMergeOverride(name = &quot;address.isActive&quot;, mergeEntries = {
 107                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 108                         booleanOverrideValue = true)
 109         }),
 110         @AdminPresentationMergeOverride(name = &quot;address.isBusiness&quot;, mergeEntries = {
 111                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 112                         booleanOverrideValue = true)
 113         }),
 114         @AdminPresentationMergeOverride(name = &quot;phone&quot;, mergeEntries = {
 115                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 116                         booleanOverrideValue = true)
 117         }),
 118         @AdminPresentationMergeOverride(name = &quot;phone.phoneNumber&quot;, mergeEntries = {
 119                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 120                         booleanOverrideValue = false),
 121                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,
 122                         intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),
 123                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,
 124                         overrideValue = &quot;General&quot;),
<abbr title=" 125                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,"> 125                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIðŸ”µ</abbr>
 126                         overrideValue = &quot;NOT_REQUIRED&quot;)
 127         })
 128     }
 129 )
<abbr title=" 130 @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_baseFulfillmentGroup&quot;)"> 130 @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGrðŸ”µ</abbr>
 131 @DirectCopyTransform({
 132         @DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE)
 133 })
 134 public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {
 135 
 136     private static final long serialVersionUID = 1L;
 137 
 138     @Id
 139     @GeneratedValue(generator = &quot;FulfillmentGroupId&quot;)
 140     @GenericGenerator(
 141         name=&quot;FulfillmentGroupId&quot;,
 142         strategy=&quot;org.broadleafcommerce.common.persistence.IdOverrideTableGenerator&quot;,
 143         parameters = {
 144             @Parameter(name=&quot;segment_value&quot;, value=&quot;FulfillmentGroupImpl&quot;),
<abbr title=" 145             @Parameter(name=&quot;entity_name&quot;, value=&quot;org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl&quot;)"> 145             @Parameter(name=&quot;entity_name&quot;, value=&quot;org.broadleafcommerce.core.order.domain.FulfillmentGrouðŸ”µ</abbr>
 146         }
 147     )
 148     @Column(name = &quot;FULFILLMENT_GROUP_ID&quot;)
 149     protected Long id;
 150 
 151     @Column(name = &quot;REFERENCE_NUMBER&quot;)
 152     @Index(name=&quot;FG_REFERENCE_INDEX&quot;, columnNames={&quot;REFERENCE_NUMBER&quot;})
<abbr title=" 153     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FieldOrder.REFNUMBER,"> 153     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FielðŸ”µ</abbr>
 154             groupOrder = Presentation.Group.Order.General)
 155     protected String referenceNumber;
 156 
 157     @Column(name = &quot;METHOD&quot;)
 158     @Index(name=&quot;FG_METHOD_INDEX&quot;, columnNames={&quot;METHOD&quot;})
 159     @AdminPresentation(excluded = true)
 160     @Deprecated
 161     protected String method;
 162     
 163     @Column(name = &quot;SERVICE&quot;)
 164     @Index(name=&quot;FG_SERVICE_INDEX&quot;, columnNames={&quot;SERVICE&quot;})
 165     @AdminPresentation(excluded = true)
 166     @Deprecated
 167     protected String service;
 168 
 169     @Column(name = &quot;RETAIL_PRICE&quot;, precision=19, scale=5)
<abbr title=" 170     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FieldOrder.RETAIL,"> 170     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FiðŸ”µ</abbr>
 171             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 172             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 173             fieldType=SupportedFieldType.MONEY)
 174     protected BigDecimal retailFulfillmentPrice;
 175 
 176     @Column(name = &quot;SALE_PRICE&quot;, precision=19, scale=5)
<abbr title=" 177     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FieldOrder.SALE,"> 177     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FielðŸ”µ</abbr>
 178             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 179             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 180             fieldType=SupportedFieldType.MONEY)
 181     protected BigDecimal saleFulfillmentPrice;
 182 
 183     @Column(name = &quot;PRICE&quot;, precision=19, scale=5)
<abbr title=" 184     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order=Presentation.FieldOrder.PRICE,"> 184     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order=Presentation.FieldOrdeðŸ”µ</abbr>
 185             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 186             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 187             fieldType=SupportedFieldType.MONEY)
 188     protected BigDecimal fulfillmentPrice;
 189 
 190     @Column(name = &quot;TYPE&quot;)
 191     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Type&quot;, order=Presentation.FieldOrder.TYPE,
 192             fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
 193             broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentType&quot;,
 194             prominent = true, gridOrder = 3000)
 195     protected String type;
 196 
 197     @Column(name = &quot;TOTAL_TAX&quot;, precision=19, scale=5)
<abbr title=" 198     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order=Presentation.FieldOrder.TOTALTAX,"> 198     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order=Presentation.FieldOrder.ðŸ”µ</abbr>
 199             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 200             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 201             fieldType=SupportedFieldType.MONEY)
 202     protected BigDecimal totalTax;
 203     
 204     @Column(name = &quot;TOTAL_ITEM_TAX&quot;, precision=19, scale=5)
<abbr title=" 205     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOrder.ITEMTAX,"> 205     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOðŸ”µ</abbr>
 206             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 207             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 208             fieldType=SupportedFieldType.MONEY)
 209     protected BigDecimal totalItemTax;
 210     
 211     @Column(name = &quot;TOTAL_FEE_TAX&quot;, precision=19, scale=5)
<abbr title=" 212     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrder.FEETAX,"> 212     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrðŸ”µ</abbr>
 213             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 214             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 215             fieldType=SupportedFieldType.MONEY)
 216     protected BigDecimal totalFeeTax;
 217     
 218     @Column(name = &quot;TOTAL_FG_TAX&quot;, precision=19, scale=5)
<abbr title=" 219     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order=Presentation.FieldOrder.FGTAX,"> 219     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order=Presentation.FieldOrdðŸ”µ</abbr>
 220             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 221             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 222             fieldType=SupportedFieldType.MONEY)
 223     protected BigDecimal totalFulfillmentGroupTax;
 224 
 225     @Column(name = &quot;DELIVERY_INSTRUCTION&quot;)
<abbr title=" 226     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.FieldOrder.DELIVERINSTRUCTION)"> 226     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.ðŸ”µ</abbr>
 227     protected String deliveryInstruction;
 228 
 229     @Column(name = &quot;IS_PRIMARY&quot;)
 230     @Index(name=&quot;FG_PRIMARY_INDEX&quot;, columnNames={&quot;IS_PRIMARY&quot;})
<abbr title=" 231     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order=Presentation.FieldOrder.PRIMARY)"> 231     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order=Presentation.FieldOrder.PRðŸ”µ</abbr>
 232     protected boolean primary = false;
 233 
 234     @Column(name = &quot;MERCHANDISE_TOTAL&quot;, precision=19, scale=5)
<abbr title=" 235     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieldOrder.MERCHANDISETOTAL,"> 235     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieðŸ”µ</abbr>
 236             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 237             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 238             fieldType=SupportedFieldType.MONEY)
 239     protected BigDecimal merchandiseTotal;
 240 
 241     @Column(name = &quot;TOTAL&quot;, precision=19, scale=5)
<abbr title=" 242     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order=Presentation.FieldOrder.TOTAL,"> 242     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order=Presentation.FieldOrder.TOTAðŸ”µ</abbr>
 243             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 244             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 245             fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)
 246     protected BigDecimal total;
 247 
 248     @Column(name = &quot;STATUS&quot;)
 249     @Index(name=&quot;FG_STATUS_INDEX&quot;, columnNames={&quot;STATUS&quot;})
<abbr title=" 250     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order=Presentation.FieldOrder.STATUS,"> 250     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order=Presentation.FieldOrder.STAðŸ”µ</abbr>
 251             fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
<abbr title=" 252             broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType&quot;,"> 252             broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusTypðŸ”µ</abbr>
 253             prominent = true, gridOrder = 4000)
 254     protected String status;
 255     
 256     @Column(name = &quot;SHIPPING_PRICE_TAXABLE&quot;)
<abbr title=" 257     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FieldOrder.TAXABLE,"> 257     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FðŸ”µ</abbr>
 258             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 259             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 260     protected Boolean isShippingPriceTaxable = Boolean.FALSE;
 261     
<abbr title=" 262     @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 262     @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MEðŸ”µ</abbr>
 263     @JoinColumn(name = &quot;FULFILLMENT_OPTION_ID&quot;)
 264     protected FulfillmentOption fulfillmentOption;
 265     
 266     @ManyToOne(targetEntity = OrderImpl.class, optional=false)
 267     @JoinColumn(name = &quot;ORDER_ID&quot;)
 268     @Index(name=&quot;FG_ORDER_INDEX&quot;, columnNames={&quot;ORDER_ID&quot;})
 269     @AdminPresentation(excluded = true)
 270     protected Order order;
 271     
 272     @Column(name = &quot;FULFILLMENT_GROUP_SEQUNCE&quot;)
 273     protected Integer sequence;
 274 
<abbr title=" 275     @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 275     @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascaðŸ”µ</abbr>
 276     @JoinColumn(name = &quot;ADDRESS_ID&quot;)
 277     @Index(name=&quot;FG_ADDRESS_INDEX&quot;, columnNames={&quot;ADDRESS_ID&quot;})
 278     protected Address address;
 279 
 280     /**
 281      * @deprecated uses the phonePrimary property on AddressImpl instead
 282      */
<abbr title=" 283     @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 283     @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeðŸ”µ</abbr>
 284     @JoinColumn(name = &quot;PHONE_ID&quot;)
 285     @Index(name=&quot;FG_PHONE_INDEX&quot;, columnNames={&quot;PHONE_ID&quot;})
 286     @Deprecated
 287     protected Phone phone;
 288     
 289     @ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })
 290     @JoinColumn(name = &quot;PERSONAL_MESSAGE_ID&quot;)
 291     @Index(name=&quot;FG_MESSAGE_INDEX&quot;, columnNames={&quot;PERSONAL_MESSAGE_ID&quot;})
 292     protected PersonalMessage personalMessage;
 293     
<abbr title=" 294     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,"> 294     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CaðŸ”µ</abbr>
 295             orphanRemoval = true)
 296 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 297     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 298     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Items&quot;,</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 299             tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 300     protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 301     </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 302     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },"> 302     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 303             orphanRemoval = true)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 304     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 305     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Fees&quot;,</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 306             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 307     protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 308         </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 309     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },"> 309     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, caðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 310             orphanRemoval = true)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 311     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 312     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 312     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGrðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 313 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 314     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },"> 314     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascadðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 315             orphanRemoval = true)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 316     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 317     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Adjustments&quot;,</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 318             tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 319     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 319     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 320     </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 321     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 321     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL },ðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 322     @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;),</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 323             inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 324     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
 325 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Items&quot;,</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 328             tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 329     protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 330     </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 331     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },"> 331     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332             orphanRemoval = true)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333     @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Fees&quot;,</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 336     protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 337         </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 338     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },"> 338     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, caðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 339             orphanRemoval = true)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 340     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 341     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 341     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGrðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 342 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 343     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },"> 343     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascadðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 344             orphanRemoval = true)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 345     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 346     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Adjustments&quot;,</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 347             tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 348     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 348     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 349     </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 350     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 350     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL },ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 351     @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;),</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 352             inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 353     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
 354 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 355     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 356     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Items&quot;,</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 357             tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 358     protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 359     </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 360     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },"> 360     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 361             orphanRemoval = true)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 362     @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 363     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Fees&quot;,</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 364             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 365     protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 366         </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 367     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },"> 367     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, caðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 368             orphanRemoval = true)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 369     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 370     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 370     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGrðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 371 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 372     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },"> 372     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascadðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 373             orphanRemoval = true)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 374     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 375     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Adjustments&quot;,</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 376             tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 377     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 377     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 378     </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 379     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 379     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL },ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 380     @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;),</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 381             inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 382     @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
 383 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 384     protected List&lt;TaxDetail&gt; taxes = new ArrayList&lt;TaxDetail&gt;();
 385 
 386     @Column(name = &quot;SHIPPING_OVERRIDE&quot;)
 387     protected Boolean shippingOverride;
 388 
 389     @Override
 390     public Long getId() {
 391         return id;
 392     }
 393 
 394     @Override
 395     public void setId(Long id) {
 396         this.id = id;
 397     }
 398 
 399     @Override
 400     public Order getOrder() {
 401         return order;
 402     }
 403 
 404     @Override
 405     public void setOrder(Order order) {
 406         this.order = order;
 407     }
 408 
 409     @Override
 410     public FulfillmentOption getFulfillmentOption() {
 411         return fulfillmentOption;
 412     }
 413 
 414     @Override
 415     public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {
 416         this.fulfillmentOption = fulfillmentOption;
 417     }
 418 
 419     @Override
 420     public String getReferenceNumber() {
 421         return referenceNumber;
 422     }
 423 
 424     @Override
 425     public void setReferenceNumber(String referenceNumber) {
 426         this.referenceNumber = referenceNumber;
 427     }
 428 
 429     @Override
 430     public List&lt;FulfillmentGroupItem&gt; getFulfillmentGroupItems() {
 431         return fulfillmentGroupItems;
 432     }
 433     
 434     @Override
 435     public List&lt;DiscreteOrderItem&gt; getDiscreteOrderItems() {
 436         List&lt;DiscreteOrderItem&gt; discreteOrderItems = new ArrayList&lt;DiscreteOrderItem&gt;();
 437         for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {
 438             OrderItem orderItem = fgItem.getOrderItem();
 439             if (orderItem instanceof BundleOrderItem) {
 440                 BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;
 441                 for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
 442                     discreteOrderItems.add(discreteOrderItem);
 443                 }
 444             } else if (orderItem instanceof DiscreteOrderItem) {
 445                 DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;
 446                 discreteOrderItems.add(discreteOrderItem);
 447             }
 448         }
 449         return discreteOrderItems;
 450     }
 451 
 452     @Override
 453     public void setFulfillmentGroupItems(List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems) {
 454         this.fulfillmentGroupItems = fulfillmentGroupItems;
 455     }
 456 
 457     @Override
 458     public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {
 459         if (this.fulfillmentGroupItems == null) {
 460             this.fulfillmentGroupItems = new Vector&lt;FulfillmentGroupItem&gt;();
 461         }
 462         this.fulfillmentGroupItems.add(fulfillmentGroupItem);
 463 
 464     }
 465 
 466     @Override
 467     public Address getAddress() {
 468         return address;
 469     }
 470 
 471     @Override
 472     public void setAddress(Address address) {
 473         this.address = address;
 474     }
 475 
 476     /**
 477      * @deprecated use the phonePrimary property on the related Address instead
 478      */
 479     @Deprecated
 480     @Override
 481     public Phone getPhone() {
 482         return phone;
 483     }
 484 
 485     /**
 486      * @deprecated use the phonePrimary property on the related Address instead
 487      */
 488     @Deprecated
 489     @Override
 490     public void setPhone(Phone phone) {
 491         this.phone = phone;
 492     }
 493 
 494     @Override
 495     @Deprecated
 496     public String getMethod() {
 497         return method;
 498     }
 499 
 500     @Override
 501     @Deprecated
 502     public void setMethod(String fulfillmentMethod) {
 503         this.method = fulfillmentMethod;
 504     }
 505 
 506     @Override
 507     public Money getRetailFulfillmentPrice() {
 508         return retailFulfillmentPrice == null ? null :
 509                 BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());
 510     }
 511 
 512     @Override
 513     public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {
 514         this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);
 515     }
 516 
 517     @Override
 518     public Money getRetailShippingPrice() {
 519         return getRetailFulfillmentPrice();
 520     }
 521 
 522     @Override
 523     public void setRetailShippingPrice(Money retailShippingPrice) {
 524         setRetailFulfillmentPrice(retailShippingPrice);
 525     }
 526 
 527     @Override
 528     public FulfillmentType getType() {
 529         return FulfillmentType.getInstance(type);
 530     }
 531 
 532     @Override
 533     public void setType(FulfillmentType type) {
 534         this.type = type == null ? null : type.getType();
 535     }
 536 
 537     @Override
 538     public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {
 539         candidateOffers.add(candidateOffer);
 540     }
 541 
 542     @Override
 543     public List&lt;CandidateFulfillmentGroupOffer&gt; getCandidateFulfillmentGroupOffers() {
 544         return candidateOffers;
 545     }
 546 
 547     @Override
 548     public void setCandidateFulfillmentGroupOffer(List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers) {
 549         this.candidateOffers = candidateOffers;
 550 
 551     }
 552 
 553     @Override
 554     public void removeAllCandidateOffers() {
 555         if (candidateOffers != null) {
 556             for (CandidateFulfillmentGroupOffer offer : candidateOffers) {
 557                 offer.setFulfillmentGroup(null);
 558             }
 559             candidateOffers.clear();
 560         }
 561     }
 562 
 563     @Override
 564     public List&lt;FulfillmentGroupAdjustment&gt; getFulfillmentGroupAdjustments() {
 565         return this.fulfillmentGroupAdjustments;
 566     }
 567 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 568 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 569     @Override</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 570     public List&lt;FulfillmentGroupAdjustment&gt; getFutureCreditFulfillmentGroupAdjustments() {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 571         List&lt;FulfillmentGroupAdjustment&gt; futureCreditAdjustments = new ArrayList&lt;&gt;();</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 572         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 573             if (adjustment.isFutureCredit()) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 574                 futureCreditAdjustments.add(adjustment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 575             }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 576             </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 577         }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 578         return futureCreditAdjustments;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 579     }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 580     </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 581     @Override</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 582     public Money getFulfillmentGroupAdjustmentsValue() {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 583         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 583         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 584         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 585             if (!adjustment.isFutureCredit()) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 586                 adjustmentsValue = adjustmentsValue.add(adjustment.getValue());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 587             }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 588         }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 589         return adjustmentsValue;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 590     }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 591 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 592     @Override</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 593     public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 594         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 594         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr></span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 595         for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {</span>
 596 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 597     </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 598     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 599     public Money getFulfillmentGroupAdjustmentsValue() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 600         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 600         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 601         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 602             adjustmentsValue = adjustmentsValue.add(adjustment.getValue());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 603         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 604         return adjustmentsValue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 605     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 606 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 607     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 608     public void removeAllAdjustments() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 609         if (fulfillmentGroupAdjustments != null) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 610             for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 611                 adjustment.setFulfillmentGroup(null);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 612             }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 613             fulfillmentGroupAdjustments.clear();</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 614         }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 615     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 616 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 617     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 618     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments) {"> 618     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustmenðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 619         this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 620     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 621 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 622     @Override</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 623     public Money getSaleFulfillmentPrice() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 624         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,"> 624         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPriceðŸ”µ</abbr></span>
 625 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 626     </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 627     @Override</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 628     public Money getFulfillmentGroupAdjustmentsValue() {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 629         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 629         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr></span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 630         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {</span>
 631 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 632             adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 633         }
 634         return adjustmentsValue;
 635     }
 636 
 637     @Override
 638     public void removeAllAdjustments() {
 639         if (fulfillmentGroupAdjustments != null) {
 640             for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 641                 adjustment.setFulfillmentGroup(null);
 642             }
 643             fulfillmentGroupAdjustments.clear();
 644         }
 645     }
 646 
 647     @Override
<abbr title=" 648     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments) {"> 648     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustmenðŸ”µ</abbr>
 649         this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;
 650     }
 651 
 652     @Override
 653     public Money getSaleFulfillmentPrice() {
<abbr title=" 654         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,"> 654         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPriceðŸ”µ</abbr>
 655                 getOrder().getCurrency());
 656     }
 657 
 658     @Override
 659     public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {
 660         this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);
 661     }
 662 
 663     @Override
 664     public Money getSaleShippingPrice() {
 665         return getSaleFulfillmentPrice();
 666     }
 667 
 668     @Override
 669     public void setSaleShippingPrice(Money saleShippingPrice) {
 670         setSaleFulfillmentPrice(saleShippingPrice);
 671     }
 672 
 673     @Override
 674     public Money getFulfillmentPrice() {
 675         return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,
 676                 getOrder().getCurrency());
 677     }
 678 
 679     @Override
 680     public void setFulfillmentPrice(Money fulfillmentPrice) {
 681         this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);
 682     }
 683 
 684     @Override
 685     public Money getShippingPrice() {
 686         return getFulfillmentPrice();
 687     }
 688 
 689     @Override
 690     public void setShippingPrice(Money shippingPrice) {
 691         setFulfillmentPrice(shippingPrice);
 692     }
 693     
 694     @Override
 695     public List&lt;TaxDetail&gt; getTaxes() {
 696         return taxes;
 697     }
 698 
 699     @Override
 700     public void setTaxes(List&lt;TaxDetail&gt; taxes) {
 701         this.taxes = taxes;
 702     }
 703 
 704     @Override
 705     public Money getTotalTax() {
<abbr title=" 706         return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());"> 706         return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrencyðŸ”µ</abbr>
 707     }
 708 
 709     @Override
 710     public void setTotalTax(Money totalTax) {
 711         this.totalTax = Money.toAmount(totalTax);
 712     }
 713     
 714     @Override
 715     public Money getTotalItemTax() {
<abbr title=" 716         return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());"> 716         return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getðŸ”µ</abbr>
 717     }
 718 
 719     @Override
 720     public void setTotalItemTax(Money totalItemTax) {
 721         this.totalItemTax = Money.toAmount(totalItemTax);
 722     }
 723 
 724     @Override
 725     public Money getTotalFeeTax() {
<abbr title=" 726         return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());"> 726         return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCuðŸ”µ</abbr>
 727     }
 728 
 729     @Override
 730     public void setTotalFeeTax(Money totalFeeTax) {
 731         this.totalFeeTax = Money.toAmount(totalFeeTax);
 732     }
 733 
 734     @Override
 735     public Money getTotalFulfillmentGroupTax() {
<abbr title=" 736         return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,"> 736         return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentðŸ”µ</abbr>
 737                 getOrder().getCurrency());
 738     }
 739 
 740     @Override
 741     public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {
 742         this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);
 743     }
 744 
 745     @Override
 746     public String getDeliveryInstruction() {
 747         return deliveryInstruction;
 748     }
 749 
 750     @Override
 751     public void setDeliveryInstruction(String deliveryInstruction) {
 752         this.deliveryInstruction = deliveryInstruction;
 753     }
 754 
 755     @Override
 756     public PersonalMessage getPersonalMessage() {
 757         return personalMessage;
 758     }
 759 
 760     @Override
 761     public void setPersonalMessage(PersonalMessage personalMessage) {
 762         this.personalMessage = personalMessage;
 763     }
 764 
 765     @Override
 766     public boolean isPrimary() {
 767         return primary;
 768     }
 769 
 770     @Override
 771     public void setPrimary(boolean primary) {
 772         this.primary = primary;
 773     }
 774 
 775     @Override
 776     public Money getMerchandiseTotal() {
 777         return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,
 778                 getOrder().getCurrency());
 779     }
 780 
 781     @Override
 782     public void setMerchandiseTotal(Money merchandiseTotal) {
 783         this.merchandiseTotal = Money.toAmount(merchandiseTotal);
 784     }
 785 
 786     @Override
 787     public Money getTotal() {
 788         return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());
 789     }
 790 
 791     @Override
 792     public void setTotal(Money orderTotal) {
 793         this.total = Money.toAmount(orderTotal);
 794     }
 795     
 796     @Override
 797     public FulfillmentGroupStatusType getStatus() {
 798         return FulfillmentGroupStatusType.getInstance(status);
 799     }
 800 
 801     @Override
 802     public void setStatus(FulfillmentGroupStatusType status) {
 803         this.status = status.getType();
 804     }
 805 
 806     @Override
 807     public List&lt;FulfillmentGroupFee&gt; getFulfillmentGroupFees() {
 808         return fulfillmentGroupFees;
 809     }
 810 
 811     @Override
 812     public void setFulfillmentGroupFees(List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees) {
 813         this.fulfillmentGroupFees = fulfillmentGroupFees;
 814     }
 815 
 816     @Override
 817     public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {
 818         if (fulfillmentGroupFees == null) {
 819             fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 820         }
 821         fulfillmentGroupFees.add(fulfillmentGroupFee);
 822     }
 823 
 824     @Override
 825     public void removeAllFulfillmentGroupFees() {
 826         if (fulfillmentGroupFees != null) {
 827             fulfillmentGroupFees.clear();
 828         }
 829     }
 830 
 831     @Override
 832     public Boolean isShippingPriceTaxable() {
 833         return isShippingPriceTaxable;
 834     }
 835 
 836     @Override
 837     public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {
 838         this.isShippingPriceTaxable = isShippingPriceTaxable;
 839     }
 840 
 841     @Override
 842     public void setSequence(Integer sequence) {
 843         this.sequence = sequence;
 844     }
 845 
 846     @Override
 847     public Integer getSequence() {
 848         return this.sequence;
 849     }
 850 
 851     @Override
 852     @Deprecated
 853     public String getService() {
 854         return service;
 855     }
 856 
 857     @Override
 858     @Deprecated
 859     public void setService(String service) {
 860         this.service = service;
 861     }
 862 
 863     @Override
 864     public String getCurrencyCode() {
 865         if (getOrder().getCurrency() != null) {
 866             return getOrder().getCurrency().getCurrencyCode();
 867         }
 868         return null;
 869     }
 870 
 871     @Override
 872     public Boolean getShippingOverride() {
 873         return shippingOverride == null ? false : shippingOverride;
 874     }
 875 
 876     @Override
 877     public void setShippingOverride(Boolean shippingOverride) {
 878         this.shippingOverride = shippingOverride;
 879     }
 880 
 881     @Override
 882     public int hashCode() {
 883         final int prime = 31;
 884         int result = 1;
 885         result = prime * result + ((address == null) ? 0 : address.hashCode());
<abbr title=" 886         result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());"> 886         result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode()ðŸ”µ</abbr>
 887         return result;
 888     }
 889     
 890     @Override
<abbr title=" 891     public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {"> 891     public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyConðŸ”µ</abbr>
 892         CreateResponse&lt;G&gt; createResponse = context.createOrRetrieveCopyInstance(this);
 893         if (createResponse.isAlreadyPopulated()) {
 894             return createResponse;
 895         }
 896         FulfillmentGroup cloned = createResponse.getClone();
<abbr title=" 897         cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());"> 897         cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getCloneðŸ”µ</abbr>
 898         cloned.setDeliveryInstruction(deliveryInstruction);
 899         cloned.setFulfillmentOption(fulfillmentOption);
 900         cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 901         cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);
 902         cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));
 903         cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 904         cloneTaxDetails(context, cloned);
 905         cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));
<abbr title=" 906         cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));"> 906         cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfiðŸ”µ</abbr>
 907         cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));
 908         cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));
<abbr title=" 909         cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));"> 909         cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmðŸ”µ</abbr>
<abbr title=" 910         cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));"> 910         cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPriðŸ”µ</abbr>
 911         cloned.setTotal(total == null ? null : new Money(total));
 912         cloned.setOrder(order);
 913         cloned.setPrimary(primary);
 914         cloned.setType(getType());
 915         for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {
<abbr title=" 916             FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();"> 916             FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClonðŸ”µ</abbr>
 917             fulfillmentGroupItem.setFulfillmentGroup(cloned);
 918             cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);
 919         }
 920         return  createResponse;
 921     }
 922 
<abbr title=" 923     protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {"> 923     protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNðŸ”µ</abbr>
 924         for (TaxDetail taxDetail : getTaxes()) {
 925             TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();
 926             cloned.getTaxes().add(clonedTaxDetail);
 927         }
 928     }
 929 
 930     @Override
 931     public boolean equals(Object obj) {
 932         if (this == obj) {
 933             return true;
 934         }
 935         if (obj == null) {
 936             return false;
 937         }
 938         if (!getClass().isAssignableFrom(obj.getClass())) {
 939             return false;
 940         }
 941         FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;
 942 
 943         if (id != null &amp;&amp; other.id != null) {
 944             return id.equals(other.id);
 945         }
 946 
 947         if (address == null) {
 948             if (other.address != null) {
 949                 return false;
 950             }
 951         } else if (!address.equals(other.address)) {
 952             return false;
 953         }
 954         if (fulfillmentGroupItems == null) {
 955             if (other.fulfillmentGroupItems != null) {
 956                 return false;
 957             }
 958         } else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {
 959             return false;
 960         }
 961         return true;
 962     }
 963 
 964     public static class Presentation {
 965         public static class Tab {
 966             public static class Name {
 967                 public static final String Items = &quot;FulfillmentGroupImpl_Items_Tab&quot;;
 968                 public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing_Tab&quot;;
 969                 public static final String Address = &quot;FulfillmentGroupImpl_Address_Tab&quot;;
 970                 public static final String Advanced = &quot;FulfillmentGroupImpl_Advanced_Tab&quot;;
 971             }
 972 
 973             public static class Order {
 974                 public static final int Items = 2000;
 975                 public static final int Pricing = 3000;
 976                 public static final int Address = 4000;
 977                 public static final int Advanced = 5000;
 978             }
 979         }
 980 
 981         public static class Group {
 982             public static class Name {
 983                 public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing&quot;;
 984             }
 985 
 986             public static class Order {
 987                 public static final int General = 1000;
 988                 public static final int Pricing = 2000;
 989             }
 990         }
 991 
 992         public static class FieldOrder {
 993             public static final int REFNUMBER = 3000;
 994             public static final int STATUS = 4000;
 995             public static final int TYPE = 5000;
 996             public static final int DELIVERINSTRUCTION = 6000;
 997             public static final int PRIMARY = 7000;
 998             public static final int PHONE = 8000;
 999 
1000             public static final int RETAIL = 1000;
1001             public static final int SALE = 2000;
1002             public static final int PRICE = 3000;
1003             public static final int ITEMTAX = 4000;
1004             public static final int FEETAX = 5000;
1005             public static final int FGTAX = 6000;
1006             public static final int TOTALTAX = 7000;
1007             public static final int MERCHANDISETOTAL = 8000;
1008             public static final int TOTAL = 9000;
1009             public static final int TAXABLE = 10000;
1010         }
1011     }
1012 }</pre></td>
                            <td><pre>   1 /*-
   2  * #%L
   3  * BroadleafCommerce Framework
   4  * %%
   5  * Copyright (C) 2009 - 2023 Broadleaf Commerce
   6  * %%
   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10  * the Broadleaf End User License Agreement (EULA), Version 1.1
  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12  * shall apply.
  13  *
<abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr>
<abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr>
  16  * #L%
  17  */
  18 package org.broadleafcommerce.core.order.domain;
  19 
  20 import org.broadleafcommerce.common.copy.CreateResponse;
  21 import org.broadleafcommerce.common.copy.MultiTenantCopyContext;
  22 import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;
  23 import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;
  24 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;
  25 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;
  26 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;
  27 import org.broadleafcommerce.common.money.Money;
  28 import org.broadleafcommerce.common.presentation.AdminPresentation;
  29 import org.broadleafcommerce.common.presentation.AdminPresentationClass;
  30 import org.broadleafcommerce.common.presentation.AdminPresentationCollection;
  31 import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;
  32 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;
  33 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;
  34 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;
  35 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;
  36 import org.broadleafcommerce.common.presentation.override.PropertyType;
  37 import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;
  38 import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;
  39 import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;
  40 import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;
  41 import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;
  42 import org.broadleafcommerce.core.order.service.type.FulfillmentType;
  43 import org.broadleafcommerce.profile.core.domain.Address;
  44 import org.broadleafcommerce.profile.core.domain.AddressImpl;
  45 import org.broadleafcommerce.profile.core.domain.Phone;
  46 import org.broadleafcommerce.profile.core.domain.PhoneImpl;
  47 import org.hibernate.annotations.Cache;
  48 import org.hibernate.annotations.CacheConcurrencyStrategy;
  49 import org.hibernate.annotations.GenericGenerator;
  50 import org.hibernate.annotations.Index;
  51 import org.hibernate.annotations.Parameter;
  52 
  53 import java.math.BigDecimal;
  54 import java.util.ArrayList;
  55 import java.util.List;
  56 import java.util.Vector;
  57 
  58 import javax.persistence.CascadeType;
  59 import javax.persistence.Column;
  60 import javax.persistence.Entity;
  61 import javax.persistence.FetchType;
  62 import javax.persistence.GeneratedValue;
  63 import javax.persistence.Id;
  64 import javax.persistence.Inheritance;
  65 import javax.persistence.InheritanceType;
  66 import javax.persistence.JoinColumn;
  67 import javax.persistence.JoinTable;
  68 import javax.persistence.ManyToOne;
  69 import javax.persistence.OneToMany;
  70 import javax.persistence.Table;
  71 
  72 @Entity
  73 @Inheritance(strategy = InheritanceType.JOINED)
  74 @Table(name = &quot;BLC_FULFILLMENT_GROUP&quot;)
  75 @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
  76 @AdminPresentationMergeOverrides(
  77     {
  78         @AdminPresentationMergeOverride(name = &quot;&quot;, mergeEntries =
  79                     @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,
  80                                                     booleanOverrideValue = true)),
  81         @AdminPresentationMergeOverride(name = &quot;currency&quot;, mergeEntries =
  82             @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,
  83                         booleanOverrideValue = false)),
  84         @AdminPresentationMergeOverride(name = &quot;personalMessage&quot;, mergeEntries = {
  85                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  86                         overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),
  87                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  88                         intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced)
  89         }),
  90         @AdminPresentationMergeOverride(name = &quot;address&quot;, mergeEntries = {
  91                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  92                         overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),
  93                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  94                         intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address)
  95         }),
  96         @AdminPresentationMergeOverride(name = &quot;address.isDefault&quot;, mergeEntries = {
  97                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
  98                         booleanOverrideValue = true)
  99         }),
 100         @AdminPresentationMergeOverride(name = &quot;address.isActive&quot;, mergeEntries = {
 101                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 102                         booleanOverrideValue = true)
 103         }),
 104         @AdminPresentationMergeOverride(name = &quot;address.isBusiness&quot;, mergeEntries = {
 105                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 106                         booleanOverrideValue = true)
 107         }),
 108         @AdminPresentationMergeOverride(name = &quot;phone&quot;, mergeEntries = {
 109                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 110                         booleanOverrideValue = true)
 111         }),
 112         @AdminPresentationMergeOverride(name = &quot;phone.phoneNumber&quot;, mergeEntries = {
 113                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 114                         booleanOverrideValue = false),
 115                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,
 116                         intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),
 117                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,
 118                         overrideValue = &quot;General&quot;),
<abbr title=" 119                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,"> 119                 @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIðŸ”µ</abbr>
 120                         overrideValue = &quot;NOT_REQUIRED&quot;)
 121         })
 122     }
 123 )
<abbr title=" 124 @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_baseFulfillmentGroup&quot;)"> 124 @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGrðŸ”µ</abbr>
 125 @DirectCopyTransform({
 126         @DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE)
 127 })
 128 public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {
 129 
 130     private static final long serialVersionUID = 1L;
 131 
 132     @Id
 133     @GeneratedValue(generator = &quot;FulfillmentGroupId&quot;)
 134     @GenericGenerator(
 135         name=&quot;FulfillmentGroupId&quot;,
 136         strategy=&quot;org.broadleafcommerce.common.persistence.IdOverrideTableGenerator&quot;,
 137         parameters = {
 138             @Parameter(name=&quot;segment_value&quot;, value=&quot;FulfillmentGroupImpl&quot;),
<abbr title=" 139             @Parameter(name=&quot;entity_name&quot;, value=&quot;org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl&quot;)"> 139             @Parameter(name=&quot;entity_name&quot;, value=&quot;org.broadleafcommerce.core.order.domain.FulfillmentGrouðŸ”µ</abbr>
 140         }
 141     )
 142     @Column(name = &quot;FULFILLMENT_GROUP_ID&quot;)
 143     protected Long id;
 144 
 145     @Column(name = &quot;REFERENCE_NUMBER&quot;)
 146     @Index(name=&quot;FG_REFERENCE_INDEX&quot;, columnNames={&quot;REFERENCE_NUMBER&quot;})
<abbr title=" 147     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FieldOrder.REFNUMBER,"> 147     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FielðŸ”µ</abbr>
 148             groupOrder = Presentation.Group.Order.General)
 149     protected String referenceNumber;
 150 
 151     @Column(name = &quot;METHOD&quot;)
 152     @Index(name=&quot;FG_METHOD_INDEX&quot;, columnNames={&quot;METHOD&quot;})
 153     @AdminPresentation(excluded = true)
 154     @Deprecated
 155     protected String method;
 156 
 157     @Column(name = &quot;SERVICE&quot;)
 158     @Index(name=&quot;FG_SERVICE_INDEX&quot;, columnNames={&quot;SERVICE&quot;})
 159     @AdminPresentation(excluded = true)
 160     @Deprecated
 161     protected String service;
 162 
 163     @Column(name = &quot;RETAIL_PRICE&quot;, precision=19, scale=5)
<abbr title=" 164     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FieldOrder.RETAIL,"> 164     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FiðŸ”µ</abbr>
 165             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 166             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 167             fieldType=SupportedFieldType.MONEY)
 168     protected BigDecimal retailFulfillmentPrice;
 169 
 170     @Column(name = &quot;SALE_PRICE&quot;, precision=19, scale=5)
<abbr title=" 171     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FieldOrder.SALE,"> 171     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FielðŸ”µ</abbr>
 172             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 173             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 174             fieldType=SupportedFieldType.MONEY)
 175     protected BigDecimal saleFulfillmentPrice;
 176 
 177     @Column(name = &quot;PRICE&quot;, precision=19, scale=5)
<abbr title=" 178     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order=Presentation.FieldOrder.PRICE,"> 178     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order=Presentation.FieldOrdeðŸ”µ</abbr>
 179             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 180             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 181             fieldType=SupportedFieldType.MONEY)
 182     protected BigDecimal fulfillmentPrice;
 183 
 184     @Column(name = &quot;TYPE&quot;)
 185     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Type&quot;, order=Presentation.FieldOrder.TYPE,
 186             fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
 187             broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentType&quot;,
 188             prominent = true, gridOrder = 3000)
 189     protected String type;
 190 
 191     @Column(name = &quot;TOTAL_TAX&quot;, precision=19, scale=5)
<abbr title=" 192     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order=Presentation.FieldOrder.TOTALTAX,"> 192     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order=Presentation.FieldOrder.ðŸ”µ</abbr>
 193             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 194             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 195             fieldType=SupportedFieldType.MONEY)
 196     protected BigDecimal totalTax;
 197 
 198     @Column(name = &quot;TOTAL_ITEM_TAX&quot;, precision=19, scale=5)
<abbr title=" 199     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOrder.ITEMTAX,"> 199     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOðŸ”µ</abbr>
 200             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 201             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 202             fieldType=SupportedFieldType.MONEY)
 203     protected BigDecimal totalItemTax;
 204 
 205     @Column(name = &quot;TOTAL_FEE_TAX&quot;, precision=19, scale=5)
<abbr title=" 206     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrder.FEETAX,"> 206     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrðŸ”µ</abbr>
 207             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 208             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 209             fieldType=SupportedFieldType.MONEY)
 210     protected BigDecimal totalFeeTax;
 211 
 212     @Column(name = &quot;TOTAL_FG_TAX&quot;, precision=19, scale=5)
<abbr title=" 213     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order=Presentation.FieldOrder.FGTAX,"> 213     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order=Presentation.FieldOrdðŸ”µ</abbr>
 214             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 215             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 216             fieldType=SupportedFieldType.MONEY)
 217     protected BigDecimal totalFulfillmentGroupTax;
 218 
 219     @Column(name = &quot;DELIVERY_INSTRUCTION&quot;)
<abbr title=" 220     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.FieldOrder.DELIVERINSTRUCTION)"> 220     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.ðŸ”µ</abbr>
 221     protected String deliveryInstruction;
 222 
 223     @Column(name = &quot;IS_PRIMARY&quot;)
 224     @Index(name=&quot;FG_PRIMARY_INDEX&quot;, columnNames={&quot;IS_PRIMARY&quot;})
<abbr title=" 225     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order=Presentation.FieldOrder.PRIMARY)"> 225     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order=Presentation.FieldOrder.PRðŸ”µ</abbr>
 226     protected boolean primary = false;
 227 
 228     @Column(name = &quot;MERCHANDISE_TOTAL&quot;, precision=19, scale=5)
<abbr title=" 229     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieldOrder.MERCHANDISETOTAL,"> 229     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieðŸ”µ</abbr>
 230             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 231             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 232             fieldType=SupportedFieldType.MONEY)
 233     protected BigDecimal merchandiseTotal;
 234 
 235     @Column(name = &quot;TOTAL&quot;, precision=19, scale=5)
<abbr title=" 236     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order=Presentation.FieldOrder.TOTAL,"> 236     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order=Presentation.FieldOrder.TOTAðŸ”µ</abbr>
 237             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 238             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 239             fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)
 240     protected BigDecimal total;
 241 
 242     @Column(name = &quot;STATUS&quot;)
 243     @Index(name=&quot;FG_STATUS_INDEX&quot;, columnNames={&quot;STATUS&quot;})
<abbr title=" 244     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order=Presentation.FieldOrder.STATUS,"> 244     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order=Presentation.FieldOrder.STAðŸ”µ</abbr>
 245             fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
<abbr title=" 246             broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType&quot;,"> 246             broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusTypðŸ”µ</abbr>
 247             prominent = true, gridOrder = 4000)
 248     protected String status;
 249 
 250     @Column(name = &quot;SHIPPING_PRICE_TAXABLE&quot;)
<abbr title=" 251     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FieldOrder.TAXABLE,"> 251     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FðŸ”µ</abbr>
 252             group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 253             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 254     protected Boolean isShippingPriceTaxable = Boolean.FALSE;
 255 
<abbr title=" 256     @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 256     @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MEðŸ”µ</abbr>
 257     @JoinColumn(name = &quot;FULFILLMENT_OPTION_ID&quot;)
 258     protected FulfillmentOption fulfillmentOption;
 259 
 260     @ManyToOne(targetEntity = OrderImpl.class, optional=false)
 261     @JoinColumn(name = &quot;ORDER_ID&quot;)
 262     @Index(name=&quot;FG_ORDER_INDEX&quot;, columnNames={&quot;ORDER_ID&quot;})
 263     @AdminPresentation(excluded = true)
 264     protected Order order;
 265 
 266     @Column(name = &quot;FULFILLMENT_GROUP_SEQUNCE&quot;)
 267     protected Integer sequence;
 268 
<abbr title=" 269     @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 269     @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascaðŸ”µ</abbr>
 270     @JoinColumn(name = &quot;ADDRESS_ID&quot;)
 271     @Index(name=&quot;FG_ADDRESS_INDEX&quot;, columnNames={&quot;ADDRESS_ID&quot;})
 272     protected Address address;
 273 
 274     /**
 275      * @deprecated uses the phonePrimary property on AddressImpl instead
 276      */
<abbr title=" 277     @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 277     @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeðŸ”µ</abbr>
 278     @JoinColumn(name = &quot;PHONE_ID&quot;)
 279     @Index(name=&quot;FG_PHONE_INDEX&quot;, columnNames={&quot;PHONE_ID&quot;})
 280     @Deprecated
 281     protected Phone phone;
 282 
 283     @ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })
 284     @JoinColumn(name = &quot;PERSONAL_MESSAGE_ID&quot;)
 285     @Index(name=&quot;FG_MESSAGE_INDEX&quot;, columnNames={&quot;PERSONAL_MESSAGE_ID&quot;})
 286     protected PersonalMessage personalMessage;
 287 
<abbr title=" 288     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,"> 288     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CaðŸ”µ</abbr>
 289             orphanRemoval = true)
 290     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
 291     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Items&quot;,
 292             tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)
 293     protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();
 294 
<abbr title=" 295     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },"> 295     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CðŸ”µ</abbr>
 296             orphanRemoval = true)
 297     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
 298     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Fees&quot;,
 299             tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 300     protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 301 
<abbr title=" 302     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },"> 302     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, caðŸ”µ</abbr>
 303             orphanRemoval = true)
 304     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
<abbr title=" 305     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 305     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGrðŸ”µ</abbr>
 306 
<abbr title=" 307     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },"> 307     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascadðŸ”µ</abbr>
 308             orphanRemoval = true)
 309     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
 310     @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Adjustments&quot;,
 311             tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)
<abbr title=" 312     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 312     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroðŸ”µ</abbr>
 313 
<abbr title=" 314     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 314     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL },ðŸ”µ</abbr>
 315     @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;),
 316             inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))
 317     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
 318     protected List&lt;TaxDetail&gt; taxes = new ArrayList&lt;TaxDetail&gt;();
 319 
 320     @Column(name = &quot;SHIPPING_OVERRIDE&quot;)
 321     protected Boolean shippingOverride;
 322 
 323     @Override
 324     public Long getId() {
 325         return id;
 326     }
 327 
 328     @Override
 329     public void setId(Long id) {
 330         this.id = id;
 331     }
 332 
 333     @Override
 334     public Order getOrder() {
 335         return order;
 336     }
 337 
 338     @Override
 339     public void setOrder(Order order) {
 340         this.order = order;
 341     }
 342 
 343     @Override
 344     public FulfillmentOption getFulfillmentOption() {
 345         return fulfillmentOption;
 346     }
 347 
 348     @Override
 349     public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {
 350         this.fulfillmentOption = fulfillmentOption;
 351     }
 352 
 353     @Override
 354     public String getReferenceNumber() {
 355         return referenceNumber;
 356     }
 357 
 358     @Override
 359     public void setReferenceNumber(String referenceNumber) {
 360         this.referenceNumber = referenceNumber;
 361     }
 362 
 363     @Override
 364     public List&lt;FulfillmentGroupItem&gt; getFulfillmentGroupItems() {
 365         return fulfillmentGroupItems;
 366     }
 367 
 368     @Override
 369     public List&lt;DiscreteOrderItem&gt; getDiscreteOrderItems() {
 370         List&lt;DiscreteOrderItem&gt; discreteOrderItems = new ArrayList&lt;DiscreteOrderItem&gt;();
 371         for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {
 372             OrderItem orderItem = fgItem.getOrderItem();
 373             if (orderItem instanceof BundleOrderItem) {
 374                 BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;
 375                 for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
 376                     discreteOrderItems.add(discreteOrderItem);
 377                 }
 378             } else if (orderItem instanceof DiscreteOrderItem) {
 379                 DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;
 380                 discreteOrderItems.add(discreteOrderItem);
 381             }
 382         }
 383         return discreteOrderItems;
 384     }
 385 
 386     @Override
 387     public void setFulfillmentGroupItems(List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems) {
 388         this.fulfillmentGroupItems = fulfillmentGroupItems;
 389     }
 390 
 391     @Override
 392     public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {
 393         if (this.fulfillmentGroupItems == null) {
 394             this.fulfillmentGroupItems = new Vector&lt;FulfillmentGroupItem&gt;();
 395         }
 396         this.fulfillmentGroupItems.add(fulfillmentGroupItem);
 397 
 398     }
 399 
 400     @Override
 401     public Address getAddress() {
 402         return address;
 403     }
 404 
 405     @Override
 406     public void setAddress(Address address) {
 407         this.address = address;
 408     }
 409 
 410     /**
 411      * @deprecated use the phonePrimary property on the related Address instead
 412      */
 413     @Deprecated
 414     @Override
 415     public Phone getPhone() {
 416         return phone;
 417     }
 418 
 419     /**
 420      * @deprecated use the phonePrimary property on the related Address instead
 421      */
 422     @Deprecated
 423     @Override
 424     public void setPhone(Phone phone) {
 425         this.phone = phone;
 426     }
 427 
 428     @Override
 429     @Deprecated
 430     public String getMethod() {
 431         return method;
 432     }
 433 
 434     @Override
 435     @Deprecated
 436     public void setMethod(String fulfillmentMethod) {
 437         this.method = fulfillmentMethod;
 438     }
 439 
 440     @Override
 441     public Money getRetailFulfillmentPrice() {
 442         return retailFulfillmentPrice == null ? null :
 443                 BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());
 444     }
 445 
 446     @Override
 447     public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {
 448         this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);
 449     }
 450 
 451     @Override
 452     public Money getRetailShippingPrice() {
 453         return getRetailFulfillmentPrice();
 454     }
 455 
 456     @Override
 457     public void setRetailShippingPrice(Money retailShippingPrice) {
 458         setRetailFulfillmentPrice(retailShippingPrice);
 459     }
 460 
 461     @Override
 462     public FulfillmentType getType() {
 463         return FulfillmentType.getInstance(type);
 464     }
 465 
 466     @Override
 467     public void setType(FulfillmentType type) {
 468         this.type = type == null ? null : type.getType();
 469     }
 470 
 471     @Override
 472     public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {
 473         candidateOffers.add(candidateOffer);
 474     }
 475 
 476     @Override
 477     public List&lt;CandidateFulfillmentGroupOffer&gt; getCandidateFulfillmentGroupOffers() {
 478         return candidateOffers;
 479     }
 480 
 481     @Override
 482     public void setCandidateFulfillmentGroupOffer(List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers) {
 483         this.candidateOffers = candidateOffers;
 484 
 485     }
 486 
 487     @Override
 488     public void removeAllCandidateOffers() {
 489         if (candidateOffers != null) {
 490             for (CandidateFulfillmentGroupOffer offer : candidateOffers) {
 491                 offer.setFulfillmentGroup(null);
 492             }
 493             candidateOffers.clear();
 494         }
 495     }
 496 
 497     @Override
 498     public List&lt;FulfillmentGroupAdjustment&gt; getFulfillmentGroupAdjustments() {
 499         return this.fulfillmentGroupAdjustments;
 500     }
 501 
 502     @Override
 503     public List&lt;FulfillmentGroupAdjustment&gt; getFutureCreditFulfillmentGroupAdjustments() {
 504         List&lt;FulfillmentGroupAdjustment&gt; futureCreditAdjustments = new ArrayList&lt;&gt;();
 505         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 506             if (adjustment.isFutureCredit()) {
 507                 futureCreditAdjustments.add(adjustment);
 508             }
 509 
 510         }
 511         return futureCreditAdjustments;
 512     }
 513 
 514     @Override
 515     public Money getFulfillmentGroupAdjustmentsValue() {
<abbr title=" 516         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 516         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr>
 517         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 518             if (!adjustment.isFutureCredit()) {
 519             adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 520         }
 521         }
 522         return adjustmentsValue;
 523     }
 524 
 525     @Override
 526     public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {
<abbr title=" 527         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 527         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr>
 528         for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {
 529             adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 530         }
 531         return adjustmentsValue;
 532     }
 533 
 534     @Override
 535     public void removeAllAdjustments() {
 536         if (fulfillmentGroupAdjustments != null) {
 537             for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 538                 adjustment.setFulfillmentGroup(null);
 539             }
 540             fulfillmentGroupAdjustments.clear();
 541         }
 542     }
 543 
 544     @Override
<abbr title=" 545     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments) {"> 545     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustmenðŸ”µ</abbr>
 546         this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;
 547     }
 548 
 549     @Override
 550     public Money getSaleFulfillmentPrice() {
<abbr title=" 551         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,"> 551         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPriceðŸ”µ</abbr>
 552                 getOrder().getCurrency());
 553     }
 554 
 555     @Override
 556     public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {
 557         this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);
 558     }
 559 
 560     @Override
 561     public Money getSaleShippingPrice() {
 562         return getSaleFulfillmentPrice();
 563     }
 564 
 565     @Override
 566     public void setSaleShippingPrice(Money saleShippingPrice) {
 567         setSaleFulfillmentPrice(saleShippingPrice);
 568     }
 569 
 570     @Override
 571     public Money getFulfillmentPrice() {
 572         return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,
 573                 getOrder().getCurrency());
 574     }
 575 
 576     @Override
 577     public void setFulfillmentPrice(Money fulfillmentPrice) {
 578         this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);
 579     }
 580 
 581     @Override
 582     public Money getShippingPrice() {
 583         return getFulfillmentPrice();
 584     }
 585 
 586     @Override
 587     public void setShippingPrice(Money shippingPrice) {
 588         setFulfillmentPrice(shippingPrice);
 589     }
 590 
 591     @Override
 592     public List&lt;TaxDetail&gt; getTaxes() {
 593         return taxes;
 594     }
 595 
 596     @Override
 597     public void setTaxes(List&lt;TaxDetail&gt; taxes) {
 598         this.taxes = taxes;
 599     }
 600 
 601     @Override
 602     public Money getTotalTax() {
<abbr title=" 603         return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());"> 603         return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrencyðŸ”µ</abbr>
 604     }
 605 
 606     @Override
 607     public void setTotalTax(Money totalTax) {
 608         this.totalTax = Money.toAmount(totalTax);
 609     }
 610 
 611     @Override
 612     public Money getTotalItemTax() {
<abbr title=" 613         return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());"> 613         return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getðŸ”µ</abbr>
 614     }
 615 
 616     @Override
 617     public void setTotalItemTax(Money totalItemTax) {
 618         this.totalItemTax = Money.toAmount(totalItemTax);
 619     }
 620 
 621     @Override
 622     public Money getTotalFeeTax() {
<abbr title=" 623         return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());"> 623         return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCuðŸ”µ</abbr>
 624     }
 625 
 626     @Override
 627     public void setTotalFeeTax(Money totalFeeTax) {
 628         this.totalFeeTax = Money.toAmount(totalFeeTax);
 629     }
 630 
 631     @Override
 632     public Money getTotalFulfillmentGroupTax() {
<abbr title=" 633         return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,"> 633         return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentðŸ”µ</abbr>
 634                 getOrder().getCurrency());
 635     }
 636 
 637     @Override
 638     public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {
 639         this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);
 640     }
 641 
 642     @Override
 643     public String getDeliveryInstruction() {
 644         return deliveryInstruction;
 645     }
 646 
 647     @Override
 648     public void setDeliveryInstruction(String deliveryInstruction) {
 649         this.deliveryInstruction = deliveryInstruction;
 650     }
 651 
 652     @Override
 653     public PersonalMessage getPersonalMessage() {
 654         return personalMessage;
 655     }
 656 
 657     @Override
 658     public void setPersonalMessage(PersonalMessage personalMessage) {
 659         this.personalMessage = personalMessage;
 660     }
 661 
 662     @Override
 663     public boolean isPrimary() {
 664         return primary;
 665     }
 666 
 667     @Override
 668     public void setPrimary(boolean primary) {
 669         this.primary = primary;
 670     }
 671 
 672     @Override
 673     public Money getMerchandiseTotal() {
 674         return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,
 675                 getOrder().getCurrency());
 676     }
 677 
 678     @Override
 679     public void setMerchandiseTotal(Money merchandiseTotal) {
 680         this.merchandiseTotal = Money.toAmount(merchandiseTotal);
 681     }
 682 
 683     @Override
 684     public Money getTotal() {
 685         return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());
 686     }
 687 
 688     @Override
 689     public void setTotal(Money orderTotal) {
 690         this.total = Money.toAmount(orderTotal);
 691     }
 692 
 693     @Override
 694     public FulfillmentGroupStatusType getStatus() {
 695         return FulfillmentGroupStatusType.getInstance(status);
 696     }
 697 
 698     @Override
 699     public void setStatus(FulfillmentGroupStatusType status) {
 700         this.status = status.getType();
 701     }
 702 
 703     @Override
 704     public List&lt;FulfillmentGroupFee&gt; getFulfillmentGroupFees() {
 705         return fulfillmentGroupFees;
 706     }
 707 
 708     @Override
 709     public void setFulfillmentGroupFees(List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees) {
 710         this.fulfillmentGroupFees = fulfillmentGroupFees;
 711     }
 712 
 713     @Override
 714     public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {
 715         if (fulfillmentGroupFees == null) {
 716             fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 717         }
 718         fulfillmentGroupFees.add(fulfillmentGroupFee);
 719     }
 720 
 721     @Override
 722     public void removeAllFulfillmentGroupFees() {
 723         if (fulfillmentGroupFees != null) {
 724             fulfillmentGroupFees.clear();
 725         }
 726     }
 727 
 728     @Override
 729     public Boolean isShippingPriceTaxable() {
 730         return isShippingPriceTaxable;
 731     }
 732 
 733     @Override
 734     public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {
 735         this.isShippingPriceTaxable = isShippingPriceTaxable;
 736     }
 737 
 738     @Override
 739     public void setSequence(Integer sequence) {
 740         this.sequence = sequence;
 741     }
 742 
 743     @Override
 744     public Integer getSequence() {
 745         return this.sequence;
 746     }
 747 
 748     @Override
 749     @Deprecated
 750     public String getService() {
 751         return service;
 752     }
 753 
 754     @Override
 755     @Deprecated
 756     public void setService(String service) {
 757         this.service = service;
 758     }
 759 
 760     @Override
 761     public String getCurrencyCode() {
 762         if (getOrder().getCurrency() != null) {
 763             return getOrder().getCurrency().getCurrencyCode();
 764         }
 765         return null;
 766     }
 767 
 768     @Override
 769     public Boolean getShippingOverride() {
 770         return shippingOverride == null ? false : shippingOverride;
 771     }
 772 
 773     @Override
 774     public void setShippingOverride(Boolean shippingOverride) {
 775         this.shippingOverride = shippingOverride;
 776     }
 777 
 778     @Override
 779     public int hashCode() {
 780         final int prime = 31;
 781         int result = 1;
 782         result = prime * result + ((address == null) ? 0 : address.hashCode());
<abbr title=" 783         result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());"> 783         result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode()ðŸ”µ</abbr>
 784         return result;
 785     }
 786 
 787     @Override
<abbr title=" 788     public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {"> 788     public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyConðŸ”µ</abbr>
 789         CreateResponse&lt;G&gt; createResponse = context.createOrRetrieveCopyInstance(this);
 790         if (createResponse.isAlreadyPopulated()) {
 791             return createResponse;
 792         }
 793         FulfillmentGroup cloned = createResponse.getClone();
<abbr title=" 794         cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());"> 794         cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getCloneðŸ”µ</abbr>
 795         cloned.setDeliveryInstruction(deliveryInstruction);
 796         cloned.setFulfillmentOption(fulfillmentOption);
 797         cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 798         cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);
 799         cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));
 800         cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 801         cloneTaxDetails(context, cloned);
 802         cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));
<abbr title=" 803         cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));"> 803         cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfiðŸ”µ</abbr>
 804         cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));
 805         cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));
<abbr title=" 806         cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));"> 806         cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmðŸ”µ</abbr>
<abbr title=" 807         cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));"> 807         cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPriðŸ”µ</abbr>
 808         cloned.setTotal(total == null ? null : new Money(total));
 809         cloned.setOrder(order);
 810         cloned.setPrimary(primary);
 811         cloned.setType(getType());
 812         for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {
<abbr title=" 813             FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();"> 813             FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClonðŸ”µ</abbr>
 814             fulfillmentGroupItem.setFulfillmentGroup(cloned);
 815             cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);
 816         }
 817         return  createResponse;
 818     }
 819 
<abbr title=" 820     protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {"> 820     protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNðŸ”µ</abbr>
 821         for (TaxDetail taxDetail : getTaxes()) {
 822             TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();
 823             cloned.getTaxes().add(clonedTaxDetail);
 824         }
 825     }
 826 
 827     @Override
 828     public boolean equals(Object obj) {
 829         if (this == obj) {
 830             return true;
 831         }
 832         if (obj == null) {
 833             return false;
 834         }
 835         if (!getClass().isAssignableFrom(obj.getClass())) {
 836             return false;
 837         }
 838         FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;
 839 
 840         if (id != null &amp;&amp; other.id != null) {
 841             return id.equals(other.id);
 842         }
 843 
 844         if (address == null) {
 845             if (other.address != null) {
 846                 return false;
 847             }
 848         } else if (!address.equals(other.address)) {
 849             return false;
 850         }
 851         if (fulfillmentGroupItems == null) {
 852             if (other.fulfillmentGroupItems != null) {
 853                 return false;
 854             }
 855         } else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {
 856             return false;
 857         }
 858         return true;
 859     }
 860 
 861     public static class Presentation {
 862         public static class Tab {
 863             public static class Name {
 864                 public static final String Items = &quot;FulfillmentGroupImpl_Items_Tab&quot;;
 865                 public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing_Tab&quot;;
 866                 public static final String Address = &quot;FulfillmentGroupImpl_Address_Tab&quot;;
 867                 public static final String Advanced = &quot;FulfillmentGroupImpl_Advanced_Tab&quot;;
 868             }
 869 
 870             public static class Order {
 871                 public static final int Items = 2000;
 872                 public static final int Pricing = 3000;
 873                 public static final int Address = 4000;
 874                 public static final int Advanced = 5000;
 875             }
 876         }
 877 
 878         public static class Group {
 879             public static class Name {
 880                 public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing&quot;;
 881             }
 882 
 883             public static class Order {
 884                 public static final int General = 1000;
 885                 public static final int Pricing = 2000;
 886             }
 887         }
 888 
 889         public static class FieldOrder {
 890             public static final int REFNUMBER = 3000;
 891             public static final int STATUS = 4000;
 892             public static final int TYPE = 5000;
 893             public static final int DELIVERINSTRUCTION = 6000;
 894             public static final int PRIMARY = 7000;
 895             public static final int PHONE = 8000;
 896 
 897             public static final int RETAIL = 1000;
 898             public static final int SALE = 2000;
 899             public static final int PRICE = 3000;
 900             public static final int ITEMTAX = 4000;
 901             public static final int FEETAX = 5000;
 902             public static final int FGTAX = 6000;
 903             public static final int TOTALTAX = 7000;
 904             public static final int MERCHANDISETOTAL = 8000;
 905             public static final int TOTAL = 9000;
 906             public static final int TAXABLE = 10000;
 907         }
 908     }
 909 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                            <td><pre>   1 /*-
   2  * #%L
   3  * BroadleafCommerce Framework
   4  * %%
   5  * Copyright (C) 2009 - 2023 Broadleaf Commerce
   6  * %%
   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  10  * the Broadleaf End User License Agreement (EULA), Version 1.1
  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  12  * shall apply.
  13  *
<abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr>
<abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr>
  16  * #L%
  17  */
  18 package org.broadleafcommerce.core.order.domain;
  19 
  20 import java.math.BigDecimal;
  21 import java.util.ArrayList;
  22 import java.util.List;
  23 import java.util.Vector;
  24 import javax.persistence.CascadeType;
  25 import javax.persistence.Column;
  26 import javax.persistence.Entity;
  27 import javax.persistence.FetchType;
  28 import javax.persistence.GeneratedValue;
  29 import javax.persistence.Id;
  30 import javax.persistence.Inheritance;
  31 import javax.persistence.InheritanceType;
  32 import javax.persistence.JoinColumn;
  33 import javax.persistence.JoinTable;
  34 import javax.persistence.ManyToOne;
  35 import javax.persistence.OneToMany;
  36 import javax.persistence.Table;
  37 import org.broadleafcommerce.common.copy.CreateResponse;
  38 import org.broadleafcommerce.common.copy.MultiTenantCopyContext;
  39 import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;
  40 import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;
  41 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;
  42 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;
  43 import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;
  44 import org.broadleafcommerce.common.money.Money;
  45 import org.broadleafcommerce.common.presentation.AdminPresentation;
  46 import org.broadleafcommerce.common.presentation.AdminPresentationClass;
  47 import org.broadleafcommerce.common.presentation.AdminPresentationCollection;
  48 import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;
  49 import org.broadleafcommerce.common.presentation.client.SupportedFieldType;
  50 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;
  51 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;
  52 import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;
  53 import org.broadleafcommerce.common.presentation.override.PropertyType;
  54 import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;
  55 import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;
  56 import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;
  57 import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;
  58 import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;
  59 import org.broadleafcommerce.core.order.service.type.FulfillmentType;
  60 import org.broadleafcommerce.profile.core.domain.Address;
  61 import org.broadleafcommerce.profile.core.domain.AddressImpl;
  62 import org.broadleafcommerce.profile.core.domain.Phone;
  63 import org.broadleafcommerce.profile.core.domain.PhoneImpl;
  64 import org.hibernate.annotations.Cache;
  65 import org.hibernate.annotations.CacheConcurrencyStrategy;
  66 import org.hibernate.annotations.GenericGenerator;
  67 import org.hibernate.annotations.Index;
  68 import org.hibernate.annotations.Parameter;
  69 
  70 
  71 @Entity
  72 @Inheritance(strategy = InheritanceType.JOINED)
  73 @Table(name = &quot;BLC_FULFILLMENT_GROUP&quot;)
  74 @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
<abbr title="  75 @AdminPresentationMergeOverrides({ @AdminPresentationMergeOverride(name = &quot;&quot;, mergeEntries = @AdminPresentationMergeEntry(propertyType = AdminPresentation.READONLY, booleanOverrideValue = true)), @AdminPresentationMergeOverride(name = &quot;currency&quot;, mergeEntries = @AdminPresentationMergeEntry(propertyType = AdminPresentation.PROMINENT, booleanOverrideValue = false)), @AdminPresentationMergeOverride(name = &quot;personalMessage&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.TAB, overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced), @AdminPresentationMergeEntry(propertyType = AdminPresentation.TABORDER, intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced) }), @AdminPresentationMergeOverride(name = &quot;address&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.TAB, overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address), @AdminPresentationMergeEntry(propertyType = AdminPresentation.TABORDER, intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address) }), @AdminPresentationMergeOverride(name = &quot;address.isDefault&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.EXCLUDED, booleanOverrideValue = true) }), @AdminPresentationMergeOverride(name = &quot;address.isActive&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.EXCLUDED, booleanOverrideValue = true) }), @AdminPresentationMergeOverride(name = &quot;address.isBusiness&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.EXCLUDED, booleanOverrideValue = true) }), @AdminPresentationMergeOverride(name = &quot;phone&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.EXCLUDED, booleanOverrideValue = true) }), @AdminPresentationMergeOverride(name = &quot;phone.phoneNumber&quot;, mergeEntries = { @AdminPresentationMergeEntry(propertyType = AdminPresentation.EXCLUDED, booleanOverrideValue = false), @AdminPresentationMergeEntry(propertyType = AdminPresentation.ORDER, intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE), @AdminPresentationMergeEntry(propertyType = AdminPresentation.GROUP, overrideValue = &quot;General&quot;), @AdminPresentationMergeEntry(propertyType = AdminPresentation.REQUIREDOVERRIDE, overrideValue = &quot;NOT_REQUIRED&quot;) }) })">  75 @AdminPresentationMergeOverrides({ @AdminPresentationMergeOverride(name = &quot;&quot;, mergeEntries = @AdminPresenðŸ”µ</abbr>
<abbr title="  76 @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_baseFulfillmentGroup&quot;)">  76 @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGrðŸ”µ</abbr>
<abbr title="  77 @DirectCopyTransform({ @DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE) })">  77 @DirectCopyTransform({ @DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SðŸ”µ</abbr>
  78 public class FulfillmentGroupImpl implements FulfillmentGroup , CurrencyCodeIdentifiable {
  79     private static final long serialVersionUID = 1L;
  80 
  81     @Id
  82     @GeneratedValue(generator = &quot;FulfillmentGroupId&quot;)
<abbr title="  83     @GenericGenerator(name = &quot;FulfillmentGroupId&quot;, strategy = &quot;org.broadleafcommerce.common.persistence.IdOverrideTableGenerator&quot;, parameters = { @Parameter(name = &quot;segment_value&quot;, value = &quot;FulfillmentGroupImpl&quot;), @Parameter(name = &quot;entity_name&quot;, value = &quot;org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl&quot;) })">  83     @GenericGenerator(name = &quot;FulfillmentGroupId&quot;, strategy = &quot;org.broadleafcommerce.common.persistence.IðŸ”µ</abbr>
  84     @Column(name = &quot;FULFILLMENT_GROUP_ID&quot;)
  85     protected Long id;
  86 
  87     @Column(name = &quot;REFERENCE_NUMBER&quot;)
  88     @Index(name = &quot;FG_REFERENCE_INDEX&quot;, columnNames = { &quot;REFERENCE_NUMBER&quot; })
<abbr title="  89     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order = Presentation.FieldOrder.REFNUMBER, groupOrder = Presentation.Group.Order.General)">  89     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order = Presentation.FiðŸ”µ</abbr>
  90     protected String referenceNumber;
  91 
  92     @Column(name = &quot;METHOD&quot;)
  93     @Index(name = &quot;FG_METHOD_INDEX&quot;, columnNames = { &quot;METHOD&quot; })
  94     @AdminPresentation(excluded = true)
  95     @Deprecated
  96     protected String method;
  97 
  98     @Column(name = &quot;SERVICE&quot;)
  99     @Index(name = &quot;FG_SERVICE_INDEX&quot;, columnNames = { &quot;SERVICE&quot; })
 100     @AdminPresentation(excluded = true)
 101     @Deprecated
 102     protected String service;
 103 
 104     @Column(name = &quot;RETAIL_PRICE&quot;, precision = 19, scale = 5)
<abbr title=" 105     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order = Presentation.FieldOrder.RETAIL, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 105     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order = Presentation.ðŸ”µ</abbr>
 106     protected BigDecimal retailFulfillmentPrice;
 107 
 108     @Column(name = &quot;SALE_PRICE&quot;, precision = 19, scale = 5)
<abbr title=" 109     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order = Presentation.FieldOrder.SALE, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 109     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order = Presentation.FiðŸ”µ</abbr>
 110     protected BigDecimal saleFulfillmentPrice;
 111 
 112     @Column(name = &quot;PRICE&quot;, precision = 19, scale = 5)
<abbr title=" 113     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order = Presentation.FieldOrder.PRICE, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 113     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order = Presentation.FieldOrðŸ”µ</abbr>
 114     protected BigDecimal fulfillmentPrice;
 115 
 116     @Column(name = &quot;TYPE&quot;)
<abbr title=" 117     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Type&quot;, order = Presentation.FieldOrder.TYPE, fieldType = SupportedFieldType.BROADLEAF_ENUMERATION, broadleafEnumeration = &quot;org.broadleafcommerce.core.order.service.type.FulfillmentType&quot;, prominent = true, gridOrder = 3000)"> 117     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Type&quot;, order = Presentation.FieldOrder.TYPðŸ”µ</abbr>
 118     protected String type;
 119 
 120     @Column(name = &quot;TOTAL_TAX&quot;, precision = 19, scale = 5)
<abbr title=" 121     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order = Presentation.FieldOrder.TOTALTAX, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 121     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order = Presentation.FieldOrdeðŸ”µ</abbr>
 122     protected BigDecimal totalTax;
 123 
 124     @Column(name = &quot;TOTAL_ITEM_TAX&quot;, precision = 19, scale = 5)
<abbr title=" 125     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order = Presentation.FieldOrder.ITEMTAX, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 125     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order = Presentation.FielðŸ”µ</abbr>
 126     protected BigDecimal totalItemTax;
 127 
 128     @Column(name = &quot;TOTAL_FEE_TAX&quot;, precision = 19, scale = 5)
<abbr title=" 129     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order = Presentation.FieldOrder.FEETAX, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 129     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order = Presentation.FieldðŸ”µ</abbr>
 130     protected BigDecimal totalFeeTax;
 131 
 132     @Column(name = &quot;TOTAL_FG_TAX&quot;, precision = 19, scale = 5)
<abbr title=" 133     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order = Presentation.FieldOrder.FGTAX, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 133     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order = Presentation.FieldOðŸ”µ</abbr>
 134     protected BigDecimal totalFulfillmentGroupTax;
 135 
 136     @Column(name = &quot;DELIVERY_INSTRUCTION&quot;)
<abbr title=" 137     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order = Presentation.FieldOrder.DELIVERINSTRUCTION)"> 137     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order = PresentatioðŸ”µ</abbr>
 138     protected String deliveryInstruction;
 139 
 140     @Column(name = &quot;IS_PRIMARY&quot;)
 141     @Index(name = &quot;FG_PRIMARY_INDEX&quot;, columnNames = { &quot;IS_PRIMARY&quot; })
<abbr title=" 142     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order = Presentation.FieldOrder.PRIMARY)"> 142     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order = Presentation.FieldOrder.ðŸ”µ</abbr>
 143     protected boolean primary = false;
 144 
 145     @Column(name = &quot;MERCHANDISE_TOTAL&quot;, precision = 19, scale = 5)
<abbr title=" 146     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order = Presentation.FieldOrder.MERCHANDISETOTAL, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY)"> 146     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order = Presentation.FðŸ”µ</abbr>
 147     protected BigDecimal merchandiseTotal;
 148 
 149     @Column(name = &quot;TOTAL&quot;, precision = 19, scale = 5)
<abbr title=" 150     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order = Presentation.FieldOrder.TOTAL, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing, fieldType = SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)"> 150     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order = Presentation.FieldOrder.TOðŸ”µ</abbr>
 151     protected BigDecimal total;
 152 
 153     @Column(name = &quot;STATUS&quot;)
 154     @Index(name = &quot;FG_STATUS_INDEX&quot;, columnNames = { &quot;STATUS&quot; })
<abbr title=" 155     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order = Presentation.FieldOrder.STATUS, fieldType = SupportedFieldType.BROADLEAF_ENUMERATION, broadleafEnumeration = &quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType&quot;, prominent = true, gridOrder = 4000)"> 155     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order = Presentation.FieldOrder.SðŸ”µ</abbr>
 156     protected String status;
 157 
 158     @Column(name = &quot;SHIPPING_PRICE_TAXABLE&quot;)
<abbr title=" 159     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order = Presentation.FieldOrder.TAXABLE, group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)"> 159     @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order = PresentationðŸ”µ</abbr>
 160     protected Boolean isShippingPriceTaxable = Boolean.FALSE;
 161 
<abbr title=" 162     @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH })"> 162     @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = { CascadeType.PERSIST, CascadeType.MðŸ”µ</abbr>
 163     @JoinColumn(name = &quot;FULFILLMENT_OPTION_ID&quot;)
 164     protected FulfillmentOption fulfillmentOption;
 165 
 166     @ManyToOne(targetEntity = OrderImpl.class, optional = false)
 167     @JoinColumn(name = &quot;ORDER_ID&quot;)
 168     @Index(name = &quot;FG_ORDER_INDEX&quot;, columnNames = { &quot;ORDER_ID&quot; })
 169     @AdminPresentation(excluded = true)
 170     protected Order order;
 171 
 172     @Column(name = &quot;FULFILLMENT_GROUP_SEQUNCE&quot;)
 173     protected Integer sequence;
 174 
<abbr title=" 175     @ManyToOne(targetEntity = AddressImpl.class, cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH })"> 175     @ManyToOne(targetEntity = AddressImpl.class, cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascðŸ”µ</abbr>
 176     @JoinColumn(name = &quot;ADDRESS_ID&quot;)
 177     @Index(name = &quot;FG_ADDRESS_INDEX&quot;, columnNames = { &quot;ADDRESS_ID&quot; })
 178     protected Address address;
 179 
 180     /**
 181      *
 182      *
 183      * @deprecated uses the phonePrimary property on AddressImpl instead
 184      */
<abbr title=" 185     @ManyToOne(targetEntity = PhoneImpl.class, cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH })"> 185     @ManyToOne(targetEntity = PhoneImpl.class, cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadðŸ”µ</abbr>
 186     @JoinColumn(name = &quot;PHONE_ID&quot;)
 187     @Index(name = &quot;FG_PHONE_INDEX&quot;, columnNames = { &quot;PHONE_ID&quot; })
 188     @Deprecated
 189     protected Phone phone;
 190 
 191     @ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })
 192     @JoinColumn(name = &quot;PERSONAL_MESSAGE_ID&quot;)
 193     @Index(name = &quot;FG_MESSAGE_INDEX&quot;, columnNames = { &quot;PERSONAL_MESSAGE_ID&quot; })
 194     protected PersonalMessage personalMessage;
 195 
<abbr title=" 196     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL, orphanRemoval = true)"> 196     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CaðŸ”µ</abbr>
 197     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
<abbr title=" 198     @AdminPresentationCollection(friendlyName = &quot;FulfillmentGroupImpl_Items&quot;, tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)"> 198     @AdminPresentationCollection(friendlyName = &quot;FulfillmentGroupImpl_Items&quot;, tab = Presentation.Tab.NameðŸ”µ</abbr>
 199     protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();
 200 
<abbr title=" 201     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 201     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CðŸ”µ</abbr>
 202     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
<abbr title=" 203     @AdminPresentationCollection(friendlyName = &quot;FulfillmentGroupImpl_Fees&quot;, tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)"> 203     @AdminPresentationCollection(friendlyName = &quot;FulfillmentGroupImpl_Fees&quot;, tab = Presentation.Tab.Name.ðŸ”µ</abbr>
 204     protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 205 
<abbr title=" 206     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 206     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, caðŸ”µ</abbr>
 207     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
<abbr title=" 208     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 208     protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGrðŸ”µ</abbr>
 209 
<abbr title=" 210     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 210     @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascadðŸ”µ</abbr>
 211     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
<abbr title=" 212     @AdminPresentationCollection(friendlyName = &quot;FulfillmentGroupImpl_Adjustments&quot;, tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)"> 212     @AdminPresentationCollection(friendlyName = &quot;FulfillmentGroupImpl_Adjustments&quot;, tab = Presentation.TaðŸ”µ</abbr>
<abbr title=" 213     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 213     protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroðŸ”µ</abbr>
 214 
<abbr title=" 215     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 215     @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL },ðŸ”µ</abbr>
<abbr title=" 216     @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;), inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))"> 216     @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;), invðŸ”µ</abbr>
 217     @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)
 218     protected List&lt;TaxDetail&gt; taxes = new ArrayList&lt;TaxDetail&gt;();
 219 
 220     @Column(name = &quot;SHIPPING_OVERRIDE&quot;)
 221     protected Boolean shippingOverride;
 222 
 223     @Override
 224     public Long getId() {
 225         return id;
 226     }
 227 
 228     @Override
 229     public void setId(Long id) {
 230         this.id = id;
 231     }
 232 
 233     @Override
 234     public Order getOrder() {
 235         return order;
 236     }
 237 
 238     @Override
 239     public void setOrder(Order order) {
 240         this.order = order;
 241     }
 242 
 243     @Override
 244     public FulfillmentOption getFulfillmentOption() {
 245         return fulfillmentOption;
 246     }
 247 
 248     @Override
 249     public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {
 250         this.fulfillmentOption = fulfillmentOption;
 251     }
 252 
 253     @Override
 254     public String getReferenceNumber() {
 255         return referenceNumber;
 256     }
 257 
 258     @Override
 259     public void setReferenceNumber(String referenceNumber) {
 260         this.referenceNumber = referenceNumber;
 261     }
 262 
 263     @Override
 264     public List&lt;FulfillmentGroupItem&gt; getFulfillmentGroupItems() {
 265         return fulfillmentGroupItems;
 266     }
 267 
 268     @Override
 269     public List&lt;DiscreteOrderItem&gt; getDiscreteOrderItems() {
 270         List&lt;DiscreteOrderItem&gt; discreteOrderItems = new ArrayList&lt;DiscreteOrderItem&gt;();
 271         for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {
 272             OrderItem orderItem = fgItem.getOrderItem();
 273             if (orderItem instanceof BundleOrderItem) {
 274                 BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;
 275                 for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
 276                     discreteOrderItems.add(discreteOrderItem);
 277                 }
 278             } else if (orderItem instanceof DiscreteOrderItem) {
 279                 DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;
 280                 discreteOrderItems.add(discreteOrderItem);
 281             }
 282         }
 283         return discreteOrderItems;
 284     }
 285 
 286     @Override
 287     public void setFulfillmentGroupItems(List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems) {
 288         this.fulfillmentGroupItems = fulfillmentGroupItems;
 289     }
 290 
 291     @Override
 292     public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {
 293         if (this.fulfillmentGroupItems == null) {
 294             this.fulfillmentGroupItems = new Vector&lt;FulfillmentGroupItem&gt;();
 295         }
 296         this.fulfillmentGroupItems.add(fulfillmentGroupItem);
 297 
 298     }
 299 
 300     @Override
 301     public Address getAddress() {
 302         return address;
 303     }
 304 
 305     @Override
 306     public void setAddress(Address address) {
 307         this.address = address;
 308     }
 309 
 310     /**
 311      * @deprecated use the phonePrimary property on the related Address instead
 312      */
 313     @Deprecated
 314     @Override
 315     public Phone getPhone() {
 316         return phone;
 317     }
 318 
 319     /**
 320      * @deprecated use the phonePrimary property on the related Address instead
 321      */
 322     @Deprecated
 323     @Override
 324     public void setPhone(Phone phone) {
 325         this.phone = phone;
 326     }
 327 
 328     @Override
 329     @Deprecated
 330     public String getMethod() {
 331         return method;
 332     }
 333 
 334     @Override
 335     @Deprecated
 336     public void setMethod(String fulfillmentMethod) {
 337         this.method = fulfillmentMethod;
 338     }
 339 
 340     @Override
 341     public Money getRetailFulfillmentPrice() {
 342         return retailFulfillmentPrice == null ? null :
 343                 BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());
 344     }
 345 
 346     @Override
 347     public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {
 348         this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);
 349     }
 350 
 351     @Override
 352     public Money getRetailShippingPrice() {
 353         return getRetailFulfillmentPrice();
 354     }
 355 
 356     @Override
 357     public void setRetailShippingPrice(Money retailShippingPrice) {
 358         setRetailFulfillmentPrice(retailShippingPrice);
 359     }
 360 
 361     @Override
 362     public FulfillmentType getType() {
 363         return FulfillmentType.getInstance(type);
 364     }
 365 
 366     @Override
 367     public void setType(FulfillmentType type) {
 368         this.type = type == null ? null : type.getType();
 369     }
 370 
 371     @Override
 372     public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {
 373         candidateOffers.add(candidateOffer);
 374     }
 375 
 376     @Override
 377     public List&lt;CandidateFulfillmentGroupOffer&gt; getCandidateFulfillmentGroupOffers() {
 378         return candidateOffers;
 379     }
 380 
 381     @Override
 382     public void setCandidateFulfillmentGroupOffer(List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers) {
 383         this.candidateOffers = candidateOffers;
 384 
 385     }
 386 
 387     @Override
 388     public void removeAllCandidateOffers() {
 389         if (candidateOffers != null) {
 390             for (CandidateFulfillmentGroupOffer offer : candidateOffers) {
 391                 offer.setFulfillmentGroup(null);
 392             }
 393             candidateOffers.clear();
 394         }
 395     }
 396 
 397     @Override
 398     public List&lt;FulfillmentGroupAdjustment&gt; getFulfillmentGroupAdjustments() {
 399         return this.fulfillmentGroupAdjustments;
 400     }
 401 
 402     @Override
 403     public List&lt;FulfillmentGroupAdjustment&gt; getFutureCreditFulfillmentGroupAdjustments() {
 404         List&lt;FulfillmentGroupAdjustment&gt; futureCreditAdjustments = new ArrayList&lt;&gt;();
 405         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 406             if (adjustment.isFutureCredit()) {
 407                 futureCreditAdjustments.add(adjustment);
 408             }
 409         }
 410         return futureCreditAdjustments;
 411     }
 412 
 413     @Override
 414     public Money getFulfillmentGroupAdjustmentsValue() {
<abbr title=" 415         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 415         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr>
 416         for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 417             if (!adjustment.isFutureCredit()) {
 418                 adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 419             }
 420         }
 421         return adjustmentsValue;
 422     }
 423 
 424     @Override
 425     public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {
<abbr title=" 426         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());"> 426         Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency(ðŸ”µ</abbr>
 427         for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {
 428             adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 429         }
 430         return adjustmentsValue;
 431     }
 432 
 433     @Override
 434     public void removeAllAdjustments() {
 435         if (fulfillmentGroupAdjustments != null) {
 436             for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 437                 adjustment.setFulfillmentGroup(null);
 438             }
 439             fulfillmentGroupAdjustments.clear();
 440         }
 441     }
 442 
 443     @Override
<abbr title=" 444     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments) {"> 444     public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustmenðŸ”µ</abbr>
 445         this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;
 446     }
 447 
 448     @Override
 449     public Money getSaleFulfillmentPrice() {
<abbr title=" 450         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,"> 450         return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPriceðŸ”µ</abbr>
 451                 getOrder().getCurrency());
 452     }
 453 
 454     @Override
 455     public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {
 456         this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);
 457     }
 458 
 459     @Override
 460     public Money getSaleShippingPrice() {
 461         return getSaleFulfillmentPrice();
 462     }
 463 
 464     @Override
 465     public void setSaleShippingPrice(Money saleShippingPrice) {
 466         setSaleFulfillmentPrice(saleShippingPrice);
 467     }
 468 
 469     @Override
 470     public Money getFulfillmentPrice() {
 471         return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,
 472                 getOrder().getCurrency());
 473     }
 474 
 475     @Override
 476     public void setFulfillmentPrice(Money fulfillmentPrice) {
 477         this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);
 478     }
 479 
 480     @Override
 481     public Money getShippingPrice() {
 482         return getFulfillmentPrice();
 483     }
 484 
 485     @Override
 486     public void setShippingPrice(Money shippingPrice) {
 487         setFulfillmentPrice(shippingPrice);
 488     }
 489 
 490     @Override
 491     public List&lt;TaxDetail&gt; getTaxes() {
 492         return taxes;
 493     }
 494 
 495     @Override
 496     public void setTaxes(List&lt;TaxDetail&gt; taxes) {
 497         this.taxes = taxes;
 498     }
 499 
 500     @Override
 501     public Money getTotalTax() {
<abbr title=" 502         return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());"> 502         return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrencyðŸ”µ</abbr>
 503     }
 504 
 505     @Override
 506     public void setTotalTax(Money totalTax) {
 507         this.totalTax = Money.toAmount(totalTax);
 508     }
 509 
 510     @Override
 511     public Money getTotalItemTax() {
<abbr title=" 512         return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());"> 512         return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getðŸ”µ</abbr>
 513     }
 514 
 515     @Override
 516     public void setTotalItemTax(Money totalItemTax) {
 517         this.totalItemTax = Money.toAmount(totalItemTax);
 518     }
 519 
 520     @Override
 521     public Money getTotalFeeTax() {
<abbr title=" 522         return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());"> 522         return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCuðŸ”µ</abbr>
 523     }
 524 
 525     @Override
 526     public void setTotalFeeTax(Money totalFeeTax) {
 527         this.totalFeeTax = Money.toAmount(totalFeeTax);
 528     }
 529 
 530     @Override
 531     public Money getTotalFulfillmentGroupTax() {
<abbr title=" 532         return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,"> 532         return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentðŸ”µ</abbr>
 533                 getOrder().getCurrency());
 534     }
 535 
 536     @Override
 537     public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {
 538         this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);
 539     }
 540 
 541     @Override
 542     public String getDeliveryInstruction() {
 543         return deliveryInstruction;
 544     }
 545 
 546     @Override
 547     public void setDeliveryInstruction(String deliveryInstruction) {
 548         this.deliveryInstruction = deliveryInstruction;
 549     }
 550 
 551     @Override
 552     public PersonalMessage getPersonalMessage() {
 553         return personalMessage;
 554     }
 555 
 556     @Override
 557     public void setPersonalMessage(PersonalMessage personalMessage) {
 558         this.personalMessage = personalMessage;
 559     }
 560 
 561     @Override
 562     public boolean isPrimary() {
 563         return primary;
 564     }
 565 
 566     @Override
 567     public void setPrimary(boolean primary) {
 568         this.primary = primary;
 569     }
 570 
 571     @Override
 572     public Money getMerchandiseTotal() {
 573         return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,
 574                 getOrder().getCurrency());
 575     }
 576 
 577     @Override
 578     public void setMerchandiseTotal(Money merchandiseTotal) {
 579         this.merchandiseTotal = Money.toAmount(merchandiseTotal);
 580     }
 581 
 582     @Override
 583     public Money getTotal() {
 584         return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());
 585     }
 586 
 587     @Override
 588     public void setTotal(Money orderTotal) {
 589         this.total = Money.toAmount(orderTotal);
 590     }
 591 
 592     @Override
 593     public FulfillmentGroupStatusType getStatus() {
 594         return FulfillmentGroupStatusType.getInstance(status);
 595     }
 596 
 597     @Override
 598     public void setStatus(FulfillmentGroupStatusType status) {
 599         this.status = status.getType();
 600     }
 601 
 602     @Override
 603     public List&lt;FulfillmentGroupFee&gt; getFulfillmentGroupFees() {
 604         return fulfillmentGroupFees;
 605     }
 606 
 607     @Override
 608     public void setFulfillmentGroupFees(List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees) {
 609         this.fulfillmentGroupFees = fulfillmentGroupFees;
 610     }
 611 
 612     @Override
 613     public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {
 614         if (fulfillmentGroupFees == null) {
 615             fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 616         }
 617         fulfillmentGroupFees.add(fulfillmentGroupFee);
 618     }
 619 
 620     @Override
 621     public void removeAllFulfillmentGroupFees() {
 622         if (fulfillmentGroupFees != null) {
 623             fulfillmentGroupFees.clear();
 624         }
 625     }
 626 
 627     @Override
 628     public Boolean isShippingPriceTaxable() {
 629         return isShippingPriceTaxable;
 630     }
 631 
 632     @Override
 633     public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {
 634         this.isShippingPriceTaxable = isShippingPriceTaxable;
 635     }
 636 
 637     @Override
 638     public void setSequence(Integer sequence) {
 639         this.sequence = sequence;
 640     }
 641 
 642     @Override
 643     public Integer getSequence() {
 644         return this.sequence;
 645     }
 646 
 647     @Override
 648     @Deprecated
 649     public String getService() {
 650         return service;
 651     }
 652 
 653     @Override
 654     @Deprecated
 655     public void setService(String service) {
 656         this.service = service;
 657     }
 658 
 659     @Override
 660     public String getCurrencyCode() {
 661         if (getOrder().getCurrency() != null) {
 662             return getOrder().getCurrency().getCurrencyCode();
 663         }
 664         return null;
 665     }
 666 
 667     @Override
 668     public Boolean getShippingOverride() {
 669         return shippingOverride == null ? false : shippingOverride;
 670     }
 671 
 672     @Override
 673     public void setShippingOverride(Boolean shippingOverride) {
 674         this.shippingOverride = shippingOverride;
 675     }
 676 
 677     @Override
 678     public int hashCode() {
 679         final int prime = 31;
 680         int result = 1;
 681         result = prime * result + ((address == null) ? 0 : address.hashCode());
<abbr title=" 682         result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());"> 682         result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode()ðŸ”µ</abbr>
 683         return result;
 684     }
 685 
 686     @Override
<abbr title=" 687     public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {"> 687     public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyConðŸ”µ</abbr>
 688         CreateResponse&lt;G&gt; createResponse = context.createOrRetrieveCopyInstance(this);
 689         if (createResponse.isAlreadyPopulated()) {
 690             return createResponse;
 691         }
 692         FulfillmentGroup cloned = createResponse.getClone();
<abbr title=" 693         cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());"> 693         cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getCloneðŸ”µ</abbr>
 694         cloned.setDeliveryInstruction(deliveryInstruction);
 695         cloned.setFulfillmentOption(fulfillmentOption);
 696         cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 697         cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);
 698         cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));
 699         cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 700         cloneTaxDetails(context, cloned);
 701         cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));
<abbr title=" 702         cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));"> 702         cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfiðŸ”µ</abbr>
 703         cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));
 704         cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));
<abbr title=" 705         cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));"> 705         cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmðŸ”µ</abbr>
<abbr title=" 706         cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));"> 706         cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPriðŸ”µ</abbr>
 707         cloned.setTotal(total == null ? null : new Money(total));
 708         cloned.setOrder(order);
 709         cloned.setPrimary(primary);
 710         cloned.setType(getType());
 711         for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {
<abbr title=" 712             FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();"> 712             FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClonðŸ”µ</abbr>
 713             fulfillmentGroupItem.setFulfillmentGroup(cloned);
 714             cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);
 715         }
 716         return  createResponse;
 717     }
 718 
<abbr title=" 719     protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {"> 719     protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNðŸ”µ</abbr>
 720         for (TaxDetail taxDetail : getTaxes()) {
 721             TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();
 722             cloned.getTaxes().add(clonedTaxDetail);
 723         }
 724     }
 725 
 726     @Override
 727     public boolean equals(Object obj) {
 728         if (this == obj) {
 729             return true;
 730         }
 731         if (obj == null) {
 732             return false;
 733         }
 734         if (!getClass().isAssignableFrom(obj.getClass())) {
 735             return false;
 736         }
 737         FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;
 738 
 739         if (id != null &amp;&amp; other.id != null) {
 740             return id.equals(other.id);
 741         }
 742 
 743         if (address == null) {
 744             if (other.address != null) {
 745                 return false;
 746             }
 747         } else if (!address.equals(other.address)) {
 748             return false;
 749         }
 750         if (fulfillmentGroupItems == null) {
 751             if (other.fulfillmentGroupItems != null) {
 752                 return false;
 753             }
 754         } else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {
 755             return false;
 756         }
 757         return true;
 758     }
 759 
 760     public static class Presentation {
 761         public static class Tab {
 762             public static class Name {
 763                 public static final String Items = &quot;FulfillmentGroupImpl_Items_Tab&quot;;
 764 
 765                 public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing_Tab&quot;;
 766 
 767                 public static final String Address = &quot;FulfillmentGroupImpl_Address_Tab&quot;;
 768 
 769                 public static final String Advanced = &quot;FulfillmentGroupImpl_Advanced_Tab&quot;;
 770             }
 771 
 772             public static class Order {
 773                 public static final int Items = 2000;
 774 
 775                 public static final int Pricing = 3000;
 776 
 777                 public static final int Address = 4000;
 778 
 779                 public static final int Advanced = 5000;
 780             }
 781         }
 782 
 783         public static class Group {
 784             public static class Name {
 785                 public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing&quot;;
 786             }
 787 
 788             public static class Order {
 789                 public static final int General = 1000;
 790 
 791                 public static final int Pricing = 2000;
 792             }
 793         }
 794 
 795         public static class FieldOrder {
 796             public static final int REFNUMBER = 3000;
 797 
 798             public static final int STATUS = 4000;
 799 
 800             public static final int TYPE = 5000;
 801 
 802             public static final int DELIVERINSTRUCTION = 6000;
 803 
 804             public static final int PRIMARY = 7000;
 805 
 806             public static final int PHONE = 8000;
 807 
 808             public static final int RETAIL = 1000;
 809 
 810             public static final int SALE = 2000;
 811 
 812             public static final int PRICE = 3000;
 813 
 814             public static final int ITEMTAX = 4000;
 815 
 816             public static final int FEETAX = 5000;
 817 
 818             public static final int FGTAX = 6000;
 819 
 820             public static final int TOTALTAX = 7000;
 821 
 822             public static final int MERCHANDISETOTAL = 8000;
 823 
 824             public static final int TOTAL = 9000;
 825 
 826             public static final int TAXABLE = 10000;
 827         }
 828     }
 829 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   1 -/*</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   2 +/*-</span>
   3   * #%L
   4   * BroadleafCommerce Framework
   5   * %%
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   6 - * Copyright (C) 2009 - 2016 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   7 + * Copyright (C) 2009 - 2023 Broadleaf Commerce</span>
   8   * %%
   9   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
  10   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
  11   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  12   * the Broadleaf End User License Agreement (EULA), Version 1.1
  13   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  14   * shall apply.
  15   *
<abbr title="  16   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  16   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr>
  17   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.
  18   * #L%
  19   */
  20  package org.broadleafcommerce.core.order.domain;
  21  
  22  import org.broadleafcommerce.common.copy.CreateResponse;
  23  import org.broadleafcommerce.common.copy.MultiTenantCopyContext;
  24  import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;
  25  import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;
  26  import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;
  27  import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;
  28  import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;
  29  import org.broadleafcommerce.common.money.Money;
  30  import org.broadleafcommerce.common.presentation.AdminPresentation;
  31  import org.broadleafcommerce.common.presentation.AdminPresentationClass;
  32  import org.broadleafcommerce.common.presentation.AdminPresentationCollection;
  33  import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;
  34  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;
  35  import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;
  36  import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;
  37  import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;
  38  import org.broadleafcommerce.common.presentation.override.PropertyType;
  39  import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;
  40  import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;
  41  import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;
  42  import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;
  43  import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;
  44  import org.broadleafcommerce.core.order.service.type.FulfillmentType;
  45  import org.broadleafcommerce.profile.core.domain.Address;
  46  import org.broadleafcommerce.profile.core.domain.AddressImpl;
  47  import org.broadleafcommerce.profile.core.domain.Phone;
  48  import org.broadleafcommerce.profile.core.domain.PhoneImpl;
  49  import org.hibernate.annotations.Cache;
  50  import org.hibernate.annotations.CacheConcurrencyStrategy;
  51  import org.hibernate.annotations.GenericGenerator;
  52  import org.hibernate.annotations.Index;
  53  import org.hibernate.annotations.Parameter;
  54  
  55  import java.math.BigDecimal;
  56  import java.util.ArrayList;
  57  import java.util.List;
  58  import java.util.Vector;
  59  
  60  import javax.persistence.CascadeType;
  61  import javax.persistence.Column;
  62  import javax.persistence.Entity;
  63  import javax.persistence.FetchType;
  64  import javax.persistence.GeneratedValue;
  65  import javax.persistence.Id;
  66  import javax.persistence.Inheritance;
  67  import javax.persistence.InheritanceType;
  68  import javax.persistence.JoinColumn;
  69  import javax.persistence.JoinTable;
  70  import javax.persistence.ManyToOne;
  71  import javax.persistence.OneToMany;
  72  import javax.persistence.Table;
  73  
  74  @Entity
  75  @Inheritance(strategy = InheritanceType.JOINED)
  76  @Table(name = &quot;BLC_FULFILLMENT_GROUP&quot;)
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  77 -@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
  79  @AdminPresentationMergeOverrides(
  80      {
  81          @AdminPresentationMergeOverride(name = &quot;&quot;, mergeEntries =
  82                      @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,
  83                                                      booleanOverrideValue = true)),
  84          @AdminPresentationMergeOverride(name = &quot;currency&quot;, mergeEntries =
  85              @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,
  86                          booleanOverrideValue = false)),
  87          @AdminPresentationMergeOverride(name = &quot;personalMessage&quot;, mergeEntries = {
  88                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  89                          overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),
  90                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  91                          intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced)
  92          }),
  93          @AdminPresentationMergeOverride(name = &quot;address&quot;, mergeEntries = {
  94                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  95                          overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),
  96                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  97                          intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address)
  98          }),
  99          @AdminPresentationMergeOverride(name = &quot;address.isDefault&quot;, mergeEntries = {
 100                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 101                          booleanOverrideValue = true)
 102          }),
 103          @AdminPresentationMergeOverride(name = &quot;address.isActive&quot;, mergeEntries = {
 104                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 105                          booleanOverrideValue = true)
 106          }),
 107          @AdminPresentationMergeOverride(name = &quot;address.isBusiness&quot;, mergeEntries = {
 108                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 109                          booleanOverrideValue = true)
 110          }),
 111          @AdminPresentationMergeOverride(name = &quot;phone&quot;, mergeEntries = {
 112                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 113                          booleanOverrideValue = true)
 114          }),
 115          @AdminPresentationMergeOverride(name = &quot;phone.phoneNumber&quot;, mergeEntries = {
 116                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 117                          booleanOverrideValue = false),
 118                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,
 119                          intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),
 120                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,
 121                          overrideValue = &quot;General&quot;),
 122                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,
 123                          overrideValue = &quot;NOT_REQUIRED&quot;)
 124          })
 125      }
 126  )
<abbr title=" 127  @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_baseFulfillmentGroup&quot;)"> 127  @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_bðŸ”µ</abbr>
 128  @DirectCopyTransform({
 129          @DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE)
 130  })
 131  public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {
 132  
 133      private static final long serialVersionUID = 1L;
 134  
 135      @Id
 136      @GeneratedValue(generator = &quot;FulfillmentGroupId&quot;)
 137      @GenericGenerator(
 138          name=&quot;FulfillmentGroupId&quot;,
 139          strategy=&quot;org.broadleafcommerce.common.persistence.IdOverrideTableGenerator&quot;,
 140          parameters = {
 141              @Parameter(name=&quot;segment_value&quot;, value=&quot;FulfillmentGroupImpl&quot;),
 142              @Parameter(name=&quot;entity_name&quot;, value=&quot;org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl&quot;)
 143          }
 144      )
 145      @Column(name = &quot;FULFILLMENT_GROUP_ID&quot;)
 146      protected Long id;
 147  
 148      @Column(name = &quot;REFERENCE_NUMBER&quot;)
 149      @Index(name=&quot;FG_REFERENCE_INDEX&quot;, columnNames={&quot;REFERENCE_NUMBER&quot;})
<abbr title=" 150      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FieldOrder.REFNUMBER,"> 150      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FieldOrder.REðŸ”µ</abbr>
 151              groupOrder = Presentation.Group.Order.General)
 152      protected String referenceNumber;
 153  
 154      @Column(name = &quot;METHOD&quot;)
 155      @Index(name=&quot;FG_METHOD_INDEX&quot;, columnNames={&quot;METHOD&quot;})
 156      @AdminPresentation(excluded = true)
 157      @Deprecated
 158      protected String method;
 159  
 160      @Column(name = &quot;SERVICE&quot;)
 161      @Index(name=&quot;FG_SERVICE_INDEX&quot;, columnNames={&quot;SERVICE&quot;})
 162      @AdminPresentation(excluded = true)
 163      @Deprecated
 164      protected String service;
 165  
 166      @Column(name = &quot;RETAIL_PRICE&quot;, precision=19, scale=5)
<abbr title=" 167      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FieldOrder.RETAIL,"> 167      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FieldOrder.ðŸ”µ</abbr>
 168              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 169              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 170              fieldType=SupportedFieldType.MONEY)
 171      protected BigDecimal retailFulfillmentPrice;
 172  
 173      @Column(name = &quot;SALE_PRICE&quot;, precision=19, scale=5)
<abbr title=" 174      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FieldOrder.SALE,"> 174      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FieldOrder.SAðŸ”µ</abbr>
 175              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 176              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 177              fieldType=SupportedFieldType.MONEY)
 178      protected BigDecimal saleFulfillmentPrice;
 179  
 180      @Column(name = &quot;PRICE&quot;, precision=19, scale=5)
 181      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order=Presentation.FieldOrder.PRICE,
 182              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 183              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 184              fieldType=SupportedFieldType.MONEY)
 185      protected BigDecimal fulfillmentPrice;
 186  
 187      @Column(name = &quot;TYPE&quot;)
 188      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Type&quot;, order=Presentation.FieldOrder.TYPE,
 189              fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
 190              broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentType&quot;,
 191              prominent = true, gridOrder = 3000)
 192      protected String type;
 193  
 194      @Column(name = &quot;TOTAL_TAX&quot;, precision=19, scale=5)
 195      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order=Presentation.FieldOrder.TOTALTAX,
 196              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 197              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 198              fieldType=SupportedFieldType.MONEY)
 199      protected BigDecimal totalTax;
 200  
 201      @Column(name = &quot;TOTAL_ITEM_TAX&quot;, precision=19, scale=5)
<abbr title=" 202      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOrder.ITEMTAX,"> 202      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOrder.ITEMðŸ”µ</abbr>
 203              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 204              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 205              fieldType=SupportedFieldType.MONEY)
 206      protected BigDecimal totalItemTax;
 207  
 208      @Column(name = &quot;TOTAL_FEE_TAX&quot;, precision=19, scale=5)
<abbr title=" 209      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrder.FEETAX,"> 209      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrder.FEETAðŸ”µ</abbr>
 210              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 211              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 212              fieldType=SupportedFieldType.MONEY)
 213      protected BigDecimal totalFeeTax;
 214  
 215      @Column(name = &quot;TOTAL_FG_TAX&quot;, precision=19, scale=5)
 216      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order=Presentation.FieldOrder.FGTAX,
 217              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 218              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 219              fieldType=SupportedFieldType.MONEY)
 220      protected BigDecimal totalFulfillmentGroupTax;
 221  
 222      @Column(name = &quot;DELIVERY_INSTRUCTION&quot;)
<abbr title=" 223      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.FieldOrder.DELIVERINSTRUCTION)"> 223      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.FieldOrdeðŸ”µ</abbr>
 224      protected String deliveryInstruction;
 225  
 226      @Column(name = &quot;IS_PRIMARY&quot;)
 227      @Index(name=&quot;FG_PRIMARY_INDEX&quot;, columnNames={&quot;IS_PRIMARY&quot;})
 228      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order=Presentation.FieldOrder.PRIMARY)
 229      protected boolean primary = false;
 230  
 231      @Column(name = &quot;MERCHANDISE_TOTAL&quot;, precision=19, scale=5)
<abbr title=" 232      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieldOrder.MERCHANDISETOTAL,"> 232      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieldOrder.MðŸ”µ</abbr>
 233              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 234              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 235              fieldType=SupportedFieldType.MONEY)
 236      protected BigDecimal merchandiseTotal;
 237  
 238      @Column(name = &quot;TOTAL&quot;, precision=19, scale=5)
 239      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order=Presentation.FieldOrder.TOTAL,
 240              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 241              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 242              fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)
 243      protected BigDecimal total;
 244  
 245      @Column(name = &quot;STATUS&quot;)
 246      @Index(name=&quot;FG_STATUS_INDEX&quot;, columnNames={&quot;STATUS&quot;})
 247      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order=Presentation.FieldOrder.STATUS,
 248              fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
 249              broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType&quot;,
 250              prominent = true, gridOrder = 4000)
 251      protected String status;
 252  
 253      @Column(name = &quot;SHIPPING_PRICE_TAXABLE&quot;)
<abbr title=" 254      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FieldOrder.TAXABLE,"> 254      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FieldOrderðŸ”µ</abbr>
 255              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 256              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 257      protected Boolean isShippingPriceTaxable = Boolean.FALSE;
 258  
<abbr title=" 259      @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 259      @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascðŸ”µ</abbr>
 260      @JoinColumn(name = &quot;FULFILLMENT_OPTION_ID&quot;)
 261      protected FulfillmentOption fulfillmentOption;
 262  
 263      @ManyToOne(targetEntity = OrderImpl.class, optional=false)
 264      @JoinColumn(name = &quot;ORDER_ID&quot;)
 265      @Index(name=&quot;FG_ORDER_INDEX&quot;, columnNames={&quot;ORDER_ID&quot;})
 266      @AdminPresentation(excluded = true)
 267      protected Order order;
 268  
 269      @Column(name = &quot;FULFILLMENT_GROUP_SEQUNCE&quot;)
 270      protected Integer sequence;
 271  
<abbr title=" 272      @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 272      @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REðŸ”µ</abbr>
 273      @JoinColumn(name = &quot;ADDRESS_ID&quot;)
 274      @Index(name=&quot;FG_ADDRESS_INDEX&quot;, columnNames={&quot;ADDRESS_ID&quot;})
 275      protected Address address;
 276  
 277      /**
 278       * @deprecated uses the phonePrimary property on AddressImpl instead
 279       */
<abbr title=" 280      @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 280      @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRðŸ”µ</abbr>
 281      @JoinColumn(name = &quot;PHONE_ID&quot;)
 282      @Index(name=&quot;FG_PHONE_INDEX&quot;, columnNames={&quot;PHONE_ID&quot;})
 283      @Deprecated
 284      protected Phone phone;
 285  
 286      @ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })
 287      @JoinColumn(name = &quot;PERSONAL_MESSAGE_ID&quot;)
 288      @Index(name=&quot;FG_MESSAGE_INDEX&quot;, columnNames={&quot;PERSONAL_MESSAGE_ID&quot;})
 289      protected PersonalMessage personalMessage;
 290  
<abbr title=" 291      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,"> 291      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeTypeðŸ”µ</abbr>
 292              orphanRemoval = true)
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 293 -    @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 294 +    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
 295      @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Items&quot;,
 296              tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)
 297      protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();
 298  
<abbr title=" 299      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },"> 299      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeTypðŸ”µ</abbr>
 300              orphanRemoval = true)
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 301 -    @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 302 +    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
 303      @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Fees&quot;,
 304              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 305      protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 306  
<abbr title=" 307      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },"> 307      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = {ðŸ”µ</abbr>
 308              orphanRemoval = true)
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 309 -    @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 310 +    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
<abbr title=" 311      protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 311      protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;ðŸ”µ</abbr>
 312  
<abbr title=" 313      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },"> 313      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CasðŸ”µ</abbr>
 314              orphanRemoval = true)
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 315 -    @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
 317      @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Adjustments&quot;,
 318              tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)
<abbr title=" 319      protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 319      protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustmðŸ”µ</abbr>
 320  
<abbr title=" 321      @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 321      @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanReðŸ”µ</abbr>
 322      @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;),
 323              inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 324 -    @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +    @Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = &quot;blOrderElements&quot;)</span>
 326      protected List&lt;TaxDetail&gt; taxes = new ArrayList&lt;TaxDetail&gt;();
 327  
 328      @Column(name = &quot;SHIPPING_OVERRIDE&quot;)
 329      protected Boolean shippingOverride;
 330  
 331      @Override
 332      public Long getId() {
 333          return id;
 334      }
 335  
 336      @Override
 337      public void setId(Long id) {
 338          this.id = id;
 339      }
 340  
 341      @Override
 342      public Order getOrder() {
 343          return order;
 344      }
 345  
 346      @Override
 347      public void setOrder(Order order) {
 348          this.order = order;
 349      }
 350  
 351      @Override
 352      public FulfillmentOption getFulfillmentOption() {
 353          return fulfillmentOption;
 354      }
 355  
 356      @Override
 357      public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {
 358          this.fulfillmentOption = fulfillmentOption;
 359      }
 360  
 361      @Override
 362      public String getReferenceNumber() {
 363          return referenceNumber;
 364      }
 365  
 366      @Override
 367      public void setReferenceNumber(String referenceNumber) {
 368          this.referenceNumber = referenceNumber;
 369      }
 370  
 371      @Override
 372      public List&lt;FulfillmentGroupItem&gt; getFulfillmentGroupItems() {
 373          return fulfillmentGroupItems;
 374      }
 375  
 376      @Override
 377      public List&lt;DiscreteOrderItem&gt; getDiscreteOrderItems() {
 378          List&lt;DiscreteOrderItem&gt; discreteOrderItems = new ArrayList&lt;DiscreteOrderItem&gt;();
 379          for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {
 380              OrderItem orderItem = fgItem.getOrderItem();
 381              if (orderItem instanceof BundleOrderItem) {
 382                  BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;
 383                  for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
 384                      discreteOrderItems.add(discreteOrderItem);
 385                  }
 386              } else if (orderItem instanceof DiscreteOrderItem) {
 387                  DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;
 388                  discreteOrderItems.add(discreteOrderItem);
 389              }
 390          }
 391          return discreteOrderItems;
 392      }
 393  
 394      @Override
 395      public void setFulfillmentGroupItems(List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems) {
 396          this.fulfillmentGroupItems = fulfillmentGroupItems;
 397      }
 398  
 399      @Override
 400      public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {
 401          if (this.fulfillmentGroupItems == null) {
 402              this.fulfillmentGroupItems = new Vector&lt;FulfillmentGroupItem&gt;();
 403          }
 404          this.fulfillmentGroupItems.add(fulfillmentGroupItem);
 405  
 406      }
 407  
 408      @Override
 409      public Address getAddress() {
 410          return address;
 411      }
 412  
 413      @Override
 414      public void setAddress(Address address) {
 415          this.address = address;
 416      }
 417  
 418      /**
 419       * @deprecated use the phonePrimary property on the related Address instead
 420       */
 421      @Deprecated
 422      @Override
 423      public Phone getPhone() {
 424          return phone;
 425      }
 426  
 427      /**
 428       * @deprecated use the phonePrimary property on the related Address instead
 429       */
 430      @Deprecated
 431      @Override
 432      public void setPhone(Phone phone) {
 433          this.phone = phone;
 434      }
 435  
 436      @Override
 437      @Deprecated
 438      public String getMethod() {
 439          return method;
 440      }
 441  
 442      @Override
 443      @Deprecated
 444      public void setMethod(String fulfillmentMethod) {
 445          this.method = fulfillmentMethod;
 446      }
 447  
 448      @Override
 449      public Money getRetailFulfillmentPrice() {
 450          return retailFulfillmentPrice == null ? null :
 451                  BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());
 452      }
 453  
 454      @Override
 455      public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {
 456          this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);
 457      }
 458  
 459      @Override
 460      public Money getRetailShippingPrice() {
 461          return getRetailFulfillmentPrice();
 462      }
 463  
 464      @Override
 465      public void setRetailShippingPrice(Money retailShippingPrice) {
 466          setRetailFulfillmentPrice(retailShippingPrice);
 467      }
 468  
 469      @Override
 470      public FulfillmentType getType() {
 471          return FulfillmentType.getInstance(type);
 472      }
 473  
 474      @Override
 475      public void setType(FulfillmentType type) {
 476          this.type = type == null ? null : type.getType();
 477      }
 478  
 479      @Override
 480      public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {
 481          candidateOffers.add(candidateOffer);
 482      }
 483  
 484      @Override
 485      public List&lt;CandidateFulfillmentGroupOffer&gt; getCandidateFulfillmentGroupOffers() {
 486          return candidateOffers;
 487      }
 488  
 489      @Override
 490      public void setCandidateFulfillmentGroupOffer(List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers) {
 491          this.candidateOffers = candidateOffers;
 492  
 493      }
 494  
 495      @Override
 496      public void removeAllCandidateOffers() {
 497          if (candidateOffers != null) {
 498              for (CandidateFulfillmentGroupOffer offer : candidateOffers) {
 499                  offer.setFulfillmentGroup(null);
 500              }
 501              candidateOffers.clear();
 502          }
 503      }
 504  
 505      @Override
 506      public List&lt;FulfillmentGroupAdjustment&gt; getFulfillmentGroupAdjustments() {
 507          return this.fulfillmentGroupAdjustments;
 508      }
 509  
 510      @Override
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 511 +    public List&lt;FulfillmentGroupAdjustment&gt; getFutureCreditFulfillmentGroupAdjustments() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 512 +        List&lt;FulfillmentGroupAdjustment&gt; futureCreditAdjustments = new ArrayList&lt;&gt;();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 513 +        for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 514 +            if (adjustment.isFutureCredit()) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 515 +                futureCreditAdjustments.add(adjustment);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 516 +            }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 517 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 518 +        }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 519 +        return futureCreditAdjustments;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 520 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 521 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 522 +    @Override</span>
 523      public Money getFulfillmentGroupAdjustmentsValue() {
 524          Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());
 525          for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 526 +            if (!adjustment.isFutureCredit()) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 527 +                adjustmentsValue = adjustmentsValue.add(adjustment.getValue());</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 528 +            }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 529 +        }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 530 +        return adjustmentsValue;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 531 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 532 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 533 +    @Override</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 534 +    public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 535 +        Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 536 +        for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {</span>
 537              adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 538          }
 539          return adjustmentsValue;
 540      }
 541  
 542      @Override
 543      public void removeAllAdjustments() {
 544          if (fulfillmentGroupAdjustments != null) {
 545              for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 546                  adjustment.setFulfillmentGroup(null);
 547              }
 548              fulfillmentGroupAdjustments.clear();
 549          }
 550      }
 551  
 552      @Override
 553      public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments) {
 554          this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;
 555      }
 556  
 557      @Override
 558      public Money getSaleFulfillmentPrice() {
 559          return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,
 560                  getOrder().getCurrency());
 561      }
 562  
 563      @Override
 564      public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {
 565          this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);
 566      }
 567  
 568      @Override
 569      public Money getSaleShippingPrice() {
 570          return getSaleFulfillmentPrice();
 571      }
 572  
 573      @Override
 574      public void setSaleShippingPrice(Money saleShippingPrice) {
 575          setSaleFulfillmentPrice(saleShippingPrice);
 576      }
 577  
 578      @Override
 579      public Money getFulfillmentPrice() {
 580          return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,
 581                  getOrder().getCurrency());
 582      }
 583  
 584      @Override
 585      public void setFulfillmentPrice(Money fulfillmentPrice) {
 586          this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);
 587      }
 588  
 589      @Override
 590      public Money getShippingPrice() {
 591          return getFulfillmentPrice();
 592      }
 593  
 594      @Override
 595      public void setShippingPrice(Money shippingPrice) {
 596          setFulfillmentPrice(shippingPrice);
 597      }
 598  
 599      @Override
 600      public List&lt;TaxDetail&gt; getTaxes() {
 601          return taxes;
 602      }
 603  
 604      @Override
 605      public void setTaxes(List&lt;TaxDetail&gt; taxes) {
 606          this.taxes = taxes;
 607      }
 608  
 609      @Override
 610      public Money getTotalTax() {
 611          return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());
 612      }
 613  
 614      @Override
 615      public void setTotalTax(Money totalTax) {
 616          this.totalTax = Money.toAmount(totalTax);
 617      }
 618  
 619      @Override
 620      public Money getTotalItemTax() {
<abbr title=" 621          return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());"> 621          return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency(ðŸ”µ</abbr>
 622      }
 623  
 624      @Override
 625      public void setTotalItemTax(Money totalItemTax) {
 626          this.totalItemTax = Money.toAmount(totalItemTax);
 627      }
 628  
 629      @Override
 630      public Money getTotalFeeTax() {
<abbr title=" 631          return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());"> 631          return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency())ðŸ”µ</abbr>
 632      }
 633  
 634      @Override
 635      public void setTotalFeeTax(Money totalFeeTax) {
 636          this.totalFeeTax = Money.toAmount(totalFeeTax);
 637      }
 638  
 639      @Override
 640      public Money getTotalFulfillmentGroupTax() {
 641          return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,
 642                  getOrder().getCurrency());
 643      }
 644  
 645      @Override
 646      public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {
 647          this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);
 648      }
 649  
 650      @Override
 651      public String getDeliveryInstruction() {
 652          return deliveryInstruction;
 653      }
 654  
 655      @Override
 656      public void setDeliveryInstruction(String deliveryInstruction) {
 657          this.deliveryInstruction = deliveryInstruction;
 658      }
 659  
 660      @Override
 661      public PersonalMessage getPersonalMessage() {
 662          return personalMessage;
 663      }
 664  
 665      @Override
 666      public void setPersonalMessage(PersonalMessage personalMessage) {
 667          this.personalMessage = personalMessage;
 668      }
 669  
 670      @Override
 671      public boolean isPrimary() {
 672          return primary;
 673      }
 674  
 675      @Override
 676      public void setPrimary(boolean primary) {
 677          this.primary = primary;
 678      }
 679  
 680      @Override
 681      public Money getMerchandiseTotal() {
 682          return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,
 683                  getOrder().getCurrency());
 684      }
 685  
 686      @Override
 687      public void setMerchandiseTotal(Money merchandiseTotal) {
 688          this.merchandiseTotal = Money.toAmount(merchandiseTotal);
 689      }
 690  
 691      @Override
 692      public Money getTotal() {
 693          return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());
 694      }
 695  
 696      @Override
 697      public void setTotal(Money orderTotal) {
 698          this.total = Money.toAmount(orderTotal);
 699      }
 700  
 701      @Override
 702      public FulfillmentGroupStatusType getStatus() {
 703          return FulfillmentGroupStatusType.getInstance(status);
 704      }
 705  
 706      @Override
 707      public void setStatus(FulfillmentGroupStatusType status) {
 708          this.status = status.getType();
 709      }
 710  
 711      @Override
 712      public List&lt;FulfillmentGroupFee&gt; getFulfillmentGroupFees() {
 713          return fulfillmentGroupFees;
 714      }
 715  
 716      @Override
 717      public void setFulfillmentGroupFees(List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees) {
 718          this.fulfillmentGroupFees = fulfillmentGroupFees;
 719      }
 720  
 721      @Override
 722      public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {
 723          if (fulfillmentGroupFees == null) {
 724              fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 725          }
 726          fulfillmentGroupFees.add(fulfillmentGroupFee);
 727      }
 728  
 729      @Override
 730      public void removeAllFulfillmentGroupFees() {
 731          if (fulfillmentGroupFees != null) {
 732              fulfillmentGroupFees.clear();
 733          }
 734      }
 735  
 736      @Override
 737      public Boolean isShippingPriceTaxable() {
 738          return isShippingPriceTaxable;
 739      }
 740  
 741      @Override
 742      public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {
 743          this.isShippingPriceTaxable = isShippingPriceTaxable;
 744      }
 745  
 746      @Override
 747      public void setSequence(Integer sequence) {
 748          this.sequence = sequence;
 749      }
 750  
 751      @Override
 752      public Integer getSequence() {
 753          return this.sequence;
 754      }
 755  
 756      @Override
 757      @Deprecated
 758      public String getService() {
 759          return service;
 760      }
 761  
 762      @Override
 763      @Deprecated
 764      public void setService(String service) {
 765          this.service = service;
 766      }
 767  
 768      @Override
 769      public String getCurrencyCode() {
 770          if (getOrder().getCurrency() != null) {
 771              return getOrder().getCurrency().getCurrencyCode();
 772          }
 773          return null;
 774      }
 775  
 776      @Override
 777      public Boolean getShippingOverride() {
 778          return shippingOverride == null ? false : shippingOverride;
 779      }
 780  
 781      @Override
 782      public void setShippingOverride(Boolean shippingOverride) {
 783          this.shippingOverride = shippingOverride;
 784      }
 785  
 786      @Override
 787      public int hashCode() {
 788          final int prime = 31;
 789          int result = 1;
 790          result = prime * result + ((address == null) ? 0 : address.hashCode());
 791          result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());
 792          return result;
 793      }
 794  
 795      @Override
<abbr title=" 796      public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {"> 796      public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext contðŸ”µ</abbr>
 797          CreateResponse&lt;G&gt; createResponse = context.createOrRetrieveCopyInstance(this);
 798          if (createResponse.isAlreadyPopulated()) {
 799              return createResponse;
 800          }
 801          FulfillmentGroup cloned = createResponse.getClone();
 802          cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());
 803          cloned.setDeliveryInstruction(deliveryInstruction);
 804          cloned.setFulfillmentOption(fulfillmentOption);
 805          cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 806          cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);
 807          cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));
 808          cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 809          cloneTaxDetails(context, cloned);
 810          cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));
<abbr title=" 811          cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));"> 811          cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroðŸ”µ</abbr>
 812          cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));
 813          cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));
<abbr title=" 814          cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));"> 814          cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice)ðŸ”µ</abbr>
 815          cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));
 816          cloned.setTotal(total == null ? null : new Money(total));
 817          cloned.setOrder(order);
 818          cloned.setPrimary(primary);
 819          cloned.setType(getType());
 820          for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {
 821              FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();
 822              fulfillmentGroupItem.setFulfillmentGroup(cloned);
 823              cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);
 824          }
 825          return  createResponse;
 826      }
 827  
<abbr title=" 828      protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {"> 828      protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportðŸ”µ</abbr>
 829          for (TaxDetail taxDetail : getTaxes()) {
 830              TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();
 831              cloned.getTaxes().add(clonedTaxDetail);
 832          }
 833      }
 834  
 835      @Override
 836      public boolean equals(Object obj) {
 837          if (this == obj) {
 838              return true;
 839          }
 840          if (obj == null) {
 841              return false;
 842          }
 843          if (!getClass().isAssignableFrom(obj.getClass())) {
 844              return false;
 845          }
 846          FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;
 847  
 848          if (id != null &amp;&amp; other.id != null) {
 849              return id.equals(other.id);
 850          }
 851  
 852          if (address == null) {
 853              if (other.address != null) {
 854                  return false;
 855              }
 856          } else if (!address.equals(other.address)) {
 857              return false;
 858          }
 859          if (fulfillmentGroupItems == null) {
 860              if (other.fulfillmentGroupItems != null) {
 861                  return false;
 862              }
 863          } else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {
 864              return false;
 865          }
 866          return true;
 867      }
 868  
 869      public static class Presentation {
 870          public static class Tab {
 871              public static class Name {
 872                  public static final String Items = &quot;FulfillmentGroupImpl_Items_Tab&quot;;
 873                  public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing_Tab&quot;;
 874                  public static final String Address = &quot;FulfillmentGroupImpl_Address_Tab&quot;;
 875                  public static final String Advanced = &quot;FulfillmentGroupImpl_Advanced_Tab&quot;;
 876              }
 877  
 878              public static class Order {
 879                  public static final int Items = 2000;
 880                  public static final int Pricing = 3000;
 881                  public static final int Address = 4000;
 882                  public static final int Advanced = 5000;
 883              }
 884          }
 885  
 886          public static class Group {
 887              public static class Name {
 888                  public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing&quot;;
 889              }
 890  
 891              public static class Order {
 892                  public static final int General = 1000;
 893                  public static final int Pricing = 2000;
 894              }
 895          }
 896  
 897          public static class FieldOrder {
 898              public static final int REFNUMBER = 3000;
 899              public static final int STATUS = 4000;
 900              public static final int TYPE = 5000;
 901              public static final int DELIVERINSTRUCTION = 6000;
 902              public static final int PRIMARY = 7000;
 903              public static final int PHONE = 8000;
 904  
 905              public static final int RETAIL = 1000;
 906              public static final int SALE = 2000;
 907              public static final int PRICE = 3000;
 908              public static final int ITEMTAX = 4000;
 909              public static final int FEETAX = 5000;
 910              public static final int FGTAX = 6000;
 911              public static final int TOTALTAX = 7000;
 912              public static final int MERCHANDISETOTAL = 8000;
 913              public static final int TOTAL = 9000;
 914              public static final int TAXABLE = 10000;
 915          }
 916      }
 917  }</pre></td>
                            <td><pre><span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   1 -/*</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   2 +/*-</span>
   3   * #%L
   4   * BroadleafCommerce Framework
   5   * %%
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">   6 - * Copyright (C) 2009 - 2016 Broadleaf Commerce</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   7 + * Copyright (C) 2009 - 2023 Broadleaf Commerce</span>
   8   * %%
   9   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0
  10   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)
  11   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case
  12   * the Broadleaf End User License Agreement (EULA), Version 1.1
  13   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)
  14   * shall apply.
  15   *
<abbr title="  16   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  16   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr>
  17   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.
  18   * #L%
  19   */
  20  package org.broadleafcommerce.core.order.domain;
  21  
  22  import org.broadleafcommerce.common.copy.CreateResponse;
  23  import org.broadleafcommerce.common.copy.MultiTenantCopyContext;
  24  import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;
  25  import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;
  26  import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;
  27  import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;
  28  import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;
  29  import org.broadleafcommerce.common.money.Money;
  30  import org.broadleafcommerce.common.presentation.AdminPresentation;
  31  import org.broadleafcommerce.common.presentation.AdminPresentationClass;
  32  import org.broadleafcommerce.common.presentation.AdminPresentationCollection;
  33  import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;
  34  import org.broadleafcommerce.common.presentation.client.SupportedFieldType;
  35  import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;
  36  import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;
  37  import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;
  38  import org.broadleafcommerce.common.presentation.override.PropertyType;
  39  import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;
  40  import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;
  41  import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;
  42  import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;
  43  import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;
  44  import org.broadleafcommerce.core.order.service.type.FulfillmentType;
  45  import org.broadleafcommerce.profile.core.domain.Address;
  46  import org.broadleafcommerce.profile.core.domain.AddressImpl;
  47  import org.broadleafcommerce.profile.core.domain.Phone;
  48  import org.broadleafcommerce.profile.core.domain.PhoneImpl;
  49  import org.hibernate.annotations.Cache;
  50  import org.hibernate.annotations.CacheConcurrencyStrategy;
  51  import org.hibernate.annotations.GenericGenerator;
  52  import org.hibernate.annotations.Index;
  53  import org.hibernate.annotations.Parameter;
  54  
  55  import java.math.BigDecimal;
  56  import java.util.ArrayList;
  57  import java.util.List;
  58  import java.util.Vector;
  59  
  60  import javax.persistence.CascadeType;
  61  import javax.persistence.Column;
  62  import javax.persistence.Entity;
  63  import javax.persistence.FetchType;
  64  import javax.persistence.GeneratedValue;
  65  import javax.persistence.Id;
  66  import javax.persistence.Inheritance;
  67  import javax.persistence.InheritanceType;
  68  import javax.persistence.JoinColumn;
  69  import javax.persistence.JoinTable;
  70  import javax.persistence.ManyToOne;
  71  import javax.persistence.OneToMany;
  72  import javax.persistence.Table;
  73  
  74  @Entity
  75  @Inheritance(strategy = InheritanceType.JOINED)
  76  @Table(name = &quot;BLC_FULFILLMENT_GROUP&quot;)
  77  @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)

  78  @AdminPresentationMergeOverrides(
  79      {
  80          @AdminPresentationMergeOverride(name = &quot;&quot;, mergeEntries =
  81                      @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,
  82                                                      booleanOverrideValue = true)),
  83          @AdminPresentationMergeOverride(name = &quot;currency&quot;, mergeEntries =
  84              @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,
  85                          booleanOverrideValue = false)),
  86          @AdminPresentationMergeOverride(name = &quot;personalMessage&quot;, mergeEntries = {
  87                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  88                          overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),
  89                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  90                          intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced)
  91          }),
  92          @AdminPresentationMergeOverride(name = &quot;address&quot;, mergeEntries = {
  93                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,
  94                          overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),
  95                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,
  96                          intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address)
  97          }),
  98          @AdminPresentationMergeOverride(name = &quot;address.isDefault&quot;, mergeEntries = {
  99                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 100                          booleanOverrideValue = true)
 101          }),
 102          @AdminPresentationMergeOverride(name = &quot;address.isActive&quot;, mergeEntries = {
 103                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 104                          booleanOverrideValue = true)
 105          }),
 106          @AdminPresentationMergeOverride(name = &quot;address.isBusiness&quot;, mergeEntries = {
 107                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 108                          booleanOverrideValue = true)
 109          }),
 110          @AdminPresentationMergeOverride(name = &quot;phone&quot;, mergeEntries = {
 111                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 112                          booleanOverrideValue = true)
 113          }),
 114          @AdminPresentationMergeOverride(name = &quot;phone.phoneNumber&quot;, mergeEntries = {
 115                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,
 116                          booleanOverrideValue = false),
 117                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,
 118                          intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),
 119                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,
 120                          overrideValue = &quot;General&quot;),
 121                  @AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,
 122                          overrideValue = &quot;NOT_REQUIRED&quot;)
 123          })
 124      }
 125  )
<abbr title=" 126  @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_baseFulfillmentGroup&quot;)"> 126  @AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = &quot;FulfillmentGroupImpl_bðŸ”µ</abbr>
 127  @DirectCopyTransform({
 128          @DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE)
 129  })
 130  public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {
 131  
 132      private static final long serialVersionUID = 1L;
 133  
 134      @Id
 135      @GeneratedValue(generator = &quot;FulfillmentGroupId&quot;)
 136      @GenericGenerator(
 137          name=&quot;FulfillmentGroupId&quot;,
 138          strategy=&quot;org.broadleafcommerce.common.persistence.IdOverrideTableGenerator&quot;,
 139          parameters = {
 140              @Parameter(name=&quot;segment_value&quot;, value=&quot;FulfillmentGroupImpl&quot;),
 141              @Parameter(name=&quot;entity_name&quot;, value=&quot;org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl&quot;)
 142          }
 143      )
 144      @Column(name = &quot;FULFILLMENT_GROUP_ID&quot;)
 145      protected Long id;
 146  
 147      @Column(name = &quot;REFERENCE_NUMBER&quot;)
 148      @Index(name=&quot;FG_REFERENCE_INDEX&quot;, columnNames={&quot;REFERENCE_NUMBER&quot;})
<abbr title=" 149      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FieldOrder.REFNUMBER,"> 149      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Reference_Number&quot;, order=Presentation.FieldOrder.REðŸ”µ</abbr>
 150              groupOrder = Presentation.Group.Order.General)
 151      protected String referenceNumber;
 152  
 153      @Column(name = &quot;METHOD&quot;)
 154      @Index(name=&quot;FG_METHOD_INDEX&quot;, columnNames={&quot;METHOD&quot;})
 155      @AdminPresentation(excluded = true)
 156      @Deprecated
 157      protected String method;
 158  
 159      @Column(name = &quot;SERVICE&quot;)
 160      @Index(name=&quot;FG_SERVICE_INDEX&quot;, columnNames={&quot;SERVICE&quot;})
 161      @AdminPresentation(excluded = true)
 162      @Deprecated
 163      protected String service;
 164  
 165      @Column(name = &quot;RETAIL_PRICE&quot;, precision=19, scale=5)
<abbr title=" 166      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FieldOrder.RETAIL,"> 166      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Retail_Shipping_Price&quot;, order=Presentation.FieldOrder.ðŸ”µ</abbr>
 167              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 168              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 169              fieldType=SupportedFieldType.MONEY)
 170      protected BigDecimal retailFulfillmentPrice;
 171  
 172      @Column(name = &quot;SALE_PRICE&quot;, precision=19, scale=5)
<abbr title=" 173      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FieldOrder.SALE,"> 173      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Sale_Shipping_Price&quot;, order=Presentation.FieldOrder.SAðŸ”µ</abbr>
 174              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 175              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 176              fieldType=SupportedFieldType.MONEY)
 177      protected BigDecimal saleFulfillmentPrice;
 178  
 179      @Column(name = &quot;PRICE&quot;, precision=19, scale=5)
 180      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price&quot;, order=Presentation.FieldOrder.PRICE,
 181              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 182              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 183              fieldType=SupportedFieldType.MONEY)
 184      protected BigDecimal fulfillmentPrice;
 185  
 186      @Column(name = &quot;TYPE&quot;)
 187      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Type&quot;, order=Presentation.FieldOrder.TYPE,
 188              fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
 189              broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentType&quot;,
 190              prominent = true, gridOrder = 3000)
 191      protected String type;
 192  
 193      @Column(name = &quot;TOTAL_TAX&quot;, precision=19, scale=5)
 194      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Tax&quot;, order=Presentation.FieldOrder.TOTALTAX,
 195              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 196              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 197              fieldType=SupportedFieldType.MONEY)
 198      protected BigDecimal totalTax;
 199  
 200      @Column(name = &quot;TOTAL_ITEM_TAX&quot;, precision=19, scale=5)
<abbr title=" 201      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOrder.ITEMTAX,"> 201      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Item_Tax&quot;, order=Presentation.FieldOrder.ITEMðŸ”µ</abbr>
 202              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 203              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 204              fieldType=SupportedFieldType.MONEY)
 205      protected BigDecimal totalItemTax;
 206  
 207      @Column(name = &quot;TOTAL_FEE_TAX&quot;, precision=19, scale=5)
<abbr title=" 208      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrder.FEETAX,"> 208      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_Fee_Tax&quot;, order=Presentation.FieldOrder.FEETAðŸ”µ</abbr>
 209              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 210              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 211              fieldType=SupportedFieldType.MONEY)
 212      protected BigDecimal totalFeeTax;
 213  
 214      @Column(name = &quot;TOTAL_FG_TAX&quot;, precision=19, scale=5)
 215      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total_FG_Tax&quot;, order=Presentation.FieldOrder.FGTAX,
 216              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 217              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 218              fieldType=SupportedFieldType.MONEY)
 219      protected BigDecimal totalFulfillmentGroupTax;
 220  
 221      @Column(name = &quot;DELIVERY_INSTRUCTION&quot;)
<abbr title=" 222      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.FieldOrder.DELIVERINSTRUCTION)"> 222      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Delivery_Instruction&quot;, order=Presentation.FieldOrdeðŸ”µ</abbr>
 223      protected String deliveryInstruction;
 224  
 225      @Column(name = &quot;IS_PRIMARY&quot;)
 226      @Index(name=&quot;FG_PRIMARY_INDEX&quot;, columnNames={&quot;IS_PRIMARY&quot;})
 227      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Primary_FG&quot;, order=Presentation.FieldOrder.PRIMARY)
 228      protected boolean primary = false;
 229  
 230      @Column(name = &quot;MERCHANDISE_TOTAL&quot;, precision=19, scale=5)
<abbr title=" 231      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieldOrder.MERCHANDISETOTAL,"> 231      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Merchandise_Total&quot;, order=Presentation.FieldOrder.MðŸ”µ</abbr>
 232              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 233              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 234              fieldType=SupportedFieldType.MONEY)
 235      protected BigDecimal merchandiseTotal;
 236  
 237      @Column(name = &quot;TOTAL&quot;, precision=19, scale=5)
 238      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Total&quot;, order=Presentation.FieldOrder.TOTAL,
 239              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 240              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,
 241              fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)
 242      protected BigDecimal total;
 243  
 244      @Column(name = &quot;STATUS&quot;)
 245      @Index(name=&quot;FG_STATUS_INDEX&quot;, columnNames={&quot;STATUS&quot;})
 246      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_FG_Status&quot;, order=Presentation.FieldOrder.STATUS,
 247              fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,
 248              broadleafEnumeration=&quot;org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType&quot;,
 249              prominent = true, gridOrder = 4000)
 250      protected String status;
 251  
 252      @Column(name = &quot;SHIPPING_PRICE_TAXABLE&quot;)
<abbr title=" 253      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FieldOrder.TAXABLE,"> 253      @AdminPresentation(friendlyName = &quot;FulfillmentGroupImpl_Shipping_Price_Taxable&quot;, order=Presentation.FieldOrderðŸ”µ</abbr>
 254              group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,
 255              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 256      protected Boolean isShippingPriceTaxable = Boolean.FALSE;
 257  
<abbr title=" 258      @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 258      @ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascðŸ”µ</abbr>
 259      @JoinColumn(name = &quot;FULFILLMENT_OPTION_ID&quot;)
 260      protected FulfillmentOption fulfillmentOption;
 261  
 262      @ManyToOne(targetEntity = OrderImpl.class, optional=false)
 263      @JoinColumn(name = &quot;ORDER_ID&quot;)
 264      @Index(name=&quot;FG_ORDER_INDEX&quot;, columnNames={&quot;ORDER_ID&quot;})
 265      @AdminPresentation(excluded = true)
 266      protected Order order;
 267  
 268      @Column(name = &quot;FULFILLMENT_GROUP_SEQUNCE&quot;)
 269      protected Integer sequence;
 270  
<abbr title=" 271      @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 271      @ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REðŸ”µ</abbr>
 272      @JoinColumn(name = &quot;ADDRESS_ID&quot;)
 273      @Index(name=&quot;FG_ADDRESS_INDEX&quot;, columnNames={&quot;ADDRESS_ID&quot;})
 274      protected Address address;
 275  
 276      /**
 277       * @deprecated uses the phonePrimary property on AddressImpl instead
 278       */
<abbr title=" 279      @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})"> 279      @ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRðŸ”µ</abbr>
 280      @JoinColumn(name = &quot;PHONE_ID&quot;)
 281      @Index(name=&quot;FG_PHONE_INDEX&quot;, columnNames={&quot;PHONE_ID&quot;})
 282      @Deprecated
 283      protected Phone phone;
 284  
 285      @ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })
 286      @JoinColumn(name = &quot;PERSONAL_MESSAGE_ID&quot;)
 287      @Index(name=&quot;FG_MESSAGE_INDEX&quot;, columnNames={&quot;PERSONAL_MESSAGE_ID&quot;})
 288      protected PersonalMessage personalMessage;
 289  
<abbr title=" 290      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,"> 290      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeTypeðŸ”µ</abbr>
 291              orphanRemoval = true)
 292      @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)

 293      @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Items&quot;,
 294              tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)
 295      protected List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems = new ArrayList&lt;FulfillmentGroupItem&gt;();
 296  
<abbr title=" 297      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },"> 297      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeTypðŸ”µ</abbr>
 298              orphanRemoval = true)
 299      @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = &quot;blOrderElements&quot;)

 300      @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Fees&quot;,
 301              tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)
 302      protected List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 303  
<abbr title=" 304      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },"> 304      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = {ðŸ”µ</abbr>
 305              orphanRemoval = true)
 306      @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)

<abbr title=" 307      protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;();"> 307      protected List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers = new ArrayList&lt;CandidateFulfillmentGroupOffer&gt;ðŸ”µ</abbr>
 308  
<abbr title=" 309      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },"> 309      @OneToMany(mappedBy = &quot;fulfillmentGroup&quot;, targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CasðŸ”µ</abbr>
 310              orphanRemoval = true)
 311      @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)

 312      @AdminPresentationCollection(friendlyName=&quot;FulfillmentGroupImpl_Adjustments&quot;,
 313              tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)
<abbr title=" 314      protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustment&gt;();"> 314      protected List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments = new ArrayList&lt;FulfillmentGroupAdjustmðŸ”µ</abbr>
 315  
<abbr title=" 316      @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)"> 316      @OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanReðŸ”µ</abbr>
 317      @JoinTable(name = &quot;BLC_FG_FG_TAX_XREF&quot;, joinColumns = @JoinColumn(name = &quot;FULFILLMENT_GROUP_ID&quot;),
 318              inverseJoinColumns = @JoinColumn(name = &quot;TAX_DETAIL_ID&quot;))
 319      @Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=&quot;blOrderElements&quot;)

 320      protected List&lt;TaxDetail&gt; taxes = new ArrayList&lt;TaxDetail&gt;();
 321  
 322      @Column(name = &quot;SHIPPING_OVERRIDE&quot;)
 323      protected Boolean shippingOverride;
 324  
 325      @Override
 326      public Long getId() {
 327          return id;
 328      }
 329  
 330      @Override
 331      public void setId(Long id) {
 332          this.id = id;
 333      }
 334  
 335      @Override
 336      public Order getOrder() {
 337          return order;
 338      }
 339  
 340      @Override
 341      public void setOrder(Order order) {
 342          this.order = order;
 343      }
 344  
 345      @Override
 346      public FulfillmentOption getFulfillmentOption() {
 347          return fulfillmentOption;
 348      }
 349  
 350      @Override
 351      public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {
 352          this.fulfillmentOption = fulfillmentOption;
 353      }
 354  
 355      @Override
 356      public String getReferenceNumber() {
 357          return referenceNumber;
 358      }
 359  
 360      @Override
 361      public void setReferenceNumber(String referenceNumber) {
 362          this.referenceNumber = referenceNumber;
 363      }
 364  
 365      @Override
 366      public List&lt;FulfillmentGroupItem&gt; getFulfillmentGroupItems() {
 367          return fulfillmentGroupItems;
 368      }
 369  
 370      @Override
 371      public List&lt;DiscreteOrderItem&gt; getDiscreteOrderItems() {
 372          List&lt;DiscreteOrderItem&gt; discreteOrderItems = new ArrayList&lt;DiscreteOrderItem&gt;();
 373          for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {
 374              OrderItem orderItem = fgItem.getOrderItem();
 375              if (orderItem instanceof BundleOrderItem) {
 376                  BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;
 377                  for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {
 378                      discreteOrderItems.add(discreteOrderItem);
 379                  }
 380              } else if (orderItem instanceof DiscreteOrderItem) {
 381                  DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;
 382                  discreteOrderItems.add(discreteOrderItem);
 383              }
 384          }
 385          return discreteOrderItems;
 386      }
 387  
 388      @Override
 389      public void setFulfillmentGroupItems(List&lt;FulfillmentGroupItem&gt; fulfillmentGroupItems) {
 390          this.fulfillmentGroupItems = fulfillmentGroupItems;
 391      }
 392  
 393      @Override
 394      public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {
 395          if (this.fulfillmentGroupItems == null) {
 396              this.fulfillmentGroupItems = new Vector&lt;FulfillmentGroupItem&gt;();
 397          }
 398          this.fulfillmentGroupItems.add(fulfillmentGroupItem);
 399  
 400      }
 401  
 402      @Override
 403      public Address getAddress() {
 404          return address;
 405      }
 406  
 407      @Override
 408      public void setAddress(Address address) {
 409          this.address = address;
 410      }
 411  
 412      /**
 413       * @deprecated use the phonePrimary property on the related Address instead
 414       */
 415      @Deprecated
 416      @Override
 417      public Phone getPhone() {
 418          return phone;
 419      }
 420  
 421      /**
 422       * @deprecated use the phonePrimary property on the related Address instead
 423       */
 424      @Deprecated
 425      @Override
 426      public void setPhone(Phone phone) {
 427          this.phone = phone;
 428      }
 429  
 430      @Override
 431      @Deprecated
 432      public String getMethod() {
 433          return method;
 434      }
 435  
 436      @Override
 437      @Deprecated
 438      public void setMethod(String fulfillmentMethod) {
 439          this.method = fulfillmentMethod;
 440      }
 441  
 442      @Override
 443      public Money getRetailFulfillmentPrice() {
 444          return retailFulfillmentPrice == null ? null :
 445                  BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());
 446      }
 447  
 448      @Override
 449      public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {
 450          this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);
 451      }
 452  
 453      @Override
 454      public Money getRetailShippingPrice() {
 455          return getRetailFulfillmentPrice();
 456      }
 457  
 458      @Override
 459      public void setRetailShippingPrice(Money retailShippingPrice) {
 460          setRetailFulfillmentPrice(retailShippingPrice);
 461      }
 462  
 463      @Override
 464      public FulfillmentType getType() {
 465          return FulfillmentType.getInstance(type);
 466      }
 467  
 468      @Override
 469      public void setType(FulfillmentType type) {
 470          this.type = type == null ? null : type.getType();
 471      }
 472  
 473      @Override
 474      public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {
 475          candidateOffers.add(candidateOffer);
 476      }
 477  
 478      @Override
 479      public List&lt;CandidateFulfillmentGroupOffer&gt; getCandidateFulfillmentGroupOffers() {
 480          return candidateOffers;
 481      }
 482  
 483      @Override
 484      public void setCandidateFulfillmentGroupOffer(List&lt;CandidateFulfillmentGroupOffer&gt; candidateOffers) {
 485          this.candidateOffers = candidateOffers;
 486  
 487      }
 488  
 489      @Override
 490      public void removeAllCandidateOffers() {
 491          if (candidateOffers != null) {
 492              for (CandidateFulfillmentGroupOffer offer : candidateOffers) {
 493                  offer.setFulfillmentGroup(null);
 494              }
 495              candidateOffers.clear();
 496          }
 497      }
 498  
 499      @Override
 500      public List&lt;FulfillmentGroupAdjustment&gt; getFulfillmentGroupAdjustments() {
 501          return this.fulfillmentGroupAdjustments;
 502      }
 503  
 504      @Override












 505      public Money getFulfillmentGroupAdjustmentsValue() {
 506          Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());
 507          for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {











 508              adjustmentsValue = adjustmentsValue.add(adjustment.getValue());
 509          }
 510          return adjustmentsValue;
 511      }
 512  
 513      @Override
 514      public void removeAllAdjustments() {
 515          if (fulfillmentGroupAdjustments != null) {
 516              for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {
 517                  adjustment.setFulfillmentGroup(null);
 518              }
 519              fulfillmentGroupAdjustments.clear();
 520          }
 521      }
 522  
 523      @Override
 524      public void setFulfillmentGroupAdjustments(List&lt;FulfillmentGroupAdjustment&gt; fulfillmentGroupAdjustments) {
 525          this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;
 526      }
 527  
 528      @Override
 529      public Money getSaleFulfillmentPrice() {
 530          return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,
 531                  getOrder().getCurrency());
 532      }
 533  
 534      @Override
 535      public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {
 536          this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);
 537      }
 538  
 539      @Override
 540      public Money getSaleShippingPrice() {
 541          return getSaleFulfillmentPrice();
 542      }
 543  
 544      @Override
 545      public void setSaleShippingPrice(Money saleShippingPrice) {
 546          setSaleFulfillmentPrice(saleShippingPrice);
 547      }
 548  
 549      @Override
 550      public Money getFulfillmentPrice() {
 551          return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,
 552                  getOrder().getCurrency());
 553      }
 554  
 555      @Override
 556      public void setFulfillmentPrice(Money fulfillmentPrice) {
 557          this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);
 558      }
 559  
 560      @Override
 561      public Money getShippingPrice() {
 562          return getFulfillmentPrice();
 563      }
 564  
 565      @Override
 566      public void setShippingPrice(Money shippingPrice) {
 567          setFulfillmentPrice(shippingPrice);
 568      }
 569  
 570      @Override
 571      public List&lt;TaxDetail&gt; getTaxes() {
 572          return taxes;
 573      }
 574  
 575      @Override
 576      public void setTaxes(List&lt;TaxDetail&gt; taxes) {
 577          this.taxes = taxes;
 578      }
 579  
 580      @Override
 581      public Money getTotalTax() {
 582          return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());
 583      }
 584  
 585      @Override
 586      public void setTotalTax(Money totalTax) {
 587          this.totalTax = Money.toAmount(totalTax);
 588      }
 589  
 590      @Override
 591      public Money getTotalItemTax() {
<abbr title=" 592          return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());"> 592          return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency(ðŸ”µ</abbr>
 593      }
 594  
 595      @Override
 596      public void setTotalItemTax(Money totalItemTax) {
 597          this.totalItemTax = Money.toAmount(totalItemTax);
 598      }
 599  
 600      @Override
 601      public Money getTotalFeeTax() {
<abbr title=" 602          return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());"> 602          return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency())ðŸ”µ</abbr>
 603      }
 604  
 605      @Override
 606      public void setTotalFeeTax(Money totalFeeTax) {
 607          this.totalFeeTax = Money.toAmount(totalFeeTax);
 608      }
 609  
 610      @Override
 611      public Money getTotalFulfillmentGroupTax() {
 612          return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,
 613                  getOrder().getCurrency());
 614      }
 615  
 616      @Override
 617      public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {
 618          this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);
 619      }
 620  
 621      @Override
 622      public String getDeliveryInstruction() {
 623          return deliveryInstruction;
 624      }
 625  
 626      @Override
 627      public void setDeliveryInstruction(String deliveryInstruction) {
 628          this.deliveryInstruction = deliveryInstruction;
 629      }
 630  
 631      @Override
 632      public PersonalMessage getPersonalMessage() {
 633          return personalMessage;
 634      }
 635  
 636      @Override
 637      public void setPersonalMessage(PersonalMessage personalMessage) {
 638          this.personalMessage = personalMessage;
 639      }
 640  
 641      @Override
 642      public boolean isPrimary() {
 643          return primary;
 644      }
 645  
 646      @Override
 647      public void setPrimary(boolean primary) {
 648          this.primary = primary;
 649      }
 650  
 651      @Override
 652      public Money getMerchandiseTotal() {
 653          return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,
 654                  getOrder().getCurrency());
 655      }
 656  
 657      @Override
 658      public void setMerchandiseTotal(Money merchandiseTotal) {
 659          this.merchandiseTotal = Money.toAmount(merchandiseTotal);
 660      }
 661  
 662      @Override
 663      public Money getTotal() {
 664          return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());
 665      }
 666  
 667      @Override
 668      public void setTotal(Money orderTotal) {
 669          this.total = Money.toAmount(orderTotal);
 670      }
 671  
 672      @Override
 673      public FulfillmentGroupStatusType getStatus() {
 674          return FulfillmentGroupStatusType.getInstance(status);
 675      }
 676  
 677      @Override
 678      public void setStatus(FulfillmentGroupStatusType status) {
 679          this.status = status.getType();
 680      }
 681  
 682      @Override
 683      public List&lt;FulfillmentGroupFee&gt; getFulfillmentGroupFees() {
 684          return fulfillmentGroupFees;
 685      }
 686  
 687      @Override
 688      public void setFulfillmentGroupFees(List&lt;FulfillmentGroupFee&gt; fulfillmentGroupFees) {
 689          this.fulfillmentGroupFees = fulfillmentGroupFees;
 690      }
 691  
 692      @Override
 693      public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {
 694          if (fulfillmentGroupFees == null) {
 695              fulfillmentGroupFees = new ArrayList&lt;FulfillmentGroupFee&gt;();
 696          }
 697          fulfillmentGroupFees.add(fulfillmentGroupFee);
 698      }
 699  
 700      @Override
 701      public void removeAllFulfillmentGroupFees() {
 702          if (fulfillmentGroupFees != null) {
 703              fulfillmentGroupFees.clear();
 704          }
 705      }
 706  
 707      @Override
 708      public Boolean isShippingPriceTaxable() {
 709          return isShippingPriceTaxable;
 710      }
 711  
 712      @Override
 713      public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {
 714          this.isShippingPriceTaxable = isShippingPriceTaxable;
 715      }
 716  
 717      @Override
 718      public void setSequence(Integer sequence) {
 719          this.sequence = sequence;
 720      }
 721  
 722      @Override
 723      public Integer getSequence() {
 724          return this.sequence;
 725      }
 726  
 727      @Override
 728      @Deprecated
 729      public String getService() {
 730          return service;
 731      }
 732  
 733      @Override
 734      @Deprecated
 735      public void setService(String service) {
 736          this.service = service;
 737      }
 738  
 739      @Override
 740      public String getCurrencyCode() {
 741          if (getOrder().getCurrency() != null) {
 742              return getOrder().getCurrency().getCurrencyCode();
 743          }
 744          return null;
 745      }
 746  
 747      @Override
 748      public Boolean getShippingOverride() {
 749          return shippingOverride == null ? false : shippingOverride;
 750      }
 751  
 752      @Override
 753      public void setShippingOverride(Boolean shippingOverride) {
 754          this.shippingOverride = shippingOverride;
 755      }
 756  
 757      @Override
 758      public int hashCode() {
 759          final int prime = 31;
 760          int result = 1;
 761          result = prime * result + ((address == null) ? 0 : address.hashCode());
 762          result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());
 763          return result;
 764      }
 765  
 766      @Override
<abbr title=" 767      public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {"> 767      public &lt;G extends FulfillmentGroup&gt; CreateResponse&lt;G&gt; createOrRetrieveCopyInstance(MultiTenantCopyContext contðŸ”µ</abbr>
 768          CreateResponse&lt;G&gt; createResponse = context.createOrRetrieveCopyInstance(this);
 769          if (createResponse.isAlreadyPopulated()) {
 770              return createResponse;
 771          }
 772          FulfillmentGroup cloned = createResponse.getClone();
 773          cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());
 774          cloned.setDeliveryInstruction(deliveryInstruction);
 775          cloned.setFulfillmentOption(fulfillmentOption);
 776          cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 777          cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);
 778          cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));
 779          cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));
 780          cloneTaxDetails(context, cloned);
 781          cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));
<abbr title=" 782          cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));"> 782          cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroðŸ”µ</abbr>
 783          cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));
 784          cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));
<abbr title=" 785          cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));"> 785          cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice)ðŸ”µ</abbr>
 786          cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));
 787          cloned.setTotal(total == null ? null : new Money(total));
 788          cloned.setOrder(order);
 789          cloned.setPrimary(primary);
 790          cloned.setType(getType());
 791          for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {
 792              FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();
 793              fulfillmentGroupItem.setFulfillmentGroup(cloned);
 794              cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);
 795          }
 796          return  createResponse;
 797      }
 798  
<abbr title=" 799      protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {"> 799      protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportðŸ”µ</abbr>
 800          for (TaxDetail taxDetail : getTaxes()) {
 801              TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();
 802              cloned.getTaxes().add(clonedTaxDetail);
 803          }
 804      }
 805  
 806      @Override
 807      public boolean equals(Object obj) {
 808          if (this == obj) {
 809              return true;
 810          }
 811          if (obj == null) {
 812              return false;
 813          }
 814          if (!getClass().isAssignableFrom(obj.getClass())) {
 815              return false;
 816          }
 817          FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;
 818  
 819          if (id != null &amp;&amp; other.id != null) {
 820              return id.equals(other.id);
 821          }
 822  
 823          if (address == null) {
 824              if (other.address != null) {
 825                  return false;
 826              }
 827          } else if (!address.equals(other.address)) {
 828              return false;
 829          }
 830          if (fulfillmentGroupItems == null) {
 831              if (other.fulfillmentGroupItems != null) {
 832                  return false;
 833              }
 834          } else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {
 835              return false;
 836          }
 837          return true;
 838      }
 839  
 840      public static class Presentation {
 841          public static class Tab {
 842              public static class Name {
 843                  public static final String Items = &quot;FulfillmentGroupImpl_Items_Tab&quot;;
 844                  public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing_Tab&quot;;
 845                  public static final String Address = &quot;FulfillmentGroupImpl_Address_Tab&quot;;
 846                  public static final String Advanced = &quot;FulfillmentGroupImpl_Advanced_Tab&quot;;
 847              }
 848  
 849              public static class Order {
 850                  public static final int Items = 2000;
 851                  public static final int Pricing = 3000;
 852                  public static final int Address = 4000;
 853                  public static final int Advanced = 5000;
 854              }
 855          }
 856  
 857          public static class Group {
 858              public static class Name {
 859                  public static final String Pricing = &quot;FulfillmentGroupImpl_Pricing&quot;;
 860              }
 861  
 862              public static class Order {
 863                  public static final int General = 1000;
 864                  public static final int Pricing = 2000;
 865              }
 866          }
 867  
 868          public static class FieldOrder {
 869              public static final int REFNUMBER = 3000;
 870              public static final int STATUS = 4000;
 871              public static final int TYPE = 5000;
 872              public static final int DELIVERINSTRUCTION = 6000;
 873              public static final int PRIMARY = 7000;
 874              public static final int PHONE = 8000;
 875  
 876              public static final int RETAIL = 1000;
 877              public static final int SALE = 2000;
 878              public static final int PRICE = 3000;
 879              public static final int ITEMTAX = 4000;
 880              public static final int FEETAX = 5000;
 881              public static final int FGTAX = 6000;
 882              public static final int TOTALTAX = 7000;
 883              public static final int MERCHANDISETOTAL = 8000;
 884              public static final int TOTAL = 9000;
 885              public static final int TAXABLE = 10000;
 886          }
 887      }
 888  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            