<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>110</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    110
                    <a href="109.html">prev</a>
                    <a href="111.html">next</a>
                    <a href="110_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_0a9ff96569b9adb2db37b43aa22a3dce5d85d677_common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;0a9ff96569b9adb2db37b43aa22a3dce5d85d677:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;0a9ff96569b9adb2db37b43aa22a3dce5d85d677^1:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;0a9ff96569b9adb2db37b43aa22a3dce5d85d677^2:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;663624d07914531cc9dcf0b72abc3508805a327e:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3  * BroadleafCommerce Common Libraries                                                                    </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18 package org.broadleafcommerce.common.i18n.service;                                                       </span>
<span  style="">  19                                                                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23 import org.broadleafcommerce.common.cache.StatisticsService;                                             </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25 import org.broadleafcommerce.common.extension.ItemStatus;                                                </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26 import org.broadleafcommerce.common.extension.ResultType;                                                </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27 import org.broadleafcommerce.common.extension.StandardCacheItem;                                         </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28 import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                             </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30 import org.broadleafcommerce.common.i18n.domain.Translation;                                             </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33 import org.broadleafcommerce.common.locale.util.LocaleUtil;                                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37 import org.springframework.stereotype.Service;                                                           </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38 import org.springframework.transaction.annotation.Transactional;                                         </span>
<span  style="">  39                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44 import java.util.Map.Entry;                                                                              </span>
<span  style="">  45                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46 import javax.annotation.Resource;                                                                        </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="">  47 import javax.cache.Cache;                                                                                </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="">  48 import javax.cache.CacheManager;                                                                         </span>
<span  style="">  49                                                                                                          </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  50 @Service(&quot;blTranslationService&quot;)                                                                         </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  51 public class TranslationServiceImpl implements TranslationService, TranslationSupport {                  </span>
<span  style="">  52                                                                                                          </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  53     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  54 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  55     private static final Translation DELETED_TRANSLATION = new TranslationImpl();                        </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  56     private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  57                                                                                                          </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  58 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  59     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  60     private static final Translation DELETED_TRANSLATION = new TranslationImpl();                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  61                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  62 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  63                                                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  64 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  65     @Resource(name = &quot;blTranslationDao&quot;)                                                                 </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  66     protected TranslationDao dao;                                                                        </span>
<span  style="">  67                                                                                                          </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  68     @Resource(name=&quot;blStatisticsService&quot;)                                                                </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  69     protected StatisticsService statisticsService;                                                       </span>
<span  style="">  70                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  71     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  72     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style="">  73                                                                                                          </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  74     @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                               </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  75     protected TranslationServiceExtensionManager extensionManager;                                       </span>
<span  style="">  76                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  77     /**                                                                                                  </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  78      * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  79      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  80     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  81     protected int thresholdForFullCache;                                                                 </span>
<span  style="">  82                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  83     /**                                                                                                  </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  84      * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for              </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  85      * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                  </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  86      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  86      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  87      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  88     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  89     protected int templateThresholdForFullCache;                                                         </span>
<span  style="">  90                                                                                                          </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  91     @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                         </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  92     protected boolean returnBlankTranslationForNotDefaultLocale;                                         </span>
<span  style="">  93                                                                                                          </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  94     @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                 </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  95     protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                     </span>
<span  style="">  96                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  97     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  98     protected LocaleService localeService;                                                               </span>
<span  style="">  99                                                                                                          </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style=""> 100     @Resource                                                                                            </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style=""> 101     protected List&lt;TranslationOverrideStrategy&gt; strategies;                                              </span>
<span  style=""> 102                                                                                                          </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style=""> 103     @Resource(name = &quot;blCacheManager&quot;)                                                                   </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style=""> 104     protected CacheManager cacheManager;                                                                 </span>
<span  style=""> 105                                                                                                          </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style=""> 106     protected Cache&lt;String, Object&gt; cache;                                                               </span>
<span  style=""> 107                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 108     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 109     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 110     public Translation save(Translation translation) {                                                   </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 111         return dao.save(translation);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112     }                                                                                                    </span>
<span  style=""> 113                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 114     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 115     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 116     public Translation save(String entityType, String entityId, String fieldName, String localeCode,     </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 117             String translatedValue) {                                                                    </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 118         TranslatedEntity te = getAssignableEntityType(entityType);                                       </span>
<span  style=""> 119                                                                                                          </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 120         Translation translation = getTranslation(te, entityId, fieldName, localeCode);                   </span>
<span  style=""> 121                                                                                                          </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 122         if (translation == null) {                                                                       </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 123             translation = dao.create();                                                                  </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 124             translation.setEntityType(te);                                                               </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 125             translation.setEntityId(entityId);                                                           </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 126             translation.setFieldName(fieldName);                                                         </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 127             translation.setLocaleCode(localeCode);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128         }                                                                                                </span>
<span  style=""> 129                                                                                                          </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 130         translation.setTranslatedValue(translatedValue);                                                 </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 131         return save(translation);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132     }                                                                                                    </span>
<span  style=""> 133                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 134     @Override                                                                                            </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 135     public Translation findTranslationById(Long id) {                                                    </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 136         return dao.readTranslationById(id);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 139     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 140     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 141     public Translation update(Long translationId, String localeCode, String translatedValue) {           </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 142         Translation t = dao.readTranslationById(translationId);                                          </span>
<span  style=""> 143                                                                                                          </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 144         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 144         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it ifðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""><abbr title=" 145         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);"> 145         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeðŸ”µ</abbr></span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 146         if (t2 != null &amp;&amp; t != t2) {                                                                     </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 147             dao.delete(t2);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148         }                                                                                                </span>
<span  style=""> 149                                                                                                          </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 150         t.setLocaleCode(localeCode);                                                                     </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 151         t.setTranslatedValue(translatedValue);                                                           </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 152         return save(t);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153     }                                                                                                    </span>
<span  style=""> 154                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 155     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 156     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 157     public void deleteTranslationById(Long translationId) {                                              </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 158         Translation t = dao.readTranslationById(translationId);                                          </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 159         dao.delete(t);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160     }                                                                                                    </span>
<span  style=""> 161                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162     @Override                                                                                            </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 163     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 163     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String ðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 164         return dao.readTranslation(entity, entityId, fieldName, localeCode);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165     }                                                                                                    </span>
<span  style=""> 166                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 167     @Override                                                                                            </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""><abbr title=" 168     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {"> 168     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String propeðŸ”µ</abbr></span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 169         TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                   </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 170         return dao.readTranslations(entityType, entityId, property);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171     }                                                                                                    </span>
<span  style=""> 172                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 173     @Override                                                                                            </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style=""> 174     public Cache&lt;String, Object&gt; getCache() {                                                            </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 175         if (cache == null) {                                                                             </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 176             synchronized (this) {                                                                        </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 177                 if (cache == null) {                                                                     </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style=""> 178                     cache = cacheManager.getCache(getCacheName());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181         }                                                                                                </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 182         return cache;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183     }                                                                                                    </span>
<span  style=""> 184                                                                                                          </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style=""> 185     protected String getCacheName() {                                                                    </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style=""> 186         return TRANSLATION_CACHE_NAME;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span  style=""> 188                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 189     @Override                                                                                            </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 190     public String getTranslatedValue(Object entity, String property, Locale locale) {                    </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 191         String localeCode = locale.getLanguage();                                                        </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 192         String localeCountryCode = localeCode;                                                           </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 193         if (StringUtils.isNotBlank(locale.getCountry())) {                                               </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 194             localeCountryCode += &quot;_&quot; + locale.getCountry();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195         }                                                                                                </span>
<span  style=""> 196                                                                                                          </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 197         if (!shouldTranslateLocale(localeCountryCode)) {                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 198             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span  style=""> 200                                                                                                          </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 201         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 202         String entityId = dao.getEntityId(entityType, entity);                                           </span>
<span  style=""> 203                                                                                                          </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 204         if (TranslationBatchReadCache.hasCache()) {                                                      </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 205             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 205             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, properðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 206             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 207                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 208             } else {                                                                                     </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 209                 // There is no translation for this entity if it is not in the cache                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 210                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span  style=""> 213                                                                                                          </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 214         boolean isValidForCache = false;                                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 215         if (extensionManager != null) {                                                                  </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 216             ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();              </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 217             response.setResult(false);                                                                   </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 218             extensionManager.getProxy().isValidState(response);                                          </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 219             isValidForCache = response.getResult();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220         }                                                                                                </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""><abbr title=" 221         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {"> 221         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCacðŸ”µ</abbr></span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 222             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 222             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, locðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 223                     ResultType.CATALOG_ONLY);                                                            </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 224             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 225                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 226             } else {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 227                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229         }                                                                                                </span>
<span  style=""> 230                                                                                                          </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 231         return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232     }                                                                                                    </span>
<span  style=""> 233                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 234     /**                                                                                                  </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 235      * Whether translations should be gathered for the provided locale.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 236      *                                                                                                   </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 237      * @param localeCode                                                                                 </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 238      * @return Whether translations should be gathered for the provided locale.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 239      */                                                                                                  </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 240     protected boolean shouldTranslateLocale(String localeCode) {                                         </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""><abbr title=" 241         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);"> 241         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCðŸ”µ</abbr></span>
<span  style=""> 242                                                                                                          </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 243         if (locale == null) {                                                                            </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style=""> 244             LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 245             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246         }                                                                                                </span>
<span  style=""> 247                                                                                                          </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 248         return !locale.getDefaultFlag();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249     }                                                                                                    </span>
<span  style=""> 250                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251     @Override                                                                                            </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 252     public void removeTranslationFromCache(Translation translation) {                                    </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 253         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 254             ResultType resultType = ResultType.STANDARD;                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 255             if (extensionManager != null) {                                                              </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 256                 ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();    </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 257                 extensionManager.getProxy().getResultType(translation, response);                        </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 258                 resultType = response.getResult();                                                       </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 259                 if (ResultType.STANDARD == resultType) {                                                 </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 260                     String key = getCacheKey(resultType, translation.getEntityType());                   </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 261                     LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                           </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 262                     getCache().remove(key);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 263                 } else {                                                                                 </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 264                     List&lt;String&gt; cacheKeysList =                                                         </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""><abbr title=" 265                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 265                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType())ðŸ”µ</abbr></span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 266                     for (String key: cacheKeysList) {                                                    </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 267                         LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                       </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 268                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273     }                                                                                                    </span>
<span  style=""> 274                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 275     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""><abbr title=" 276                                                 String entityId, String localeCode, String localeCountryCode) {"> 276                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 277         boolean specificTranslationDeleted = false;                                                      </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 278         boolean generalTranslationDeleted = false;                                                       </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 279         StandardCacheItem specificTranslation = null;                                                    </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 280         StandardCacheItem generalTranslation = null;                                                     </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 281         String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                 </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 282         String generalPropertyKey = property + &quot;_&quot; + localeCode;                                         </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 283         String response = null;                                                                          </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 284         String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                  </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 285         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 286         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 287             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 287             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 288             if(override != null) {                                                                       </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 289                 specificTranslation = override.getSpecificItem();                                        </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 290                 generalTranslation = override.getGeneralItem();                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 291                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 294         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 295             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 295             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296         }                                                                                                </span>
<span  style=""> 297                                                                                                          </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 298         if (specificTranslation != null) {                                                               </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 299             if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                        </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 300                 specificTranslationDeleted = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 301             } else {                                                                                     </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 302                 if (specificTranslation.getCacheItem() instanceof Translation) {                         </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 303                     response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 304                 } else {                                                                                 </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 305                     response = (String) specificTranslation.getCacheItem();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306                 }                                                                                        </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 307                 return replaceEmptyWithNullResponse(response);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309         }                                                                                                </span>
<span  style=""> 310                                                                                                          </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 311         if (generalTranslation != null) {                                                                </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 312             if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                         </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 313                 generalTranslationDeleted = true;                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 314                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 315                 //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 315                 //If the general translation is override deleted and we&#x27;ve only got a general local code ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 316                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 317                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 319             } else {                                                                                     </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 320                 if (generalTranslation.getCacheItem() instanceof Translation) {                          </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 321                     response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 322                 } else {                                                                                 </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 323                     response = (String) generalTranslation.getCacheItem();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324                 }                                                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 325                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""><abbr title=" 326                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done"> 326                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 327                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 328                     return replaceEmptyWithNullResponse(response);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329                 }                                                                                        </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 330                 //We have a valid general override - don&#x27;t check for general template value              </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 331                 generalTranslationDeleted = true;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333         }                                                                                                </span>
<span  style=""> 334                                                                                                          </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 335         // Check for a Template Match                                                                    </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 336         if (specificTranslationDeleted) {                                                                </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 337             // only check general properties since we explicitly deleted specific properties at standard (site) level"> 337             // only check general properties since we explicitly deleted specific properties at standard ðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 338             specificPropertyKey = generalPropertyKey;                                                    </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 339         } else if (generalTranslationDeleted) {                                                          </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 340             // only check specific properties since we explicitly deleted general properties at standard (site) level"> 340             // only check specific properties since we explicitly deleted general properties at standard ðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 341             generalPropertyKey = specificPropertyKey;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342         }                                                                                                </span>
<span  style=""> 343                                                                                                          </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""><abbr title=" 344         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,"> 344         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, loðŸ”µ</abbr></span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 345                     localeCountryCode, specificPropertyKey, generalPropertyKey);                         </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 346         if (templateResponse != null) {                                                                  </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 347             response = templateResponse;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348         }                                                                                                </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 349         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350     }                                                                                                    </span>
<span  style=""> 351                                                                                                          </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 352     protected String replaceEmptyWithNullResponse(String response) {                                     </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 353         if (!StringUtils.isEmpty(response)) {                                                            </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 354             return response;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 355         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 356         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357     }                                                                                                    </span>
<span  style=""> 358                                                                                                          </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 359     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 359     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntitðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 360                         String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 360                         String entityId, String localeCode, String localeCountryCode, String specificPropðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 361         String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                  </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 362         StandardCacheItem translation = null;                                                            </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 363         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 364         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 365             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 365             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, locðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 366             if(override != null) {                                                                       </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 367                 translation = override.getSpecificItem();                                                </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 368                 if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 369                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 371                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 374         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 375             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 375             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376         }                                                                                                </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 377         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 377         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378     }                                                                                                    </span>
<span  style=""> 379                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 380     @Override                                                                                            </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 381     public StandardCacheItem lookupTranslationFromMap(String key,                                        </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 382             Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {       </span>
<span  style=""> 383                                                                                                          </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 384         StandardCacheItem cacheItem = null;                                                              </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 385         if (propertyTranslationMap.containsKey(key)) {                                                   </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 386             Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                   </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 387             cacheItem = byEntity.get(entityId);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388         }                                                                                                </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 389         return cacheItem;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 392     @Override                                                                                            </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 393     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 393     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey,ðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 394         Translation translation = null;                                                                  </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 395         if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                   </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 396             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);         </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 397             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 398         }                                                                                                </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 399         if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {             </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 400             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);          </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 401             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402         }                                                                                                </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 403         return translation;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404     }                                                                                                    </span>
<span  style=""> 405                                                                                                          </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 406     protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                     </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 407         for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 408             try {                                                                                        </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 409                 Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                          </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 410                 if (clazz.isAssignableFrom(entityClass)) {                                               </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 411                     return entry.getValue();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 413             } catch (ClassNotFoundException e) {                                                         </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""><abbr title=" 414                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);"> 414                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416         }                                                                                                </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 417         throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418     }                                                                                                    </span>
<span  style=""> 419                                                                                                          </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 420     protected TranslatedEntity getEntityType(Object entity) {                                            </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 421         return getEntityType(entity.getClass());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422     }                                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 424     @Override                                                                                            </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 425     public TranslatedEntity getAssignableEntityType(String className) {                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 426         try {                                                                                            </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 427             Class&lt;?&gt; clazz = Class.forName(className);                                                   </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 428             return getEntityType(clazz);                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 429         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 430             throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432     }                                                                                                    </span>
<span  style=""> 433                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 434     @Override                                                                                            </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 435     public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                      </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 436         String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);           </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 437         if (extensionManager != null) {                                                                  </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 438             ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                  </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 439             extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                       </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 440             if (result.getResult() != null) {                                                            </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 441                 cacheKey = result.getResult();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443         }                                                                                                </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 444         return cacheKey;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445     }                                                                                                    </span>
<span  style=""> 446                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 447     @Override                                                                                            </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 448     public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                            </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 449         List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                   </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 450         String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                            </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 451         if (extensionManager != null) {                                                                  </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 452             ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();      </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 453             extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 454             if (result.getResult() != null) {                                                            </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 455                 cacheKeyList = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 458         return cacheKeyList;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459     }                                                                                                    </span>
<span  style=""> 460                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 461     @Override                                                                                            </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 462     public int getThresholdForFullCache() {                                                              </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 463         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 464             return thresholdForFullCache;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 465         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 466             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 467             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469     }                                                                                                    </span>
<span  style=""> 470                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471     @Override                                                                                            </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 472     public void setThresholdForFullCache(int thresholdForFullCache) {                                    </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 473         this.thresholdForFullCache = thresholdForFullCache;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474     }                                                                                                    </span>
<span  style=""> 475                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 476     @Override                                                                                            </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 477     public int getTemplateThresholdForFullCache() {                                                      </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 478         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 479             return templateThresholdForFullCache;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 480         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 481             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 482             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484     }                                                                                                    </span>
<span  style=""> 485                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486     @Override                                                                                            </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 487     public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                    </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 488         this.templateThresholdForFullCache = templateThresholdForFullCache;                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491     @Override                                                                                            </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 492     public String getDefaultTranslationValue(Object entity, String property, Locale locale,              </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 493             String requestedDefaultValue) {                                                              </span>
<span  style=""> 494                                                                                                          </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 495         if (returnBlankTranslationForNotDefaultLocale                                                    </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 496                 &amp;&amp; !localeMatchesDefaultLocale(locale)                                                   </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 497                 &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 498             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499         }                                                                                                </span>
<span  style=""> 500                                                                                                          </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 501         return requestedDefaultValue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502     }                                                                                                    </span>
<span  style=""> 503                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 504     @Override                                                                                            </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 505     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 505     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType stanðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 506         return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507     }                                                                                                    </span>
<span  style=""> 508                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 509     /**                                                                                                  </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 510      * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 511      *                                                                                                   </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 512      * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the         </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 513      * property matches one of the regularExpressions in that list.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 514      *                                                                                                   </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 515      * Implementors are expected to override this method for implementation specific needs.              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 516      *                                                                                                   </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 517      * @param entity                                                                                     </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 518      * @param property                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 519      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 520      */                                                                                                  </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 521     protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 522         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 523         if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 524             for (String exceptionProperty : translationExceptionProperties) {                            </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 525                 if (property.matches(exceptionProperty)) {                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 526                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 530         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531     }                                                                                                    </span>
<span  style=""> 532                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 533     /**                                                                                                  </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 534      * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.             </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 535      * @param locale                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 536      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 537      */                                                                                                  </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 538     protected boolean localeMatchesDefaultLocale(Locale locale) {                                        </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 539         String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());         </span>
<span  style=""> 540                                                                                                          </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 541         if (defaultLanguage != null &amp;&amp; locale != null) {                                                 </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 542             return defaultLanguage.equals(locale.getLanguage());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 544         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3  * BroadleafCommerce Common Libraries                                                                    </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18 package org.broadleafcommerce.common.i18n.service;                                                       </span>
<span  style="">  19                                                                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23 import org.broadleafcommerce.common.cache.StatisticsService;                                             </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25 import org.broadleafcommerce.common.extension.ItemStatus;                                                </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26 import org.broadleafcommerce.common.extension.ResultType;                                                </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27 import org.broadleafcommerce.common.extension.StandardCacheItem;                                         </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28 import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                             </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30 import org.broadleafcommerce.common.i18n.domain.Translation;                                             </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33 import org.broadleafcommerce.common.locale.util.LocaleUtil;                                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37 import org.springframework.stereotype.Service;                                                           </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38 import org.springframework.transaction.annotation.Transactional;                                         </span>
<span  style="">  39                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44 import java.util.Map.Entry;                                                                              </span>
<span  style="">  45                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46 import javax.annotation.Resource;                                                                        </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="">  47 import javax.cache.Cache;                                                                                </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="">  48 import javax.cache.CacheManager;                                                                         </span>
<span  style="">  49                                                                                                          </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  50 @Service(&quot;blTranslationService&quot;)                                                                         </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  51 public class TranslationServiceImpl implements TranslationService, TranslationSupport {                  </span>
<span  style="">  52                                                                                                          </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  53     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="">  54     private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                        </span>
<span  style="">  55                                                                                                          </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  56     @Resource(name = &quot;blTranslationDao&quot;)                                                                 </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  57     protected TranslationDao dao;                                                                        </span>
<span  style="">  58                                                                                                          </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  59     @Resource(name=&quot;blStatisticsService&quot;)                                                                </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  60     protected StatisticsService statisticsService;                                                       </span>
<span  style="">  61                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  62     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  63     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style="">  64                                                                                                          </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="">  65     protected Cache&lt;String, Object&gt; cache;                                                               </span>
<span  style="">  66                                                                                                          </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  67     @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                               </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  68     protected TranslationServiceExtensionManager extensionManager;                                       </span>
<span  style="">  69                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  70     /**                                                                                                  </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  71      * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  72      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  73     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  74     protected int thresholdForFullCache;                                                                 </span>
<span  style="">  75                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  76     /**                                                                                                  </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  77      * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for              </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  78      * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                  </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  79      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  79      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  80      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  81     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  82     protected int templateThresholdForFullCache;                                                         </span>
<span  style="">  83                                                                                                          </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  84     @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                         </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  85     protected boolean returnBlankTranslationForNotDefaultLocale;                                         </span>
<span  style="">  86                                                                                                          </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  87     @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                 </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  88     protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                     </span>
<span  style="">  89                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  90     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  91     protected LocaleService localeService;                                                               </span>
<span  style="">  92                                                                                                          </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  93     @Resource                                                                                            </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  94     protected List&lt;TranslationOverrideStrategy&gt; strategies;                                              </span>
<span  style="">  95                                                                                                          </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="">  96     @Resource(name = &quot;blCacheManager&quot;)                                                                   </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="">  97     protected CacheManager cacheManager;                                                                 </span>
<span  style="">  98                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  99     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 100     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 101     public Translation save(Translation translation) {                                                   </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 102         return dao.save(translation);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103     }                                                                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 106     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 107     public Translation save(String entityType, String entityId, String fieldName, String localeCode,     </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 108             String translatedValue) {                                                                    </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 109         TranslatedEntity te = getAssignableEntityType(entityType);                                       </span>
<span  style=""> 110                                                                                                          </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 111         Translation translation = getTranslation(te, entityId, fieldName, localeCode);                   </span>
<span  style=""> 112                                                                                                          </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 113         if (translation == null) {                                                                       </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 114             translation = dao.create();                                                                  </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 115             translation.setEntityType(te);                                                               </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 116             translation.setEntityId(entityId);                                                           </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 117             translation.setFieldName(fieldName);                                                         </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 118             translation.setLocaleCode(localeCode);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119         }                                                                                                </span>
<span  style=""> 120                                                                                                          </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 121         translation.setTranslatedValue(translatedValue);                                                 </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 122         return save(translation);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 125     @Override                                                                                            </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 126     public Translation findTranslationById(Long id) {                                                    </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 127         return dao.readTranslationById(id);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 130     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 131     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 132     public Translation update(Long translationId, String localeCode, String translatedValue) {           </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 133         Translation t = dao.readTranslationById(translationId);                                          </span>
<span  style=""> 134                                                                                                          </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 135         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 135         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it ifðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""><abbr title=" 136         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);"> 136         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeðŸ”µ</abbr></span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 137         if (t2 != null &amp;&amp; t != t2) {                                                                     </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 138             dao.delete(t2);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139         }                                                                                                </span>
<span  style=""> 140                                                                                                          </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 141         t.setLocaleCode(localeCode);                                                                     </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 142         t.setTranslatedValue(translatedValue);                                                           </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 143         return save(t);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144     }                                                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 146     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 147     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 148     public void deleteTranslationById(Long translationId) {                                              </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 149         Translation t = dao.readTranslationById(translationId);                                          </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 150         dao.delete(t);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 153     @Override                                                                                            </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 154     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 154     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String ðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 155         return dao.readTranslation(entity, entityId, fieldName, localeCode);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 158     @Override                                                                                            </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""><abbr title=" 159     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {"> 159     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String propeðŸ”µ</abbr></span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 160         TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                   </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 161         return dao.readTranslations(entityType, entityId, property);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164     @Override                                                                                            </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style=""> 165     public Cache&lt;String, Object&gt; getCache() {                                                            </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 166         if (cache == null) {                                                                             </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 167             synchronized (this) {                                                                        </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 168                 if (cache == null) {                                                                     </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style=""> 169                     cache = cacheManager.getCache(getCacheName());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172         }                                                                                                </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 173         return cache;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174     }                                                                                                    </span>
<span  style=""> 175                                                                                                          </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style=""> 176     protected String getCacheName() {                                                                    </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style=""> 177         return TRANSLATION_CACHE_NAME;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178     }                                                                                                    </span>
<span  style=""> 179                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180     @Override                                                                                            </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 181     public String getTranslatedValue(Object entity, String property, Locale locale) {                    </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 182         String localeCode = locale.getLanguage();                                                        </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 183         String localeCountryCode = localeCode;                                                           </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 184         if (StringUtils.isNotBlank(locale.getCountry())) {                                               </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 185             localeCountryCode += &quot;_&quot; + locale.getCountry();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186         }                                                                                                </span>
<span  style=""> 187                                                                                                          </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 188         if (!shouldTranslateLocale(localeCountryCode)) {                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 189             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190         }                                                                                                </span>
<span  style=""> 191                                                                                                          </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 192         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 193         String entityId = dao.getEntityId(entityType, entity);                                           </span>
<span  style=""> 194                                                                                                          </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 195         if (TranslationBatchReadCache.hasCache()) {                                                      </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 196             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 196             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, properðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 197             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 198                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 199             } else {                                                                                     </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 200                 // There is no translation for this entity if it is not in the cache                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 201                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203         }                                                                                                </span>
<span  style=""> 204                                                                                                          </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 205         boolean isValidForCache = false;                                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 206         if (extensionManager != null) {                                                                  </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 207             ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();              </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 208             response.setResult(false);                                                                   </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 209             extensionManager.getProxy().isValidState(response);                                          </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 210             isValidForCache = response.getResult();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211         }                                                                                                </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""><abbr title=" 212         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {"> 212         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCacðŸ”µ</abbr></span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 213             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 213             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, locðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 214                     ResultType.CATALOG_ONLY);                                                            </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 215             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 216                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 217             } else {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 218                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220         }                                                                                                </span>
<span  style=""> 221                                                                                                          </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 222         return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223     }                                                                                                    </span>
<span  style=""> 224                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 225     /**                                                                                                  </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 226      * Whether translations should be gathered for the provided locale.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 227      *                                                                                                   </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 228      * @param localeCode                                                                                 </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 229      * @return Whether translations should be gathered for the provided locale.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 230      */                                                                                                  </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 231     protected boolean shouldTranslateLocale(String localeCode) {                                         </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""><abbr title=" 232         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);"> 232         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCðŸ”µ</abbr></span>
<span  style=""> 233                                                                                                          </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 234         if (locale == null) {                                                                            </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style=""> 235             LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 236             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237         }                                                                                                </span>
<span  style=""> 238                                                                                                          </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 239         return !locale.getDefaultFlag();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240     }                                                                                                    </span>
<span  style=""> 241                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 242     @Override                                                                                            </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 243     public void removeTranslationFromCache(Translation translation) {                                    </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 244         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 245             ResultType resultType = ResultType.STANDARD;                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 246             if (extensionManager != null) {                                                              </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 247                 ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();    </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 248                 extensionManager.getProxy().getResultType(translation, response);                        </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 249                 resultType = response.getResult();                                                       </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 250                 if (ResultType.STANDARD == resultType) {                                                 </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 251                     String key = getCacheKey(resultType, translation.getEntityType());                   </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 252                     LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                           </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 253                     getCache().remove(key);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 254                 } else {                                                                                 </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 255                     List&lt;String&gt; cacheKeysList =                                                         </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""><abbr title=" 256                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 256                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType())ðŸ”µ</abbr></span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 257                     for (String key: cacheKeysList) {                                                    </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 258                         LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                       </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 259                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264     }                                                                                                    </span>
<span  style=""> 265                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 266     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""><abbr title=" 267                                                 String entityId, String localeCode, String localeCountryCode) {"> 267                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 268         boolean specificTranslationDeleted = false;                                                      </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 269         boolean generalTranslationDeleted = false;                                                       </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 270         StandardCacheItem specificTranslation = null;                                                    </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 271         StandardCacheItem generalTranslation = null;                                                     </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 272         String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                 </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 273         String generalPropertyKey = property + &quot;_&quot; + localeCode;                                         </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 274         String response = null;                                                                          </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 275         String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                  </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 276         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 277         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 278             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 278             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 279             if(override != null) {                                                                       </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 280                 specificTranslation = override.getSpecificItem();                                        </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 281                 generalTranslation = override.getGeneralItem();                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 282                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 285         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 286             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 286             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287         }                                                                                                </span>
<span  style=""> 288                                                                                                          </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 289         if (specificTranslation != null) {                                                               </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 290             if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                        </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 291                 specificTranslationDeleted = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 292             } else {                                                                                     </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 293                 if (specificTranslation.getCacheItem() instanceof Translation) {                         </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 294                     response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 295                 } else {                                                                                 </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 296                     response = (String) specificTranslation.getCacheItem();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297                 }                                                                                        </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 298                 return replaceEmptyWithNullResponse(response);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300         }                                                                                                </span>
<span  style=""> 301                                                                                                          </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 302         if (generalTranslation != null) {                                                                </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 303             if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                         </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 304                 generalTranslationDeleted = true;                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 305                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 306                 //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 306                 //If the general translation is override deleted and we&#x27;ve only got a general local code ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 307                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 308                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 310             } else {                                                                                     </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 311                 if (generalTranslation.getCacheItem() instanceof Translation) {                          </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 312                     response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 313                 } else {                                                                                 </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 314                     response = (String) generalTranslation.getCacheItem();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                 }                                                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 316                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""><abbr title=" 317                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done"> 317                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 318                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 319                     return replaceEmptyWithNullResponse(response);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320                 }                                                                                        </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 321                 //We have a valid general override - don&#x27;t check for general template value              </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 322                 generalTranslationDeleted = true;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324         }                                                                                                </span>
<span  style=""> 325                                                                                                          </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 326         // Check for a Template Match                                                                    </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 327         if (specificTranslationDeleted) {                                                                </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 328             // only check general properties since we explicitly deleted specific properties at standard (site) level"> 328             // only check general properties since we explicitly deleted specific properties at standard ðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 329             specificPropertyKey = generalPropertyKey;                                                    </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 330         } else if (generalTranslationDeleted) {                                                          </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 331             // only check specific properties since we explicitly deleted general properties at standard (site) level"> 331             // only check specific properties since we explicitly deleted general properties at standard ðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 332             generalPropertyKey = specificPropertyKey;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333         }                                                                                                </span>
<span  style=""> 334                                                                                                          </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""><abbr title=" 335         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,"> 335         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, loðŸ”µ</abbr></span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 336                     localeCountryCode, specificPropertyKey, generalPropertyKey);                         </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 337         if (templateResponse != null) {                                                                  </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 338             response = templateResponse;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339         }                                                                                                </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 340         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341     }                                                                                                    </span>
<span  style=""> 342                                                                                                          </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 343     protected String replaceEmptyWithNullResponse(String response) {                                     </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 344         if (!StringUtils.isEmpty(response)) {                                                            </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 345             return response;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 347         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348     }                                                                                                    </span>
<span  style=""> 349                                                                                                          </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 350     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 350     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntitðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 351                         String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 351                         String entityId, String localeCode, String localeCountryCode, String specificPropðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 352         String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                  </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 353         StandardCacheItem translation = null;                                                            </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 354         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 355         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 356             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 356             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, locðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 357             if(override != null) {                                                                       </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 358                 translation = override.getSpecificItem();                                                </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 359                 if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 360                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 361                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 362                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 365         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 366             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 366             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367         }                                                                                                </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 368         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 368         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369     }                                                                                                    </span>
<span  style=""> 370                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 371     @Override                                                                                            </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 372     public StandardCacheItem lookupTranslationFromMap(String key,                                        </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 373             Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {       </span>
<span  style=""> 374                                                                                                          </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 375         StandardCacheItem cacheItem = null;                                                              </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 376         if (propertyTranslationMap.containsKey(key)) {                                                   </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 377             Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                   </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 378             cacheItem = byEntity.get(entityId);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 380         return cacheItem;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381     }                                                                                                    </span>
<span  style=""> 382                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 383     @Override                                                                                            </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 384     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 384     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey,ðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 385         Translation translation = null;                                                                  </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 386         if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                   </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 387             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);         </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 388             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 390         if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {             </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 391             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);          </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 392             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393         }                                                                                                </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 394         return translation;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395     }                                                                                                    </span>
<span  style=""> 396                                                                                                          </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 397     protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                     </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 398         for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 399             try {                                                                                        </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 400                 Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                          </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 401                 if (clazz.isAssignableFrom(entityClass)) {                                               </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 402                     return entry.getValue();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 404             } catch (ClassNotFoundException e) {                                                         </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""><abbr title=" 405                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);"> 405                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407         }                                                                                                </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 408         throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409     }                                                                                                    </span>
<span  style=""> 410                                                                                                          </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 411     protected TranslatedEntity getEntityType(Object entity) {                                            </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 412         return getEntityType(entity.getClass());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413     }                                                                                                    </span>
<span  style=""> 414                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 415     @Override                                                                                            </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 416 public TranslatedEntity getAssignableEntityType(String className) {                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 417         try {                                                                                            </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 418             Class&lt;?&gt; clazz = Class.forName(className);                                                   </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 419             return getEntityType(clazz);                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 420         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 421             throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423     }                                                                                                    </span>
<span  style=""> 424                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 425     @Override                                                                                            </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 426     public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                      </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 427         String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);           </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 428         if (extensionManager != null) {                                                                  </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 429             ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                  </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 430             extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                       </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 431             if (result.getResult() != null) {                                                            </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 432                 cacheKey = result.getResult();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434         }                                                                                                </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 435         return cacheKey;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436     }                                                                                                    </span>
<span  style=""> 437                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 438     @Override                                                                                            </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 439     public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                            </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 440         List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                   </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 441         String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                            </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 442         if (extensionManager != null) {                                                                  </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 443             ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();      </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 444             extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 445             if (result.getResult() != null) {                                                            </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 446                 cacheKeyList = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448         }                                                                                                </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 449         return cacheKeyList;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450     }                                                                                                    </span>
<span  style=""> 451                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 452     @Override                                                                                            </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 453     public int getThresholdForFullCache() {                                                              </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 454         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 455             return thresholdForFullCache;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 456         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 457             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 458             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 459         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460     }                                                                                                    </span>
<span  style=""> 461                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 462     @Override                                                                                            </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 463     public void setThresholdForFullCache(int thresholdForFullCache) {                                    </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 464         this.thresholdForFullCache = thresholdForFullCache;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465     }                                                                                                    </span>
<span  style=""> 466                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 467     @Override                                                                                            </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 468     public int getTemplateThresholdForFullCache() {                                                      </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 469         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 470             return templateThresholdForFullCache;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 471         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 472             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 473             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 474         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475     }                                                                                                    </span>
<span  style=""> 476                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 477     @Override                                                                                            </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 478     public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                    </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 479         this.templateThresholdForFullCache = templateThresholdForFullCache;                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480     }                                                                                                    </span>
<span  style=""> 481                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 482     @Override                                                                                            </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 483     public String getDefaultTranslationValue(Object entity, String property, Locale locale,              </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 484             String requestedDefaultValue) {                                                              </span>
<span  style=""> 485                                                                                                          </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 486         if (returnBlankTranslationForNotDefaultLocale                                                    </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 487                 &amp;&amp; !localeMatchesDefaultLocale(locale)                                                   </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 488                 &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 489             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490         }                                                                                                </span>
<span  style=""> 491                                                                                                          </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 492         return requestedDefaultValue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493     }                                                                                                    </span>
<span  style=""> 494                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 495     @Override                                                                                            </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 496     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 496     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType stanðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 497         return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498     }                                                                                                    </span>
<span  style=""> 499                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 500     /**                                                                                                  </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 501      * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 502      *                                                                                                   </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 503      * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the         </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 504      * property matches one of the regularExpressions in that list.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 505      *                                                                                                   </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 506      * Implementors are expected to override this method for implementation specific needs.              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 507      *                                                                                                   </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 508      * @param entity                                                                                     </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 509      * @param property                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 510      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 511      */                                                                                                  </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 512     protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 513         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 514         if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 515             for (String exceptionProperty : translationExceptionProperties) {                            </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 516                 if (property.matches(exceptionProperty)) {                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 517                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 519             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 521         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522     }                                                                                                    </span>
<span  style=""> 523                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 524     /**                                                                                                  </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 525      * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.             </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 526      * @param locale                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 527      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 528      */                                                                                                  </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 529     protected boolean localeMatchesDefaultLocale(Locale locale) {                                        </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 530         String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());         </span>
<span  style=""> 531                                                                                                          </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 532         if (defaultLanguage != null &amp;&amp; locale != null) {                                                 </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 533             return defaultLanguage.equals(locale.getLanguage());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 535         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536     }                                                                                                    </span>
<span  style=""> 537                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538 }                                                                                                        </span>







</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3  * BroadleafCommerce Common Libraries                                                                    </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18 package org.broadleafcommerce.common.i18n.service;                                                       </span>
<span  style="">  19                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  22 import java.util.Locale;                                                                                 </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  23 import java.util.Map.Entry;                                                                              </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  24 import java.util.Map;                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  25 import javax.annotation.Resource;                                                                        </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="">  26 import javax.cache.Cache;                                                                                </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="">  27 import javax.cache.CacheManager;                                                                         </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  28 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  29 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  30 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  31 import org.broadleafcommerce.common.cache.StatisticsService;                                             </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  32 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  33 import org.broadleafcommerce.common.extension.ItemStatus;                                                </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  34 import org.broadleafcommerce.common.extension.ResultType;                                                </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  35 import org.broadleafcommerce.common.extension.StandardCacheItem;                                         </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  36 import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                             </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  37 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  38 import org.broadleafcommerce.common.i18n.domain.Translation;                                             </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  39 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  40 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  41 import org.broadleafcommerce.common.locale.util.LocaleUtil;                                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  42 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  43 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  44 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  45 import org.springframework.stereotype.Service;                                                           </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  46 import org.springframework.transaction.annotation.Transactional;                                         </span>
<span  style="">  47                                                                                                          </span>
<span  style="">  48                                                                                                          </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  49 @Service(&quot;blTranslationService&quot;)                                                                         </span>
<span class="-8776382781726420357" onmouseenter="enter('-8776382781726420357');" onmouseout="out('-8776382781726420357');" style="">  50 public class TranslationServiceImpl implements TranslationService , TranslationSupport {                 </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  51     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span  style="">  52                                                                                                          </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  53     @Resource(name = &quot;blTranslationDao&quot;)                                                                 </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  54     protected TranslationDao dao;                                                                        </span>
<span  style="">  55                                                                                                          </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  56     @Resource(name=&quot;blStatisticsService&quot;)                                                                </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  57     protected StatisticsService statisticsService;                                                       </span>
<span  style="">  58                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  59     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  60     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style="">  61                                                                                                          </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  62     @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                               </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  63     protected TranslationServiceExtensionManager extensionManager;                                       </span>
<span  style="">  64                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  65     /**                                                                                                  </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  66      * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  67      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  68     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  69     protected int thresholdForFullCache;                                                                 </span>
<span  style="">  70                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  71     /**                                                                                                  </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  72      * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for              </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  73      * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                  </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  74      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  74      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  75      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  76     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  77     protected int templateThresholdForFullCache;                                                         </span>
<span  style="">  78                                                                                                          </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  79     @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                         </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  80     protected boolean returnBlankTranslationForNotDefaultLocale;                                         </span>
<span  style="">  81                                                                                                          </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  82     @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                 </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  83     protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                     </span>
<span  style="">  84                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  85     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  86     protected LocaleService localeService;                                                               </span>
<span  style="">  87                                                                                                          </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  88     @Resource                                                                                            </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  89     protected List&lt;TranslationOverrideStrategy&gt; strategies;                                              </span>
<span  style="">  90                                                                                                          </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="">  91     @Resource(name = &quot;blCacheManager&quot;)                                                                   </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="">  92     protected CacheManager cacheManager;                                                                 </span>
<span  style="">  93                                                                                                          </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="">  94     protected Cache&lt;String, Object&gt; cache;                                                               </span>
<span  style="">  95                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style="">  97     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style="">  98     public Translation save(Translation translation) {                                                   </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style="">  99         return dao.save(translation);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100     }                                                                                                    </span>
<span  style=""> 101                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 103     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 104     public Translation save(String entityType, String entityId, String fieldName, String localeCode,     </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 105             String translatedValue) {                                                                    </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 106         TranslatedEntity te = getAssignableEntityType(entityType);                                       </span>
<span  style=""> 107                                                                                                          </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 108         Translation translation = getTranslation(te, entityId, fieldName, localeCode);                   </span>
<span  style=""> 109                                                                                                          </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 110         if (translation == null) {                                                                       </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 111             translation = dao.create();                                                                  </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 112             translation.setEntityType(te);                                                               </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 113             translation.setEntityId(entityId);                                                           </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 114             translation.setFieldName(fieldName);                                                         </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 115             translation.setLocaleCode(localeCode);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116         }                                                                                                </span>
<span  style=""> 117                                                                                                          </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 118         translation.setTranslatedValue(translatedValue);                                                 </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 119         return save(translation);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120     }                                                                                                    </span>
<span  style=""> 121                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122     @Override                                                                                            </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 123     public Translation findTranslationById(Long id) {                                                    </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 124         return dao.readTranslationById(id);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125     }                                                                                                    </span>
<span  style=""> 126                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 128     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 129     public Translation update(Long translationId, String localeCode, String translatedValue) {           </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 130         Translation t = dao.readTranslationById(translationId);                                          </span>
<span  style=""> 131                                                                                                          </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 132         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 132         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it ifðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""><abbr title=" 133         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);"> 133         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeðŸ”µ</abbr></span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 134         if (t2 != null &amp;&amp; t != t2) {                                                                     </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 135             dao.delete(t2);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136         }                                                                                                </span>
<span  style=""> 137                                                                                                          </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 138         t.setLocaleCode(localeCode);                                                                     </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 139         t.setTranslatedValue(translatedValue);                                                           </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 140         return save(t);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span  style=""> 142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 144     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 145     public void deleteTranslationById(Long translationId) {                                              </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 146         Translation t = dao.readTranslationById(translationId);                                          </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 147         dao.delete(t);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148     }                                                                                                    </span>
<span  style=""> 149                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 150     @Override                                                                                            </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 151     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 151     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String ðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 152         return dao.readTranslation(entity, entityId, fieldName, localeCode);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153     }                                                                                                    </span>
<span  style=""> 154                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 155     @Override                                                                                            </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""><abbr title=" 156     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {"> 156     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String propeðŸ”µ</abbr></span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 157         TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                   </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 158         return dao.readTranslations(entityType, entityId, property);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159     }                                                                                                    </span>
<span  style=""> 160                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 161     @Override                                                                                            </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style=""> 162     public Cache&lt;String, Object&gt; getCache() {                                                            </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 163         if (cache == null) {                                                                             </span>
<span class="2782390661741246227" onmouseenter="enter('2782390661741246227');" onmouseout="out('2782390661741246227');" style=""> 164             synchronized(this) {                                                                         </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 165                 if (cache == null) {                                                                     </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style=""> 166                     cache = cacheManager.getCache(getCacheName());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169         }                                                                                                </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 170         return cache;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171     }                                                                                                    </span>
<span  style=""> 172                                                                                                          </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style=""> 173     protected String getCacheName() {                                                                    </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style=""> 174         return TRANSLATION_CACHE_NAME;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 177     @Override                                                                                            </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 178     public String getTranslatedValue(Object entity, String property, Locale locale) {                    </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 179         String localeCode = locale.getLanguage();                                                        </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 180         String localeCountryCode = localeCode;                                                           </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 181         if (StringUtils.isNotBlank(locale.getCountry())) {                                               </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 182             localeCountryCode += &quot;_&quot; + locale.getCountry();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183         }                                                                                                </span>
<span  style=""> 184                                                                                                          </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 185         if (!shouldTranslateLocale(localeCountryCode)) {                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 186             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187         }                                                                                                </span>
<span  style=""> 188                                                                                                          </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 189         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 190         String entityId = dao.getEntityId(entityType, entity);                                           </span>
<span  style=""> 191                                                                                                          </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 192         if (TranslationBatchReadCache.hasCache()) {                                                      </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 193             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 193             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, properðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 194             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 195                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 196             } else {                                                                                     </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 197                 // There is no translation for this entity if it is not in the cache                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 198                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span  style=""> 201                                                                                                          </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 202         boolean isValidForCache = false;                                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 203         if (extensionManager != null) {                                                                  </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 204             ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();              </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 205             response.setResult(false);                                                                   </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 206             extensionManager.getProxy().isValidState(response);                                          </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 207             isValidForCache = response.getResult();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208         }                                                                                                </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""><abbr title=" 209         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {"> 209         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCacðŸ”µ</abbr></span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 210             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 210             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, locðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 211                     ResultType.CATALOG_ONLY);                                                            </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 212             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 213                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 214             } else {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 215                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217         }                                                                                                </span>
<span  style=""> 218                                                                                                          </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 219         return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220     }                                                                                                    </span>
<span  style=""> 221                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 222     /**                                                                                                  </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 223      * Whether translations should be gathered for the provided locale.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 224      *                                                                                                   </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 225      * @param localeCode                                                                                 </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 226      * @return Whether translations should be gathered for the provided locale.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 227      */                                                                                                  </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 228     protected boolean shouldTranslateLocale(String localeCode) {                                         </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""><abbr title=" 229         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);"> 229         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCðŸ”µ</abbr></span>
<span  style=""> 230                                                                                                          </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 231         if (locale == null) {                                                                            </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style=""> 232             LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 233             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234         }                                                                                                </span>
<span  style=""> 235                                                                                                          </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 236         return !locale.getDefaultFlag();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237     }                                                                                                    </span>
<span  style=""> 238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 239     @Override                                                                                            </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 240     public void removeTranslationFromCache(Translation translation) {                                    </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 241         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 242             ResultType resultType = ResultType.STANDARD;                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 243             if (extensionManager != null) {                                                              </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 244                 ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();    </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 245                 extensionManager.getProxy().getResultType(translation, response);                        </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 246                 resultType = response.getResult();                                                       </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 247                 if (ResultType.STANDARD == resultType) {                                                 </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 248                     String key = getCacheKey(resultType, translation.getEntityType());                   </span>
<span class="1677623124633880424" onmouseenter="enter('1677623124633880424');" onmouseout="out('1677623124633880424');" style=""> 249                     LOG.debug((&quot;Removing key [&quot; + key) + &quot;] for STANDARD site&quot;);                         </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 250                     getCache().remove(key);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 251                 } else {                                                                                 </span>
<span class="-6329878695069103820" onmouseenter="enter('-6329878695069103820');" onmouseout="out('-6329878695069103820');" style=""><abbr title=" 252                     List&lt;String&gt; cacheKeysList = getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 252                     List&lt;String&gt; cacheKeysList = getCacheKeyListForTemplateSite(translation.getEntityTypeðŸ”µ</abbr></span>
<span class="4287047758984603709" onmouseenter="enter('4287047758984603709');" onmouseout="out('4287047758984603709');" style=""> 253                     for (String key : cacheKeysList) {                                                   </span>
<span class="853853908254995793" onmouseenter="enter('853853908254995793');" onmouseout="out('853853908254995793');" style=""> 254                         LOG.debug((&quot;Removing key [&quot; + key) + &quot;] for TEMPLATE site&quot;);                     </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 255                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260     }                                                                                                    </span>
<span  style=""> 261                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 262     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""><abbr title=" 263                                                 String entityId, String localeCode, String localeCountryCode) {"> 263                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 264         boolean specificTranslationDeleted = false;                                                      </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 265         boolean generalTranslationDeleted = false;                                                       </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 266         StandardCacheItem specificTranslation = null;                                                    </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 267         StandardCacheItem generalTranslation = null;                                                     </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 268         String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                 </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 269         String generalPropertyKey = property + &quot;_&quot; + localeCode;                                         </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 270         String response = null;                                                                          </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 271         String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                  </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 272         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 273         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 274             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 274             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 275             if(override != null) {                                                                       </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 276                 specificTranslation = override.getSpecificItem();                                        </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 277                 generalTranslation = override.getGeneralItem();                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 278                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 281         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 282             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 282             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283         }                                                                                                </span>
<span  style=""> 284                                                                                                          </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 285         if (specificTranslation != null) {                                                               </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 286             if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                        </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 287                 specificTranslationDeleted = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 288             } else {                                                                                     </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 289                 if (specificTranslation.getCacheItem() instanceof Translation) {                         </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 290                     response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 291                 } else {                                                                                 </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 292                     response = (String) specificTranslation.getCacheItem();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293                 }                                                                                        </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 294                 return replaceEmptyWithNullResponse(response);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296         }                                                                                                </span>
<span  style=""> 297                                                                                                          </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 298         if (generalTranslation != null) {                                                                </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 299             if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                         </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 300                 generalTranslationDeleted = true;                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 301                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 302                 //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 302                 //If the general translation is override deleted and we&#x27;ve only got a general local code ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 303                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 304                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 306             } else {                                                                                     </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 307                 if (generalTranslation.getCacheItem() instanceof Translation) {                          </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 308                     response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 309                 } else {                                                                                 </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 310                     response = (String) generalTranslation.getCacheItem();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311                 }                                                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 312                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""><abbr title=" 313                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done"> 313                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 314                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 315                     return replaceEmptyWithNullResponse(response);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316                 }                                                                                        </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 317                 //We have a valid general override - don&#x27;t check for general template value              </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 318                 generalTranslationDeleted = true;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320         }                                                                                                </span>
<span  style=""> 321                                                                                                          </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 322         // Check for a Template Match                                                                    </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 323         if (specificTranslationDeleted) {                                                                </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 324             // only check general properties since we explicitly deleted specific properties at standard (site) level"> 324             // only check general properties since we explicitly deleted specific properties at standard ðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 325             specificPropertyKey = generalPropertyKey;                                                    </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 326         } else if (generalTranslationDeleted) {                                                          </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 327             // only check specific properties since we explicitly deleted general properties at standard (site) level"> 327             // only check specific properties since we explicitly deleted general properties at standard ðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 328             generalPropertyKey = specificPropertyKey;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span  style=""> 330                                                                                                          </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""><abbr title=" 331         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,"> 331         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, loðŸ”µ</abbr></span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 332                     localeCountryCode, specificPropertyKey, generalPropertyKey);                         </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 333         if (templateResponse != null) {                                                                  </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 334             response = templateResponse;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 335         }                                                                                                </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 336         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337     }                                                                                                    </span>
<span  style=""> 338                                                                                                          </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 339     protected String replaceEmptyWithNullResponse(String response) {                                     </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 340         if (!StringUtils.isEmpty(response)) {                                                            </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 341             return response;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 343         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344     }                                                                                                    </span>
<span  style=""> 345                                                                                                          </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 346     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 346     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntitðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 347                         String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 347                         String entityId, String localeCode, String localeCountryCode, String specificPropðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 348         String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                  </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 349         StandardCacheItem translation = null;                                                            </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 350         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 351         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 352             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 352             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, locðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 353             if(override != null) {                                                                       </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 354                 translation = override.getSpecificItem();                                                </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 355                 if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 356                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 358                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 361         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 362             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 362             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363         }                                                                                                </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 364         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 364         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365     }                                                                                                    </span>
<span  style=""> 366                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 367     @Override                                                                                            </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 368     public StandardCacheItem lookupTranslationFromMap(String key,                                        </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 369             Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {       </span>
<span  style=""> 370                                                                                                          </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 371         StandardCacheItem cacheItem = null;                                                              </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 372         if (propertyTranslationMap.containsKey(key)) {                                                   </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 373             Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                   </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 374             cacheItem = byEntity.get(entityId);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375         }                                                                                                </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 376         return cacheItem;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377     }                                                                                                    </span>
<span  style=""> 378                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 379     @Override                                                                                            </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 380     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 380     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey,ðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 381         Translation translation = null;                                                                  </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 382         if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                   </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 383             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);         </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 384             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385         }                                                                                                </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 386         if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {             </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 387             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);          </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 388             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389         }                                                                                                </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 390         return translation;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391     }                                                                                                    </span>
<span  style=""> 392                                                                                                          </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 393     protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                     </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 394         for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 395             try {                                                                                        </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 396                 Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                          </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 397                 if (clazz.isAssignableFrom(entityClass)) {                                               </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 398                     return entry.getValue();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 400             } catch (ClassNotFoundException e) {                                                         </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""><abbr title=" 401                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);"> 401                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403         }                                                                                                </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 404         throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405     }                                                                                                    </span>
<span  style=""> 406                                                                                                          </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 407     protected TranslatedEntity getEntityType(Object entity) {                                            </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 408         return getEntityType(entity.getClass());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409     }                                                                                                    </span>
<span  style=""> 410                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 411     @Override                                                                                            </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 412     public TranslatedEntity getAssignableEntityType(String className) {                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 413         try {                                                                                            </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 414             Class&lt;?&gt; clazz = Class.forName(className);                                                   </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 415             return getEntityType(clazz);                                                                 </span>
<span class="-4826617111900065805" onmouseenter="enter('-4826617111900065805');" onmouseout="out('-4826617111900065805');" style=""> 416         } catch (java.lang.ClassNotFoundException e) {                                                   </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 417             throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421     @Override                                                                                            </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 422     public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                      </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 423         String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);           </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 424         if (extensionManager != null) {                                                                  </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 425             ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                  </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 426             extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                       </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 427             if (result.getResult() != null) {                                                            </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 428                 cacheKey = result.getResult();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430         }                                                                                                </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 431         return cacheKey;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432     }                                                                                                    </span>
<span  style=""> 433                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 434     @Override                                                                                            </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 435     public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                            </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 436         List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                   </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 437         String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                            </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 438         if (extensionManager != null) {                                                                  </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 439             ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();      </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 440             extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 441             if (result.getResult() != null) {                                                            </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 442                 cacheKeyList = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444         }                                                                                                </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 445         return cacheKeyList;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446     }                                                                                                    </span>
<span  style=""> 447                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 448     @Override                                                                                            </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 449     public int getThresholdForFullCache() {                                                              </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 450         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 451             return thresholdForFullCache;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 452         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 453             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 454             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456     }                                                                                                    </span>
<span  style=""> 457                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 458     @Override                                                                                            </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 459     public void setThresholdForFullCache(int thresholdForFullCache) {                                    </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 460         this.thresholdForFullCache = thresholdForFullCache;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461     }                                                                                                    </span>
<span  style=""> 462                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 463     @Override                                                                                            </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 464     public int getTemplateThresholdForFullCache() {                                                      </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 465         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 466             return templateThresholdForFullCache;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 467         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 468             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 469             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471     }                                                                                                    </span>
<span  style=""> 472                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 473     @Override                                                                                            </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 474     public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                    </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 475         this.templateThresholdForFullCache = templateThresholdForFullCache;                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476     }                                                                                                    </span>
<span  style=""> 477                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 478     @Override                                                                                            </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 479     public String getDefaultTranslationValue(Object entity, String property, Locale locale,              </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 480             String requestedDefaultValue) {                                                              </span>
<span  style=""> 481                                                                                                          </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 482         if (returnBlankTranslationForNotDefaultLocale                                                    </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 483                 &amp;&amp; !localeMatchesDefaultLocale(locale)                                                   </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 484                 &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 485             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486         }                                                                                                </span>
<span  style=""> 487                                                                                                          </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 488         return requestedDefaultValue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489     }                                                                                                    </span>
<span  style=""> 490                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491     @Override                                                                                            </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 492     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 492     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType stanðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 493         return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494     }                                                                                                    </span>
<span  style=""> 495                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 496     /**                                                                                                  </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 497      * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 498      *                                                                                                   </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 499      * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the         </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 500      * property matches one of the regularExpressions in that list.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 501      *                                                                                                   </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 502      * Implementors are expected to override this method for implementation specific needs.              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 503      *                                                                                                   </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 504      * @param entity                                                                                     </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 505      * @param property                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 506      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 507      */                                                                                                  </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 508     protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 509         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 510         if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 511             for (String exceptionProperty : translationExceptionProperties) {                            </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 512                 if (property.matches(exceptionProperty)) {                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 513                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 514                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 517         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 518     }                                                                                                    </span>
<span  style=""> 519                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 520     /**                                                                                                  </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 521      * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.             </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 522      * @param locale                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 523      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 524      */                                                                                                  </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 525     protected boolean localeMatchesDefaultLocale(Locale locale) {                                        </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 526         String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());         </span>
<span  style=""> 527                                                                                                          </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 528         if (defaultLanguage != null &amp;&amp; locale != null) {                                                 </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 529             return defaultLanguage.equals(locale.getLanguage());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 531         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533 }                                                                                                        </span>












</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3   * BroadleafCommerce Common Libraries                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18  package org.broadleafcommerce.common.i18n.service;                                                                </span>
<span  style="">  19                                                                                                                    </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23  import org.broadleafcommerce.common.cache.StatisticsService;                                                      </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25  import org.broadleafcommerce.common.extension.ItemStatus;                                                         </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26  import org.broadleafcommerce.common.extension.ResultType;                                                         </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27  import org.broadleafcommerce.common.extension.StandardCacheItem;                                                  </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28  import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                                      </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29  import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30  import org.broadleafcommerce.common.i18n.domain.Translation;                                                      </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31  import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                                  </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32  import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33  import org.broadleafcommerce.common.locale.util.LocaleUtil;                                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36  import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37  import org.springframework.stereotype.Service;                                                                    </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38  import org.springframework.transaction.annotation.Transactional;                                                  </span>
<span  style="">  39                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44  import java.util.Map.Entry;                                                                                       </span>
<span  style="">  45                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46  import javax.annotation.Resource;                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  47 -                                                                                                                  </span>
<span class="5660945883633846598" onmouseenter="enter('5660945883633846598');" onmouseout="out('5660945883633846598');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  48 -import net.sf.ehcache.Cache;                                                                                      </span>
<span class="-6192515751407234406" onmouseenter="enter('-6192515751407234406');" onmouseout="out('-6192515751407234406');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  49 -import net.sf.ehcache.CacheManager;                                                                               </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +import javax.cache.Cache;                                                                                         </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +import javax.cache.CacheManager;                                                                                  </span>
<span  style="">  52                                                                                                                    </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  53  @Service(&quot;blTranslationService&quot;)                                                                                  </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  54  public class TranslationServiceImpl implements TranslationService, TranslationSupport {                           </span>
<span  style="">  55                                                                                                                    </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  56      protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                             </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="">  57      private static final Translation DELETED_TRANSLATION = new TranslationImpl();                                 </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +    private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                                 </span>
<span  style="">  59                                                                                                                    </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  60      @Resource(name = &quot;blTranslationDao&quot;)                                                                          </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  61      protected TranslationDao dao;                                                                                 </span>
<span  style="">  62                                                                                                                    </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  63      @Resource(name=&quot;blStatisticsService&quot;)                                                                         </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  64      protected StatisticsService statisticsService;                                                                </span>
<span  style="">  65                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  66      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  67      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -                                                                                                                  </span>
<span class="5728497805721601572" onmouseenter="enter('5728497805721601572');" onmouseout="out('5728497805721601572');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -    protected Cache cache;                                                                                        </span>
<span  style="">  70                                                                                                                    </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  71      @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                                        </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  72      protected TranslationServiceExtensionManager extensionManager;                                                </span>
<span  style="">  73                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  74      /**                                                                                                           </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  75       * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  76       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  77      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  78      protected int thresholdForFullCache;                                                                          </span>
<span  style="">  79                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80      /**                                                                                                           </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  81       * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for                       </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  82       * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                           </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  83       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  83       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  85      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  86      protected int templateThresholdForFullCache;                                                                  </span>
<span  style="">  87                                                                                                                    </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  88      @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                                  </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  89      protected boolean returnBlankTranslationForNotDefaultLocale;                                                  </span>
<span  style="">  90                                                                                                                    </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  91      @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                          </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  92      protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                              </span>
<span  style="">  93                                                                                                                    </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  94      @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  95      protected LocaleService localeService;                                                                        </span>
<span  style="">  96                                                                                                                    </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  97      @Resource                                                                                                     </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  98      protected List&lt;TranslationOverrideStrategy&gt; strategies;                                                       </span>
<span  style="">  99                                                                                                                    </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 100 +    @Resource(name = &quot;blCacheManager&quot;)                                                                            </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 101 +    protected CacheManager cacheManager;                                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 102 +                                                                                                                  </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +    protected Cache&lt;String, Object&gt; cache;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 106      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 107      public Translation save(Translation translation) {                                                            </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 108          return dao.save(translation);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109      }                                                                                                             </span>
<span  style=""> 110                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 111      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 112      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 113      public Translation save(String entityType, String entityId, String fieldName, String localeCode,              </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 114              String translatedValue) {                                                                             </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 115          TranslatedEntity te = getAssignableEntityType(entityType);                                                </span>
<span  style=""> 116                                                                                                                    </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 117          Translation translation = getTranslation(te, entityId, fieldName, localeCode);                            </span>
<span  style=""> 118                                                                                                                    </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 119          if (translation == null) {                                                                                </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 120              translation = dao.create();                                                                           </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 121              translation.setEntityType(te);                                                                        </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 122              translation.setEntityId(entityId);                                                                    </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 123              translation.setFieldName(fieldName);                                                                  </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 124              translation.setLocaleCode(localeCode);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125          }                                                                                                         </span>
<span  style=""> 126                                                                                                                    </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 127          translation.setTranslatedValue(translatedValue);                                                          </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 128          return save(translation);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129      }                                                                                                             </span>
<span  style=""> 130                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131      @Override                                                                                                     </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 132      public Translation findTranslationById(Long id) {                                                             </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 133          return dao.readTranslationById(id);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134      }                                                                                                             </span>
<span  style=""> 135                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 137      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 138      public Translation update(Long translationId, String localeCode, String translatedValue) {                    </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 139          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 141          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 141          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it existðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""> 142          Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);   </span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 143          if (t2 != null &amp;&amp; t != t2) {                                                                              </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 144              dao.delete(t2);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145          }                                                                                                         </span>
<span  style=""> 146                                                                                                                    </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 147          t.setLocaleCode(localeCode);                                                                              </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 148          t.setTranslatedValue(translatedValue);                                                                    </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 149          return save(t);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150      }                                                                                                             </span>
<span  style=""> 151                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 152      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 153      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 154      public void deleteTranslationById(Long translationId) {                                                       </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 155          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 156          dao.delete(t);                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157      }                                                                                                             </span>
<span  style=""> 158                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159      @Override                                                                                                     </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 160      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 160      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCodðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 161          return dao.readTranslation(entity, entityId, fieldName, localeCode);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162      }                                                                                                             </span>
<span  style=""> 163                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164      @Override                                                                                                     </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""> 165      public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {   </span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 166          TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                            </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 167          return dao.readTranslations(entityType, entityId, property);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168      }                                                                                                             </span>
<span  style=""> 169                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170      @Override                                                                                                     </span>
<span class="4838669116707005734" onmouseenter="enter('4838669116707005734');" onmouseout="out('4838669116707005734');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 171 -    public Cache getCache() {                                                                                     </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +    public Cache&lt;String, Object&gt; getCache() {                                                                     </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 173          if (cache == null) {                                                                                      </span>
<span class="-5157563271905766439" onmouseenter="enter('-5157563271905766439');" onmouseout="out('-5157563271905766439');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 174 -            cache = CacheManager.getInstance().getCache(&quot;blTranslationElements&quot;);                                 </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +            synchronized (this) {                                                                                 </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +                if (cache == null) {                                                                              </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +                    cache = cacheManager.getCache(getCacheName());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180          }                                                                                                         </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 181          return cache;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 182 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 183 +                                                                                                                  </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +    protected String getCacheName() {                                                                             </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +        return TRANSLATION_CACHE_NAME;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186      }                                                                                                             </span>
<span  style=""> 187                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 188      @Override                                                                                                     </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 189      public String getTranslatedValue(Object entity, String property, Locale locale) {                             </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 190          String localeCode = locale.getLanguage();                                                                 </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 191          String localeCountryCode = localeCode;                                                                    </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 192          if (StringUtils.isNotBlank(locale.getCountry())) {                                                        </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 193              localeCountryCode += &quot;_&quot; + locale.getCountry();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194          }                                                                                                         </span>
<span  style=""> 195                                                                                                                    </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 196          if (!shouldTranslateLocale(localeCountryCode)) {                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 197              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198          }                                                                                                         </span>
<span  style=""> 199                                                                                                                    </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 200          TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 201          String entityId = dao.getEntityId(entityType, entity);                                                    </span>
<span  style=""> 202                                                                                                                    </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 203          if (TranslationBatchReadCache.hasCache()) {                                                               </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 204              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 204              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 205              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 206                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 207              } else {                                                                                              </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 208                  // There is no translation for this entity if it is not in the cache                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 209                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211          }                                                                                                         </span>
<span  style=""> 212                                                                                                                    </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 213          boolean isValidForCache = false;                                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 214          if (extensionManager != null) {                                                                           </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 215              ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();                       </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 216              response.setResult(false);                                                                            </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 217              extensionManager.getProxy().isValidState(response);                                                   </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 218              isValidForCache = response.getResult();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219          }                                                                                                         </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""> 220          if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {    </span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 221              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 221              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountrðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 222                      ResultType.CATALOG_ONLY);                                                                     </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 223              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 224                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 225              } else {                                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 226                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228          }                                                                                                         </span>
<span  style=""> 229                                                                                                                    </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 230          return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231      }                                                                                                             </span>
<span  style=""> 232                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 233      /**                                                                                                           </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 234       * Whether translations should be gathered for the provided locale.                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 235       *                                                                                                            </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 236       * @param localeCode                                                                                          </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 237       * @return Whether translations should be gathered for the provided locale.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 238       */                                                                                                           </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 239      protected boolean shouldTranslateLocale(String localeCode) {                                                  </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""> 240          org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);    </span>
<span  style=""> 241                                                                                                                    </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 242          if (locale == null) {                                                                                     </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style=""> 243              LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 244              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245          }                                                                                                         </span>
<span  style=""> 246                                                                                                                    </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 247          return !locale.getDefaultFlag();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248      }                                                                                                             </span>
<span  style=""> 249                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 250      @Override                                                                                                     </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 251      public void removeTranslationFromCache(Translation translation) {                                             </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 252          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 253              ResultType resultType = ResultType.STANDARD;                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 254              if (extensionManager != null) {                                                                       </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 255                  ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();             </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 256                  extensionManager.getProxy().getResultType(translation, response);                                 </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 257                  resultType = response.getResult();                                                                </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 258                  if (ResultType.STANDARD == resultType) {                                                          </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 259                      String key = getCacheKey(resultType, translation.getEntityType());                            </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 260                      LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                                    </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 261                      getCache().remove(key);                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 262                  } else {                                                                                          </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 263                      List&lt;String&gt; cacheKeysList =                                                                  </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""> 264                              getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());        </span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 265                      for (String key: cacheKeysList) {                                                             </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 266                          LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                                </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 267                          getCache().remove(key);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272      }                                                                                                             </span>
<span  style=""> 273                                                                                                                    </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 274      protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,                     </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""> 275                                                  String entityId, String localeCode, String localeCountryCode) {   </span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 276          boolean specificTranslationDeleted = false;                                                               </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 277          boolean generalTranslationDeleted = false;                                                                </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 278          StandardCacheItem specificTranslation = null;                                                             </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 279          StandardCacheItem generalTranslation = null;                                                              </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 280          String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                          </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 281          String generalPropertyKey = property + &quot;_&quot; + localeCode;                                                  </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 282          String response = null;                                                                                   </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 283          String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                           </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 284          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 285          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 286              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 286              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCoðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 287              if(override != null) {                                                                                </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 288                  specificTranslation = override.getSpecificItem();                                                 </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 289                  generalTranslation = override.getGeneralItem();                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 290                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 293          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 294              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 294              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295          }                                                                                                         </span>
<span  style=""> 296                                                                                                                    </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 297          if (specificTranslation != null) {                                                                        </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 298              if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                                 </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 299                  specificTranslationDeleted = true;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 300              } else {                                                                                              </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 301                  if (specificTranslation.getCacheItem() instanceof Translation) {                                  </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 302                      response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 303                  } else {                                                                                          </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 304                      response = (String) specificTranslation.getCacheItem();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                  }                                                                                                 </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 306                  return replaceEmptyWithNullResponse(response);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308          }                                                                                                         </span>
<span  style=""> 309                                                                                                                    </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 310          if (generalTranslation != null) {                                                                         </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 311              if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                                  </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 312                  generalTranslationDeleted = true;                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 313                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 314                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 314                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re dðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 315                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 316                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 318              } else {                                                                                              </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 319                  if (generalTranslation.getCacheItem() instanceof Translation) {                                   </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 320                      response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 321                  } else {                                                                                          </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 322                      response = (String) generalTranslation.getCacheItem();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323                  }                                                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 324                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""> 325                  //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done     </span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 326                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 327                      return replaceEmptyWithNullResponse(response);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328                  }                                                                                                 </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 329                  //We have a valid general override - don&#x27;t check for general template value                       </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 330                  generalTranslationDeleted = true;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332          }                                                                                                         </span>
<span  style=""> 333                                                                                                                    </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 334          // Check for a Template Match                                                                             </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 335          if (specificTranslationDeleted) {                                                                         </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 336              // only check general properties since we explicitly deleted specific properties at standard (site) level"> 336              // only check general properties since we explicitly deleted specific properties at standard (site) leðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 337              specificPropertyKey = generalPropertyKey;                                                             </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 338          } else if (generalTranslationDeleted) {                                                                   </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 339              // only check specific properties since we explicitly deleted general properties at standard (site) level"> 339              // only check specific properties since we explicitly deleted general properties at standard (site) leðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 340              generalPropertyKey = specificPropertyKey;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341          }                                                                                                         </span>
<span  style=""> 342                                                                                                                    </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""> 343          String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,</span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 344                      localeCountryCode, specificPropertyKey, generalPropertyKey);                                  </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 345          if (templateResponse != null) {                                                                           </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 346              response = templateResponse;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347          }                                                                                                         </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 348          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349      }                                                                                                             </span>
<span  style=""> 350                                                                                                                    </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 351      protected String replaceEmptyWithNullResponse(String response) {                                              </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 352          if (!StringUtils.isEmpty(response)) {                                                                     </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 353              return response;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 355          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356      }                                                                                                             </span>
<span  style=""> 357                                                                                                                    </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 358      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 358      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityTðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 359                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 359                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, ðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 360          String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                           </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 361          StandardCacheItem translation = null;                                                                     </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 362          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 363          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 364              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 364              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, ðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 365              if(override != null) {                                                                                </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 366                  translation = override.getSpecificItem();                                                         </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 367                  if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 368                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 370                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 373          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 374              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 374              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375          }                                                                                                         </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 376          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 376          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377      }                                                                                                             </span>
<span  style=""> 378                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 379      @Override                                                                                                     </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 380      public StandardCacheItem lookupTranslationFromMap(String key,                                                 </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 381              Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {                </span>
<span  style=""> 382                                                                                                                    </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 383          StandardCacheItem cacheItem = null;                                                                       </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 384          if (propertyTranslationMap.containsKey(key)) {                                                            </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 385              Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                            </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 386              cacheItem = byEntity.get(entityId);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387          }                                                                                                         </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 388          return cacheItem;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389      }                                                                                                             </span>
<span  style=""> 390                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 391      @Override                                                                                                     </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 392      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 392      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;StriðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 393          Translation translation = null;                                                                           </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 394          if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                            </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 395              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);                  </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 396              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397          }                                                                                                         </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 398          if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {                      </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 399              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);                   </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 400              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401          }                                                                                                         </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 402          return translation;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403      }                                                                                                             </span>
<span  style=""> 404                                                                                                                    </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 405      protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                              </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 406          for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 407              try {                                                                                                 </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 408                  Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                                   </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 409                  if (clazz.isAssignableFrom(entityClass)) {                                                        </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 410                      return entry.getValue();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                  }                                                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 412              } catch (ClassNotFoundException e) {                                                                  </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""> 413                  throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415          }                                                                                                         </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 416          throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417      }                                                                                                             </span>
<span  style=""> 418                                                                                                                    </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 419      protected TranslatedEntity getEntityType(Object entity) {                                                     </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 420          return getEntityType(entity.getClass());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421      }                                                                                                             </span>
<span  style=""> 422                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 423 +    @Override                                                                                                     </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 424      public TranslatedEntity getAssignableEntityType(String className) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 425          try {                                                                                                     </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 426              Class&lt;?&gt; clazz = Class.forName(className);                                                            </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 427              return getEntityType(clazz);                                                                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 428          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 429              throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431      }                                                                                                             </span>
<span  style=""> 432                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433      @Override                                                                                                     </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 434      public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                               </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 435          String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);                    </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 436          if (extensionManager != null) {                                                                           </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 437              ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                           </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 438              extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 439              if (result.getResult() != null) {                                                                     </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 440                  cacheKey = result.getResult();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442          }                                                                                                         </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 443          return cacheKey;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444      }                                                                                                             </span>
<span  style=""> 445                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 446      @Override                                                                                                     </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 447      public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                                     </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 448          List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                            </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 449          String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                                     </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 450          if (extensionManager != null) {                                                                           </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 451              ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();               </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 452              extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                         </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 453              if (result.getResult() != null) {                                                                     </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 454                  cacheKeyList = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456          }                                                                                                         </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 457          return cacheKeyList;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458      }                                                                                                             </span>
<span  style=""> 459                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 460      @Override                                                                                                     </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 461      public int getThresholdForFullCache() {                                                                       </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 462          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 463              return thresholdForFullCache;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 464          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 465              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 466              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468      }                                                                                                             </span>
<span  style=""> 469                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 470      @Override                                                                                                     </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 471      public void setThresholdForFullCache(int thresholdForFullCache) {                                             </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 472          this.thresholdForFullCache = thresholdForFullCache;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473      }                                                                                                             </span>
<span  style=""> 474                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 475      @Override                                                                                                     </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 476      public int getTemplateThresholdForFullCache() {                                                               </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 477          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 478              return templateThresholdForFullCache;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 479          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 480              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 481              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483      }                                                                                                             </span>
<span  style=""> 484                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 485      @Override                                                                                                     </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 486      public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                             </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 487          this.templateThresholdForFullCache = templateThresholdForFullCache;                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488      }                                                                                                             </span>
<span  style=""> 489                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 490      @Override                                                                                                     </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 491      public String getDefaultTranslationValue(Object entity, String property, Locale locale,                       </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 492              String requestedDefaultValue) {                                                                       </span>
<span  style=""> 493                                                                                                                    </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 494          if (returnBlankTranslationForNotDefaultLocale                                                             </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 495                  &amp;&amp; !localeMatchesDefaultLocale(locale)                                                            </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 496                  &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 497              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498          }                                                                                                         </span>
<span  style=""> 499                                                                                                                    </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 500          return requestedDefaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501      }                                                                                                             </span>
<span  style=""> 502                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 503      @Override                                                                                                     </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 504      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 504      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, LisðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 505          return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506      }                                                                                                             </span>
<span  style=""> 507                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 508      /**                                                                                                           </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 509       * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 510       *                                                                                                            </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 511       * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the                  </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 512       * property matches one of the regularExpressions in that list.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 513       *                                                                                                            </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 514       * Implementors are expected to override this method for implementation specific needs.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 515       *                                                                                                            </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 516       * @param entity                                                                                              </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 517       * @param property                                                                                            </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 518       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 519       */                                                                                                           </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 520      protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {                      </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 521          TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 522          if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                         </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 523              for (String exceptionProperty : translationExceptionProperties) {                                     </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 524                  if (property.matches(exceptionProperty)) {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 525                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 529          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530      }                                                                                                             </span>
<span  style=""> 531                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 532      /**                                                                                                           </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 533       * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.                      </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 534       * @param locale                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 535       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 536       */                                                                                                           </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 537      protected boolean localeMatchesDefaultLocale(Locale locale) {                                                 </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 538          String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());                  </span>
<span  style=""> 539                                                                                                                    </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 540          if (defaultLanguage != null &amp;&amp; locale != null) {                                                          </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 541              return defaultLanguage.equals(locale.getLanguage());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 543          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544      }                                                                                                             </span>
<span  style=""> 545                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3   * BroadleafCommerce Common Libraries                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18  package org.broadleafcommerce.common.i18n.service;                                                                </span>
<span  style="">  19                                                                                                                    </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23  import org.broadleafcommerce.common.cache.StatisticsService;                                                      </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25  import org.broadleafcommerce.common.extension.ItemStatus;                                                         </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26  import org.broadleafcommerce.common.extension.ResultType;                                                         </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27  import org.broadleafcommerce.common.extension.StandardCacheItem;                                                  </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28  import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                                      </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29  import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30  import org.broadleafcommerce.common.i18n.domain.Translation;                                                      </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31  import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                                  </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32  import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33  import org.broadleafcommerce.common.locale.util.LocaleUtil;                                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36  import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37  import org.springframework.stereotype.Service;                                                                    </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38  import org.springframework.transaction.annotation.Transactional;                                                  </span>
<span  style="">  39                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44  import java.util.Map.Entry;                                                                                       </span>
<span  style="">  45                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46  import javax.annotation.Resource;                                                                                 </span>
<span  style="">  47                                                                                                                    </span>
<span class="5660945883633846598" onmouseenter="enter('5660945883633846598');" onmouseout="out('5660945883633846598');" style="">  48  import net.sf.ehcache.Cache;                                                                                      </span>
<span class="-6192515751407234406" onmouseenter="enter('-6192515751407234406');" onmouseout="out('-6192515751407234406');" style="">  49  import net.sf.ehcache.CacheManager;                                                                               </span>


<span  style="">  50                                                                                                                    </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  51  @Service(&quot;blTranslationService&quot;)                                                                                  </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  52  public class TranslationServiceImpl implements TranslationService, TranslationSupport {                           </span>
<span  style="">  53                                                                                                                    </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  54      protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                             </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  55 -    private static final Translation DELETED_TRANSLATION = new TranslationImpl();                                 </span>

<span  style="">  56                                                                                                                    </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  57      @Resource(name = &quot;blTranslationDao&quot;)                                                                          </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  58      protected TranslationDao dao;                                                                                 </span>
<span  style="">  59                                                                                                                    </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  60      @Resource(name=&quot;blStatisticsService&quot;)                                                                         </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  61      protected StatisticsService statisticsService;                                                                </span>
<span  style="">  62                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  63      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  64      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style="">  65                                                                                                                    </span>
<span class="5728497805721601572" onmouseenter="enter('5728497805721601572');" onmouseout="out('5728497805721601572');" style="">  66      protected Cache cache;                                                                                        </span>
<span  style="">  67                                                                                                                    </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  68      @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                                        </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  69      protected TranslationServiceExtensionManager extensionManager;                                                </span>
<span  style="">  70                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  71      /**                                                                                                           </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  72       * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  73       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  74      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  75      protected int thresholdForFullCache;                                                                          </span>
<span  style="">  76                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  77      /**                                                                                                           </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  78       * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for                       </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  79       * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                           </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  80       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  80       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  81       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  82      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  83      protected int templateThresholdForFullCache;                                                                  </span>
<span  style="">  84                                                                                                                    </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  85      @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                                  </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  86      protected boolean returnBlankTranslationForNotDefaultLocale;                                                  </span>
<span  style="">  87                                                                                                                    </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  88      @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                          </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  89      protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                              </span>
<span  style="">  90                                                                                                                    </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  91      @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  92      protected LocaleService localeService;                                                                        </span>
<span  style="">  93                                                                                                                    </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  94      @Resource                                                                                                     </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  95      protected List&lt;TranslationOverrideStrategy&gt; strategies;                                                       </span>
<span  style="">  96                                                                                                                    </span>





<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style="">  98      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style="">  99      public Translation save(Translation translation) {                                                            </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 100          return dao.save(translation);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101      }                                                                                                             </span>
<span  style=""> 102                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 103      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 104      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 105      public Translation save(String entityType, String entityId, String fieldName, String localeCode,              </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 106              String translatedValue) {                                                                             </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 107          TranslatedEntity te = getAssignableEntityType(entityType);                                                </span>
<span  style=""> 108                                                                                                                    </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 109          Translation translation = getTranslation(te, entityId, fieldName, localeCode);                            </span>
<span  style=""> 110                                                                                                                    </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 111          if (translation == null) {                                                                                </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 112              translation = dao.create();                                                                           </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 113              translation.setEntityType(te);                                                                        </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 114              translation.setEntityId(entityId);                                                                    </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 115              translation.setFieldName(fieldName);                                                                  </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 116              translation.setLocaleCode(localeCode);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117          }                                                                                                         </span>
<span  style=""> 118                                                                                                                    </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 119          translation.setTranslatedValue(translatedValue);                                                          </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 120          return save(translation);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121      }                                                                                                             </span>
<span  style=""> 122                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 123      @Override                                                                                                     </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 124      public Translation findTranslationById(Long id) {                                                             </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 125          return dao.readTranslationById(id);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126      }                                                                                                             </span>
<span  style=""> 127                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 128      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 129      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 130      public Translation update(Long translationId, String localeCode, String translatedValue) {                    </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 131          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span  style=""> 132                                                                                                                    </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 133          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 133          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it existðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""> 134          Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);   </span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 135          if (t2 != null &amp;&amp; t != t2) {                                                                              </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 136              dao.delete(t2);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137          }                                                                                                         </span>
<span  style=""> 138                                                                                                                    </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 139          t.setLocaleCode(localeCode);                                                                              </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 140          t.setTranslatedValue(translatedValue);                                                                    </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 141          return save(t);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142      }                                                                                                             </span>
<span  style=""> 143                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 144      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 145      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 146      public void deleteTranslationById(Long translationId) {                                                       </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 147          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 148          dao.delete(t);                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149      }                                                                                                             </span>
<span  style=""> 150                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 151      @Override                                                                                                     </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 152      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 152      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCodðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 153          return dao.readTranslation(entity, entityId, fieldName, localeCode);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154      }                                                                                                             </span>
<span  style=""> 155                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 156      @Override                                                                                                     </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""> 157      public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {   </span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 158          TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                            </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 159          return dao.readTranslations(entityType, entityId, property);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160      }                                                                                                             </span>
<span  style=""> 161                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162      @Override                                                                                                     </span>
<span class="4838669116707005734" onmouseenter="enter('4838669116707005734');" onmouseout="out('4838669116707005734');" style=""> 163      public Cache getCache() {                                                                                     </span>

<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 164          if (cache == null) {                                                                                      </span>
<span class="-5157563271905766439" onmouseenter="enter('-5157563271905766439');" onmouseout="out('-5157563271905766439');" style=""> 165              cache = CacheManager.getInstance().getCache(&quot;blTranslationElements&quot;);                                 </span>





<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166          }                                                                                                         </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 167          return cache;                                                                                             </span>




<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168      }                                                                                                             </span>
<span  style=""> 169                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170      @Override                                                                                                     </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 171      public String getTranslatedValue(Object entity, String property, Locale locale) {                             </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 172          String localeCode = locale.getLanguage();                                                                 </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 173          String localeCountryCode = localeCode;                                                                    </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 174          if (StringUtils.isNotBlank(locale.getCountry())) {                                                        </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 175              localeCountryCode += &quot;_&quot; + locale.getCountry();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176          }                                                                                                         </span>
<span  style=""> 177                                                                                                                    </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 178          if (!shouldTranslateLocale(localeCountryCode)) {                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 179              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180          }                                                                                                         </span>
<span  style=""> 181                                                                                                                    </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 182          TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 183          String entityId = dao.getEntityId(entityType, entity);                                                    </span>
<span  style=""> 184                                                                                                                    </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 185          if (TranslationBatchReadCache.hasCache()) {                                                               </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 186              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 186              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 187              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 188                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 189              } else {                                                                                              </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 190                  // There is no translation for this entity if it is not in the cache                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 191                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193          }                                                                                                         </span>
<span  style=""> 194                                                                                                                    </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 195          boolean isValidForCache = false;                                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 196          if (extensionManager != null) {                                                                           </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 197              ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();                       </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 198              response.setResult(false);                                                                            </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 199              extensionManager.getProxy().isValidState(response);                                                   </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 200              isValidForCache = response.getResult();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201          }                                                                                                         </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""> 202          if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {    </span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 203              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 203              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountrðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 204                      ResultType.CATALOG_ONLY);                                                                     </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 205              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 206                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 207              } else {                                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 208                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210          }                                                                                                         </span>
<span  style=""> 211                                                                                                                    </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 212          return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213      }                                                                                                             </span>
<span  style=""> 214                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 215      /**                                                                                                           </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 216       * Whether translations should be gathered for the provided locale.                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 217       *                                                                                                            </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 218       * @param localeCode                                                                                          </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 219       * @return Whether translations should be gathered for the provided locale.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 220       */                                                                                                           </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 221      protected boolean shouldTranslateLocale(String localeCode) {                                                  </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""> 222          org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);    </span>
<span  style=""> 223                                                                                                                    </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 224          if (locale == null) {                                                                                     </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style=""> 225              LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 226              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227          }                                                                                                         </span>
<span  style=""> 228                                                                                                                    </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 229          return !locale.getDefaultFlag();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230      }                                                                                                             </span>
<span  style=""> 231                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 232      @Override                                                                                                     </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 233      public void removeTranslationFromCache(Translation translation) {                                             </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 234          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 235              ResultType resultType = ResultType.STANDARD;                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 236              if (extensionManager != null) {                                                                       </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 237                  ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();             </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 238                  extensionManager.getProxy().getResultType(translation, response);                                 </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 239                  resultType = response.getResult();                                                                </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 240                  if (ResultType.STANDARD == resultType) {                                                          </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 241                      String key = getCacheKey(resultType, translation.getEntityType());                            </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 242                      LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                                    </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 243                      getCache().remove(key);                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 244                  } else {                                                                                          </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 245                      List&lt;String&gt; cacheKeysList =                                                                  </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""> 246                              getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());        </span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 247                      for (String key: cacheKeysList) {                                                             </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 248                          LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                                </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 249                          getCache().remove(key);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 252              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254      }                                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 256      protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,                     </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""> 257                                                  String entityId, String localeCode, String localeCountryCode) {   </span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 258          boolean specificTranslationDeleted = false;                                                               </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 259          boolean generalTranslationDeleted = false;                                                                </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 260          StandardCacheItem specificTranslation = null;                                                             </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 261          StandardCacheItem generalTranslation = null;                                                              </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 262          String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                          </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 263          String generalPropertyKey = property + &quot;_&quot; + localeCode;                                                  </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 264          String response = null;                                                                                   </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 265          String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                           </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 266          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 267          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 268              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 268              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCoðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 269              if(override != null) {                                                                                </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 270                  specificTranslation = override.getSpecificItem();                                                 </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 271                  generalTranslation = override.getGeneralItem();                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 272                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 275          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 276              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 276              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277          }                                                                                                         </span>
<span  style=""> 278                                                                                                                    </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 279          if (specificTranslation != null) {                                                                        </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 280              if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                                 </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 281                  specificTranslationDeleted = true;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 282              } else {                                                                                              </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 283                  if (specificTranslation.getCacheItem() instanceof Translation) {                                  </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 284                      response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 285                  } else {                                                                                          </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 286                      response = (String) specificTranslation.getCacheItem();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287                  }                                                                                                 </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 288                  return replaceEmptyWithNullResponse(response);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290          }                                                                                                         </span>
<span  style=""> 291                                                                                                                    </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 292          if (generalTranslation != null) {                                                                         </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 293              if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                                  </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 294                  generalTranslationDeleted = true;                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 295                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 296                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 296                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re dðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 297                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 298                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 300              } else {                                                                                              </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 301                  if (generalTranslation.getCacheItem() instanceof Translation) {                                   </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 302                      response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 303                  } else {                                                                                          </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 304                      response = (String) generalTranslation.getCacheItem();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305                  }                                                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 306                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""> 307                  //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done     </span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 308                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 309                      return replaceEmptyWithNullResponse(response);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310                  }                                                                                                 </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 311                  //We have a valid general override - don&#x27;t check for general template value                       </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 312                  generalTranslationDeleted = true;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314          }                                                                                                         </span>
<span  style=""> 315                                                                                                                    </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 316          // Check for a Template Match                                                                             </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 317          if (specificTranslationDeleted) {                                                                         </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 318              // only check general properties since we explicitly deleted specific properties at standard (site) level"> 318              // only check general properties since we explicitly deleted specific properties at standard (site) leðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 319              specificPropertyKey = generalPropertyKey;                                                             </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 320          } else if (generalTranslationDeleted) {                                                                   </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 321              // only check specific properties since we explicitly deleted general properties at standard (site) level"> 321              // only check specific properties since we explicitly deleted general properties at standard (site) leðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 322              generalPropertyKey = specificPropertyKey;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323          }                                                                                                         </span>
<span  style=""> 324                                                                                                                    </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""> 325          String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,</span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 326                      localeCountryCode, specificPropertyKey, generalPropertyKey);                                  </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 327          if (templateResponse != null) {                                                                           </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 328              response = templateResponse;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329          }                                                                                                         </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 330          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331      }                                                                                                             </span>
<span  style=""> 332                                                                                                                    </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 333      protected String replaceEmptyWithNullResponse(String response) {                                              </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 334          if (!StringUtils.isEmpty(response)) {                                                                     </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 335              return response;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 337          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338      }                                                                                                             </span>
<span  style=""> 339                                                                                                                    </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 340      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 340      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityTðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 341                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 341                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, ðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 342          String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                           </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 343          StandardCacheItem translation = null;                                                                     </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 344          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 345          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 346              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 346              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, ðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 347              if(override != null) {                                                                                </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 348                  translation = override.getSpecificItem();                                                         </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 349                  if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 350                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 352                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 355          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 356              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 356              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357          }                                                                                                         </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 358          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 358          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359      }                                                                                                             </span>
<span  style=""> 360                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 361      @Override                                                                                                     </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 362      public StandardCacheItem lookupTranslationFromMap(String key,                                                 </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 363              Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {                </span>
<span  style=""> 364                                                                                                                    </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 365          StandardCacheItem cacheItem = null;                                                                       </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 366          if (propertyTranslationMap.containsKey(key)) {                                                            </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 367              Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                            </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 368              cacheItem = byEntity.get(entityId);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369          }                                                                                                         </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 370          return cacheItem;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371      }                                                                                                             </span>
<span  style=""> 372                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 373      @Override                                                                                                     </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 374      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 374      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;StriðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 375          Translation translation = null;                                                                           </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 376          if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                            </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 377              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);                  </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 378              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379          }                                                                                                         </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 380          if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {                      </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 381              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);                   </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 382              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383          }                                                                                                         </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 384          return translation;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385      }                                                                                                             </span>
<span  style=""> 386                                                                                                                    </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 387      protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                              </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 388          for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 389              try {                                                                                                 </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 390                  Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                                   </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 391                  if (clazz.isAssignableFrom(entityClass)) {                                                        </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 392                      return entry.getValue();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393                  }                                                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 394              } catch (ClassNotFoundException e) {                                                                  </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""> 395                  throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397          }                                                                                                         </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 398          throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399      }                                                                                                             </span>
<span  style=""> 400                                                                                                                    </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 401      protected TranslatedEntity getEntityType(Object entity) {                                                     </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 402          return getEntityType(entity.getClass());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403      }                                                                                                             </span>
<span  style=""> 404                                                                                                                    </span>

<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 405      public TranslatedEntity getAssignableEntityType(String className) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 406          try {                                                                                                     </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 407              Class&lt;?&gt; clazz = Class.forName(className);                                                            </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 408              return getEntityType(clazz);                                                                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 409          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 410              throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412      }                                                                                                             </span>
<span  style=""> 413                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 414      @Override                                                                                                     </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 415      public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                               </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 416          String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);                    </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 417          if (extensionManager != null) {                                                                           </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 418              ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                           </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 419              extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 420              if (result.getResult() != null) {                                                                     </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 421                  cacheKey = result.getResult();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423          }                                                                                                         </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 424          return cacheKey;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425      }                                                                                                             </span>
<span  style=""> 426                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 427      @Override                                                                                                     </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 428      public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                                     </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 429          List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                            </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 430          String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                                     </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 431          if (extensionManager != null) {                                                                           </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 432              ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();               </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 433              extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                         </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 434              if (result.getResult() != null) {                                                                     </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 435                  cacheKeyList = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437          }                                                                                                         </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 438          return cacheKeyList;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439      }                                                                                                             </span>
<span  style=""> 440                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 441      @Override                                                                                                     </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 442      public int getThresholdForFullCache() {                                                                       </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 443          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 444              return thresholdForFullCache;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 445          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 446              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 447              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449      }                                                                                                             </span>
<span  style=""> 450                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451      @Override                                                                                                     </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 452      public void setThresholdForFullCache(int thresholdForFullCache) {                                             </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 453          this.thresholdForFullCache = thresholdForFullCache;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454      }                                                                                                             </span>
<span  style=""> 455                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 456      @Override                                                                                                     </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 457      public int getTemplateThresholdForFullCache() {                                                               </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 458          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 459              return templateThresholdForFullCache;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 460          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 461              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 462              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 464      }                                                                                                             </span>
<span  style=""> 465                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 466      @Override                                                                                                     </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 467      public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                             </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 468          this.templateThresholdForFullCache = templateThresholdForFullCache;                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469      }                                                                                                             </span>
<span  style=""> 470                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 471      @Override                                                                                                     </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 472      public String getDefaultTranslationValue(Object entity, String property, Locale locale,                       </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 473              String requestedDefaultValue) {                                                                       </span>
<span  style=""> 474                                                                                                                    </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 475          if (returnBlankTranslationForNotDefaultLocale                                                             </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 476                  &amp;&amp; !localeMatchesDefaultLocale(locale)                                                            </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 477                  &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 478              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479          }                                                                                                         </span>
<span  style=""> 480                                                                                                                    </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 481          return requestedDefaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482      }                                                                                                             </span>
<span  style=""> 483                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 484      @Override                                                                                                     </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 485      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 485      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, LisðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 486          return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487      }                                                                                                             </span>
<span  style=""> 488                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 489      /**                                                                                                           </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 490       * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 491       *                                                                                                            </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 492       * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the                  </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 493       * property matches one of the regularExpressions in that list.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 494       *                                                                                                            </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 495       * Implementors are expected to override this method for implementation specific needs.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 496       *                                                                                                            </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 497       * @param entity                                                                                              </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 498       * @param property                                                                                            </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 499       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 500       */                                                                                                           </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 501      protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {                      </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 502          TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 503          if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                         </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 504              for (String exceptionProperty : translationExceptionProperties) {                                     </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 505                  if (property.matches(exceptionProperty)) {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 506                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 510          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511      }                                                                                                             </span>
<span  style=""> 512                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 513      /**                                                                                                           </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 514       * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.                      </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 515       * @param locale                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 516       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 517       */                                                                                                           </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 518      protected boolean localeMatchesDefaultLocale(Locale locale) {                                                 </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 519          String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());                  </span>
<span  style=""> 520                                                                                                                    </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 521          if (defaultLanguage != null &amp;&amp; locale != null) {                                                          </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 522              return defaultLanguage.equals(locale.getLanguage());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 524          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525      }                                                                                                             </span>
<span  style=""> 526                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            